var iP=Object.defineProperty;var aP=(t,e,r)=>e in t?iP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Nr=(t,e,r)=>aP(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var OJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $N={exports:{}},ew={},WN={exports:{}},ir={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp=Symbol.for("react.element"),AP=Symbol.for("react.portal"),lP=Symbol.for("react.fragment"),cP=Symbol.for("react.strict_mode"),uP=Symbol.for("react.profiler"),dP=Symbol.for("react.provider"),hP=Symbol.for("react.context"),fP=Symbol.for("react.forward_ref"),pP=Symbol.for("react.suspense"),mP=Symbol.for("react.memo"),gP=Symbol.for("react.lazy"),yC=Symbol.iterator;function wP(t){return t===null||typeof t!="object"?null:(t=yC&&t[yC]||t["@@iterator"],typeof t=="function"?t:null)}var XN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YN=Object.assign,JN={};function Ud(t,e,r){this.props=t,this.context=e,this.refs=JN,this.updater=r||XN}Ud.prototype.isReactComponent={};Ud.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ud.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ZN(){}ZN.prototype=Ud.prototype;function hB(t,e,r){this.props=t,this.context=e,this.refs=JN,this.updater=r||XN}var fB=hB.prototype=new ZN;fB.constructor=hB;YN(fB,Ud.prototype);fB.isPureReactComponent=!0;var BC=Array.isArray,eS=Object.prototype.hasOwnProperty,pB={current:null},tS={key:!0,ref:!0,__self:!0,__source:!0};function rS(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)eS.call(e,n)&&!tS.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var A=Array(o),c=0;c<o;c++)A[c]=arguments[c+2];s.children=A}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:gp,type:t,key:i,ref:a,props:s,_owner:pB.current}}function vP(t,e){return{$$typeof:gp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mB(t){return typeof t=="object"&&t!==null&&t.$$typeof===gp}function yP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var bC=/\/+/g;function Iv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yP(""+t.key):e.toString(36)}function gg(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case gp:case AP:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Iv(a,0):n,BC(s)?(r="",t!=null&&(r=t.replace(bC,"$&/")+"/"),gg(s,e,r,"",function(c){return c})):s!=null&&(mB(s)&&(s=vP(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(bC,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",BC(t))for(var o=0;o<t.length;o++){i=t[o];var A=n+Iv(i,o);a+=gg(i,e,r,A,s)}else if(A=wP(t),typeof A=="function")for(t=A.call(t),o=0;!(i=t.next()).done;)i=i.value,A=n+Iv(i,o++),a+=gg(i,e,r,A,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function om(t,e,r){if(t==null)return t;var n=[],s=0;return gg(t,n,"","",function(i){return e.call(r,i,s++)}),n}function BP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Js={current:null},wg={transition:null},bP={ReactCurrentDispatcher:Js,ReactCurrentBatchConfig:wg,ReactCurrentOwner:pB};function nS(){throw Error("act(...) is not supported in production builds of React.")}ir.Children={map:om,forEach:function(t,e,r){om(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return om(t,function(){e++}),e},toArray:function(t){return om(t,function(e){return e})||[]},only:function(t){if(!mB(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ir.Component=Ud;ir.Fragment=lP;ir.Profiler=uP;ir.PureComponent=hB;ir.StrictMode=cP;ir.Suspense=pP;ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bP;ir.act=nS;ir.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=YN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=pB.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(A in e)eS.call(e,A)&&!tS.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&o!==void 0?o[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){o=Array(A);for(var c=0;c<A;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:gp,type:t.type,key:s,ref:i,props:n,_owner:a}};ir.createContext=function(t){return t={$$typeof:hP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dP,_context:t},t.Consumer=t};ir.createElement=rS;ir.createFactory=function(t){var e=rS.bind(null,t);return e.type=t,e};ir.createRef=function(){return{current:null}};ir.forwardRef=function(t){return{$$typeof:fP,render:t}};ir.isValidElement=mB;ir.lazy=function(t){return{$$typeof:gP,_payload:{_status:-1,_result:t},_init:BP}};ir.memo=function(t,e){return{$$typeof:mP,type:t,compare:e===void 0?null:e}};ir.startTransition=function(t){var e=wg.transition;wg.transition={};try{t()}finally{wg.transition=e}};ir.unstable_act=nS;ir.useCallback=function(t,e){return Js.current.useCallback(t,e)};ir.useContext=function(t){return Js.current.useContext(t)};ir.useDebugValue=function(){};ir.useDeferredValue=function(t){return Js.current.useDeferredValue(t)};ir.useEffect=function(t,e){return Js.current.useEffect(t,e)};ir.useId=function(){return Js.current.useId()};ir.useImperativeHandle=function(t,e,r){return Js.current.useImperativeHandle(t,e,r)};ir.useInsertionEffect=function(t,e){return Js.current.useInsertionEffect(t,e)};ir.useLayoutEffect=function(t,e){return Js.current.useLayoutEffect(t,e)};ir.useMemo=function(t,e){return Js.current.useMemo(t,e)};ir.useReducer=function(t,e,r){return Js.current.useReducer(t,e,r)};ir.useRef=function(t){return Js.current.useRef(t)};ir.useState=function(t){return Js.current.useState(t)};ir.useSyncExternalStore=function(t,e,r){return Js.current.useSyncExternalStore(t,e,r)};ir.useTransition=function(){return Js.current.useTransition()};ir.version="18.3.1";WN.exports=ir;var k=WN.exports;const sS=oP(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP=k,CP=Symbol.for("react.element"),_P=Symbol.for("react.fragment"),EP=Object.prototype.hasOwnProperty,IP=xP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NP={key:!0,ref:!0,__self:!0,__source:!0};function iS(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)EP.call(e,n)&&!NP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:CP,type:t,key:i,ref:a,props:s,_owner:IP.current}}ew.Fragment=_P;ew.jsx=iS;ew.jsxs=iS;$N.exports=ew;var l=$N.exports,i1={},aS={exports:{}},Vi={},oS={exports:{}},AS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var ue=q.length;q.push(Y);e:for(;0<ue;){var pe=ue-1>>>1,D=q[pe];if(0<s(D,Y))q[pe]=Y,q[ue]=D,ue=pe;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var Y=q[0],ue=q.pop();if(ue!==Y){q[0]=ue;e:for(var pe=0,D=q.length,W=D>>>1;pe<W;){var ee=2*(pe+1)-1,M=q[ee],Z=ee+1,Ae=q[Z];if(0>s(M,ue))Z<D&&0>s(Ae,M)?(q[pe]=Ae,q[Z]=ue,pe=Z):(q[pe]=M,q[ee]=ue,pe=ee);else if(Z<D&&0>s(Ae,ue))q[pe]=Ae,q[Z]=ue,pe=Z;else break e}}return Y}function s(q,Y){var ue=q.sortIndex-Y.sortIndex;return ue!==0?ue:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var A=[],c=[],u=1,f=null,g=3,p=!1,y=!1,C=!1,B=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var Y=r(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=q)n(c),Y.sortIndex=Y.expirationTime,e(A,Y);else break;Y=r(c)}}function T(q){if(C=!1,N(q),!y)if(r(A)!==null)y=!0,le(V);else{var Y=r(c);Y!==null&&ie(T,Y.startTime-q)}}function V(q,Y){y=!1,C&&(C=!1,w(S),S=-1),p=!0;var ue=g;try{for(N(Y),f=r(A);f!==null&&(!(f.expirationTime>Y)||q&&!F());){var pe=f.callback;if(typeof pe=="function"){f.callback=null,g=f.priorityLevel;var D=pe(f.expirationTime<=Y);Y=t.unstable_now(),typeof D=="function"?f.callback=D:f===r(A)&&n(A),N(Y)}else n(A);f=r(A)}if(f!==null)var W=!0;else{var ee=r(c);ee!==null&&ie(T,ee.startTime-Y),W=!1}return W}finally{f=null,g=ue,p=!1}}var j=!1,L=null,S=-1,I=5,R=-1;function F(){return!(t.unstable_now()-R<I)}function E(){if(L!==null){var q=t.unstable_now();R=q;var Y=!0;try{Y=L(!0,q)}finally{Y?U():(j=!1,L=null)}}else j=!1}var U;if(typeof b=="function")U=function(){b(E)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ae=K.port2;K.port1.onmessage=E,U=function(){ae.postMessage(null)}}else U=function(){B(E,0)};function le(q){L=q,j||(j=!0,U())}function ie(q,Y){S=B(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,le(V))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var ue=g;g=Y;try{return q()}finally{g=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ue=g;g=q;try{return Y()}finally{g=ue}},t.unstable_scheduleCallback=function(q,Y,ue){var pe=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?pe+ue:pe):ue=pe,q){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ue+D,q={id:u++,callback:Y,priorityLevel:q,startTime:ue,expirationTime:D,sortIndex:-1},ue>pe?(q.sortIndex=ue,e(c,q),r(A)===null&&q===r(c)&&(C?(w(S),S=-1):C=!0,ie(T,ue-pe))):(q.sortIndex=D,e(A,q),y||p||(y=!0,le(V))),q},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(q){var Y=g;return function(){var ue=g;g=Y;try{return q.apply(this,arguments)}finally{g=ue}}}})(AS);oS.exports=AS;var SP=oS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FP=k,Di=SP;function $e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lS=new Set,Ff={};function Wc(t,e){fd(t,e),fd(t+"Capture",e)}function fd(t,e){for(Ff[t]=e,t=0;t<e.length;t++)lS.add(e[t])}var iA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a1=Object.prototype.hasOwnProperty,TP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xC={},CC={};function UP(t){return a1.call(CC,t)?!0:a1.call(xC,t)?!1:TP.test(t)?CC[t]=!0:(xC[t]=!0,!1)}function QP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LP(t,e,r,n){if(e===null||typeof e>"u"||QP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zs(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Cs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cs[t]=new Zs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cs[e]=new Zs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cs[t]=new Zs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cs[t]=new Zs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cs[t]=new Zs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cs[t]=new Zs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cs[t]=new Zs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cs[t]=new Zs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cs[t]=new Zs(t,5,!1,t.toLowerCase(),null,!1,!1)});var gB=/[\-:]([a-z])/g;function wB(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gB,wB);Cs[e]=new Zs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gB,wB);Cs[e]=new Zs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gB,wB);Cs[e]=new Zs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cs[t]=new Zs(t,1,!1,t.toLowerCase(),null,!1,!1)});Cs.xlinkHref=new Zs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cs[t]=new Zs(t,1,!1,t.toLowerCase(),null,!0,!0)});function vB(t,e,r,n){var s=Cs.hasOwnProperty(e)?Cs[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LP(e,r,s,n)&&(r=null),n||s===null?UP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var fA=FP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Am=Symbol.for("react.element"),Vu=Symbol.for("react.portal"),Ku=Symbol.for("react.fragment"),yB=Symbol.for("react.strict_mode"),o1=Symbol.for("react.profiler"),cS=Symbol.for("react.provider"),uS=Symbol.for("react.context"),BB=Symbol.for("react.forward_ref"),A1=Symbol.for("react.suspense"),l1=Symbol.for("react.suspense_list"),bB=Symbol.for("react.memo"),GA=Symbol.for("react.lazy"),dS=Symbol.for("react.offscreen"),_C=Symbol.iterator;function dh(t){return t===null||typeof t!="object"?null:(t=_C&&t[_C]||t["@@iterator"],typeof t=="function"?t:null)}var mn=Object.assign,Nv;function jh(t){if(Nv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Nv=e&&e[1]||""}return`
`+Nv+t}var Sv=!1;function Fv(t,e){if(!t||Sv)return"";Sv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var A=`
`+s[a].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=a&&0<=o);break}}}finally{Sv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?jh(t):""}function PP(t){switch(t.tag){case 5:return jh(t.type);case 16:return jh("Lazy");case 13:return jh("Suspense");case 19:return jh("SuspenseList");case 0:case 2:case 15:return t=Fv(t.type,!1),t;case 11:return t=Fv(t.type.render,!1),t;case 1:return t=Fv(t.type,!0),t;default:return""}}function c1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ku:return"Fragment";case Vu:return"Portal";case o1:return"Profiler";case yB:return"StrictMode";case A1:return"Suspense";case l1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uS:return(t.displayName||"Context")+".Consumer";case cS:return(t._context.displayName||"Context")+".Provider";case BB:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bB:return e=t.displayName||null,e!==null?e:c1(t.type)||"Memo";case GA:e=t._payload,t=t._init;try{return c1(t(e))}catch{}}return null}function kP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return c1(e);case 8:return e===yB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _l(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RP(t){var e=hS(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lm(t){t._valueTracker||(t._valueTracker=RP(t))}function fS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=hS(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Wg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function u1(t,e){var r=e.checked;return mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function EC(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=_l(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pS(t,e){e=e.checked,e!=null&&vB(t,"checked",e,!1)}function d1(t,e){pS(t,e);var r=_l(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?h1(t,e.type,r):e.hasOwnProperty("defaultValue")&&h1(t,e.type,_l(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function IC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function h1(t,e,r){(e!=="number"||Wg(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Oh=Array.isArray;function nd(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+_l(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function f1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($e(91));return mn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NC(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error($e(92));if(Oh(r)){if(1<r.length)throw Error($e(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:_l(r)}}function mS(t,e){var r=_l(e.value),n=_l(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function SC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cm,wS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cm=cm||document.createElement("div"),cm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DP=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(t){DP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rf[e]=rf[t]})});function vS(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||rf.hasOwnProperty(t)&&rf[t]?(""+e).trim():e+"px"}function yS(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=vS(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var jP=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function m1(t,e){if(e){if(jP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($e(61))}if(e.style!=null&&typeof e.style!="object")throw Error($e(62))}}function g1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w1=null;function xB(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var v1=null,sd=null,id=null;function FC(t){if(t=yp(t)){if(typeof v1!="function")throw Error($e(280));var e=t.stateNode;e&&(e=iw(e),v1(t.stateNode,t.type,e))}}function BS(t){sd?id?id.push(t):id=[t]:sd=t}function bS(){if(sd){var t=sd,e=id;if(id=sd=null,FC(t),e)for(t=0;t<e.length;t++)FC(e[t])}}function xS(t,e){return t(e)}function CS(){}var Tv=!1;function _S(t,e,r){if(Tv)return t(e,r);Tv=!0;try{return xS(t,e,r)}finally{Tv=!1,(sd!==null||id!==null)&&(CS(),bS())}}function Uf(t,e){var r=t.stateNode;if(r===null)return null;var n=iw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error($e(231,e,typeof r));return r}var y1=!1;if(iA)try{var hh={};Object.defineProperty(hh,"passive",{get:function(){y1=!0}}),window.addEventListener("test",hh,hh),window.removeEventListener("test",hh,hh)}catch{y1=!1}function OP(t,e,r,n,s,i,a,o,A){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var nf=!1,Xg=null,Yg=!1,B1=null,MP={onError:function(t){nf=!0,Xg=t}};function HP(t,e,r,n,s,i,a,o,A){nf=!1,Xg=null,OP.apply(MP,arguments)}function VP(t,e,r,n,s,i,a,o,A){if(HP.apply(this,arguments),nf){if(nf){var c=Xg;nf=!1,Xg=null}else throw Error($e(198));Yg||(Yg=!0,B1=c)}}function Xc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function ES(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TC(t){if(Xc(t)!==t)throw Error($e(188))}function KP(t){var e=t.alternate;if(!e){if(e=Xc(t),e===null)throw Error($e(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return TC(s),t;if(i===n)return TC(s),e;i=i.sibling}throw Error($e(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error($e(189))}}if(r.alternate!==n)throw Error($e(190))}if(r.tag!==3)throw Error($e(188));return r.stateNode.current===r?t:e}function IS(t){return t=KP(t),t!==null?NS(t):null}function NS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NS(t);if(e!==null)return e;t=t.sibling}return null}var SS=Di.unstable_scheduleCallback,UC=Di.unstable_cancelCallback,GP=Di.unstable_shouldYield,qP=Di.unstable_requestPaint,Ln=Di.unstable_now,zP=Di.unstable_getCurrentPriorityLevel,CB=Di.unstable_ImmediatePriority,FS=Di.unstable_UserBlockingPriority,Jg=Di.unstable_NormalPriority,$P=Di.unstable_LowPriority,TS=Di.unstable_IdlePriority,tw=null,ho=null;function WP(t){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(tw,t,void 0,(t.current.flags&128)===128)}catch{}}var Ea=Math.clz32?Math.clz32:JP,XP=Math.log,YP=Math.LN2;function JP(t){return t>>>=0,t===0?32:31-(XP(t)/YP|0)|0}var um=64,dm=4194304;function Mh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zg(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Mh(o):(i&=a,i!==0&&(n=Mh(i)))}else a=r&~s,a!==0?n=Mh(a):i!==0&&(n=Mh(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ea(e),s=1<<r,n|=t[r],e&=~s;return n}function ZP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ek(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Ea(i),o=1<<a,A=s[a];A===-1?(!(o&r)||o&n)&&(s[a]=ZP(o,e)):A<=e&&(t.expiredLanes|=o),i&=~o}}function b1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function US(){var t=um;return um<<=1,!(um&4194240)&&(um=64),t}function Uv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function wp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ea(e),t[e]=r}function tk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Ea(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function _B(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ea(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ur=0;function QS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LS,EB,PS,kS,RS,x1=!1,hm=[],cl=null,ul=null,dl=null,Qf=new Map,Lf=new Map,$A=[],rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QC(t,e){switch(t){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":Qf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lf.delete(e.pointerId)}}function fh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yp(e),e!==null&&EB(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function nk(t,e,r,n,s){switch(e){case"focusin":return cl=fh(cl,t,e,r,n,s),!0;case"dragenter":return ul=fh(ul,t,e,r,n,s),!0;case"mouseover":return dl=fh(dl,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Qf.set(i,fh(Qf.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Lf.set(i,fh(Lf.get(i)||null,t,e,r,n,s)),!0}return!1}function DS(t){var e=wc(t.target);if(e!==null){var r=Xc(e);if(r!==null){if(e=r.tag,e===13){if(e=ES(r),e!==null){t.blockedOn=e,RS(t.priority,function(){PS(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=C1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);w1=n,r.target.dispatchEvent(n),w1=null}else return e=yp(r),e!==null&&EB(e),t.blockedOn=r,!1;e.shift()}return!0}function LC(t,e,r){vg(t)&&r.delete(e)}function sk(){x1=!1,cl!==null&&vg(cl)&&(cl=null),ul!==null&&vg(ul)&&(ul=null),dl!==null&&vg(dl)&&(dl=null),Qf.forEach(LC),Lf.forEach(LC)}function ph(t,e){t.blockedOn===e&&(t.blockedOn=null,x1||(x1=!0,Di.unstable_scheduleCallback(Di.unstable_NormalPriority,sk)))}function Pf(t){function e(s){return ph(s,t)}if(0<hm.length){ph(hm[0],t);for(var r=1;r<hm.length;r++){var n=hm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(cl!==null&&ph(cl,t),ul!==null&&ph(ul,t),dl!==null&&ph(dl,t),Qf.forEach(e),Lf.forEach(e),r=0;r<$A.length;r++)n=$A[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<$A.length&&(r=$A[0],r.blockedOn===null);)DS(r),r.blockedOn===null&&$A.shift()}var ad=fA.ReactCurrentBatchConfig,e0=!0;function ik(t,e,r,n){var s=Ur,i=ad.transition;ad.transition=null;try{Ur=1,IB(t,e,r,n)}finally{Ur=s,ad.transition=i}}function ak(t,e,r,n){var s=Ur,i=ad.transition;ad.transition=null;try{Ur=4,IB(t,e,r,n)}finally{Ur=s,ad.transition=i}}function IB(t,e,r,n){if(e0){var s=C1(t,e,r,n);if(s===null)Hv(t,e,n,t0,r),QC(t,n);else if(nk(s,t,e,r,n))n.stopPropagation();else if(QC(t,n),e&4&&-1<rk.indexOf(t)){for(;s!==null;){var i=yp(s);if(i!==null&&LS(i),i=C1(t,e,r,n),i===null&&Hv(t,e,n,t0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Hv(t,e,n,null,r)}}var t0=null;function C1(t,e,r,n){if(t0=null,t=xB(n),t=wc(t),t!==null)if(e=Xc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=ES(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return t0=t,null}function jS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zP()){case CB:return 1;case FS:return 4;case Jg:case $P:return 16;case TS:return 536870912;default:return 16}default:return 16}}var nl=null,NB=null,yg=null;function OS(){if(yg)return yg;var t,e=NB,r=e.length,n,s="value"in nl?nl.value:nl.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return yg=s.slice(t,1<n?1-n:void 0)}function Bg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fm(){return!0}function PC(){return!1}function Ki(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fm:PC,this.isPropagationStopped=PC,this}return mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fm)},persist:function(){},isPersistent:fm}),e}var Qd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SB=Ki(Qd),vp=mn({},Qd,{view:0,detail:0}),ok=Ki(vp),Qv,Lv,mh,rw=mn({},vp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FB,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mh&&(mh&&t.type==="mousemove"?(Qv=t.screenX-mh.screenX,Lv=t.screenY-mh.screenY):Lv=Qv=0,mh=t),Qv)},movementY:function(t){return"movementY"in t?t.movementY:Lv}}),kC=Ki(rw),Ak=mn({},rw,{dataTransfer:0}),lk=Ki(Ak),ck=mn({},vp,{relatedTarget:0}),Pv=Ki(ck),uk=mn({},Qd,{animationName:0,elapsedTime:0,pseudoElement:0}),dk=Ki(uk),hk=mn({},Qd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fk=Ki(hk),pk=mn({},Qd,{data:0}),RC=Ki(pk),mk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wk[t])?!!e[t]:!1}function FB(){return vk}var yk=mn({},vp,{key:function(t){if(t.key){var e=mk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FB,charCode:function(t){return t.type==="keypress"?Bg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bk=Ki(yk),bk=mn({},rw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DC=Ki(bk),xk=mn({},vp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FB}),Ck=Ki(xk),_k=mn({},Qd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ek=Ki(_k),Ik=mn({},rw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nk=Ki(Ik),Sk=[9,13,27,32],TB=iA&&"CompositionEvent"in window,sf=null;iA&&"documentMode"in document&&(sf=document.documentMode);var Fk=iA&&"TextEvent"in window&&!sf,MS=iA&&(!TB||sf&&8<sf&&11>=sf),jC=" ",OC=!1;function HS(t,e){switch(t){case"keyup":return Sk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gu=!1;function Tk(t,e){switch(t){case"compositionend":return VS(e);case"keypress":return e.which!==32?null:(OC=!0,jC);case"textInput":return t=e.data,t===jC&&OC?null:t;default:return null}}function Uk(t,e){if(Gu)return t==="compositionend"||!TB&&HS(t,e)?(t=OS(),yg=NB=nl=null,Gu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MS&&e.locale!=="ko"?null:e.data;default:return null}}var Qk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qk[t.type]:e==="textarea"}function KS(t,e,r,n){BS(n),e=r0(e,"onChange"),0<e.length&&(r=new SB("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var af=null,kf=null;function Lk(t){tF(t,0)}function nw(t){var e=$u(t);if(fS(e))return t}function Pk(t,e){if(t==="change")return e}var GS=!1;if(iA){var kv;if(iA){var Rv="oninput"in document;if(!Rv){var HC=document.createElement("div");HC.setAttribute("oninput","return;"),Rv=typeof HC.oninput=="function"}kv=Rv}else kv=!1;GS=kv&&(!document.documentMode||9<document.documentMode)}function VC(){af&&(af.detachEvent("onpropertychange",qS),kf=af=null)}function qS(t){if(t.propertyName==="value"&&nw(kf)){var e=[];KS(e,kf,t,xB(t)),_S(Lk,e)}}function kk(t,e,r){t==="focusin"?(VC(),af=e,kf=r,af.attachEvent("onpropertychange",qS)):t==="focusout"&&VC()}function Rk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nw(kf)}function Dk(t,e){if(t==="click")return nw(e)}function jk(t,e){if(t==="input"||t==="change")return nw(e)}function Ok(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sa=typeof Object.is=="function"?Object.is:Ok;function Rf(t,e){if(Sa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!a1.call(e,s)||!Sa(t[s],e[s]))return!1}return!0}function KC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function GC(t,e){var r=KC(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=KC(r)}}function zS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $S(){for(var t=window,e=Wg();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Wg(t.document)}return e}function UB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Mk(t){var e=$S(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&zS(r.ownerDocument.documentElement,r)){if(n!==null&&UB(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=GC(r,i);var a=GC(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hk=iA&&"documentMode"in document&&11>=document.documentMode,qu=null,_1=null,of=null,E1=!1;function qC(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;E1||qu==null||qu!==Wg(n)||(n=qu,"selectionStart"in n&&UB(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),of&&Rf(of,n)||(of=n,n=r0(_1,"onSelect"),0<n.length&&(e=new SB("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=qu)))}function pm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var zu={animationend:pm("Animation","AnimationEnd"),animationiteration:pm("Animation","AnimationIteration"),animationstart:pm("Animation","AnimationStart"),transitionend:pm("Transition","TransitionEnd")},Dv={},WS={};iA&&(WS=document.createElement("div").style,"AnimationEvent"in window||(delete zu.animationend.animation,delete zu.animationiteration.animation,delete zu.animationstart.animation),"TransitionEvent"in window||delete zu.transitionend.transition);function sw(t){if(Dv[t])return Dv[t];if(!zu[t])return t;var e=zu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in WS)return Dv[t]=e[r];return t}var XS=sw("animationend"),YS=sw("animationiteration"),JS=sw("animationstart"),ZS=sw("transitionend"),eF=new Map,zC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pl(t,e){eF.set(t,e),Wc(e,[t])}for(var jv=0;jv<zC.length;jv++){var Ov=zC[jv],Vk=Ov.toLowerCase(),Kk=Ov[0].toUpperCase()+Ov.slice(1);Pl(Vk,"on"+Kk)}Pl(XS,"onAnimationEnd");Pl(YS,"onAnimationIteration");Pl(JS,"onAnimationStart");Pl("dblclick","onDoubleClick");Pl("focusin","onFocus");Pl("focusout","onBlur");Pl(ZS,"onTransitionEnd");fd("onMouseEnter",["mouseout","mouseover"]);fd("onMouseLeave",["mouseout","mouseover"]);fd("onPointerEnter",["pointerout","pointerover"]);fd("onPointerLeave",["pointerout","pointerover"]);Wc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hh));function $C(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,VP(n,e,void 0,t),t.currentTarget=null}function tF(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],A=o.instance,c=o.currentTarget;if(o=o.listener,A!==i&&s.isPropagationStopped())break e;$C(s,o,c),i=A}else for(a=0;a<n.length;a++){if(o=n[a],A=o.instance,c=o.currentTarget,o=o.listener,A!==i&&s.isPropagationStopped())break e;$C(s,o,c),i=A}}}if(Yg)throw t=B1,Yg=!1,B1=null,t}function Xr(t,e){var r=e[T1];r===void 0&&(r=e[T1]=new Set);var n=t+"__bubble";r.has(n)||(rF(e,t,2,!1),r.add(n))}function Mv(t,e,r){var n=0;e&&(n|=4),rF(r,t,n,e)}var mm="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[mm]){t[mm]=!0,lS.forEach(function(r){r!=="selectionchange"&&(Gk.has(r)||Mv(r,!1,t),Mv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mm]||(e[mm]=!0,Mv("selectionchange",!1,e))}}function rF(t,e,r,n){switch(jS(e)){case 1:var s=ik;break;case 4:s=ak;break;default:s=IB}r=s.bind(null,e,r,t),s=void 0,!y1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Hv(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var A=a.tag;if((A===3||A===4)&&(A=a.stateNode.containerInfo,A===s||A.nodeType===8&&A.parentNode===s))return;a=a.return}for(;o!==null;){if(a=wc(o),a===null)return;if(A=a.tag,A===5||A===6){n=i=a;continue e}o=o.parentNode}}n=n.return}_S(function(){var c=i,u=xB(r),f=[];e:{var g=eF.get(t);if(g!==void 0){var p=SB,y=t;switch(t){case"keypress":if(Bg(r)===0)break e;case"keydown":case"keyup":p=Bk;break;case"focusin":y="focus",p=Pv;break;case"focusout":y="blur",p=Pv;break;case"beforeblur":case"afterblur":p=Pv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=kC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=lk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ck;break;case XS:case YS:case JS:p=dk;break;case ZS:p=Ek;break;case"scroll":p=ok;break;case"wheel":p=Nk;break;case"copy":case"cut":case"paste":p=fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=DC}var C=(e&4)!==0,B=!C&&t==="scroll",w=C?g!==null?g+"Capture":null:g;C=[];for(var b=c,N;b!==null;){N=b;var T=N.stateNode;if(N.tag===5&&T!==null&&(N=T,w!==null&&(T=Uf(b,w),T!=null&&C.push(jf(b,T,N)))),B)break;b=b.return}0<C.length&&(g=new p(g,y,null,r,u),f.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",g&&r!==w1&&(y=r.relatedTarget||r.fromElement)&&(wc(y)||y[aA]))break e;if((p||g)&&(g=u.window===u?u:(g=u.ownerDocument)?g.defaultView||g.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=c,y=y?wc(y):null,y!==null&&(B=Xc(y),y!==B||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(C=kC,T="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(C=DC,T="onPointerLeave",w="onPointerEnter",b="pointer"),B=p==null?g:$u(p),N=y==null?g:$u(y),g=new C(T,b+"leave",p,r,u),g.target=B,g.relatedTarget=N,T=null,wc(u)===c&&(C=new C(w,b+"enter",y,r,u),C.target=N,C.relatedTarget=B,T=C),B=T,p&&y)t:{for(C=p,w=y,b=0,N=C;N;N=pu(N))b++;for(N=0,T=w;T;T=pu(T))N++;for(;0<b-N;)C=pu(C),b--;for(;0<N-b;)w=pu(w),N--;for(;b--;){if(C===w||w!==null&&C===w.alternate)break t;C=pu(C),w=pu(w)}C=null}else C=null;p!==null&&WC(f,g,p,C,!1),y!==null&&B!==null&&WC(f,B,y,C,!0)}}e:{if(g=c?$u(c):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var V=Pk;else if(MC(g))if(GS)V=jk;else{V=Rk;var j=kk}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=Dk);if(V&&(V=V(t,c))){KS(f,V,r,u);break e}j&&j(t,g,c),t==="focusout"&&(j=g._wrapperState)&&j.controlled&&g.type==="number"&&h1(g,"number",g.value)}switch(j=c?$u(c):window,t){case"focusin":(MC(j)||j.contentEditable==="true")&&(qu=j,_1=c,of=null);break;case"focusout":of=_1=qu=null;break;case"mousedown":E1=!0;break;case"contextmenu":case"mouseup":case"dragend":E1=!1,qC(f,r,u);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":qC(f,r,u)}var L;if(TB)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Gu?HS(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(MS&&r.locale!=="ko"&&(Gu||S!=="onCompositionStart"?S==="onCompositionEnd"&&Gu&&(L=OS()):(nl=u,NB="value"in nl?nl.value:nl.textContent,Gu=!0)),j=r0(c,S),0<j.length&&(S=new RC(S,t,null,r,u),f.push({event:S,listeners:j}),L?S.data=L:(L=VS(r),L!==null&&(S.data=L)))),(L=Fk?Tk(t,r):Uk(t,r))&&(c=r0(c,"onBeforeInput"),0<c.length&&(u=new RC("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:c}),u.data=L))}tF(f,e)})}function jf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function r0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Uf(t,r),i!=null&&n.unshift(jf(t,i,s)),i=Uf(t,e),i!=null&&n.push(jf(t,i,s))),t=t.return}return n}function pu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function WC(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,A=o.alternate,c=o.stateNode;if(A!==null&&A===n)break;o.tag===5&&c!==null&&(o=c,s?(A=Uf(r,i),A!=null&&a.unshift(jf(r,A,o))):s||(A=Uf(r,i),A!=null&&a.push(jf(r,A,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var qk=/\r\n?/g,zk=/\u0000|\uFFFD/g;function XC(t){return(typeof t=="string"?t:""+t).replace(qk,`
`).replace(zk,"")}function gm(t,e,r){if(e=XC(e),XC(t)!==e&&r)throw Error($e(425))}function n0(){}var I1=null,N1=null;function S1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var F1=typeof setTimeout=="function"?setTimeout:void 0,$k=typeof clearTimeout=="function"?clearTimeout:void 0,YC=typeof Promise=="function"?Promise:void 0,Wk=typeof queueMicrotask=="function"?queueMicrotask:typeof YC<"u"?function(t){return YC.resolve(null).then(t).catch(Xk)}:F1;function Xk(t){setTimeout(function(){throw t})}function Vv(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Pf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Pf(e)}function hl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function JC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),oo="__reactFiber$"+Ld,Of="__reactProps$"+Ld,aA="__reactContainer$"+Ld,T1="__reactEvents$"+Ld,Yk="__reactListeners$"+Ld,Jk="__reactHandles$"+Ld;function wc(t){var e=t[oo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[aA]||r[oo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=JC(t);t!==null;){if(r=t[oo])return r;t=JC(t)}return e}t=r,r=t.parentNode}return null}function yp(t){return t=t[oo]||t[aA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $u(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($e(33))}function iw(t){return t[Of]||null}var U1=[],Wu=-1;function kl(t){return{current:t}}function Zr(t){0>Wu||(t.current=U1[Wu],U1[Wu]=null,Wu--)}function qr(t,e){Wu++,U1[Wu]=t.current,t.current=e}var El={},js=kl(El),pi=kl(!1),Qc=El;function pd(t,e){var r=t.type.contextTypes;if(!r)return El;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mi(t){return t=t.childContextTypes,t!=null}function s0(){Zr(pi),Zr(js)}function ZC(t,e,r){if(js.current!==El)throw Error($e(168));qr(js,e),qr(pi,r)}function nF(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error($e(108,kP(t)||"Unknown",s));return mn({},r,n)}function i0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||El,Qc=js.current,qr(js,t),qr(pi,pi.current),!0}function e_(t,e,r){var n=t.stateNode;if(!n)throw Error($e(169));r?(t=nF(t,e,Qc),n.__reactInternalMemoizedMergedChildContext=t,Zr(pi),Zr(js),qr(js,t)):Zr(pi),qr(pi,r)}var Ko=null,aw=!1,Kv=!1;function sF(t){Ko===null?Ko=[t]:Ko.push(t)}function Zk(t){aw=!0,sF(t)}function Rl(){if(!Kv&&Ko!==null){Kv=!0;var t=0,e=Ur;try{var r=Ko;for(Ur=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ko=null,aw=!1}catch(s){throw Ko!==null&&(Ko=Ko.slice(t+1)),SS(CB,Rl),s}finally{Ur=e,Kv=!1}}return null}var Xu=[],Yu=0,a0=null,o0=0,Zi=[],ea=0,Lc=null,qo=1,zo="";function oc(t,e){Xu[Yu++]=o0,Xu[Yu++]=a0,a0=t,o0=e}function iF(t,e,r){Zi[ea++]=qo,Zi[ea++]=zo,Zi[ea++]=Lc,Lc=t;var n=qo;t=zo;var s=32-Ea(n)-1;n&=~(1<<s),r+=1;var i=32-Ea(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,qo=1<<32-Ea(e)+s|r<<s|n,zo=i+t}else qo=1<<i|r<<s|n,zo=t}function QB(t){t.return!==null&&(oc(t,1),iF(t,1,0))}function LB(t){for(;t===a0;)a0=Xu[--Yu],Xu[Yu]=null,o0=Xu[--Yu],Xu[Yu]=null;for(;t===Lc;)Lc=Zi[--ea],Zi[ea]=null,zo=Zi[--ea],Zi[ea]=null,qo=Zi[--ea],Zi[ea]=null}var Ri=null,Li=null,an=!1,_a=null;function aF(t,e){var r=ra(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function t_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ri=t,Li=hl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ri=t,Li=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Lc!==null?{id:qo,overflow:zo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ra(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ri=t,Li=null,!0):!1;default:return!1}}function Q1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function L1(t){if(an){var e=Li;if(e){var r=e;if(!t_(t,e)){if(Q1(t))throw Error($e(418));e=hl(r.nextSibling);var n=Ri;e&&t_(t,e)?aF(n,r):(t.flags=t.flags&-4097|2,an=!1,Ri=t)}}else{if(Q1(t))throw Error($e(418));t.flags=t.flags&-4097|2,an=!1,Ri=t}}}function r_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ri=t}function wm(t){if(t!==Ri)return!1;if(!an)return r_(t),an=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!S1(t.type,t.memoizedProps)),e&&(e=Li)){if(Q1(t))throw oF(),Error($e(418));for(;e;)aF(t,e),e=hl(e.nextSibling)}if(r_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Li=hl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Li=null}}else Li=Ri?hl(t.stateNode.nextSibling):null;return!0}function oF(){for(var t=Li;t;)t=hl(t.nextSibling)}function md(){Li=Ri=null,an=!1}function PB(t){_a===null?_a=[t]:_a.push(t)}var eR=fA.ReactCurrentBatchConfig;function gh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($e(309));var n=r.stateNode}if(!n)throw Error($e(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($e(284));if(!r._owner)throw Error($e(290,t))}return t}function vm(t,e){throw t=Object.prototype.toString.call(e),Error($e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n_(t){var e=t._init;return e(t._payload)}function AF(t){function e(w,b){if(t){var N=w.deletions;N===null?(w.deletions=[b],w.flags|=16):N.push(b)}}function r(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function n(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=gl(w,b),w.index=0,w.sibling=null,w}function i(w,b,N){return w.index=N,t?(N=w.alternate,N!==null?(N=N.index,N<b?(w.flags|=2,b):N):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,b,N,T){return b===null||b.tag!==6?(b=Yv(N,w.mode,T),b.return=w,b):(b=s(b,N),b.return=w,b)}function A(w,b,N,T){var V=N.type;return V===Ku?u(w,b,N.props.children,T,N.key):b!==null&&(b.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===GA&&n_(V)===b.type)?(T=s(b,N.props),T.ref=gh(w,b,N),T.return=w,T):(T=Ng(N.type,N.key,N.props,null,w.mode,T),T.ref=gh(w,b,N),T.return=w,T)}function c(w,b,N,T){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=Jv(N,w.mode,T),b.return=w,b):(b=s(b,N.children||[]),b.return=w,b)}function u(w,b,N,T,V){return b===null||b.tag!==7?(b=_c(N,w.mode,T,V),b.return=w,b):(b=s(b,N),b.return=w,b)}function f(w,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Yv(""+b,w.mode,N),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Am:return N=Ng(b.type,b.key,b.props,null,w.mode,N),N.ref=gh(w,null,b),N.return=w,N;case Vu:return b=Jv(b,w.mode,N),b.return=w,b;case GA:var T=b._init;return f(w,T(b._payload),N)}if(Oh(b)||dh(b))return b=_c(b,w.mode,N,null),b.return=w,b;vm(w,b)}return null}function g(w,b,N,T){var V=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return V!==null?null:o(w,b,""+N,T);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Am:return N.key===V?A(w,b,N,T):null;case Vu:return N.key===V?c(w,b,N,T):null;case GA:return V=N._init,g(w,b,V(N._payload),T)}if(Oh(N)||dh(N))return V!==null?null:u(w,b,N,T,null);vm(w,N)}return null}function p(w,b,N,T,V){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(N)||null,o(b,w,""+T,V);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Am:return w=w.get(T.key===null?N:T.key)||null,A(b,w,T,V);case Vu:return w=w.get(T.key===null?N:T.key)||null,c(b,w,T,V);case GA:var j=T._init;return p(w,b,N,j(T._payload),V)}if(Oh(T)||dh(T))return w=w.get(N)||null,u(b,w,T,V,null);vm(b,T)}return null}function y(w,b,N,T){for(var V=null,j=null,L=b,S=b=0,I=null;L!==null&&S<N.length;S++){L.index>S?(I=L,L=null):I=L.sibling;var R=g(w,L,N[S],T);if(R===null){L===null&&(L=I);break}t&&L&&R.alternate===null&&e(w,L),b=i(R,b,S),j===null?V=R:j.sibling=R,j=R,L=I}if(S===N.length)return r(w,L),an&&oc(w,S),V;if(L===null){for(;S<N.length;S++)L=f(w,N[S],T),L!==null&&(b=i(L,b,S),j===null?V=L:j.sibling=L,j=L);return an&&oc(w,S),V}for(L=n(w,L);S<N.length;S++)I=p(L,w,S,N[S],T),I!==null&&(t&&I.alternate!==null&&L.delete(I.key===null?S:I.key),b=i(I,b,S),j===null?V=I:j.sibling=I,j=I);return t&&L.forEach(function(F){return e(w,F)}),an&&oc(w,S),V}function C(w,b,N,T){var V=dh(N);if(typeof V!="function")throw Error($e(150));if(N=V.call(N),N==null)throw Error($e(151));for(var j=V=null,L=b,S=b=0,I=null,R=N.next();L!==null&&!R.done;S++,R=N.next()){L.index>S?(I=L,L=null):I=L.sibling;var F=g(w,L,R.value,T);if(F===null){L===null&&(L=I);break}t&&L&&F.alternate===null&&e(w,L),b=i(F,b,S),j===null?V=F:j.sibling=F,j=F,L=I}if(R.done)return r(w,L),an&&oc(w,S),V;if(L===null){for(;!R.done;S++,R=N.next())R=f(w,R.value,T),R!==null&&(b=i(R,b,S),j===null?V=R:j.sibling=R,j=R);return an&&oc(w,S),V}for(L=n(w,L);!R.done;S++,R=N.next())R=p(L,w,S,R.value,T),R!==null&&(t&&R.alternate!==null&&L.delete(R.key===null?S:R.key),b=i(R,b,S),j===null?V=R:j.sibling=R,j=R);return t&&L.forEach(function(E){return e(w,E)}),an&&oc(w,S),V}function B(w,b,N,T){if(typeof N=="object"&&N!==null&&N.type===Ku&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Am:e:{for(var V=N.key,j=b;j!==null;){if(j.key===V){if(V=N.type,V===Ku){if(j.tag===7){r(w,j.sibling),b=s(j,N.props.children),b.return=w,w=b;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===GA&&n_(V)===j.type){r(w,j.sibling),b=s(j,N.props),b.ref=gh(w,j,N),b.return=w,w=b;break e}r(w,j);break}else e(w,j);j=j.sibling}N.type===Ku?(b=_c(N.props.children,w.mode,T,N.key),b.return=w,w=b):(T=Ng(N.type,N.key,N.props,null,w.mode,T),T.ref=gh(w,b,N),T.return=w,w=T)}return a(w);case Vu:e:{for(j=N.key;b!==null;){if(b.key===j)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(w,b.sibling),b=s(b,N.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else e(w,b);b=b.sibling}b=Jv(N,w.mode,T),b.return=w,w=b}return a(w);case GA:return j=N._init,B(w,b,j(N._payload),T)}if(Oh(N))return y(w,b,N,T);if(dh(N))return C(w,b,N,T);vm(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(r(w,b.sibling),b=s(b,N),b.return=w,w=b):(r(w,b),b=Yv(N,w.mode,T),b.return=w,w=b),a(w)):r(w,b)}return B}var gd=AF(!0),lF=AF(!1),A0=kl(null),l0=null,Ju=null,kB=null;function RB(){kB=Ju=l0=null}function DB(t){var e=A0.current;Zr(A0),t._currentValue=e}function P1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function od(t,e){l0=t,kB=Ju=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hi=!0),t.firstContext=null)}function Aa(t){var e=t._currentValue;if(kB!==t)if(t={context:t,memoizedValue:e,next:null},Ju===null){if(l0===null)throw Error($e(308));Ju=t,l0.dependencies={lanes:0,firstContext:t}}else Ju=Ju.next=t;return e}var vc=null;function jB(t){vc===null?vc=[t]:vc.push(t)}function cF(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,jB(e)):(r.next=s.next,s.next=r),e.interleaved=r,oA(t,n)}function oA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var qA=!1;function OB(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fl(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,gr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,oA(t,r)}return s=n.interleaved,s===null?(e.next=e,jB(n)):(e.next=s.next,s.next=e),n.interleaved=e,oA(t,r)}function bg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,_B(t,r)}}function s_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function c0(t,e,r,n){var s=t.updateQueue;qA=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var A=o,c=A.next;A.next=null,a===null?i=c:a.next=c,a=A;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=A))}if(i!==null){var f=s.baseState;a=0,u=c=A=null,o=i;do{var g=o.lane,p=o.eventTime;if((n&g)===g){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,C=o;switch(g=e,p=r,C.tag){case 1:if(y=C.payload,typeof y=="function"){f=y.call(p,f,g);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=C.payload,g=typeof y=="function"?y.call(p,f,g):y,g==null)break e;f=mn({},f,g);break e;case 2:qA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[o]:g.push(o))}else p={eventTime:p,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,A=f):u=u.next=p,a|=g;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(u===null&&(A=f),s.baseState=A,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);kc|=a,t.lanes=a,t.memoizedState=f}}function i_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error($e(191,s));s.call(n)}}}var Bp={},fo=kl(Bp),Mf=kl(Bp),Hf=kl(Bp);function yc(t){if(t===Bp)throw Error($e(174));return t}function MB(t,e){switch(qr(Hf,e),qr(Mf,t),qr(fo,Bp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:p1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=p1(e,t)}Zr(fo),qr(fo,e)}function wd(){Zr(fo),Zr(Mf),Zr(Hf)}function dF(t){yc(Hf.current);var e=yc(fo.current),r=p1(e,t.type);e!==r&&(qr(Mf,t),qr(fo,r))}function HB(t){Mf.current===t&&(Zr(fo),Zr(Mf))}var fn=kl(0);function u0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gv=[];function VB(){for(var t=0;t<Gv.length;t++)Gv[t]._workInProgressVersionPrimary=null;Gv.length=0}var xg=fA.ReactCurrentDispatcher,qv=fA.ReactCurrentBatchConfig,Pc=0,pn=null,$n=null,os=null,d0=!1,Af=!1,Vf=0,tR=0;function Is(){throw Error($e(321))}function KB(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Sa(t[r],e[r]))return!1;return!0}function GB(t,e,r,n,s,i){if(Pc=i,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xg.current=t===null||t.memoizedState===null?iR:aR,t=r(n,s),Af){i=0;do{if(Af=!1,Vf=0,25<=i)throw Error($e(301));i+=1,os=$n=null,e.updateQueue=null,xg.current=oR,t=r(n,s)}while(Af)}if(xg.current=h0,e=$n!==null&&$n.next!==null,Pc=0,os=$n=pn=null,d0=!1,e)throw Error($e(300));return t}function qB(){var t=Vf!==0;return Vf=0,t}function ao(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return os===null?pn.memoizedState=os=t:os=os.next=t,os}function la(){if($n===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=$n.next;var e=os===null?pn.memoizedState:os.next;if(e!==null)os=e,$n=t;else{if(t===null)throw Error($e(310));$n=t,t={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},os===null?pn.memoizedState=os=t:os=os.next=t}return os}function Kf(t,e){return typeof e=="function"?e(t):e}function zv(t){var e=la(),r=e.queue;if(r===null)throw Error($e(311));r.lastRenderedReducer=t;var n=$n,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,A=null,c=i;do{var u=c.lane;if((Pc&u)===u)A!==null&&(A=A.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};A===null?(o=A=f,a=n):A=A.next=f,pn.lanes|=u,kc|=u}c=c.next}while(c!==null&&c!==i);A===null?a=n:A.next=o,Sa(n,e.memoizedState)||(hi=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,pn.lanes|=i,kc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function $v(t){var e=la(),r=e.queue;if(r===null)throw Error($e(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Sa(i,e.memoizedState)||(hi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function hF(){}function fF(t,e){var r=pn,n=la(),s=e(),i=!Sa(n.memoizedState,s);if(i&&(n.memoizedState=s,hi=!0),n=n.queue,zB(gF.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||os!==null&&os.memoizedState.tag&1){if(r.flags|=2048,Gf(9,mF.bind(null,r,n,s,e),void 0,null),As===null)throw Error($e(349));Pc&30||pF(r,e,s)}return s}function pF(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function mF(t,e,r,n){e.value=r,e.getSnapshot=n,wF(e)&&vF(t)}function gF(t,e,r){return r(function(){wF(e)&&vF(t)})}function wF(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Sa(t,r)}catch{return!0}}function vF(t){var e=oA(t,1);e!==null&&Ia(e,t,1,-1)}function a_(t){var e=ao();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kf,lastRenderedState:t},e.queue=t,t=t.dispatch=sR.bind(null,pn,t),[e.memoizedState,t]}function Gf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function yF(){return la().memoizedState}function Cg(t,e,r,n){var s=ao();pn.flags|=t,s.memoizedState=Gf(1|e,r,void 0,n===void 0?null:n)}function ow(t,e,r,n){var s=la();n=n===void 0?null:n;var i=void 0;if($n!==null){var a=$n.memoizedState;if(i=a.destroy,n!==null&&KB(n,a.deps)){s.memoizedState=Gf(e,r,i,n);return}}pn.flags|=t,s.memoizedState=Gf(1|e,r,i,n)}function o_(t,e){return Cg(8390656,8,t,e)}function zB(t,e){return ow(2048,8,t,e)}function BF(t,e){return ow(4,2,t,e)}function bF(t,e){return ow(4,4,t,e)}function xF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CF(t,e,r){return r=r!=null?r.concat([t]):null,ow(4,4,xF.bind(null,e,t),r)}function $B(){}function _F(t,e){var r=la();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&KB(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function EF(t,e){var r=la();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&KB(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function IF(t,e,r){return Pc&21?(Sa(r,e)||(r=US(),pn.lanes|=r,kc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hi=!0),t.memoizedState=r)}function rR(t,e){var r=Ur;Ur=r!==0&&4>r?r:4,t(!0);var n=qv.transition;qv.transition={};try{t(!1),e()}finally{Ur=r,qv.transition=n}}function NF(){return la().memoizedState}function nR(t,e,r){var n=ml(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},SF(t))FF(e,r);else if(r=cF(t,e,r,n),r!==null){var s=Xs();Ia(r,t,n,s),TF(r,e,n)}}function sR(t,e,r){var n=ml(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(SF(t))FF(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,Sa(o,a)){var A=e.interleaved;A===null?(s.next=s,jB(e)):(s.next=A.next,A.next=s),e.interleaved=s;return}}catch{}finally{}r=cF(t,e,s,n),r!==null&&(s=Xs(),Ia(r,t,n,s),TF(r,e,n))}}function SF(t){var e=t.alternate;return t===pn||e!==null&&e===pn}function FF(t,e){Af=d0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function TF(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,_B(t,r)}}var h0={readContext:Aa,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useInsertionEffect:Is,useLayoutEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useMutableSource:Is,useSyncExternalStore:Is,useId:Is,unstable_isNewReconciler:!1},iR={readContext:Aa,useCallback:function(t,e){return ao().memoizedState=[t,e===void 0?null:e],t},useContext:Aa,useEffect:o_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Cg(4194308,4,xF.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Cg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cg(4,2,t,e)},useMemo:function(t,e){var r=ao();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ao();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=nR.bind(null,pn,t),[n.memoizedState,t]},useRef:function(t){var e=ao();return t={current:t},e.memoizedState=t},useState:a_,useDebugValue:$B,useDeferredValue:function(t){return ao().memoizedState=t},useTransition:function(){var t=a_(!1),e=t[0];return t=rR.bind(null,t[1]),ao().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pn,s=ao();if(an){if(r===void 0)throw Error($e(407));r=r()}else{if(r=e(),As===null)throw Error($e(349));Pc&30||pF(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,o_(gF.bind(null,n,i,t),[t]),n.flags|=2048,Gf(9,mF.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=ao(),e=As.identifierPrefix;if(an){var r=zo,n=qo;r=(n&~(1<<32-Ea(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Vf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=tR++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aR={readContext:Aa,useCallback:_F,useContext:Aa,useEffect:zB,useImperativeHandle:CF,useInsertionEffect:BF,useLayoutEffect:bF,useMemo:EF,useReducer:zv,useRef:yF,useState:function(){return zv(Kf)},useDebugValue:$B,useDeferredValue:function(t){var e=la();return IF(e,$n.memoizedState,t)},useTransition:function(){var t=zv(Kf)[0],e=la().memoizedState;return[t,e]},useMutableSource:hF,useSyncExternalStore:fF,useId:NF,unstable_isNewReconciler:!1},oR={readContext:Aa,useCallback:_F,useContext:Aa,useEffect:zB,useImperativeHandle:CF,useInsertionEffect:BF,useLayoutEffect:bF,useMemo:EF,useReducer:$v,useRef:yF,useState:function(){return $v(Kf)},useDebugValue:$B,useDeferredValue:function(t){var e=la();return $n===null?e.memoizedState=t:IF(e,$n.memoizedState,t)},useTransition:function(){var t=$v(Kf)[0],e=la().memoizedState;return[t,e]},useMutableSource:hF,useSyncExternalStore:fF,useId:NF,unstable_isNewReconciler:!1};function xa(t,e){if(t&&t.defaultProps){e=mn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function k1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:mn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Aw={isMounted:function(t){return(t=t._reactInternals)?Xc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Xs(),s=ml(t),i=Jo(n,s);i.payload=e,r!=null&&(i.callback=r),e=fl(t,i,s),e!==null&&(Ia(e,t,s,n),bg(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Xs(),s=ml(t),i=Jo(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=fl(t,i,s),e!==null&&(Ia(e,t,s,n),bg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Xs(),n=ml(t),s=Jo(r,n);s.tag=2,e!=null&&(s.callback=e),e=fl(t,s,n),e!==null&&(Ia(e,t,n,r),bg(e,t,n))}};function A_(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Rf(r,n)||!Rf(s,i):!0}function UF(t,e,r){var n=!1,s=El,i=e.contextType;return typeof i=="object"&&i!==null?i=Aa(i):(s=mi(e)?Qc:js.current,n=e.contextTypes,i=(n=n!=null)?pd(t,s):El),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Aw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function l_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Aw.enqueueReplaceState(e,e.state,null)}function R1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},OB(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Aa(i):(i=mi(e)?Qc:js.current,s.context=pd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(k1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Aw.enqueueReplaceState(s,s.state,null),c0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vd(t,e){try{var r="",n=e;do r+=PP(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wv(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function D1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var AR=typeof WeakMap=="function"?WeakMap:Map;function QF(t,e,r){r=Jo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){p0||(p0=!0,$1=n),D1(t,e)},r}function LF(t,e,r){r=Jo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){D1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){D1(t,e),typeof n!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function c_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new AR;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=bR.bind(null,t,e,r),e.then(t,t))}function u_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d_(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Jo(-1,1),e.tag=2,fl(r,e,1))),r.lanes|=1),t)}var lR=fA.ReactCurrentOwner,hi=!1;function $s(t,e,r,n){e.child=t===null?lF(e,null,r,n):gd(e,t.child,r,n)}function h_(t,e,r,n,s){r=r.render;var i=e.ref;return od(e,s),n=GB(t,e,r,n,i,s),r=qB(),t!==null&&!hi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,AA(t,e,s)):(an&&r&&QB(e),e.flags|=1,$s(t,e,n,s),e.child)}function f_(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!rb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,PF(t,e,i,n,s)):(t=Ng(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Rf,r(a,n)&&t.ref===e.ref)return AA(t,e,s)}return e.flags|=1,t=gl(i,n),t.ref=e.ref,t.return=e,e.child=t}function PF(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Rf(i,n)&&t.ref===e.ref)if(hi=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(hi=!0);else return e.lanes=t.lanes,AA(t,e,s)}return j1(t,e,r,n,s)}function kF(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qr(ed,Qi),Qi|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qr(ed,Qi),Qi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,qr(ed,Qi),Qi|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,qr(ed,Qi),Qi|=n;return $s(t,e,s,r),e.child}function RF(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function j1(t,e,r,n,s){var i=mi(r)?Qc:js.current;return i=pd(e,i),od(e,s),r=GB(t,e,r,n,i,s),n=qB(),t!==null&&!hi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,AA(t,e,s)):(an&&n&&QB(e),e.flags|=1,$s(t,e,r,s),e.child)}function p_(t,e,r,n,s){if(mi(r)){var i=!0;i0(e)}else i=!1;if(od(e,s),e.stateNode===null)_g(t,e),UF(e,r,n),R1(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var A=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Aa(c):(c=mi(r)?Qc:js.current,c=pd(e,c));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||A!==c)&&l_(e,a,n,c),qA=!1;var g=e.memoizedState;a.state=g,c0(e,n,a,s),A=e.memoizedState,o!==n||g!==A||pi.current||qA?(typeof u=="function"&&(k1(e,r,u,n),A=e.memoizedState),(o=qA||A_(e,r,o,n,g,A,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),a.props=n,a.state=A,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,uF(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:xa(e.type,o),a.props=c,f=e.pendingProps,g=a.context,A=r.contextType,typeof A=="object"&&A!==null?A=Aa(A):(A=mi(r)?Qc:js.current,A=pd(e,A));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||g!==A)&&l_(e,a,n,A),qA=!1,g=e.memoizedState,a.state=g,c0(e,n,a,s);var y=e.memoizedState;o!==f||g!==y||pi.current||qA?(typeof p=="function"&&(k1(e,r,p,n),y=e.memoizedState),(c=qA||A_(e,r,c,n,g,y,A)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,A),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,A)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=A,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),n=!1)}return O1(t,e,r,n,i,s)}function O1(t,e,r,n,s,i){RF(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&e_(e,r,!1),AA(t,e,i);n=e.stateNode,lR.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=gd(e,t.child,null,i),e.child=gd(e,null,o,i)):$s(t,e,o,i),e.memoizedState=n.state,s&&e_(e,r,!0),e.child}function DF(t){var e=t.stateNode;e.pendingContext?ZC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ZC(t,e.context,!1),MB(t,e.containerInfo)}function m_(t,e,r,n,s){return md(),PB(s),e.flags|=256,$s(t,e,r,n),e.child}var M1={dehydrated:null,treeContext:null,retryLane:0};function H1(t){return{baseLanes:t,cachePool:null,transitions:null}}function jF(t,e,r){var n=e.pendingProps,s=fn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),qr(fn,s&1),t===null)return L1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=uw(a,n,0,null),t=_c(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=H1(r),e.memoizedState=M1,t):WB(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return cR(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var A={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=gl(s,A),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=gl(o,i):(i=_c(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?H1(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=M1,n}return i=t.child,t=i.sibling,n=gl(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function WB(t,e){return e=uw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ym(t,e,r,n){return n!==null&&PB(n),gd(e,t.child,null,r),t=WB(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cR(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Wv(Error($e(422))),ym(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=uw({mode:"visible",children:n.children},s,0,null),i=_c(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&gd(e,t.child,null,a),e.child.memoizedState=H1(a),e.memoizedState=M1,i);if(!(e.mode&1))return ym(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error($e(419)),n=Wv(i,n,void 0),ym(t,e,a,n)}if(o=(a&t.childLanes)!==0,hi||o){if(n=As,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,oA(t,s),Ia(n,t,s,-1))}return tb(),n=Wv(Error($e(421))),ym(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Li=hl(s.nextSibling),Ri=e,an=!0,_a=null,t!==null&&(Zi[ea++]=qo,Zi[ea++]=zo,Zi[ea++]=Lc,qo=t.id,zo=t.overflow,Lc=e),e=WB(e,n.children),e.flags|=4096,e)}function g_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),P1(t.return,e,r)}function Xv(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function OF(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if($s(t,e,n.children,r),n=fn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g_(t,r,e);else if(t.tag===19)g_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(qr(fn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&u0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Xv(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&u0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Xv(e,!0,r,null,i);break;case"together":Xv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _g(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function AA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),kc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($e(153));if(e.child!==null){for(t=e.child,r=gl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=gl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function uR(t,e,r){switch(e.tag){case 3:DF(e),md();break;case 5:dF(e);break;case 1:mi(e.type)&&i0(e);break;case 4:MB(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;qr(A0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(qr(fn,fn.current&1),e.flags|=128,null):r&e.child.childLanes?jF(t,e,r):(qr(fn,fn.current&1),t=AA(t,e,r),t!==null?t.sibling:null);qr(fn,fn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return OF(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qr(fn,fn.current),n)break;return null;case 22:case 23:return e.lanes=0,kF(t,e,r)}return AA(t,e,r)}var MF,V1,HF,VF;MF=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};V1=function(){};HF=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,yc(fo.current);var i=null;switch(r){case"input":s=u1(t,s),n=u1(t,n),i=[];break;case"select":s=mn({},s,{value:void 0}),n=mn({},n,{value:void 0}),i=[];break;case"textarea":s=f1(t,s),n=f1(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=n0)}m1(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ff.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var A=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&A!==o&&(A!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||A&&A.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in A)A.hasOwnProperty(a)&&o[a]!==A[a]&&(r||(r={}),r[a]=A[a])}else r||(i||(i=[]),i.push(c,r)),r=A;else c==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,o=o?o.__html:void 0,A!=null&&o!==A&&(i=i||[]).push(c,A)):c==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(c,""+A):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ff.hasOwnProperty(c)?(A!=null&&c==="onScroll"&&Xr("scroll",t),i||o===A||(i=[])):(i=i||[]).push(c,A))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};VF=function(t,e,r,n){r!==n&&(e.flags|=4)};function wh(t,e){if(!an)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ns(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function dR(t,e,r){var n=e.pendingProps;switch(LB(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(e),null;case 1:return mi(e.type)&&s0(),Ns(e),null;case 3:return n=e.stateNode,wd(),Zr(pi),Zr(js),VB(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(wm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_a!==null&&(Y1(_a),_a=null))),V1(t,e),Ns(e),null;case 5:HB(e);var s=yc(Hf.current);if(r=e.type,t!==null&&e.stateNode!=null)HF(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error($e(166));return Ns(e),null}if(t=yc(fo.current),wm(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[oo]=e,n[Of]=i,t=(e.mode&1)!==0,r){case"dialog":Xr("cancel",n),Xr("close",n);break;case"iframe":case"object":case"embed":Xr("load",n);break;case"video":case"audio":for(s=0;s<Hh.length;s++)Xr(Hh[s],n);break;case"source":Xr("error",n);break;case"img":case"image":case"link":Xr("error",n),Xr("load",n);break;case"details":Xr("toggle",n);break;case"input":EC(n,i),Xr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Xr("invalid",n);break;case"textarea":NC(n,i),Xr("invalid",n)}m1(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&gm(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&gm(n.textContent,o,t),s=["children",""+o]):Ff.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Xr("scroll",n)}switch(r){case"input":lm(n),IC(n,i,!0);break;case"textarea":lm(n),SC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=n0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gS(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[oo]=e,t[Of]=n,MF(t,e,!1,!1),e.stateNode=t;e:{switch(a=g1(r,n),r){case"dialog":Xr("cancel",t),Xr("close",t),s=n;break;case"iframe":case"object":case"embed":Xr("load",t),s=n;break;case"video":case"audio":for(s=0;s<Hh.length;s++)Xr(Hh[s],t);s=n;break;case"source":Xr("error",t),s=n;break;case"img":case"image":case"link":Xr("error",t),Xr("load",t),s=n;break;case"details":Xr("toggle",t),s=n;break;case"input":EC(t,n),s=u1(t,n),Xr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=mn({},n,{value:void 0}),Xr("invalid",t);break;case"textarea":NC(t,n),s=f1(t,n),Xr("invalid",t);break;default:s=n}m1(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var A=o[i];i==="style"?yS(t,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&wS(t,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&Tf(t,A):typeof A=="number"&&Tf(t,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ff.hasOwnProperty(i)?A!=null&&i==="onScroll"&&Xr("scroll",t):A!=null&&vB(t,i,A,a))}switch(r){case"input":lm(t),IC(t,n,!1);break;case"textarea":lm(t),SC(t);break;case"option":n.value!=null&&t.setAttribute("value",""+_l(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?nd(t,!!n.multiple,i,!1):n.defaultValue!=null&&nd(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=n0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ns(e),null;case 6:if(t&&e.stateNode!=null)VF(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error($e(166));if(r=yc(Hf.current),yc(fo.current),wm(e)){if(n=e.stateNode,r=e.memoizedProps,n[oo]=e,(i=n.nodeValue!==r)&&(t=Ri,t!==null))switch(t.tag){case 3:gm(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gm(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[oo]=e,e.stateNode=n}return Ns(e),null;case 13:if(Zr(fn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(an&&Li!==null&&e.mode&1&&!(e.flags&128))oF(),md(),e.flags|=98560,i=!1;else if(i=wm(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error($e(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($e(317));i[oo]=e}else md(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ns(e),i=!1}else _a!==null&&(Y1(_a),_a=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||fn.current&1?Yn===0&&(Yn=3):tb())),e.updateQueue!==null&&(e.flags|=4),Ns(e),null);case 4:return wd(),V1(t,e),t===null&&Df(e.stateNode.containerInfo),Ns(e),null;case 10:return DB(e.type._context),Ns(e),null;case 17:return mi(e.type)&&s0(),Ns(e),null;case 19:if(Zr(fn),i=e.memoizedState,i===null)return Ns(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)wh(i,!1);else{if(Yn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=u0(t),a!==null){for(e.flags|=128,wh(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return qr(fn,fn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ln()>yd&&(e.flags|=128,n=!0,wh(i,!1),e.lanes=4194304)}else{if(!n)if(t=u0(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),wh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!an)return Ns(e),null}else 2*Ln()-i.renderingStartTime>yd&&r!==1073741824&&(e.flags|=128,n=!0,wh(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ln(),e.sibling=null,r=fn.current,qr(fn,n?r&1|2:r&1),e):(Ns(e),null);case 22:case 23:return eb(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Qi&1073741824&&(Ns(e),e.subtreeFlags&6&&(e.flags|=8192)):Ns(e),null;case 24:return null;case 25:return null}throw Error($e(156,e.tag))}function hR(t,e){switch(LB(e),e.tag){case 1:return mi(e.type)&&s0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wd(),Zr(pi),Zr(js),VB(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return HB(e),null;case 13:if(Zr(fn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($e(340));md()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zr(fn),null;case 4:return wd(),null;case 10:return DB(e.type._context),null;case 22:case 23:return eb(),null;case 24:return null;default:return null}}var Bm=!1,Rs=!1,fR=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Zu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){bn(t,e,n)}else r.current=null}function K1(t,e,r){try{r()}catch(n){bn(t,e,n)}}var w_=!1;function pR(t,e){if(I1=e0,t=$S(),UB(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,A=-1,c=0,u=0,f=t,g=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(o=a+s),f!==i||n!==0&&f.nodeType!==3||(A=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)g=f,f=p;for(;;){if(f===t)break t;if(g===r&&++c===s&&(o=a),g===i&&++u===n&&(A=a),(p=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=p}r=o===-1||A===-1?null:{start:o,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(N1={focusedElem:t,selectionRange:r},e0=!1,gt=e;gt!==null;)if(e=gt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,gt=t;else for(;gt!==null;){e=gt;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var C=y.memoizedProps,B=y.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?C:xa(e.type,C),B);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(T){bn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}return y=w_,w_=!1,y}function lf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&K1(e,r,i)}s=s.next}while(s!==n)}}function lw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function G1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function KF(t){var e=t.alternate;e!==null&&(t.alternate=null,KF(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[oo],delete e[Of],delete e[T1],delete e[Yk],delete e[Jk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GF(t){return t.tag===5||t.tag===3||t.tag===4}function v_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GF(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function q1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=n0));else if(n!==4&&(t=t.child,t!==null))for(q1(t,e,r),t=t.sibling;t!==null;)q1(t,e,r),t=t.sibling}function z1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(z1(t,e,r),t=t.sibling;t!==null;)z1(t,e,r),t=t.sibling}var gs=null,Ca=!1;function PA(t,e,r){for(r=r.child;r!==null;)qF(t,e,r),r=r.sibling}function qF(t,e,r){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(tw,r)}catch{}switch(r.tag){case 5:Rs||Zu(r,e);case 6:var n=gs,s=Ca;gs=null,PA(t,e,r),gs=n,Ca=s,gs!==null&&(Ca?(t=gs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):gs.removeChild(r.stateNode));break;case 18:gs!==null&&(Ca?(t=gs,r=r.stateNode,t.nodeType===8?Vv(t.parentNode,r):t.nodeType===1&&Vv(t,r),Pf(t)):Vv(gs,r.stateNode));break;case 4:n=gs,s=Ca,gs=r.stateNode.containerInfo,Ca=!0,PA(t,e,r),gs=n,Ca=s;break;case 0:case 11:case 14:case 15:if(!Rs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&K1(r,e,a),s=s.next}while(s!==n)}PA(t,e,r);break;case 1:if(!Rs&&(Zu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){bn(r,e,o)}PA(t,e,r);break;case 21:PA(t,e,r);break;case 22:r.mode&1?(Rs=(n=Rs)||r.memoizedState!==null,PA(t,e,r),Rs=n):PA(t,e,r);break;default:PA(t,e,r)}}function y_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new fR),e.forEach(function(n){var s=CR.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function va(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:gs=o.stateNode,Ca=!1;break e;case 3:gs=o.stateNode.containerInfo,Ca=!0;break e;case 4:gs=o.stateNode.containerInfo,Ca=!0;break e}o=o.return}if(gs===null)throw Error($e(160));qF(i,a,s),gs=null,Ca=!1;var A=s.alternate;A!==null&&(A.return=null),s.return=null}catch(c){bn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zF(e,t),e=e.sibling}function zF(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(va(e,t),ro(t),n&4){try{lf(3,t,t.return),lw(3,t)}catch(C){bn(t,t.return,C)}try{lf(5,t,t.return)}catch(C){bn(t,t.return,C)}}break;case 1:va(e,t),ro(t),n&512&&r!==null&&Zu(r,r.return);break;case 5:if(va(e,t),ro(t),n&512&&r!==null&&Zu(r,r.return),t.flags&32){var s=t.stateNode;try{Tf(s,"")}catch(C){bn(t,t.return,C)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&pS(s,i),g1(o,a);var c=g1(o,i);for(a=0;a<A.length;a+=2){var u=A[a],f=A[a+1];u==="style"?yS(s,f):u==="dangerouslySetInnerHTML"?wS(s,f):u==="children"?Tf(s,f):vB(s,u,f,c)}switch(o){case"input":d1(s,i);break;case"textarea":mS(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?nd(s,!!i.multiple,p,!1):g!==!!i.multiple&&(i.defaultValue!=null?nd(s,!!i.multiple,i.defaultValue,!0):nd(s,!!i.multiple,i.multiple?[]:"",!1))}s[Of]=i}catch(C){bn(t,t.return,C)}}break;case 6:if(va(e,t),ro(t),n&4){if(t.stateNode===null)throw Error($e(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){bn(t,t.return,C)}}break;case 3:if(va(e,t),ro(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Pf(e.containerInfo)}catch(C){bn(t,t.return,C)}break;case 4:va(e,t),ro(t);break;case 13:va(e,t),ro(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(JB=Ln())),n&4&&y_(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Rs=(c=Rs)||u,va(e,t),Rs=c):va(e,t),ro(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(gt=t,u=t.child;u!==null;){for(f=gt=u;gt!==null;){switch(g=gt,p=g.child,g.tag){case 0:case 11:case 14:case 15:lf(4,g,g.return);break;case 1:Zu(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){n=g,r=g.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(C){bn(n,r,C)}}break;case 5:Zu(g,g.return);break;case 22:if(g.memoizedState!==null){b_(f);continue}}p!==null?(p.return=g,gt=p):b_(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,A=f.memoizedProps.style,a=A!=null&&A.hasOwnProperty("display")?A.display:null,o.style.display=vS("display",a))}catch(C){bn(t,t.return,C)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(C){bn(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:va(e,t),ro(t),n&4&&y_(t);break;case 21:break;default:va(e,t),ro(t)}}function ro(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(GF(r)){var n=r;break e}r=r.return}throw Error($e(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Tf(s,""),n.flags&=-33);var i=v_(t);z1(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=v_(t);q1(t,o,a);break;default:throw Error($e(161))}}catch(A){bn(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mR(t,e,r){gt=t,$F(t)}function $F(t,e,r){for(var n=(t.mode&1)!==0;gt!==null;){var s=gt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Bm;if(!a){var o=s.alternate,A=o!==null&&o.memoizedState!==null||Rs;o=Bm;var c=Rs;if(Bm=a,(Rs=A)&&!c)for(gt=s;gt!==null;)a=gt,A=a.child,a.tag===22&&a.memoizedState!==null?x_(s):A!==null?(A.return=a,gt=A):x_(s);for(;i!==null;)gt=i,$F(i),i=i.sibling;gt=s,Bm=o,Rs=c}B_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,gt=i):B_(t)}}function B_(t){for(;gt!==null;){var e=gt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rs||lw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Rs)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:xa(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&i_(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}i_(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Pf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}Rs||e.flags&512&&G1(e)}catch(g){bn(e,e.return,g)}}if(e===t){gt=null;break}if(r=e.sibling,r!==null){r.return=e.return,gt=r;break}gt=e.return}}function b_(t){for(;gt!==null;){var e=gt;if(e===t){gt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,gt=r;break}gt=e.return}}function x_(t){for(;gt!==null;){var e=gt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lw(4,e)}catch(A){bn(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(A){bn(e,s,A)}}var i=e.return;try{G1(e)}catch(A){bn(e,i,A)}break;case 5:var a=e.return;try{G1(e)}catch(A){bn(e,a,A)}}}catch(A){bn(e,e.return,A)}if(e===t){gt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,gt=o;break}gt=e.return}}var gR=Math.ceil,f0=fA.ReactCurrentDispatcher,XB=fA.ReactCurrentOwner,aa=fA.ReactCurrentBatchConfig,gr=0,As=null,Kn=null,xs=0,Qi=0,ed=kl(0),Yn=0,qf=null,kc=0,cw=0,YB=0,cf=null,di=null,JB=0,yd=1/0,Vo=null,p0=!1,$1=null,pl=null,bm=!1,sl=null,m0=0,uf=0,W1=null,Eg=-1,Ig=0;function Xs(){return gr&6?Ln():Eg!==-1?Eg:Eg=Ln()}function ml(t){return t.mode&1?gr&2&&xs!==0?xs&-xs:eR.transition!==null?(Ig===0&&(Ig=US()),Ig):(t=Ur,t!==0||(t=window.event,t=t===void 0?16:jS(t.type)),t):1}function Ia(t,e,r,n){if(50<uf)throw uf=0,W1=null,Error($e(185));wp(t,r,n),(!(gr&2)||t!==As)&&(t===As&&(!(gr&2)&&(cw|=r),Yn===4&&WA(t,xs)),gi(t,n),r===1&&gr===0&&!(e.mode&1)&&(yd=Ln()+500,aw&&Rl()))}function gi(t,e){var r=t.callbackNode;ek(t,e);var n=Zg(t,t===As?xs:0);if(n===0)r!==null&&UC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&UC(r),e===1)t.tag===0?Zk(C_.bind(null,t)):sF(C_.bind(null,t)),Wk(function(){!(gr&6)&&Rl()}),r=null;else{switch(QS(n)){case 1:r=CB;break;case 4:r=FS;break;case 16:r=Jg;break;case 536870912:r=TS;break;default:r=Jg}r=r4(r,WF.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function WF(t,e){if(Eg=-1,Ig=0,gr&6)throw Error($e(327));var r=t.callbackNode;if(Ad()&&t.callbackNode!==r)return null;var n=Zg(t,t===As?xs:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=g0(t,n);else{e=n;var s=gr;gr|=2;var i=YF();(As!==t||xs!==e)&&(Vo=null,yd=Ln()+500,Cc(t,e));do try{yR();break}catch(o){XF(t,o)}while(!0);RB(),f0.current=i,gr=s,Kn!==null?e=0:(As=null,xs=0,e=Yn)}if(e!==0){if(e===2&&(s=b1(t),s!==0&&(n=s,e=X1(t,s))),e===1)throw r=qf,Cc(t,0),WA(t,n),gi(t,Ln()),r;if(e===6)WA(t,n);else{if(s=t.current.alternate,!(n&30)&&!wR(s)&&(e=g0(t,n),e===2&&(i=b1(t),i!==0&&(n=i,e=X1(t,i))),e===1))throw r=qf,Cc(t,0),WA(t,n),gi(t,Ln()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error($e(345));case 2:Ac(t,di,Vo);break;case 3:if(WA(t,n),(n&130023424)===n&&(e=JB+500-Ln(),10<e)){if(Zg(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Xs(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=F1(Ac.bind(null,t,di,Vo),e);break}Ac(t,di,Vo);break;case 4:if(WA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-Ea(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Ln()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gR(n/1960))-n,10<n){t.timeoutHandle=F1(Ac.bind(null,t,di,Vo),n);break}Ac(t,di,Vo);break;case 5:Ac(t,di,Vo);break;default:throw Error($e(329))}}}return gi(t,Ln()),t.callbackNode===r?WF.bind(null,t):null}function X1(t,e){var r=cf;return t.current.memoizedState.isDehydrated&&(Cc(t,e).flags|=256),t=g0(t,e),t!==2&&(e=di,di=r,e!==null&&Y1(e)),t}function Y1(t){di===null?di=t:di.push.apply(di,t)}function wR(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Sa(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function WA(t,e){for(e&=~YB,e&=~cw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ea(e),n=1<<r;t[r]=-1,e&=~n}}function C_(t){if(gr&6)throw Error($e(327));Ad();var e=Zg(t,0);if(!(e&1))return gi(t,Ln()),null;var r=g0(t,e);if(t.tag!==0&&r===2){var n=b1(t);n!==0&&(e=n,r=X1(t,n))}if(r===1)throw r=qf,Cc(t,0),WA(t,e),gi(t,Ln()),r;if(r===6)throw Error($e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ac(t,di,Vo),gi(t,Ln()),null}function ZB(t,e){var r=gr;gr|=1;try{return t(e)}finally{gr=r,gr===0&&(yd=Ln()+500,aw&&Rl())}}function Rc(t){sl!==null&&sl.tag===0&&!(gr&6)&&Ad();var e=gr;gr|=1;var r=aa.transition,n=Ur;try{if(aa.transition=null,Ur=1,t)return t()}finally{Ur=n,aa.transition=r,gr=e,!(gr&6)&&Rl()}}function eb(){Qi=ed.current,Zr(ed)}function Cc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$k(r)),Kn!==null)for(r=Kn.return;r!==null;){var n=r;switch(LB(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&s0();break;case 3:wd(),Zr(pi),Zr(js),VB();break;case 5:HB(n);break;case 4:wd();break;case 13:Zr(fn);break;case 19:Zr(fn);break;case 10:DB(n.type._context);break;case 22:case 23:eb()}r=r.return}if(As=t,Kn=t=gl(t.current,null),xs=Qi=e,Yn=0,qf=null,YB=cw=kc=0,di=cf=null,vc!==null){for(e=0;e<vc.length;e++)if(r=vc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}vc=null}return t}function XF(t,e){do{var r=Kn;try{if(RB(),xg.current=h0,d0){for(var n=pn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}d0=!1}if(Pc=0,os=$n=pn=null,Af=!1,Vf=0,XB.current=null,r===null||r.return===null){Yn=1,qf=e,Kn=null;break}e:{var i=t,a=r.return,o=r,A=e;if(e=xs,o.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var c=A,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=u_(a);if(p!==null){p.flags&=-257,d_(p,a,o,i,e),p.mode&1&&c_(i,c,e),e=p,A=c;var y=e.updateQueue;if(y===null){var C=new Set;C.add(A),e.updateQueue=C}else y.add(A);break e}else{if(!(e&1)){c_(i,c,e),tb();break e}A=Error($e(426))}}else if(an&&o.mode&1){var B=u_(a);if(B!==null){!(B.flags&65536)&&(B.flags|=256),d_(B,a,o,i,e),PB(vd(A,o));break e}}i=A=vd(A,o),Yn!==4&&(Yn=2),cf===null?cf=[i]:cf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=QF(i,A,e);s_(i,w);break e;case 1:o=A;var b=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(pl===null||!pl.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=LF(i,o,e);s_(i,T);break e}}i=i.return}while(i!==null)}ZF(r)}catch(V){e=V,Kn===r&&r!==null&&(Kn=r=r.return);continue}break}while(!0)}function YF(){var t=f0.current;return f0.current=h0,t===null?h0:t}function tb(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),As===null||!(kc&268435455)&&!(cw&268435455)||WA(As,xs)}function g0(t,e){var r=gr;gr|=2;var n=YF();(As!==t||xs!==e)&&(Vo=null,Cc(t,e));do try{vR();break}catch(s){XF(t,s)}while(!0);if(RB(),gr=r,f0.current=n,Kn!==null)throw Error($e(261));return As=null,xs=0,Yn}function vR(){for(;Kn!==null;)JF(Kn)}function yR(){for(;Kn!==null&&!GP();)JF(Kn)}function JF(t){var e=t4(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,e===null?ZF(t):Kn=e,XB.current=null}function ZF(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=hR(r,e),r!==null){r.flags&=32767,Kn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yn=6,Kn=null;return}}else if(r=dR(r,e,Qi),r!==null){Kn=r;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=t}while(e!==null);Yn===0&&(Yn=5)}function Ac(t,e,r){var n=Ur,s=aa.transition;try{aa.transition=null,Ur=1,BR(t,e,r,n)}finally{aa.transition=s,Ur=n}return null}function BR(t,e,r,n){do Ad();while(sl!==null);if(gr&6)throw Error($e(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error($e(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(tk(t,i),t===As&&(Kn=As=null,xs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bm||(bm=!0,r4(Jg,function(){return Ad(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=aa.transition,aa.transition=null;var a=Ur;Ur=1;var o=gr;gr|=4,XB.current=null,pR(t,r),zF(r,t),Mk(N1),e0=!!I1,N1=I1=null,t.current=r,mR(r),qP(),gr=o,Ur=a,aa.transition=i}else t.current=r;if(bm&&(bm=!1,sl=t,m0=s),i=t.pendingLanes,i===0&&(pl=null),WP(r.stateNode),gi(t,Ln()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(p0)throw p0=!1,t=$1,$1=null,t;return m0&1&&t.tag!==0&&Ad(),i=t.pendingLanes,i&1?t===W1?uf++:(uf=0,W1=t):uf=0,Rl(),null}function Ad(){if(sl!==null){var t=QS(m0),e=aa.transition,r=Ur;try{if(aa.transition=null,Ur=16>t?16:t,sl===null)var n=!1;else{if(t=sl,sl=null,m0=0,gr&6)throw Error($e(331));var s=gr;for(gr|=4,gt=t.current;gt!==null;){var i=gt,a=i.child;if(gt.flags&16){var o=i.deletions;if(o!==null){for(var A=0;A<o.length;A++){var c=o[A];for(gt=c;gt!==null;){var u=gt;switch(u.tag){case 0:case 11:case 15:lf(8,u,i)}var f=u.child;if(f!==null)f.return=u,gt=f;else for(;gt!==null;){u=gt;var g=u.sibling,p=u.return;if(KF(u),u===c){gt=null;break}if(g!==null){g.return=p,gt=g;break}gt=p}}}var y=i.alternate;if(y!==null){var C=y.child;if(C!==null){y.child=null;do{var B=C.sibling;C.sibling=null,C=B}while(C!==null)}}gt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,gt=a;else e:for(;gt!==null;){if(i=gt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lf(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,gt=w;break e}gt=i.return}}var b=t.current;for(gt=b;gt!==null;){a=gt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,gt=N;else e:for(a=b;gt!==null;){if(o=gt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:lw(9,o)}}catch(V){bn(o,o.return,V)}if(o===a){gt=null;break e}var T=o.sibling;if(T!==null){T.return=o.return,gt=T;break e}gt=o.return}}if(gr=s,Rl(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(tw,t)}catch{}n=!0}return n}finally{Ur=r,aa.transition=e}}return!1}function __(t,e,r){e=vd(r,e),e=QF(t,e,1),t=fl(t,e,1),e=Xs(),t!==null&&(wp(t,1,e),gi(t,e))}function bn(t,e,r){if(t.tag===3)__(t,t,r);else for(;e!==null;){if(e.tag===3){__(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pl===null||!pl.has(n))){t=vd(r,t),t=LF(e,t,1),e=fl(e,t,1),t=Xs(),e!==null&&(wp(e,1,t),gi(e,t));break}}e=e.return}}function bR(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Xs(),t.pingedLanes|=t.suspendedLanes&r,As===t&&(xs&r)===r&&(Yn===4||Yn===3&&(xs&130023424)===xs&&500>Ln()-JB?Cc(t,0):YB|=r),gi(t,e)}function e4(t,e){e===0&&(t.mode&1?(e=dm,dm<<=1,!(dm&130023424)&&(dm=4194304)):e=1);var r=Xs();t=oA(t,e),t!==null&&(wp(t,e,r),gi(t,r))}function xR(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),e4(t,r)}function CR(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error($e(314))}n!==null&&n.delete(e),e4(t,r)}var t4;t4=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||pi.current)hi=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return hi=!1,uR(t,e,r);hi=!!(t.flags&131072)}else hi=!1,an&&e.flags&1048576&&iF(e,o0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;_g(t,e),t=e.pendingProps;var s=pd(e,js.current);od(e,r),s=GB(null,e,n,t,s,r);var i=qB();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(n)?(i=!0,i0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,OB(e),s.updater=Aw,e.stateNode=s,s._reactInternals=e,R1(e,n,t,r),e=O1(null,e,n,!0,i,r)):(e.tag=0,an&&i&&QB(e),$s(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(_g(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=ER(n),t=xa(n,t),s){case 0:e=j1(null,e,n,t,r);break e;case 1:e=p_(null,e,n,t,r);break e;case 11:e=h_(null,e,n,t,r);break e;case 14:e=f_(null,e,n,xa(n.type,t),r);break e}throw Error($e(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:xa(n,s),j1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:xa(n,s),p_(t,e,n,s,r);case 3:e:{if(DF(e),t===null)throw Error($e(387));n=e.pendingProps,i=e.memoizedState,s=i.element,uF(t,e),c0(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vd(Error($e(423)),e),e=m_(t,e,n,r,s);break e}else if(n!==s){s=vd(Error($e(424)),e),e=m_(t,e,n,r,s);break e}else for(Li=hl(e.stateNode.containerInfo.firstChild),Ri=e,an=!0,_a=null,r=lF(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(md(),n===s){e=AA(t,e,r);break e}$s(t,e,n,r)}e=e.child}return e;case 5:return dF(e),t===null&&L1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,S1(n,s)?a=null:i!==null&&S1(n,i)&&(e.flags|=32),RF(t,e),$s(t,e,a,r),e.child;case 6:return t===null&&L1(e),null;case 13:return jF(t,e,r);case 4:return MB(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=gd(e,null,n,r):$s(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:xa(n,s),h_(t,e,n,s,r);case 7:return $s(t,e,e.pendingProps,r),e.child;case 8:return $s(t,e,e.pendingProps.children,r),e.child;case 12:return $s(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,qr(A0,n._currentValue),n._currentValue=a,i!==null)if(Sa(i.value,a)){if(i.children===s.children&&!pi.current){e=AA(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var A=o.firstContext;A!==null;){if(A.context===n){if(i.tag===1){A=Jo(-1,r&-r),A.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?A.next=A:(A.next=u.next,u.next=A),c.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),P1(i.return,r,e),o.lanes|=r;break}A=A.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($e(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),P1(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}$s(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,od(e,r),s=Aa(s),n=n(s),e.flags|=1,$s(t,e,n,r),e.child;case 14:return n=e.type,s=xa(n,e.pendingProps),s=xa(n.type,s),f_(t,e,n,s,r);case 15:return PF(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:xa(n,s),_g(t,e),e.tag=1,mi(n)?(t=!0,i0(e)):t=!1,od(e,r),UF(e,n,s),R1(e,n,s,r),O1(null,e,n,!0,t,r);case 19:return OF(t,e,r);case 22:return kF(t,e,r)}throw Error($e(156,e.tag))};function r4(t,e){return SS(t,e)}function _R(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(t,e,r,n){return new _R(t,e,r,n)}function rb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ER(t){if(typeof t=="function")return rb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===BB)return 11;if(t===bB)return 14}return 2}function gl(t,e){var r=t.alternate;return r===null?(r=ra(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ng(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")rb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ku:return _c(r.children,s,i,e);case yB:a=8,s|=8;break;case o1:return t=ra(12,r,e,s|2),t.elementType=o1,t.lanes=i,t;case A1:return t=ra(13,r,e,s),t.elementType=A1,t.lanes=i,t;case l1:return t=ra(19,r,e,s),t.elementType=l1,t.lanes=i,t;case dS:return uw(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cS:a=10;break e;case uS:a=9;break e;case BB:a=11;break e;case bB:a=14;break e;case GA:a=16,n=null;break e}throw Error($e(130,t==null?t:typeof t,""))}return e=ra(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function _c(t,e,r,n){return t=ra(7,t,n,e),t.lanes=r,t}function uw(t,e,r,n){return t=ra(22,t,n,e),t.elementType=dS,t.lanes=r,t.stateNode={isHidden:!1},t}function Yv(t,e,r){return t=ra(6,t,null,e),t.lanes=r,t}function Jv(t,e,r){return e=ra(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IR(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uv(0),this.expirationTimes=Uv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uv(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nb(t,e,r,n,s,i,a,o,A){return t=new IR(t,e,r,o,A),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ra(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},OB(i),t}function NR(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function n4(t){if(!t)return El;t=t._reactInternals;e:{if(Xc(t)!==t||t.tag!==1)throw Error($e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($e(171))}if(t.tag===1){var r=t.type;if(mi(r))return nF(t,r,e)}return e}function s4(t,e,r,n,s,i,a,o,A){return t=nb(r,n,!0,t,s,i,a,o,A),t.context=n4(null),r=t.current,n=Xs(),s=ml(r),i=Jo(n,s),i.callback=e??null,fl(r,i,s),t.current.lanes=s,wp(t,s,n),gi(t,n),t}function dw(t,e,r,n){var s=e.current,i=Xs(),a=ml(s);return r=n4(r),e.context===null?e.context=r:e.pendingContext=r,e=Jo(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=fl(s,e,a),t!==null&&(Ia(t,s,a,i),bg(t,s,a)),a}function w0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function sb(t,e){E_(t,e),(t=t.alternate)&&E_(t,e)}function SR(){return null}var i4=typeof reportError=="function"?reportError:function(t){console.error(t)};function ib(t){this._internalRoot=t}hw.prototype.render=ib.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($e(409));dw(t,e,null,null)};hw.prototype.unmount=ib.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rc(function(){dw(null,t,null,null)}),e[aA]=null}};function hw(t){this._internalRoot=t}hw.prototype.unstable_scheduleHydration=function(t){if(t){var e=kS();t={blockedOn:null,target:t,priority:e};for(var r=0;r<$A.length&&e!==0&&e<$A[r].priority;r++);$A.splice(r,0,t),r===0&&DS(t)}};function ab(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I_(){}function FR(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=w0(a);i.call(c)}}var a=s4(e,n,t,0,null,!1,!1,"",I_);return t._reactRootContainer=a,t[aA]=a.current,Df(t.nodeType===8?t.parentNode:t),Rc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=w0(A);o.call(c)}}var A=nb(t,0,!1,null,null,!1,!1,"",I_);return t._reactRootContainer=A,t[aA]=A.current,Df(t.nodeType===8?t.parentNode:t),Rc(function(){dw(e,A,r,n)}),A}function pw(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var A=w0(a);o.call(A)}}dw(e,a,t,s)}else a=FR(r,e,t,s,n);return w0(a)}LS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Mh(e.pendingLanes);r!==0&&(_B(e,r|1),gi(e,Ln()),!(gr&6)&&(yd=Ln()+500,Rl()))}break;case 13:Rc(function(){var n=oA(t,1);if(n!==null){var s=Xs();Ia(n,t,1,s)}}),sb(t,1)}};EB=function(t){if(t.tag===13){var e=oA(t,134217728);if(e!==null){var r=Xs();Ia(e,t,134217728,r)}sb(t,134217728)}};PS=function(t){if(t.tag===13){var e=ml(t),r=oA(t,e);if(r!==null){var n=Xs();Ia(r,t,e,n)}sb(t,e)}};kS=function(){return Ur};RS=function(t,e){var r=Ur;try{return Ur=t,e()}finally{Ur=r}};v1=function(t,e,r){switch(e){case"input":if(d1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=iw(n);if(!s)throw Error($e(90));fS(n),d1(n,s)}}}break;case"textarea":mS(t,r);break;case"select":e=r.value,e!=null&&nd(t,!!r.multiple,e,!1)}};xS=ZB;CS=Rc;var TR={usingClientEntryPoint:!1,Events:[yp,$u,iw,BS,bS,ZB]},vh={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UR={bundleType:vh.bundleType,version:vh.version,rendererPackageName:vh.rendererPackageName,rendererConfig:vh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IS(t),t===null?null:t.stateNode},findFiberByHostInstance:vh.findFiberByHostInstance||SR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xm.isDisabled&&xm.supportsFiber)try{tw=xm.inject(UR),ho=xm}catch{}}Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TR;Vi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ab(e))throw Error($e(200));return NR(t,e,null,r)};Vi.createRoot=function(t,e){if(!ab(t))throw Error($e(299));var r=!1,n="",s=i4;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=nb(t,1,!1,null,null,r,!1,n,s),t[aA]=e.current,Df(t.nodeType===8?t.parentNode:t),new ib(e)};Vi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($e(188)):(t=Object.keys(t).join(","),Error($e(268,t)));return t=IS(e),t=t===null?null:t.stateNode,t};Vi.flushSync=function(t){return Rc(t)};Vi.hydrate=function(t,e,r){if(!fw(e))throw Error($e(200));return pw(null,t,e,!0,r)};Vi.hydrateRoot=function(t,e,r){if(!ab(t))throw Error($e(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=i4;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=s4(e,null,t,1,r??null,s,!1,i,a),t[aA]=e.current,Df(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new hw(e)};Vi.render=function(t,e,r){if(!fw(e))throw Error($e(200));return pw(null,t,e,!1,r)};Vi.unmountComponentAtNode=function(t){if(!fw(t))throw Error($e(40));return t._reactRootContainer?(Rc(function(){pw(null,null,t,!1,function(){t._reactRootContainer=null,t[aA]=null})}),!0):!1};Vi.unstable_batchedUpdates=ZB;Vi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!fw(r))throw Error($e(200));if(t==null||t._reactInternals===void 0)throw Error($e(38));return pw(t,e,r,!1,n)};Vi.version="18.3.1-next-f1338f8080-20240426";function a4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a4)}catch(t){console.error(t)}}a4(),aS.exports=Vi;var o4=aS.exports,N_=o4;i1.createRoot=N_.createRoot,i1.hydrateRoot=N_.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var S_="popstate";function QR(t={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return J1("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:zf(s)}return PR(e,r,null,t)}function cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LR(){return Math.random().toString(36).substring(2,10)}function F_(t,e){return{usr:t.state,key:t.key,idx:e}}function J1(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Pd(e):e,state:r,key:e&&e.key||n||LR()}}function zf({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Pd(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function PR(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",A=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function f(){o="POP";let B=u(),w=B==null?null:B-c;c=B,A&&A({action:o,location:C.location,delta:w})}function g(B,w){o="PUSH";let b=J1(C.location,B,w);c=u()+1;let N=F_(b,c),T=C.createHref(b);try{a.pushState(N,"",T)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(T)}i&&A&&A({action:o,location:C.location,delta:1})}function p(B,w){o="REPLACE";let b=J1(C.location,B,w);c=u();let N=F_(b,c),T=C.createHref(b);a.replaceState(N,"",T),i&&A&&A({action:o,location:C.location,delta:0})}function y(B){return kR(B)}let C={get action(){return o},get location(){return t(s,a)},listen(B){if(A)throw new Error("A history only accepts one active listener");return s.addEventListener(S_,f),A=B,()=>{s.removeEventListener(S_,f),A=null}},createHref(B){return e(s,B)},createURL:y,encodeLocation(B){let w=y(B);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:p,go(B){return a.go(B)}};return C}function kR(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),cn(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:zf(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function A4(t,e,r="/"){return RR(t,e,r,!1)}function RR(t,e,r,n){let s=typeof e=="string"?Pd(e):e,i=lA(s.pathname||"/",r);if(i==null)return null;let a=l4(t);DR(a);let o=null;for(let A=0;o==null&&A<a.length;++A){let c=WR(i);o=zR(a[A],c,n)}return o}function l4(t,e=[],r=[],n="",s=!1){let i=(a,o,A=s,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&A)return;cn(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let f=Zo([n,u.relativePath]),g=r.concat(u);a.children&&a.children.length>0&&(cn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),l4(a.children,e,g,f,A)),!(a.path==null&&!a.index)&&e.push({path:f,score:GR(f,a.index),routesMeta:g})};return t.forEach((a,o)=>{var A;if(a.path===""||!((A=a.path)!=null&&A.includes("?")))i(a,o);else for(let c of c4(a.path))i(a,o,!0,c)}),e}function c4(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=c4(n.join("/")),o=[];return o.push(...a.map(A=>A===""?i:[i,A].join("/"))),s&&o.push(...a),o.map(A=>t.startsWith("/")&&A===""?"/":A)}function DR(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:qR(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var jR=/^:[\w-]+$/,OR=3,MR=2,HR=1,VR=10,KR=-2,T_=t=>t==="*";function GR(t,e){let r=t.split("/"),n=r.length;return r.some(T_)&&(n+=KR),e&&(n+=MR),r.filter(s=>!T_(s)).reduce((s,i)=>s+(jR.test(i)?OR:i===""?HR:VR),n)}function qR(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function zR(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let A=n[o],c=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=v0({path:A.relativePath,caseSensitive:A.caseSensitive,end:c},u),g=A.route;if(!f&&c&&r&&!n[n.length-1].route.index&&(f=v0({path:A.relativePath,caseSensitive:A.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Zo([i,f.pathname]),pathnameBase:ZR(Zo([i,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(i=Zo([i,f.pathnameBase]))}return a}function v0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=$R(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:f},g)=>{if(u==="*"){let y=o[g]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=o[g];return f&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function $R(t,e=!1,r=!0){Fa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,A)=>(n.push({paramName:o,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function WR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function lA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function XR(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Pd(t):t;return{pathname:r?r.startsWith("/")?r:YR(r,e):e,search:eD(n),hash:tD(s)}}function YR(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Zv(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JR(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ob(t){let e=JR(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function Ab(t,e,r,n=!1){let s;typeof t=="string"?s=Pd(t):(s={...t},cn(!s.pathname||!s.pathname.includes("?"),Zv("?","pathname","search",s)),cn(!s.pathname||!s.pathname.includes("#"),Zv("#","pathname","hash",s)),cn(!s.search||!s.search.includes("#"),Zv("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),f-=1;s.pathname=g.join("/")}o=f>=0?e[f]:"/"}let A=XR(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&r.endsWith("/");return!A.pathname.endsWith("/")&&(c||u)&&(A.pathname+="/"),A}var Zo=t=>t.join("/").replace(/\/\/+/g,"/"),ZR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var u4=["POST","PUT","PATCH","DELETE"];new Set(u4);var nD=["GET",...u4];new Set(nD);var kd=k.createContext(null);kd.displayName="DataRouter";var mw=k.createContext(null);mw.displayName="DataRouterState";k.createContext(!1);var d4=k.createContext({isTransitioning:!1});d4.displayName="ViewTransition";var sD=k.createContext(new Map);sD.displayName="Fetchers";var iD=k.createContext(null);iD.displayName="Await";var La=k.createContext(null);La.displayName="Navigation";var bp=k.createContext(null);bp.displayName="Location";var Pa=k.createContext({outlet:null,matches:[],isDataRoute:!1});Pa.displayName="Route";var lb=k.createContext(null);lb.displayName="RouteError";function aD(t,{relative:e}={}){cn(Rd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=k.useContext(La),{hash:s,pathname:i,search:a}=xp(t,{relative:e}),o=i;return r!=="/"&&(o=i==="/"?r:Zo([r,i])),n.createHref({pathname:o,search:a,hash:s})}function Rd(){return k.useContext(bp)!=null}function Dl(){return cn(Rd(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(bp).location}var h4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function f4(t){k.useContext(La).static||k.useLayoutEffect(t)}function gw(){let{isDataRoute:t}=k.useContext(Pa);return t?BD():oD()}function oD(){cn(Rd(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(kd),{basename:e,navigator:r}=k.useContext(La),{matches:n}=k.useContext(Pa),{pathname:s}=Dl(),i=JSON.stringify(ob(n)),a=k.useRef(!1);return f4(()=>{a.current=!0}),k.useCallback((A,c={})=>{if(Fa(a.current,h4),!a.current)return;if(typeof A=="number"){r.go(A);return}let u=Ab(A,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Zo([e,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[e,r,i,s,t])}var AD=k.createContext(null);function lD(t){let e=k.useContext(Pa).outlet;return e&&k.createElement(AD.Provider,{value:t},e)}function xp(t,{relative:e}={}){let{matches:r}=k.useContext(Pa),{pathname:n}=Dl(),s=JSON.stringify(ob(r));return k.useMemo(()=>Ab(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function cD(t,e){return p4(t,e)}function p4(t,e,r,n,s){var b;cn(Rd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=k.useContext(La),{matches:a}=k.useContext(Pa),o=a[a.length-1],A=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let N=f&&f.path||"";m4(c,!f||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let g=Dl(),p;if(e){let N=typeof e=="string"?Pd(e):e;cn(u==="/"||((b=N.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${N.pathname}" was given in the \`location\` prop.`),p=N}else p=g;let y=p.pathname||"/",C=y;if(u!=="/"){let N=u.replace(/^\//,"").split("/");C="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let B=A4(t,{pathname:C});Fa(f||B!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Fa(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=pD(B&&B.map(N=>Object.assign({},N,{params:Object.assign({},A,N.params),pathname:Zo([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Zo([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,r,n,s);return e&&w?k.createElement(bp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function uD(){let t=yD(),e=rD(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:i},"ErrorBoundary")," or"," ",k.createElement("code",{style:i},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:s},r):null,a)}var dD=k.createElement(uD,null),hD=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?k.createElement(Pa.Provider,{value:this.props.routeContext},k.createElement(lb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fD({routeContext:t,match:e,children:r}){let n=k.useContext(kd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Pa.Provider,{value:t},r)}function pD(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=r==null?void 0:r.errors;if(a!=null){let c=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);cn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,A=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(A=c),u.route.id){let{loaderData:f,errors:g}=r,p=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!g||g[u.route.id]===void 0);if(u.route.lazy||p){o=!0,A>=0?i=i.slice(0,A+1):i=[i[0]];break}}}return i.reduceRight((c,u,f)=>{let g,p=!1,y=null,C=null;r&&(g=a&&u.route.id?a[u.route.id]:void 0,y=u.route.errorElement||dD,o&&(A<0&&f===0?(m4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,C=null):A===f&&(p=!0,C=u.route.hydrateFallbackElement||null)));let B=e.concat(i.slice(0,f+1)),w=()=>{let b;return g?b=y:p?b=C:u.route.Component?b=k.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=c,k.createElement(fD,{match:u,routeContext:{outlet:c,matches:B,isDataRoute:r!=null},children:b})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?k.createElement(hD,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:B,isDataRoute:!0},unstable_onError:n}):w()},null)}function cb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mD(t){let e=k.useContext(kd);return cn(e,cb(t)),e}function gD(t){let e=k.useContext(mw);return cn(e,cb(t)),e}function wD(t){let e=k.useContext(Pa);return cn(e,cb(t)),e}function ub(t){let e=wD(t),r=e.matches[e.matches.length-1];return cn(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function vD(){return ub("useRouteId")}function yD(){var n;let t=k.useContext(lb),e=gD("useRouteError"),r=ub("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function BD(){let{router:t}=mD("useNavigate"),e=ub("useNavigate"),r=k.useRef(!1);return f4(()=>{r.current=!0}),k.useCallback(async(s,i={})=>{Fa(r.current,h4),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var U_={};function m4(t,e,r){!e&&!U_[t]&&(U_[t]=!0,Fa(!1,r))}k.memo(bD);function bD({routes:t,future:e,state:r,unstable_onError:n}){return p4(t,void 0,r,n,e)}function Z1({to:t,replace:e,state:r,relative:n}){cn(Rd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=k.useContext(La);Fa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=k.useContext(Pa),{pathname:a}=Dl(),o=gw(),A=Ab(t,ob(i),a,n==="path"),c=JSON.stringify(A);return k.useEffect(()=>{o(JSON.parse(c),{replace:e,state:r,relative:n})},[o,c,n,e,r]),null}function xD(t){return lD(t.context)}function Yr(t){cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CD({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){cn(!Rd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=k.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=Pd(r));let{pathname:A="/",search:c="",hash:u="",state:f=null,key:g="default"}=r,p=k.useMemo(()=>{let y=lA(A,a);return y==null?null:{location:{pathname:y,search:c,hash:u,state:f,key:g},navigationType:n}},[a,A,c,u,f,g,n]);return Fa(p!=null,`<Router basename="${a}"> is not able to match the URL "${A}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:k.createElement(La.Provider,{value:o},k.createElement(bp.Provider,{children:e,value:p}))}function _D({children:t,location:e}){return cD(e2(t),e)}function e2(t,e=[]){let r=[];return k.Children.forEach(t,(n,s)=>{if(!k.isValidElement(n))return;let i=[...e,s];if(n.type===k.Fragment){r.push.apply(r,e2(n.props.children,i));return}cn(n.type===Yr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=e2(n.props.children,i)),r.push(a)}),r}var Sg="get",Fg="application/x-www-form-urlencoded";function ww(t){return t!=null&&typeof t.tagName=="string"}function ED(t){return ww(t)&&t.tagName.toLowerCase()==="button"}function ID(t){return ww(t)&&t.tagName.toLowerCase()==="form"}function ND(t){return ww(t)&&t.tagName.toLowerCase()==="input"}function SD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FD(t,e){return t.button===0&&(!e||e==="_self")&&!SD(t)}var Cm=null;function TD(){if(Cm===null)try{new FormData(document.createElement("form"),0),Cm=!1}catch{Cm=!0}return Cm}var UD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ey(t){return t!=null&&!UD.has(t)?(Fa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fg}"`),null):t}function QD(t,e){let r,n,s,i,a;if(ID(t)){let o=t.getAttribute("action");n=o?lA(o,e):null,r=t.getAttribute("method")||Sg,s=ey(t.getAttribute("enctype"))||Fg,i=new FormData(t)}else if(ED(t)||ND(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=t.getAttribute("formaction")||o.getAttribute("action");if(n=A?lA(A,e):null,r=t.getAttribute("formmethod")||o.getAttribute("method")||Sg,s=ey(t.getAttribute("formenctype"))||ey(o.getAttribute("enctype"))||Fg,i=new FormData(o,t),!TD()){let{name:c,type:u,value:f}=t;if(u==="image"){let g=c?`${c}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else c&&i.append(c,f)}}else{if(ww(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Sg,n=null,s=Fg,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function db(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LD(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&lA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function PD(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function RD(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await PD(i,r);return a.links?a.links():[]}return[]}));return MD(n.flat(1).filter(kD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Q_(t,e,r,n,s,i){let a=(A,c)=>r[c]?A.route.id!==r[c].route.id:!0,o=(A,c)=>{var u;return r[c].pathname!==A.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==A.params["*"]};return i==="assets"?e.filter((A,c)=>a(A,c)||o(A,c)):i==="data"?e.filter((A,c)=>{var f;let u=n.routes[A.route.id];if(!u||!u.hasLoader)return!1;if(a(A,c)||o(A,c))return!0;if(A.route.shouldRevalidate){let g=A.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:A.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function DD(t,e,{includeHydrateFallback:r}={}){return jD(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function jD(t){return[...new Set(t)]}function OD(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function MD(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(OD(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function g4(){let t=k.useContext(kd);return db(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function HD(){let t=k.useContext(mw);return db(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var hb=k.createContext(void 0);hb.displayName="FrameworkContext";function w4(){let t=k.useContext(hb);return db(t,"You must render this element inside a <HydratedRouter> element"),t}function VD(t,e){let r=k.useContext(hb),[n,s]=k.useState(!1),[i,a]=k.useState(!1),{onFocus:o,onBlur:A,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,g=k.useRef(null);k.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let C=w=>{w.forEach(b=>{a(b.isIntersecting)})},B=new IntersectionObserver(C,{threshold:.5});return g.current&&B.observe(g.current),()=>{B.disconnect()}}},[t]),k.useEffect(()=>{if(n){let C=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(C)}}},[n]);let p=()=>{s(!0)},y=()=>{s(!1),a(!1)};return r?t!=="intent"?[i,g,{}]:[i,g,{onFocus:yh(o,p),onBlur:yh(A,y),onMouseEnter:yh(c,p),onMouseLeave:yh(u,y),onTouchStart:yh(f,p)}]:[!1,g,{}]}function yh(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function KD({page:t,...e}){let{router:r}=g4(),n=k.useMemo(()=>A4(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?k.createElement(qD,{page:t,matches:n,...e}):null}function GD(t){let{manifest:e,routeModules:r}=w4(),[n,s]=k.useState([]);return k.useEffect(()=>{let i=!1;return RD(t,e,r).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,r]),n}function qD({page:t,matches:e,...r}){let n=Dl(),{manifest:s,routeModules:i}=w4(),{basename:a}=g4(),{loaderData:o,matches:A}=HD(),c=k.useMemo(()=>Q_(t,e,A,s,n,"data"),[t,e,A,s,n]),u=k.useMemo(()=>Q_(t,e,A,s,n,"assets"),[t,e,A,s,n]),f=k.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let y=new Set,C=!1;if(e.forEach(w=>{var N;let b=s.routes[w.route.id];!b||!b.hasLoader||(!c.some(T=>T.route.id===w.route.id)&&w.route.id in o&&((N=i[w.route.id])!=null&&N.shouldRevalidate)||b.hasClientLoader?C=!0:y.add(w.route.id))}),y.size===0)return[];let B=LD(t,a,"data");return C&&y.size>0&&B.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[B.pathname+B.search]},[a,o,n,s,c,e,t,i]),g=k.useMemo(()=>DD(u,s),[u,s]),p=GD(u);return k.createElement(k.Fragment,null,f.map(y=>k.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),g.map(y=>k.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),p.map(({key:y,link:C})=>k.createElement("link",{key:y,nonce:r.nonce,...C})))}function zD(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var v4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v4&&(window.__reactRouterVersion="7.8.2")}catch{}function $D({basename:t,children:e,window:r}){let n=k.useRef();n.current==null&&(n.current=QR({window:r,v5Compat:!0}));let s=n.current,[i,a]=k.useState({action:s.action,location:s.location}),o=k.useCallback(A=>{k.startTransition(()=>a(A))},[a]);return k.useLayoutEffect(()=>s.listen(o),[s,o]),k.createElement(CD,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var y4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B4=k.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:A,to:c,preventScrollReset:u,viewTransition:f,...g},p){let{basename:y}=k.useContext(La),C=typeof c=="string"&&y4.test(c),B,w=!1;if(typeof c=="string"&&C&&(B=c,v4))try{let I=new URL(window.location.href),R=c.startsWith("//")?new URL(I.protocol+c):new URL(c),F=lA(R.pathname,y);R.origin===I.origin&&F!=null?c=F+R.search+R.hash:w=!0}catch{Fa(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=aD(c,{relative:s}),[N,T,V]=VD(n,g),j=YD(c,{replace:a,state:o,target:A,preventScrollReset:u,relative:s,viewTransition:f});function L(I){e&&e(I),I.defaultPrevented||j(I)}let S=k.createElement("a",{...g,...V,href:B||b,onClick:w||i?e:L,ref:zD(p,T),target:A,"data-discover":!C&&r==="render"?"true":void 0});return N&&!C?k.createElement(k.Fragment,null,S,k.createElement(KD,{page:b})):S});B4.displayName="Link";var yn=k.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:A,...c},u){let f=xp(a,{relative:c.relative}),g=Dl(),p=k.useContext(mw),{navigator:y,basename:C}=k.useContext(La),B=p!=null&&r6(f)&&o===!0,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,b=g.pathname,N=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(b=b.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&C&&(N=lA(N,C)||N);const T=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let V=b===w||!s&&b.startsWith(w)&&b.charAt(T)==="/",j=N!=null&&(N===w||!s&&N.startsWith(w)&&N.charAt(w.length)==="/"),L={isActive:V,isPending:j,isTransitioning:B},S=V?e:void 0,I;typeof n=="function"?I=n(L):I=[n,V?"active":null,j?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(L):i;return k.createElement(B4,{...c,"aria-current":S,className:I,ref:u,style:R,to:a,viewTransition:o},typeof A=="function"?A(L):A)});yn.displayName="NavLink";var WD=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:a=Sg,action:o,onSubmit:A,relative:c,preventScrollReset:u,viewTransition:f,...g},p)=>{let y=e6(),C=t6(o,{relative:c}),B=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&y4.test(o),b=N=>{if(A&&A(N),N.defaultPrevented)return;N.preventDefault();let T=N.nativeEvent.submitter,V=(T==null?void 0:T.getAttribute("formmethod"))||a;y(T||N.currentTarget,{fetcherKey:e,method:V,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:f})};return k.createElement("form",{ref:p,method:B,action:C,onSubmit:n?A:b,...g,"data-discover":!w&&t==="render"?"true":void 0})});WD.displayName="Form";function XD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b4(t){let e=k.useContext(kd);return cn(e,XD(t)),e}function YD(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=gw(),A=Dl(),c=xp(t,{relative:i});return k.useCallback(u=>{if(FD(u,e)){u.preventDefault();let f=r!==void 0?r:zf(A)===zf(c);o(t,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[A,o,c,r,n,e,t,s,i,a])}var JD=0,ZD=()=>`__${String(++JD)}__`;function e6(){let{router:t}=b4("useSubmit"),{basename:e}=k.useContext(La),r=vD();return k.useCallback(async(n,s={})=>{let{action:i,method:a,encType:o,formData:A,body:c}=QD(n,e);if(s.navigate===!1){let u=s.fetcherKey||ZD();await t.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function t6(t,{relative:e}={}){let{basename:r}=k.useContext(La),n=k.useContext(Pa);cn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...xp(t||".",{relative:e})},a=Dl();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),A=o.getAll("index");if(A.some(u=>u==="")){o.delete("index"),A.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Zo([r,i.pathname])),zf(i)}function r6(t,{relative:e}={}){let r=k.useContext(d4);cn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=b4("useViewTransitionState"),s=xp(t,{relative:e});if(!r.isTransitioning)return!1;let i=lA(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=lA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return v0(s.pathname,a)!=null||v0(s.pathname,i)!=null}var L_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},n6=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],A=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(A>>10)),e[n++]=String.fromCharCode(56320+(A&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},C4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,A=s+2<t.length,c=A?t[s+2]:0,u=i>>2,f=(i&3)<<4|o>>4;let g=(o&15)<<2|c>>6,p=c&63;A||(p=64,a||(g=64)),n.push(r[u],r[f],r[g],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new s6;const g=i<<2|o>>4;if(n.push(g),c!==64){const p=o<<4&240|c>>2;if(n.push(p),f!==64){const y=c<<6&192|f;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i6=function(t){const e=x4(t);return C4.encodeByteArray(e,!0)},y0=function(t){return i6(t).replace(/\./g,"")},_4=function(t){try{return C4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=()=>a6().__FIREBASE_DEFAULTS__,A6=()=>{if(typeof process>"u"||typeof L_>"u")return;const t=L_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_4(t[1]);return e&&JSON.parse(e)},vw=()=>{try{return o6()||A6()||l6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E4=t=>{var e,r;return(r=(e=vw())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},c6=t=>{const e=E4(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},I4=()=>{var t;return(t=vw())===null||t===void 0?void 0:t.config},N4=t=>{var e;return(e=vw())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[y0(JSON.stringify(r)),y0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function f6(){var t;const e=(t=vw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function m6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function g6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w6(){const t=Jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S4(){return!f6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F4(){try{return typeof indexedDB=="object"}catch{return!1}}function v6(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="FirebaseError";class pA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=y6,Object.setPrototypeOf(this,pA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cp.prototype.create)}}class Cp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?B6(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new pA(s,o,n)}}function B6(t,e){return t.replace(b6,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const b6=/\{\$([^}]+)}/g;function x6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function B0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(P_(i)&&P_(a)){if(!B0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function P_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Vh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Kh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function C6(t,e){const r=new _6(t,e);return r.subscribe.bind(r)}class _6{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");E6(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=ty),s.error===void 0&&(s.error=ty),s.complete===void 0&&(s.complete=ty);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E6(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function ty(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class Dc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new u6;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S6(e))try{this.getOrInitializeService({instanceIdentifier:lc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=lc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lc){return this.instances.has(e)}getOptions(e=lc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:N6(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=lc){return this.component?this.component.multipleInstances?e:lc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N6(t){return t===lc?void 0:t}function S6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new I6(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lr||(lr={}));const T6={debug:lr.DEBUG,verbose:lr.VERBOSE,info:lr.INFO,warn:lr.WARN,error:lr.ERROR,silent:lr.SILENT},U6=lr.INFO,Q6={[lr.DEBUG]:"log",[lr.VERBOSE]:"log",[lr.INFO]:"info",[lr.WARN]:"warn",[lr.ERROR]:"error"},L6=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Q6[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let fb=class{constructor(e){this.name=e,this._logLevel=U6,this._logHandler=L6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?T6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lr.DEBUG,...e),this._logHandler(this,lr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lr.VERBOSE,...e),this._logHandler(this,lr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lr.INFO,...e),this._logHandler(this,lr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lr.WARN,...e),this._logHandler(this,lr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lr.ERROR,...e),this._logHandler(this,lr.ERROR,...e)}};const P6=(t,e)=>e.some(r=>t instanceof r);let k_,R_;function k6(){return k_||(k_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R6(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T4=new WeakMap,t2=new WeakMap,U4=new WeakMap,ry=new WeakMap,pb=new WeakMap;function D6(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(wl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&T4.set(r,t)}).catch(()=>{}),pb.set(e,t),e}function j6(t){if(t2.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});t2.set(t,e)}let r2={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return t2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||U4.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O6(t){r2=t(r2)}function M6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(ny(this),e,...r);return U4.set(n,e.sort?e.sort():[e]),wl(n)}:R6().includes(t)?function(...e){return t.apply(ny(this),e),wl(T4.get(this))}:function(...e){return wl(t.apply(ny(this),e))}}function H6(t){return typeof t=="function"?M6(t):(t instanceof IDBTransaction&&j6(t),P6(t,k6())?new Proxy(t,r2):t)}function wl(t){if(t instanceof IDBRequest)return D6(t);if(ry.has(t))return ry.get(t);const e=H6(t);return e!==t&&(ry.set(t,e),pb.set(e,t)),e}const ny=t=>pb.get(t);function V6(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=wl(a);return n&&a.addEventListener("upgradeneeded",A=>{n(wl(a.result),A.oldVersion,A.newVersion,wl(a.transaction),A)}),r&&a.addEventListener("blocked",A=>r(A.oldVersion,A.newVersion,A)),o.then(A=>{i&&A.addEventListener("close",()=>i()),s&&A.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const K6=["get","getKey","getAll","getAllKeys","count"],G6=["put","add","delete","clear"],sy=new Map;function D_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sy.get(e))return sy.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=G6.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||K6.includes(r)))return;const i=async function(a,...o){const A=this.transaction(a,s?"readwrite":"readonly");let c=A.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&A.done]))[0]};return sy.set(e,i),i}O6(t=>({...t,get:(e,r,n)=>D_(e,r)||t.get(e,r,n),has:(e,r)=>!!D_(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(z6(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function z6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const n2="@firebase/app",j_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new fb("@firebase/app"),$6="@firebase/app-compat",W6="@firebase/analytics-compat",X6="@firebase/analytics",Y6="@firebase/app-check-compat",J6="@firebase/app-check",Z6="@firebase/auth",ej="@firebase/auth-compat",tj="@firebase/database",rj="@firebase/data-connect",nj="@firebase/database-compat",sj="@firebase/functions",ij="@firebase/functions-compat",aj="@firebase/installations",oj="@firebase/installations-compat",Aj="@firebase/messaging",lj="@firebase/messaging-compat",cj="@firebase/performance",uj="@firebase/performance-compat",dj="@firebase/remote-config",hj="@firebase/remote-config-compat",fj="@firebase/storage",pj="@firebase/storage-compat",mj="@firebase/firestore",gj="@firebase/vertexai-preview",wj="@firebase/firestore-compat",vj="firebase",yj="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="[DEFAULT]",Bj={[n2]:"fire-core",[$6]:"fire-core-compat",[X6]:"fire-analytics",[W6]:"fire-analytics-compat",[J6]:"fire-app-check",[Y6]:"fire-app-check-compat",[Z6]:"fire-auth",[ej]:"fire-auth-compat",[tj]:"fire-rtdb",[rj]:"fire-data-connect",[nj]:"fire-rtdb-compat",[sj]:"fire-fn",[ij]:"fire-fn-compat",[aj]:"fire-iid",[oj]:"fire-iid-compat",[Aj]:"fire-fcm",[lj]:"fire-fcm-compat",[cj]:"fire-perf",[uj]:"fire-perf-compat",[dj]:"fire-rc",[hj]:"fire-rc-compat",[fj]:"fire-gcs",[pj]:"fire-gcs-compat",[mj]:"fire-fst",[wj]:"fire-fst-compat",[gj]:"fire-vertex","fire-js":"fire-js",[vj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Map,i2=new Map,a2=new Map;function O_(t,e){try{t.container.addComponent(e)}catch(r){cA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function bd(t){const e=t.name;if(a2.has(e))return cA.debug(`There were multiple attempts to register component ${e}.`),!1;a2.set(e,t);for(const r of Bd.values())O_(r,t);for(const r of i2.values())O_(r,t);return!0}function mb(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ao(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vl=new Cp("app","Firebase",bj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Dc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=yj;function gb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:s2,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw vl.create("bad-app-name",{appName:String(s)});if(r||(r=I4()),!r)throw vl.create("no-options");const i=Bd.get(s);if(i){if(B0(r,i.options)&&B0(n,i.config))return i;throw vl.create("duplicate-app",{appName:s})}const a=new F6(s);for(const A of a2.values())a.addComponent(A);const o=new xj(r,n,a);return Bd.set(s,o),o}function wb(t=s2){const e=Bd.get(t);if(!e&&t===s2&&I4())return gb();if(!e)throw vl.create("no-app",{appName:t});return e}async function Cj(t){let e=!1;const r=t.name;Bd.has(r)?(e=!0,Bd.delete(r)):i2.has(r)&&t.decRefCount()<=0&&(i2.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function yl(t,e,r){var n;let s=(n=Bj[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cA.warn(o.join(" "));return}bd(new Dc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="firebase-heartbeat-database",Ej=1,$f="firebase-heartbeat-store";let iy=null;function Q4(){return iy||(iy=V6(_j,Ej,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($f)}catch(r){console.warn(r)}}}}).catch(t=>{throw vl.create("idb-open",{originalErrorMessage:t.message})})),iy}async function Ij(t){try{const r=(await Q4()).transaction($f),n=await r.objectStore($f).get(L4(t));return await r.done,n}catch(e){if(e instanceof pA)cA.warn(e.message);else{const r=vl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cA.warn(r.message)}}}async function M_(t,e){try{const n=(await Q4()).transaction($f,"readwrite");await n.objectStore($f).put(e,L4(t)),await n.done}catch(r){if(r instanceof pA)cA.warn(r.message);else{const n=vl.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});cA.warn(n.message)}}}function L4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=1024,Sj=30*24*60*60*1e3;class Fj{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Uj(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=H_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=Sj}),this._storage.overwrite(this._heartbeatsCache))}catch(n){cA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=H_(),{heartbeatsToSend:n,unsentEntries:s}=Tj(this._heartbeatsCache.heartbeats),i=y0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return cA.warn(r),""}}}function H_(){return new Date().toISOString().substring(0,10)}function Tj(t,e=Nj){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),V_(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),V_(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Uj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F4()?v6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Ij(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function V_(t){return y0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){bd(new Dc("platform-logger",e=>new q6(e),"PRIVATE")),bd(new Dc("heartbeat",e=>new Fj(e),"PRIVATE")),yl(n2,j_,t),yl(n2,j_,"esm2017"),yl("fire-js","")}Qj("");function vb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function P4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lj=P4,k4=new Cp("auth","Firebase",P4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new fb("@firebase/auth");function Pj(t,...e){b0.logLevel<=lr.WARN&&b0.warn(`Auth (${Dd}): ${t}`,...e)}function Tg(t,...e){b0.logLevel<=lr.ERROR&&b0.error(`Auth (${Dd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,...e){throw yb(t,...e)}function po(t,...e){return yb(t,...e)}function R4(t,e,r){const n=Object.assign(Object.assign({},Lj()),{[e]:r});return new Cp("auth","Firebase",n).create(e,{appName:t.name})}function eA(t){return R4(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return k4.create(t,...e)}function Ot(t,e,...r){if(!t)throw yb(e,...r)}function $o(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tg(e),new Error(e)}function uA(t,e){t||$o(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kj(){return K_()==="http:"||K_()==="https:"}function K_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kj()||m6()||"connection"in navigator)?navigator.onLine:!0}function Dj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,r){this.shortDelay=e,this.longDelay=r,uA(r>e,"Short delay should be less than long delay!"),this.isMobile=h6()||g6()}get(){return Rj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e){uA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new Ep(3e4,6e4);function jl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ol(t,e,r,n,s={}){return j4(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=_p(Object.assign({key:t.config.apiKey},a)).slice(1),A=await t._getAdditionalHeaders();A["Content-Type"]="application/json",t.languageCode&&(A["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:A},i);return p6()||(c.referrerPolicy="no-referrer"),D4.fetch()(O4(t,t.config.apiHost,r,o),c)})}async function j4(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},jj),e);try{const s=new Hj(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw _m(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[A,c]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw _m(t,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw _m(t,"email-already-in-use",a);if(A==="USER_DISABLED")throw _m(t,"user-disabled",a);const u=n[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw R4(t,u,c);Ta(t,u)}}catch(s){if(s instanceof pA)throw s;Ta(t,"network-request-failed",{message:String(s)})}}async function Ip(t,e,r,n,s={}){const i=await Ol(t,e,r,n,s);return"mfaPendingCredential"in i&&Ta(t,"multi-factor-auth-required",{_serverResponse:i}),i}function O4(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Bb(t.config,s):`${t.config.apiScheme}://${s}`}function Mj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(po(this.auth,"network-request-failed")),Oj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _m(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=po(t,e,n);return s.customData._tokenResponse=r,s}function G_(t){return t!==void 0&&t.enterprise!==void 0}class Vj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Mj(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Kj(t,e){return Ol(t,"GET","/v2/recaptchaConfig",jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e){return Ol(t,"POST","/v1/accounts:delete",e)}async function M4(t,e){return Ol(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qj(t,e=!1){const r=xn(t),n=await r.getIdToken(e),s=bb(n);Ot(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:df(ay(s.auth_time)),issuedAtTime:df(ay(s.iat)),expirationTime:df(ay(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ay(t){return Number(t)*1e3}function bb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Tg("JWT malformed, contained fewer than 3 sections"),null;try{const s=_4(r);return s?JSON.parse(s):(Tg("Failed to decode base64 JWT payload"),null)}catch(s){return Tg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function q_(t){const e=bb(t);return Ot(e,"internal-error"),Ot(typeof e.exp<"u","internal-error"),Ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wf(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof pA&&zj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function zj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=df(this.lastLoginAt),this.creationTime=df(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Wf(t,M4(r,{idToken:n}));Ot(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?H4(i.providerUserInfo):[],o=Xj(t.providerData,a),A=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=A?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new A2(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Wj(t){const e=xn(t);await x0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xj(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function H4(t){return t.map(e=>{var{providerId:r}=e,n=vb(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(t,e){const r=await j4(t,{},async()=>{const n=_p({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=O4(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",D4.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Jj(t,e){return Ol(t,"POST","/v2/accounts:revokeToken",jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot(typeof e.idToken<"u","internal-error"),Ot(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ot(e.length!==0,"internal-error");const r=q_(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await Yj(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new ld;return n&&(Ot(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Ot(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Ot(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ld,this.toJSON())}_performRefresh(){return $o("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e){Ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wo{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=vb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $j(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new A2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Wf(this,this.stsTokenManager.getToken(this.auth,e));return Ot(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return qj(this,e)}reload(){return Wj(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Wo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await x0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ao(this.auth.app))return Promise.reject(eA(this.auth));const e=await this.getIdToken();return await Wf(this,Gj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,A,c,u;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,y=(a=r.photoURL)!==null&&a!==void 0?a:void 0,C=(o=r.tenantId)!==null&&o!==void 0?o:void 0,B=(A=r._redirectEventId)!==null&&A!==void 0?A:void 0,w=(c=r.createdAt)!==null&&c!==void 0?c:void 0,b=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:T,isAnonymous:V,providerData:j,stsTokenManager:L}=r;Ot(N&&L,e,"internal-error");const S=ld.fromJSON(this.name,L);Ot(typeof N=="string",e,"internal-error"),kA(f,e.name),kA(g,e.name),Ot(typeof T=="boolean",e,"internal-error"),Ot(typeof V=="boolean",e,"internal-error"),kA(p,e.name),kA(y,e.name),kA(C,e.name),kA(B,e.name),kA(w,e.name),kA(b,e.name);const I=new Wo({uid:N,auth:e,email:g,emailVerified:T,displayName:f,isAnonymous:V,photoURL:y,phoneNumber:p,tenantId:C,stsTokenManager:S,createdAt:w,lastLoginAt:b});return j&&Array.isArray(j)&&(I.providerData=j.map(R=>Object.assign({},R))),B&&(I._redirectEventId=B),I}static async _fromIdTokenResponse(e,r,n=!1){const s=new ld;s.updateFromServerResponse(r);const i=new Wo({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await x0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ot(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?H4(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new ld;o.updateFromIdToken(n);const A=new Wo({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new A2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(A,c),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function Xo(t){uA(t instanceof Function,"Expected a class definition");let e=z_.get(t);return e?(uA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}V4.type="NONE";const $_=V4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e,r){return`firebase:${t}:${e}:${r}`}class cd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Ug(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ug("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new cd(Xo($_),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Xo($_);const a=Ug(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const f=Wo._fromJSON(e,u);c!==i&&(o=f),i=c;break}}catch{}const A=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!A.length?new cd(i,e,n):(i=A[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new cd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W4(e))return"Blackberry";if(X4(e))return"Webos";if(G4(e))return"Safari";if((e.includes("chrome/")||q4(e))&&!e.includes("edge/"))return"Chrome";if($4(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function K4(t=Jn()){return/firefox\//i.test(t)}function G4(t=Jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q4(t=Jn()){return/crios\//i.test(t)}function z4(t=Jn()){return/iemobile/i.test(t)}function $4(t=Jn()){return/android/i.test(t)}function W4(t=Jn()){return/blackberry/i.test(t)}function X4(t=Jn()){return/webos/i.test(t)}function xb(t=Jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Zj(t=Jn()){var e;return xb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eO(){return w6()&&document.documentMode===10}function Y4(t=Jn()){return xb(t)||$4(t)||X4(t)||W4(t)||/windows phone/i.test(t)||z4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t,e=[]){let r;switch(t){case"Browser":r=W_(Jn());break;case"Worker":r=`${W_(Jn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Dd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const A=e(i);a(A)}catch(A){o(A)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e={}){return Ol(t,"GET","/v2/passwordPolicy",jl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=6;class sO{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:nO,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=(r=A.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),A.isValid&&(A.isValid=(n=A.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),A.isValid&&(A.isValid=(s=A.containsLowercaseLetter)!==null&&s!==void 0?s:!0),A.isValid&&(A.isValid=(i=A.containsUppercaseLetter)!==null&&i!==void 0?i:!0),A.isValid&&(A.isValid=(a=A.containsNumericCharacter)!==null&&a!==void 0?a:!0),A.isValid&&(A.isValid=(o=A.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),A}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X_(this),this.idTokenSubscription=new X_(this),this.beforeStateQueue=new tO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Xo(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await cd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await M4(this,{idToken:e}),n=await Wo._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ao(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,A=await this.tryRedirectSignIn(e);(!a||a===o)&&(A!=null&&A.user)&&(s=A.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await x0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Dj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ao(this.app))return Promise.reject(eA(this));const r=e?xn(e):null;return r&&Ot(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ao(this.app)?Promise.reject(eA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ao(this.app)?Promise.reject(eA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rO(this),r=new sO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Jj(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Xo(e)||this._popupRedirectResolver;Ot(r,this,"argument-error"),this.redirectPersistenceManager=await cd.create(this,[Xo(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const A=e.addObserver(r,n,s);return()=>{a=!0,A()}}else{const A=e.addObserver(r);return()=>{a=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Pj(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Yc(t){return xn(t)}class X_{constructor(e){this.auth=e,this.observer=null,this.addObserver=C6(r=>this.observer=r)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aO(t){yw=t}function Z4(t){return yw.loadJS(t)}function oO(){return yw.recaptchaEnterpriseScript}function AO(){return yw.gapiScript}function lO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const cO="recaptcha-enterprise",uO="NO_RECAPTCHA";class dO{constructor(e){this.type=cO,this.auth=Yc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{Kj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new Vj(A);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(A=>{o(A)})})}function s(i,a,o){const A=window.grecaptcha;G_(A)?A.enterprise.ready(()=>{A.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(uO)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&G_(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=oO();A.length!==0&&(A+=o),Z4(A).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Y_(t,e,r,n=!1){const s=new dO(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function l2(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Y_(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Y_(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e){const r=mb(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(B0(i,e??{}))return s;Ta(s,"already-initialized")}return r.initialize({options:e})}function fO(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Xo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function pO(t,e,r){const n=Yc(t);Ot(n._canInitEmulator,n,"emulator-config-failed"),Ot(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=eT(e),{host:a,port:o}=mO(e),A=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${A}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),gO()}function eT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mO(t){const e=eT(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:J_(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:J_(a)}}}function J_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return $o("not implemented")}_getIdTokenResponse(e){return $o("not implemented")}_linkToIdToken(e,r){return $o("not implemented")}_getReauthenticationResolver(e){return $o("not implemented")}}async function wO(t,e){return Ol(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t,e){return Ip(t,"POST","/v1/accounts:signInWithPassword",jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(t,e){return Ip(t,"POST","/v1/accounts:signInWithEmailLink",jl(t,e))}async function BO(t,e){return Ip(t,"POST","/v1/accounts:signInWithEmailLink",jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends Cb{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Xf(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Xf(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l2(e,r,"signInWithPassword",vO);case"emailLink":return yO(e,{email:this._email,oobCode:this._password});default:Ta(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l2(e,n,"signUpPassword",wO);case"emailLink":return BO(e,{idToken:r,email:this._email,oobCode:this._password});default:Ta(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(t,e){return Ip(t,"POST","/v1/accounts:signInWithIdp",jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="http://localhost";class jc extends Cb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new jc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ta("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=vb(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new jc(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return ud(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ud(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ud(e,r)}buildRequest(){const e={requestUri:bO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=_p(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CO(t){const e=Vh(Kh(t)).link,r=e?Vh(Kh(e)).deep_link_id:null,n=Vh(Kh(t)).deep_link_id;return(n?Vh(Kh(n)).link:null)||n||r||e||t}class _b{constructor(e){var r,n,s,i,a,o;const A=Vh(Kh(e)),c=(r=A.apiKey)!==null&&r!==void 0?r:null,u=(n=A.oobCode)!==null&&n!==void 0?n:null,f=xO((s=A.mode)!==null&&s!==void 0?s:null);Ot(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(i=A.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=A.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=A.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=CO(e);try{return new _b(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this.providerId=jd.PROVIDER_ID}static credential(e,r){return Xf._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=_b.parseLink(r);return Ot(n,"argument-error"),Xf._fromEmailAndCode(e,n.code,n.tenantId)}}jd.PROVIDER_ID="password";jd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends tT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA extends Np{constructor(){super("facebook.com")}static credential(e){return jc._fromParams({providerId:XA.PROVIDER_ID,signInMethod:XA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return XA.credentialFromTaggedObject(e)}static credentialFromError(e){return XA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return XA.credential(e.oauthAccessToken)}catch{return null}}}XA.FACEBOOK_SIGN_IN_METHOD="facebook.com";XA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA extends Np{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return jc._fromParams({providerId:YA.PROVIDER_ID,signInMethod:YA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return YA.credentialFromTaggedObject(e)}static credentialFromError(e){return YA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return YA.credential(r,n)}catch{return null}}}YA.GOOGLE_SIGN_IN_METHOD="google.com";YA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA extends Np{constructor(){super("github.com")}static credential(e){return jc._fromParams({providerId:JA.PROVIDER_ID,signInMethod:JA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return JA.credentialFromTaggedObject(e)}static credentialFromError(e){return JA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return JA.credential(e.oauthAccessToken)}catch{return null}}}JA.GITHUB_SIGN_IN_METHOD="github.com";JA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA extends Np{constructor(){super("twitter.com")}static credential(e,r){return jc._fromParams({providerId:ZA.PROVIDER_ID,signInMethod:ZA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ZA.credentialFromTaggedObject(e)}static credentialFromError(e){return ZA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ZA.credential(r,n)}catch{return null}}}ZA.TWITTER_SIGN_IN_METHOD="twitter.com";ZA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(t,e){return Ip(t,"POST","/v1/accounts:signUp",jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Wo._fromIdTokenResponse(e,n,s),a=Z_(n);return new Oc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Z_(n);return new Oc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Z_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends pA{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,C0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new C0(e,r,n,s)}}function rT(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?C0._fromErrorAndOperation(t,i,e,n):i})}async function EO(t,e,r=!1){const n=await Wf(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Oc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e,r=!1){const{auth:n}=t;if(Ao(n.app))return Promise.reject(eA(n));const s="reauthenticate";try{const i=await Wf(t,rT(n,s,e,t),r);Ot(i.idToken,n,"internal-error");const a=bb(i.idToken);Ot(a,n,"internal-error");const{sub:o}=a;return Ot(t.uid===o,n,"user-mismatch"),Oc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ta(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(t,e,r=!1){if(Ao(t.app))return Promise.reject(eA(t));const n="signIn",s=await rT(t,n,e),i=await Oc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function NO(t,e){return nT(Yc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(t){const e=Yc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SO(t,e,r){if(Ao(t.app))return Promise.reject(eA(t));const n=Yc(t),a=await l2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_O).catch(A=>{throw A.code==="auth/password-does-not-meet-requirements"&&sT(t),A}),o=await Oc._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function FO(t,e,r){return Ao(t.app)?Promise.reject(eA(t)):NO(xn(t),jd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&sT(t),n})}function TO(t,e,r,n){return xn(t).onIdTokenChanged(e,r,n)}function UO(t,e,r){return xn(t).beforeAuthStateChanged(e,r)}function iT(t,e,r,n){return xn(t).onAuthStateChanged(e,r,n)}function aT(t){return xn(t).signOut()}const _0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(_0,"1"),this.storage.removeItem(_0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=1e3,LO=10;class AT extends oT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);eO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LO):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}AT.type="LOCAL";const PO=AT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT extends oT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}lT.type="SESSION";const cT=lT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Bw(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),A=await kO(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:A})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,A)=>{const c=Eb("",20);s.port1.start();const u=setTimeout(()=>{A(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const g=f;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(g.data.response);break;default:clearTimeout(u),clearTimeout(i),A(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(){return window}function DO(t){mo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){return typeof mo().WorkerGlobalScope<"u"&&typeof mo().importScripts=="function"}async function jO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MO(){return uT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebaseLocalStorageDb",HO=1,E0="firebaseLocalStorage",hT="fbase_key";class Sp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function bw(t,e){return t.transaction([E0],e?"readwrite":"readonly").objectStore(E0)}function VO(){const t=indexedDB.deleteDatabase(dT);return new Sp(t).toPromise()}function c2(){const t=indexedDB.open(dT,HO);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(E0,{keyPath:hT})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(E0)?e(n):(n.close(),await VO(),e(await c2()))})})}async function e5(t,e,r){const n=bw(t,!0).put({[hT]:e,value:r});return new Sp(n).toPromise()}async function KO(t,e){const r=bw(t,!1).get(e),n=await new Sp(r).toPromise();return n===void 0?null:n.value}function t5(t,e){const r=bw(t,!0).delete(e);return new Sp(r).toPromise()}const GO=800,qO=3;class fT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await c2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>qO)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bw._getInstance(MO()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await jO(),!this.activeServiceWorker)return;this.sender=new RO(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await c2();return await e5(e,_0,"1"),await t5(e,_0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>e5(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>KO(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>t5(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bw(s,!1).getAll();return new Sp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fT.type="LOCAL";const zO=fT;new Ep(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t,e){return e?Xo(e):(Ot(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib extends Cb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ud(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ud(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ud(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function WO(t){return nT(t.auth,new Ib(t),t.bypassAuthState)}function XO(t){const{auth:e,user:r}=t;return Ot(r,e,"internal-error"),IO(r,new Ib(t),t.bypassAuthState)}async function YO(t){const{auth:e,user:r}=t;return Ot(r,e,"internal-error"),EO(r,new Ib(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WO;case"linkViaPopup":case"linkViaRedirect":return YO;case"reauthViaPopup":case"reauthViaRedirect":return XO;default:Ta(this.auth,"internal-error")}}resolve(e){uA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){uA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new Ep(2e3,1e4);class td extends pT{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,td.currentPopupAction&&td.currentPopupAction.cancel(),td.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ot(e,this.auth,"internal-error"),e}async onExecution(){uA(this.filter.length===1,"Popup operations only handle one event");const e=Eb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(po(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(po(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,td.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(po(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JO.get())};e()}}td.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="pendingRedirect",Qg=new Map;class eM extends pT{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Qg.get(this.auth._key());if(!e){try{const n=await tM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Qg.set(this.auth._key(),e)}return this.bypassAuthState||Qg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tM(t,e){const r=sM(e),n=nM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function rM(t,e){Qg.set(t._key(),e)}function nM(t){return Xo(t._redirectPersistence)}function sM(t){return Ug(ZO,t.config.apiKey,t.name)}async function iM(t,e,r=!1){if(Ao(t.app))return Promise.reject(eA(t));const n=Yc(t),s=$O(n,e),a=await new eM(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=10*60*1e3;class oM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!mT(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(po(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aM&&this.cachedEventUids.clear(),this.cachedEventUids.has(r5(e))}saveEventToCache(e){this.cachedEventUids.add(r5(e)),this.lastProcessedEventTime=Date.now()}}function r5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e={}){return Ol(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uM=/^https?/;async function dM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lM(t);for(const r of e)try{if(hM(r))return}catch{}Ta(t,"unauthorized-domain")}function hM(t){const e=o2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!uM.test(r))return!1;if(cM.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new Ep(3e4,6e4);function n5(){const t=mo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function pM(t){return new Promise((e,r)=>{var n,s,i;function a(){n5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n5(),r(po(t,"network-request-failed"))},timeout:fM.get()})}if(!((s=(n=mo().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mo().gapi)===null||i===void 0)&&i.load)a();else{const o=lO("iframefcb");return mo()[o]=()=>{gapi.load?a():r(po(t,"network-request-failed"))},Z4(`${AO()}?onload=${o}`).catch(A=>r(A))}}).catch(e=>{throw Lg=null,e})}let Lg=null;function mM(t){return Lg=Lg||pM(t),Lg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new Ep(5e3,15e3),wM="__/auth/iframe",vM="emulator/auth/iframe",yM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bM(t){const e=t.config;Ot(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Bb(e,vM):`https://${t.config.authDomain}/${wM}`,n={apiKey:e.apiKey,appName:t.name,v:Dd},s=BM.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${_p(n).slice(1)}`}async function xM(t){const e=await mM(t),r=mo().gapi;return Ot(r,t,"internal-error"),e.open({where:document.body,url:bM(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yM,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=po(t,"network-request-failed"),o=mo().setTimeout(()=>{i(a)},gM.get());function A(){mo().clearTimeout(o),s(n)}n.ping(A).then(A,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_M=500,EM=600,IM="_blank",NM="http://localhost";class s5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SM(t,e,r,n=_M,s=EM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const A=Object.assign(Object.assign({},CM),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Jn().toLowerCase();r&&(o=q4(c)?IM:r),K4(c)&&(e=e||NM,A.scrollbars="yes");const u=Object.entries(A).reduce((g,[p,y])=>`${g}${p}=${y},`,"");if(Zj(c)&&o!=="_self")return FM(e||"",o),new s5(null);const f=window.open(e||"",o,u);Ot(f,t,"popup-blocked");try{f.focus()}catch{}return new s5(f)}function FM(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="__/auth/handler",UM="emulator/auth/handler",QM=encodeURIComponent("fac");async function i5(t,e,r,n,s,i){Ot(t.config.authDomain,t,"auth-domain-config-required"),Ot(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Dd,eventId:s};if(e instanceof tT){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",x6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))a[u]=f}if(e instanceof Np){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const A=await t._getAppCheckToken(),c=A?`#${QM}=${encodeURIComponent(A)}`:"";return`${LM(t)}?${_p(o).slice(1)}${c}`}function LM({config:t}){return t.emulator?Bb(t,UM):`https://${t.authDomain}/${TM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="webStorageSupport";class PM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cT,this._completeRedirectFn=iM,this._overrideRedirectResult=rM}async _openPopup(e,r,n,s){var i;uA((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await i5(e,r,n,o2(),s);return SM(e,a,Eb())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await i5(e,r,n,o2(),s);return DO(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(uA(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await xM(e),n=new oM(e);return r.register("authEvent",s=>(Ot(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(oy,{type:oy},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[oy];a!==void 0&&r(!!a),Ta(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=dM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Y4()||G4()||xb()}}const kM=PM;var a5="@firebase/auth",o5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jM(t){bd(new Dc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Ot(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const A={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J4(t)},c=new iO(n,s,i,A);return fO(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),bd(new Dc("auth-internal",e=>{const r=Yc(e.getProvider("auth").getImmediate());return(n=>new RM(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),yl(a5,o5,DM(t)),yl(a5,o5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=5*60,MM=N4("authIdTokenMaxAge")||OM;let A5=null;const HM=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>MM)return;const s=r==null?void 0:r.token;A5!==s&&(A5=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gT(t=wb()){const e=mb(t,"auth");if(e.isInitialized())return e.getImmediate();const r=hO(t,{popupRedirectResolver:kM,persistence:[zO,PO,cT]}),n=N4("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=HM(i.toString());UO(r,a,()=>a(r.currentUser)),TO(r,o=>a(o))}}const s=E4("auth");return s&&pO(r,`http://${s}`),r}function VM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aO({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=po("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",VM().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jM("Browser");var KM="firebase",GM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yl(KM,GM,"app");var l5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ec,wT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,S){function I(){}I.prototype=S.prototype,L.D=S.prototype,L.prototype=new I,L.prototype.constructor=L,L.C=function(R,F,E){for(var U=Array(arguments.length-2),K=2;K<arguments.length;K++)U[K-2]=arguments[K];return S.prototype[F].apply(R,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,S,I){I||(I=0);var R=Array(16);if(typeof S=="string")for(var F=0;16>F;++F)R[F]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(F=0;16>F;++F)R[F]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=L.g[0],I=L.g[1],F=L.g[2];var E=L.g[3],U=S+(E^I&(F^E))+R[0]+3614090360&4294967295;S=I+(U<<7&4294967295|U>>>25),U=E+(F^S&(I^F))+R[1]+3905402710&4294967295,E=S+(U<<12&4294967295|U>>>20),U=F+(I^E&(S^I))+R[2]+606105819&4294967295,F=E+(U<<17&4294967295|U>>>15),U=I+(S^F&(E^S))+R[3]+3250441966&4294967295,I=F+(U<<22&4294967295|U>>>10),U=S+(E^I&(F^E))+R[4]+4118548399&4294967295,S=I+(U<<7&4294967295|U>>>25),U=E+(F^S&(I^F))+R[5]+1200080426&4294967295,E=S+(U<<12&4294967295|U>>>20),U=F+(I^E&(S^I))+R[6]+2821735955&4294967295,F=E+(U<<17&4294967295|U>>>15),U=I+(S^F&(E^S))+R[7]+4249261313&4294967295,I=F+(U<<22&4294967295|U>>>10),U=S+(E^I&(F^E))+R[8]+1770035416&4294967295,S=I+(U<<7&4294967295|U>>>25),U=E+(F^S&(I^F))+R[9]+2336552879&4294967295,E=S+(U<<12&4294967295|U>>>20),U=F+(I^E&(S^I))+R[10]+4294925233&4294967295,F=E+(U<<17&4294967295|U>>>15),U=I+(S^F&(E^S))+R[11]+2304563134&4294967295,I=F+(U<<22&4294967295|U>>>10),U=S+(E^I&(F^E))+R[12]+1804603682&4294967295,S=I+(U<<7&4294967295|U>>>25),U=E+(F^S&(I^F))+R[13]+4254626195&4294967295,E=S+(U<<12&4294967295|U>>>20),U=F+(I^E&(S^I))+R[14]+2792965006&4294967295,F=E+(U<<17&4294967295|U>>>15),U=I+(S^F&(E^S))+R[15]+1236535329&4294967295,I=F+(U<<22&4294967295|U>>>10),U=S+(F^E&(I^F))+R[1]+4129170786&4294967295,S=I+(U<<5&4294967295|U>>>27),U=E+(I^F&(S^I))+R[6]+3225465664&4294967295,E=S+(U<<9&4294967295|U>>>23),U=F+(S^I&(E^S))+R[11]+643717713&4294967295,F=E+(U<<14&4294967295|U>>>18),U=I+(E^S&(F^E))+R[0]+3921069994&4294967295,I=F+(U<<20&4294967295|U>>>12),U=S+(F^E&(I^F))+R[5]+3593408605&4294967295,S=I+(U<<5&4294967295|U>>>27),U=E+(I^F&(S^I))+R[10]+38016083&4294967295,E=S+(U<<9&4294967295|U>>>23),U=F+(S^I&(E^S))+R[15]+3634488961&4294967295,F=E+(U<<14&4294967295|U>>>18),U=I+(E^S&(F^E))+R[4]+3889429448&4294967295,I=F+(U<<20&4294967295|U>>>12),U=S+(F^E&(I^F))+R[9]+568446438&4294967295,S=I+(U<<5&4294967295|U>>>27),U=E+(I^F&(S^I))+R[14]+3275163606&4294967295,E=S+(U<<9&4294967295|U>>>23),U=F+(S^I&(E^S))+R[3]+4107603335&4294967295,F=E+(U<<14&4294967295|U>>>18),U=I+(E^S&(F^E))+R[8]+1163531501&4294967295,I=F+(U<<20&4294967295|U>>>12),U=S+(F^E&(I^F))+R[13]+2850285829&4294967295,S=I+(U<<5&4294967295|U>>>27),U=E+(I^F&(S^I))+R[2]+4243563512&4294967295,E=S+(U<<9&4294967295|U>>>23),U=F+(S^I&(E^S))+R[7]+1735328473&4294967295,F=E+(U<<14&4294967295|U>>>18),U=I+(E^S&(F^E))+R[12]+2368359562&4294967295,I=F+(U<<20&4294967295|U>>>12),U=S+(I^F^E)+R[5]+4294588738&4294967295,S=I+(U<<4&4294967295|U>>>28),U=E+(S^I^F)+R[8]+2272392833&4294967295,E=S+(U<<11&4294967295|U>>>21),U=F+(E^S^I)+R[11]+1839030562&4294967295,F=E+(U<<16&4294967295|U>>>16),U=I+(F^E^S)+R[14]+4259657740&4294967295,I=F+(U<<23&4294967295|U>>>9),U=S+(I^F^E)+R[1]+2763975236&4294967295,S=I+(U<<4&4294967295|U>>>28),U=E+(S^I^F)+R[4]+1272893353&4294967295,E=S+(U<<11&4294967295|U>>>21),U=F+(E^S^I)+R[7]+4139469664&4294967295,F=E+(U<<16&4294967295|U>>>16),U=I+(F^E^S)+R[10]+3200236656&4294967295,I=F+(U<<23&4294967295|U>>>9),U=S+(I^F^E)+R[13]+681279174&4294967295,S=I+(U<<4&4294967295|U>>>28),U=E+(S^I^F)+R[0]+3936430074&4294967295,E=S+(U<<11&4294967295|U>>>21),U=F+(E^S^I)+R[3]+3572445317&4294967295,F=E+(U<<16&4294967295|U>>>16),U=I+(F^E^S)+R[6]+76029189&4294967295,I=F+(U<<23&4294967295|U>>>9),U=S+(I^F^E)+R[9]+3654602809&4294967295,S=I+(U<<4&4294967295|U>>>28),U=E+(S^I^F)+R[12]+3873151461&4294967295,E=S+(U<<11&4294967295|U>>>21),U=F+(E^S^I)+R[15]+530742520&4294967295,F=E+(U<<16&4294967295|U>>>16),U=I+(F^E^S)+R[2]+3299628645&4294967295,I=F+(U<<23&4294967295|U>>>9),U=S+(F^(I|~E))+R[0]+4096336452&4294967295,S=I+(U<<6&4294967295|U>>>26),U=E+(I^(S|~F))+R[7]+1126891415&4294967295,E=S+(U<<10&4294967295|U>>>22),U=F+(S^(E|~I))+R[14]+2878612391&4294967295,F=E+(U<<15&4294967295|U>>>17),U=I+(E^(F|~S))+R[5]+4237533241&4294967295,I=F+(U<<21&4294967295|U>>>11),U=S+(F^(I|~E))+R[12]+1700485571&4294967295,S=I+(U<<6&4294967295|U>>>26),U=E+(I^(S|~F))+R[3]+2399980690&4294967295,E=S+(U<<10&4294967295|U>>>22),U=F+(S^(E|~I))+R[10]+4293915773&4294967295,F=E+(U<<15&4294967295|U>>>17),U=I+(E^(F|~S))+R[1]+2240044497&4294967295,I=F+(U<<21&4294967295|U>>>11),U=S+(F^(I|~E))+R[8]+1873313359&4294967295,S=I+(U<<6&4294967295|U>>>26),U=E+(I^(S|~F))+R[15]+4264355552&4294967295,E=S+(U<<10&4294967295|U>>>22),U=F+(S^(E|~I))+R[6]+2734768916&4294967295,F=E+(U<<15&4294967295|U>>>17),U=I+(E^(F|~S))+R[13]+1309151649&4294967295,I=F+(U<<21&4294967295|U>>>11),U=S+(F^(I|~E))+R[4]+4149444226&4294967295,S=I+(U<<6&4294967295|U>>>26),U=E+(I^(S|~F))+R[11]+3174756917&4294967295,E=S+(U<<10&4294967295|U>>>22),U=F+(S^(E|~I))+R[2]+718787259&4294967295,F=E+(U<<15&4294967295|U>>>17),U=I+(E^(F|~S))+R[9]+3951481745&4294967295,L.g[0]=L.g[0]+S&4294967295,L.g[1]=L.g[1]+(F+(U<<21&4294967295|U>>>11))&4294967295,L.g[2]=L.g[2]+F&4294967295,L.g[3]=L.g[3]+E&4294967295}n.prototype.u=function(L,S){S===void 0&&(S=L.length);for(var I=S-this.blockSize,R=this.B,F=this.h,E=0;E<S;){if(F==0)for(;E<=I;)s(this,L,E),E+=this.blockSize;if(typeof L=="string"){for(;E<S;)if(R[F++]=L.charCodeAt(E++),F==this.blockSize){s(this,R),F=0;break}}else for(;E<S;)if(R[F++]=L[E++],F==this.blockSize){s(this,R),F=0;break}}this.h=F,this.o+=S},n.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var S=1;S<L.length-8;++S)L[S]=0;var I=8*this.o;for(S=L.length-8;S<L.length;++S)L[S]=I&255,I/=256;for(this.u(L),L=Array(16),S=I=0;4>S;++S)for(var R=0;32>R;R+=8)L[I++]=this.g[S]>>>R&255;return L};function i(L,S){var I=o;return Object.prototype.hasOwnProperty.call(I,L)?I[L]:I[L]=S(L)}function a(L,S){this.h=S;for(var I=[],R=!0,F=L.length-1;0<=F;F--){var E=L[F]|0;R&&E==S||(I[F]=E,R=!1)}this.g=I}var o={};function A(L){return-128<=L&&128>L?i(L,function(S){return new a([S|0],0>S?-1:0)}):new a([L|0],0>L?-1:0)}function c(L){if(isNaN(L)||!isFinite(L))return f;if(0>L)return B(c(-L));for(var S=[],I=1,R=0;L>=I;R++)S[R]=L/I|0,I*=4294967296;return new a(S,0)}function u(L,S){if(L.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(L.charAt(0)=="-")return B(u(L.substring(1),S));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(S,8)),R=f,F=0;F<L.length;F+=8){var E=Math.min(8,L.length-F),U=parseInt(L.substring(F,F+E),S);8>E?(E=c(Math.pow(S,E)),R=R.j(E).add(c(U))):(R=R.j(I),R=R.add(c(U)))}return R}var f=A(0),g=A(1),p=A(16777216);t=a.prototype,t.m=function(){if(C(this))return-B(this).m();for(var L=0,S=1,I=0;I<this.g.length;I++){var R=this.i(I);L+=(0<=R?R:4294967296+R)*S,S*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(y(this))return"0";if(C(this))return"-"+B(this).toString(L);for(var S=c(Math.pow(L,6)),I=this,R="";;){var F=T(I,S).g;I=w(I,F.j(S));var E=((0<I.g.length?I.g[0]:I.h)>>>0).toString(L);if(I=F,y(I))return E+R;for(;6>E.length;)E="0"+E;R=E+R}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function y(L){if(L.h!=0)return!1;for(var S=0;S<L.g.length;S++)if(L.g[S]!=0)return!1;return!0}function C(L){return L.h==-1}t.l=function(L){return L=w(this,L),C(L)?-1:y(L)?0:1};function B(L){for(var S=L.g.length,I=[],R=0;R<S;R++)I[R]=~L.g[R];return new a(I,~L.h).add(g)}t.abs=function(){return C(this)?B(this):this},t.add=function(L){for(var S=Math.max(this.g.length,L.g.length),I=[],R=0,F=0;F<=S;F++){var E=R+(this.i(F)&65535)+(L.i(F)&65535),U=(E>>>16)+(this.i(F)>>>16)+(L.i(F)>>>16);R=U>>>16,E&=65535,U&=65535,I[F]=U<<16|E}return new a(I,I[I.length-1]&-2147483648?-1:0)};function w(L,S){return L.add(B(S))}t.j=function(L){if(y(this)||y(L))return f;if(C(this))return C(L)?B(this).j(B(L)):B(B(this).j(L));if(C(L))return B(this.j(B(L)));if(0>this.l(p)&&0>L.l(p))return c(this.m()*L.m());for(var S=this.g.length+L.g.length,I=[],R=0;R<2*S;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(var F=0;F<L.g.length;F++){var E=this.i(R)>>>16,U=this.i(R)&65535,K=L.i(F)>>>16,ae=L.i(F)&65535;I[2*R+2*F]+=U*ae,b(I,2*R+2*F),I[2*R+2*F+1]+=E*ae,b(I,2*R+2*F+1),I[2*R+2*F+1]+=U*K,b(I,2*R+2*F+1),I[2*R+2*F+2]+=E*K,b(I,2*R+2*F+2)}for(R=0;R<S;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=S;R<2*S;R++)I[R]=0;return new a(I,0)};function b(L,S){for(;(L[S]&65535)!=L[S];)L[S+1]+=L[S]>>>16,L[S]&=65535,S++}function N(L,S){this.g=L,this.h=S}function T(L,S){if(y(S))throw Error("division by zero");if(y(L))return new N(f,f);if(C(L))return S=T(B(L),S),new N(B(S.g),B(S.h));if(C(S))return S=T(L,B(S)),new N(B(S.g),S.h);if(30<L.g.length){if(C(L)||C(S))throw Error("slowDivide_ only works with positive integers.");for(var I=g,R=S;0>=R.l(L);)I=V(I),R=V(R);var F=j(I,1),E=j(R,1);for(R=j(R,2),I=j(I,2);!y(R);){var U=E.add(R);0>=U.l(L)&&(F=F.add(I),E=U),R=j(R,1),I=j(I,1)}return S=w(L,F.j(S)),new N(F,S)}for(F=f;0<=L.l(S);){for(I=Math.max(1,Math.floor(L.m()/S.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),E=c(I),U=E.j(S);C(U)||0<U.l(L);)I-=R,E=c(I),U=E.j(S);y(E)&&(E=g),F=F.add(E),L=w(L,U)}return new N(F,L)}t.A=function(L){return T(this,L).h},t.and=function(L){for(var S=Math.max(this.g.length,L.g.length),I=[],R=0;R<S;R++)I[R]=this.i(R)&L.i(R);return new a(I,this.h&L.h)},t.or=function(L){for(var S=Math.max(this.g.length,L.g.length),I=[],R=0;R<S;R++)I[R]=this.i(R)|L.i(R);return new a(I,this.h|L.h)},t.xor=function(L){for(var S=Math.max(this.g.length,L.g.length),I=[],R=0;R<S;R++)I[R]=this.i(R)^L.i(R);return new a(I,this.h^L.h)};function V(L){for(var S=L.g.length+1,I=[],R=0;R<S;R++)I[R]=L.i(R)<<1|L.i(R-1)>>>31;return new a(I,L.h)}function j(L,S){var I=S>>5;S%=32;for(var R=L.g.length-I,F=[],E=0;E<R;E++)F[E]=0<S?L.i(E+I)>>>S|L.i(E+I+1)<<32-S:L.i(E+I);return new a(F,L.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,wT=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Ec=a}).apply(typeof l5<"u"?l5:typeof self<"u"?self:typeof window<"u"?window:{});var Em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,Gh,yT,Pg,u2,BT,bT,xT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,P){return h==Array.prototype||h==Object.prototype||(h[_]=P.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Em=="object"&&Em];for(var _=0;_<h.length;++_){var P=h[_];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var n=r(this);function s(h,_){if(_)e:{var P=n;h=h.split(".");for(var X=0;X<h.length-1;X++){var be=h[X];if(!(be in P))break e;P=P[be]}h=h[h.length-1],X=P[h],_=_(X),_!=X&&_!=null&&e(P,h,{configurable:!0,writable:!0,value:_})}}function i(h,_){h instanceof String&&(h+="");var P=0,X=!1,be={next:function(){if(!X&&P<h.length){var Fe=P++;return{value:_(Fe,h[Fe]),done:!1}}return X=!0,{done:!0,value:void 0}}};return be[Symbol.iterator]=function(){return be},be}s("Array.prototype.values",function(h){return h||function(){return i(this,function(_,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function A(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function c(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function u(h,_,P){return h.call.apply(h.bind,arguments)}function f(h,_,P){if(!h)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(be,X),h.apply(_,be)}}return function(){return h.apply(_,arguments)}}function g(h,_,P){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,g.apply(null,arguments)}function p(h,_){var P=Array.prototype.slice.call(arguments,1);return function(){var X=P.slice();return X.push.apply(X,arguments),h.apply(this,X)}}function y(h,_){function P(){}P.prototype=_.prototype,h.aa=_.prototype,h.prototype=new P,h.prototype.constructor=h,h.Qb=function(X,be,Fe){for(var Ve=Array(arguments.length-2),yr=2;yr<arguments.length;yr++)Ve[yr-2]=arguments[yr];return _.prototype[be].apply(X,Ve)}}function C(h){const _=h.length;if(0<_){const P=Array(_);for(let X=0;X<_;X++)P[X]=h[X];return P}return[]}function B(h,_){for(let P=1;P<arguments.length;P++){const X=arguments[P];if(A(X)){const be=h.length||0,Fe=X.length||0;h.length=be+Fe;for(let Ve=0;Ve<Fe;Ve++)h[be+Ve]=X[Ve]}else h.push(X)}}class w{constructor(_,P){this.i=_,this.j=P,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function b(h){return/^[\s\xa0]*$/.test(h)}function N(){var h=o.navigator;return h&&(h=h.userAgent)?h:""}function T(h){return T[" "](h),h}T[" "]=function(){};var V=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function j(h,_,P){for(const X in h)_.call(P,h[X],X,h)}function L(h,_){for(const P in h)_.call(void 0,h[P],P,h)}function S(h){const _={};for(const P in h)_[P]=h[P];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(h,_){let P,X;for(let be=1;be<arguments.length;be++){X=arguments[be];for(P in X)h[P]=X[P];for(let Fe=0;Fe<I.length;Fe++)P=I[Fe],Object.prototype.hasOwnProperty.call(X,P)&&(h[P]=X[P])}}function F(h){var _=1;h=h.split(":");const P=[];for(;0<_&&h.length;)P.push(h.shift()),_--;return h.length&&P.push(h.join(":")),P}function E(h){o.setTimeout(()=>{throw h},0)}function U(){var h=Y;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class K{constructor(){this.h=this.g=null}add(_,P){const X=ae.get();X.set(_,P),this.h?this.h.next=X:this.g=X,this.h=X}}var ae=new w(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(_,P){this.h=_,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,q=!1,Y=new K,ue=()=>{const h=o.Promise.resolve(void 0);ie=()=>{h.then(pe)}};var pe=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(P){E(P)}var _=ae;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}q=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const P=()=>{};o.addEventListener("test",P,_),o.removeEventListener("test",P,_)}catch{}return h}();function M(h,_){if(W.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var P=this.type=h.type,X=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(V){e:{try{T(_.nodeName);var be=!0;break e}catch{}be=!1}be||(_=null)}}else P=="mouseover"?_=h.fromElement:P=="mouseout"&&(_=h.toElement);this.relatedTarget=_,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Z[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&M.aa.h.call(this)}}y(M,W);var Z={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ce(h,_,P,X,be){this.listener=h,this.proxy=null,this.src=_,this.type=P,this.capture=!!X,this.ha=be,this.key=++oe,this.da=this.fa=!1}function we(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,_,P,X,be){var Fe=h.toString();h=this.g[Fe],h||(h=this.g[Fe]=[],this.h++);var Ve=Ne(h,_,X,be);return-1<Ve?(_=h[Ve],P||(_.fa=!1)):(_=new ce(_,this.src,Fe,!!X,be),_.fa=P,h.push(_)),_};function fe(h,_){var P=_.type;if(P in h.g){var X=h.g[P],be=Array.prototype.indexOf.call(X,_,void 0),Fe;(Fe=0<=be)&&Array.prototype.splice.call(X,be,1),Fe&&(we(_),h.g[P].length==0&&(delete h.g[P],h.h--))}}function Ne(h,_,P,X){for(var be=0;be<h.length;++be){var Fe=h[be];if(!Fe.da&&Fe.listener==_&&Fe.capture==!!P&&Fe.ha==X)return be}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),se={};function wt(h,_,P,X,be){if(Array.isArray(_)){for(var Fe=0;Fe<_.length;Fe++)wt(h,_[Fe],P,X,be);return null}return P=ct(P),h&&h[Ae]?h.K(_,P,c(X)?!!X.capture:!1,be):it(h,_,P,!1,X,be)}function it(h,_,P,X,be,Fe){if(!_)throw Error("Invalid event type");var Ve=c(be)?!!be.capture:!!be,yr=Me(h);if(yr||(h[Ce]=yr=new he(h)),P=yr.add(_,P,X,Ve,Fe),P.proxy)return P;if(X=et(),P.proxy=X,X.src=h,X.listener=P,h.addEventListener)ee||(be=Ve),be===void 0&&(be=!1),h.addEventListener(_.toString(),X,be);else if(h.attachEvent)h.attachEvent(Te(_.toString()),X);else if(h.addListener&&h.removeListener)h.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return P}function et(){function h(P){return _.call(h.src,h.listener,P)}const _=We;return h}function De(h,_,P,X,be){if(Array.isArray(_))for(var Fe=0;Fe<_.length;Fe++)De(h,_[Fe],P,X,be);else X=c(X)?!!X.capture:!!X,P=ct(P),h&&h[Ae]?(h=h.i,_=String(_).toString(),_ in h.g&&(Fe=h.g[_],P=Ne(Fe,P,X,be),-1<P&&(we(Fe[P]),Array.prototype.splice.call(Fe,P,1),Fe.length==0&&(delete h.g[_],h.h--)))):h&&(h=Me(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ne(_,P,X,be)),(P=-1<h?_[h]:null)&&Be(P))}function Be(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ae])fe(_.i,h);else{var P=h.type,X=h.proxy;_.removeEventListener?_.removeEventListener(P,X,h.capture):_.detachEvent?_.detachEvent(Te(P),X):_.addListener&&_.removeListener&&_.removeListener(X),(P=Me(_))?(fe(P,h),P.h==0&&(P.src=null,_[Ce]=null)):we(h)}}}function Te(h){return h in se?se[h]:se[h]="on"+h}function We(h,_){if(h.da)h=!0;else{_=new M(_,this);var P=h.listener,X=h.ha||h.src;h.fa&&Be(h),h=P.call(X,_)}return h}function Me(h){return h=h[Ce],h instanceof he?h:null}var nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(h){return typeof h=="function"?h:(h[nt]||(h[nt]=function(_){return h.handleEvent(_)}),h[nt])}function ze(){D.call(this),this.i=new he(this),this.M=this,this.F=null}y(ze,D),ze.prototype[Ae]=!0,ze.prototype.removeEventListener=function(h,_,P,X){De(this,h,_,P,X)};function Lt(h,_){var P,X=h.F;if(X)for(P=[];X;X=X.F)P.push(X);if(h=h.M,X=_.type||_,typeof _=="string")_=new W(_,h);else if(_ instanceof W)_.target=_.target||h;else{var be=_;_=new W(X,h),R(_,be)}if(be=!0,P)for(var Fe=P.length-1;0<=Fe;Fe--){var Ve=_.g=P[Fe];be=pt(Ve,X,!0,_)&&be}if(Ve=_.g=h,be=pt(Ve,X,!0,_)&&be,be=pt(Ve,X,!1,_)&&be,P)for(Fe=0;Fe<P.length;Fe++)Ve=_.g=P[Fe],be=pt(Ve,X,!1,_)&&be}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var P=h.g[_],X=0;X<P.length;X++)we(P[X]);delete h.g[_],h.h--}}this.F=null},ze.prototype.K=function(h,_,P,X){return this.i.add(String(h),_,!1,P,X)},ze.prototype.L=function(h,_,P,X){return this.i.add(String(h),_,!0,P,X)};function pt(h,_,P,X){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var be=!0,Fe=0;Fe<_.length;++Fe){var Ve=_[Fe];if(Ve&&!Ve.da&&Ve.capture==P){var yr=Ve.listener,tn=Ve.ha||Ve.src;Ve.fa&&fe(h.i,Ve),be=yr.call(tn,X)!==!1&&be}}return be&&!X.defaultPrevented}function At(h,_,P){if(typeof h=="function")P&&(h=g(h,P));else if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:o.setTimeout(h,_||0)}function Qt(h){h.g=At(()=>{h.g=null,h.i&&(h.i=!1,Qt(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class mt extends D{constructor(_,P){super(),this.m=_,this.l=P,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(h){D.call(this),this.h=h,this.g={}}y(tr,D);var Jt=[];function ht(h){j(h.g,function(_,P){this.g.hasOwnProperty(P)&&Be(_)},h),h.g={}}tr.prototype.N=function(){tr.aa.N.call(this),ht(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pt=o.JSON.stringify,hr=o.JSON.parse,Ft=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Se(){}Se.prototype.h=null;function Ge(h){return h.h||(h.h=h.i())}function st(){}var Xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ye(){W.call(this,"d")}y(Ye,W);function Je(){W.call(this,"c")}y(Je,W);var at={},rr=null;function $t(){return rr=rr||new ze}at.La="serverreachability";function vr(h){W.call(this,at.La,h)}y(vr,W);function en(h){const _=$t();Lt(_,new vr(_))}at.STAT_EVENT="statevent";function Ct(h,_){W.call(this,at.STAT_EVENT,h),this.stat=_}y(Ct,W);function Rr(h){const _=$t();Lt(_,new Ct(_,h))}at.Ma="timingevent";function Os(h,_){W.call(this,at.Ma,h),this.size=_}y(Os,W);function jn(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},_)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function Or(h,_,P,X,be,Fe){h.info(function(){if(h.g)if(Fe)for(var Ve="",yr=Fe.split("&"),tn=0;tn<yr.length;tn++){var nr=yr[tn].split("=");if(1<nr.length){var or=nr[0];nr=nr[1];var _r=or.split("_");Ve=2<=_r.length&&_r[1]=="type"?Ve+(or+"="+nr+"&"):Ve+(or+"=redacted&")}}else Ve=null;else Ve=Fe;return"XMLHTTP REQ ("+X+") [attempt "+be+"]: "+_+`
`+P+`
`+Ve})}function ve(h,_,P,X,be,Fe,Ve){h.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+be+"]: "+_+`
`+P+`
`+Fe+" "+Ve})}function He(h,_,P,X){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Zt(h,P)+(X?" "+X:"")})}function ot(h,_){h.info(function(){return"TIMEOUT: "+_})}On.prototype.info=function(){};function Zt(h,_){if(!h.g)return _;if(!_)return null;try{var P=JSON.parse(_);if(P){for(h=0;h<P.length;h++)if(Array.isArray(P[h])){var X=P[h];if(!(2>X.length)){var be=X[1];if(Array.isArray(be)&&!(1>be.length)){var Fe=be[0];if(Fe!="noop"&&Fe!="stop"&&Fe!="close")for(var Ve=1;Ve<be.length;Ve++)be[Ve]=""}}}}return Pt(P)}catch{return _}}var Wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bt;function es(){}y(es,Se),es.prototype.g=function(){return new XMLHttpRequest},es.prototype.i=function(){return{}},bt=new es;function Cn(h,_,P,X){this.j=h,this.i=_,this.l=P,this.R=X||1,this.U=new tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ja}function ja(){this.i=null,this.g="",this.h=!1}var vi={},ua={};function Oa(h,_,P){h.L=1,h.v=_o(Ms(_)),h.m=P,h.P=!0,bo(h,null)}function bo(h,_){h.F=Date.now(),Ma(h),h.A=Ms(h.v);var P=h.A,X=h.R;Array.isArray(X)||(X=[String(X)]),jt(P.i,"t",X),h.C=0,P=h.j.J,h.h=new ja,h.g=pa(h.j,P?_:null,!h.m),0<h.O&&(h.M=new mt(g(h.Y,h,h.g),h.O)),_=h.U,P=h.g,X=h.ca;var be="readystatechange";Array.isArray(be)||(be&&(Jt[0]=be.toString()),be=Jt);for(var Fe=0;Fe<be.length;Fe++){var Ve=wt(P,be[Fe],X||_.handleEvent,!1,_.h||_);if(!Ve)break;_.g[Ve.key]=Ve}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),en(),Or(h.i,h.u,h.A,h.l,h.R,h.m)}Cn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Hs(h)==3?_.j():this.Y(h)},Cn.prototype.Y=function(h){try{if(h==this.g)e:{const _r=Hs(this.g);var _=this.g.Ba();const $i=this.g.Z();if(!(3>_r)&&(_r!=3||this.g&&(this.h.h||this.g.oa()||_A(this.g)))){this.J||_r!=4||_==7||(_==8||0>=$i?en(3):en(2)),gA(this);var P=this.g.Z();this.X=P;t:if(xo(this)){var X=_A(this.g);h="";var be=X.length,Fe=Hs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yi(this),ts(this);var Ve="";break t}this.h.i=new o.TextDecoder}for(_=0;_<be;_++)this.h.h=!0,h+=this.h.i.decode(X[_],{stream:!(Fe&&_==be-1)});X.length=0,this.h.g+=h,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=P==200,ve(this.i,this.u,this.A,this.l,this.R,_r,P),this.o){if(this.T&&!this.K){t:{if(this.g){var yr,tn=this.g;if((yr=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(yr)){var nr=yr;break t}}nr=null}if(P=nr)He(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wA(this,P);else{this.o=!1,this.s=3,Rr(12),yi(this),ts(this);break e}}if(this.P){P=!0;let ds;for(;!this.J&&this.C<Ve.length;)if(ds=Wd(this,Ve),ds==ua){_r==4&&(this.s=4,Rr(14),P=!1),He(this.i,this.l,null,"[Incomplete Response]");break}else if(ds==vi){this.s=4,Rr(15),He(this.i,this.l,Ve,"[Invalid Chunk]"),P=!1;break}else He(this.i,this.l,ds,null),wA(this,ds);if(xo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_r!=4||Ve.length!=0||this.h.h||(this.s=1,Rr(16),P=!1),this.o=this.o&&P,!P)He(this.i,this.l,Ve,"[Invalid Chunked Response]"),yi(this),ts(this);else if(0<Ve.length&&!this.W){this.W=!0;var or=this.j;or.g==this&&or.ba&&!or.M&&(or.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),ur(or),or.M=!0,Rr(11))}}else He(this.i,this.l,Ve,null),wA(this,Ve);_r==4&&yi(this),this.o&&!this.J&&(_r==4?br(this.j,this):(this.o=!1,Ma(this)))}else Vs(this.g),P==400&&0<Ve.indexOf("Unknown SID")?(this.s=3,Rr(12)):(this.s=0,Rr(13)),yi(this),ts(this)}}}catch{}finally{}};function xo(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Wd(h,_){var P=h.C,X=_.indexOf(`
`,P);return X==-1?ua:(P=Number(_.substring(P,X)),isNaN(P)?vi:(X+=1,X+P>_.length?ua:(_=_.slice(X,X+P),h.C=X+P,_)))}Cn.prototype.cancel=function(){this.J=!0,yi(this)};function Ma(h){h.S=Date.now()+h.I,Vl(h,h.I)}function Vl(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=jn(g(h.ba,h),_)}function gA(h){h.B&&(o.clearTimeout(h.B),h.B=null)}Cn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ot(this.i,this.A),this.L!=2&&(en(),Rr(17)),yi(this),this.s=2,ts(this)):Vl(this,this.S-h)};function ts(h){h.j.G==0||h.J||br(h.j,h)}function yi(h){gA(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,ht(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function wA(h,_){try{var P=h.j;if(P.G!=0&&(P.g==h||Ha(P.h,h))){if(!h.K&&Ha(P.h,h)&&P.G==3){try{var X=P.Da.g.parse(_)}catch{X=null}if(Array.isArray(X)&&X.length==3){var be=X;if(be[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<h.F)$r(P),te(P);else break e;Kt(P),Rr(18)}}else P.za=be[1],0<P.za-P.T&&37500>be[2]&&P.F&&P.v==0&&!P.C&&(P.C=jn(g(P.Za,P),6e3));if(1>=zl(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Lr(P,11)}else if((h.K||P.g==h)&&$r(P),!b(_))for(be=P.Da.g.parse(_),_=0;_<be.length;_++){let nr=be[_];if(P.T=nr[0],nr=nr[1],P.G==2)if(nr[0]=="c"){P.K=nr[1],P.ia=nr[2];const or=nr[3];or!=null&&(P.la=or,P.j.info("VER="+P.la));const _r=nr[4];_r!=null&&(P.Aa=_r,P.j.info("SVER="+P.Aa));const $i=nr[5];$i!=null&&typeof $i=="number"&&0<$i&&(X=1.5*$i,P.L=X,P.j.info("backChannelRequestTimeoutMs_="+X)),X=P;const ds=h.g;if(ds){const xi=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var Fe=X.h;Fe.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(Fe.j=Fe.l,Fe.g=new Set,Fe.h&&($l(Fe,Fe.h),Fe.h=null))}if(X.D){const Xa=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(X.ya=Xa,ar(X.I,X.D,Xa))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-h.F,P.j.info("Handshake RTT: "+P.R+"ms")),X=P;var Ve=h;if(X.qa=zi(X,X.J?X.ia:null,X.W),Ve.K){hn(X.h,Ve);var yr=Ve,tn=X.L;tn&&(yr.I=tn),yr.B&&(gA(yr),Ma(yr)),X.g=Ve}else Rt(X);0<P.i.length&&ye(P)}else nr[0]!="stop"&&nr[0]!="close"||Lr(P,7);else P.G==3&&(nr[0]=="stop"||nr[0]=="close"?nr[0]=="stop"?Lr(P,7):O(P):nr[0]!="noop"&&P.l&&P.l.ta(nr),P.v=0)}}en(4)}catch{}}var Kl=class{constructor(h,_){this.g=h,this.map=_}};function Gl(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ql(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function zl(h){return h.h?1:h.g?h.g.size:0}function Ha(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function $l(h,_){h.g?h.g.add(_):h.h=_}function hn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Gl.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Wl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const P of h.g.values())_=_.concat(P.D);return _}return C(h.i)}function au(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(A(h)){for(var _=[],P=h.length,X=0;X<P;X++)_.push(h[X]);return _}_=[],P=0;for(X in h)_[P++]=h[X];return _}function da(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(A(h)||typeof h=="string"){var _=[];h=h.length;for(var P=0;P<h;P++)_.push(P);return _}_=[],P=0;for(const X in h)_[P++]=X;return _}}}function Va(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(A(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var P=da(h),X=au(h),be=X.length,Fe=0;Fe<be;Fe++)_.call(void 0,X[Fe],P&&P[Fe],h)}var ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Co(h,_){if(h){h=h.split("&");for(var P=0;P<h.length;P++){var X=h[P].indexOf("="),be=null;if(0<=X){var Fe=h[P].substring(0,X);be=h[P].substring(X+1)}else Fe=h[P];_(Fe,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function Cr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Cr){this.h=h.h,vA(this,h.j),this.o=h.o,this.g=h.g,yA(this,h.s),this.l=h.l;var _=h.i,P=new ni;P.i=_.i,_.g&&(P.g=new Map(_.g),P.h=_.h),ou(this,P),this.m=h.m}else h&&(_=String(h).match(ti))?(this.h=!1,vA(this,_[1]||"",!0),this.o=Ka(_[2]||""),this.g=Ka(_[3]||"",!0),yA(this,_[4]),this.l=Ka(_[5]||"",!0),ou(this,_[6]||"",!0),this.m=Ka(_[7]||"")):(this.h=!1,this.i=new ni(null,this.h))}Cr.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ri(_,Au,!0),":");var P=this.g;return(P||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ri(_,Au,!0),"@"),h.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&h.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&h.push("/"),h.push(ri(P,P.charAt(0)=="/"?Yd:Xd,!0))),(P=this.i.toString())&&h.push("?",P),(P=this.m)&&h.push("#",ri(P,Eo)),h.join("")};function Ms(h){return new Cr(h)}function vA(h,_,P){h.j=P?Ka(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function yA(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function ou(h,_,P){_ instanceof ni?(h.i=_,Jd(h.i,h.h)):(P||(_=ri(_,Yl)),h.i=new ni(_,h.h))}function ar(h,_,P){h.i.set(_,P)}function _o(h){return ar(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ka(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ri(h,_,P){return typeof h=="string"?(h=encodeURI(h).replace(_,Xl),P&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Xl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Au=/[#\/\?@]/g,Xd=/[#\?:]/g,Yd=/[#\?]/g,Yl=/[#\?@]/g,Eo=/#/g;function ni(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Gi(h){h.g||(h.g=new Map,h.h=0,h.i&&Co(h.i,function(_,P){h.add(decodeURIComponent(_.replace(/\+/g," ")),P)}))}t=ni.prototype,t.add=function(h,_){Gi(this),this.i=null,h=qa(this,h);var P=this.g.get(h);return P||this.g.set(h,P=[]),P.push(_),this.h+=1,this};function Ga(h,_){Gi(h),_=qa(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function BA(h,_){return Gi(h),_=qa(h,_),h.g.has(_)}t.forEach=function(h,_){Gi(this),this.g.forEach(function(P,X){P.forEach(function(be){h.call(_,be,X,this)},this)},this)},t.na=function(){Gi(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),P=[];for(let X=0;X<_.length;X++){const be=h[X];for(let Fe=0;Fe<be.length;Fe++)P.push(_[X])}return P},t.V=function(h){Gi(this);let _=[];if(typeof h=="string")BA(this,h)&&(_=_.concat(this.g.get(qa(this,h))));else{h=Array.from(this.g.values());for(let P=0;P<h.length;P++)_=_.concat(h[P])}return _},t.set=function(h,_){return Gi(this),this.i=null,h=qa(this,h),BA(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function jt(h,_,P){Ga(h,_),0<P.length&&(h.i=null,h.g.set(qa(h,_),C(P)),h.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var P=0;P<_.length;P++){var X=_[P];const Fe=encodeURIComponent(String(X)),Ve=this.V(X);for(X=0;X<Ve.length;X++){var be=Fe;Ve[X]!==""&&(be+="="+encodeURIComponent(String(Ve[X]))),h.push(be)}}return this.i=h.join("&")};function qa(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Jd(h,_){_&&!h.j&&(Gi(h),h.i=null,h.g.forEach(function(P,X){var be=X.toLowerCase();X!=be&&(Ga(this,X),jt(this,be,P))},h)),h.j=_}function Zd(h,_){const P=new On;if(o.Image){const X=new Image;X.onload=p(rs,P,"TestLoadImage: loaded",!0,_,X),X.onerror=p(rs,P,"TestLoadImage: error",!1,_,X),X.onabort=p(rs,P,"TestLoadImage: abort",!1,_,X),X.ontimeout=p(rs,P,"TestLoadImage: timeout",!1,_,X),o.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=h}else _(!1)}function eh(h,_){const P=new On,X=new AbortController,be=setTimeout(()=>{X.abort(),rs(P,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:X.signal}).then(Fe=>{clearTimeout(be),Fe.ok?rs(P,"TestPingServer: ok",!0,_):rs(P,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(be),rs(P,"TestPingServer: error",!1,_)})}function rs(h,_,P,X,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),X(P)}catch{}}function ha(){this.g=new Ft}function th(h,_,P){const X=P||"";try{Va(h,function(be,Fe){let Ve=be;c(be)&&(Ve=Pt(be)),_.push(X+Fe+"="+encodeURIComponent(Ve))})}catch(be){throw _.push(X+"type="+encodeURIComponent("_badmap")),be}}function bA(h){this.l=h.Ub||null,this.j=h.eb||!1}y(bA,Se),bA.prototype.g=function(){return new fa(this.l,this.j)},bA.prototype.i=function(h){return function(){return h}}({});function fa(h,_){ze.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(fa,ze),t=fa.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,qi(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||o).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xA(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function xA(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Bi(this):qi(this),this.readyState==3&&xA(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Bi(this))},t.Qa=function(h){this.g&&(this.response=h,Bi(this))},t.ga=function(){this.g&&Bi(this)};function Bi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,qi(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var P=_.next();!P.done;)P=P.value,h.push(P[0]+": "+P[1]),P=_.next();return h.join(`\r
`)};function qi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Io(h){let _="";return j(h,function(P,X){_+=X,_+=":",_+=P,_+=`\r
`}),_}function Jl(h,_,P){e:{for(X in P){var X=!1;break e}X=!0}X||(P=Io(P),typeof h=="string"?P!=null&&encodeURIComponent(String(P)):ar(h,_,P))}function Qr(h){ze.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Qr,ze);var Zl=/^https?$/i,No=["POST","PUT"];t=Qr.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,P,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bt.g(),this.v=this.o?Ge(this.o):Ge(bt),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Fe){za(this,Fe);return}if(h=P||"",P=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var be in X)P.set(be,X[be]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Fe of X.keys())P.set(Fe,X.get(Fe));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(P.keys()).find(Fe=>Fe.toLowerCase()=="content-type"),be=o.FormData&&h instanceof o.FormData,!(0<=Array.prototype.indexOf.call(No,_,void 0))||X||be||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Fe,Ve]of P)this.g.setRequestHeader(Fe,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wa(this),this.u=!0,this.g.send(h),this.u=!1}catch(Fe){za(this,Fe)}};function za(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,CA(h),$a(h)}function CA(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Lt(this,"complete"),Lt(this,"abort"),$a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),Qr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?So(this):this.bb())},t.bb=function(){So(this)};function So(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Hs(h)!=4||h.Z()!=2)){if(h.u&&Hs(h)==4)At(h.Ea,0,h);else if(Lt(h,"readystatechange"),Hs(h)==4){h.h=!1;try{const Ve=h.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var P;if(!(P=_)){var X;if(X=Ve===0){var be=String(h.D).match(ti)[1]||null;!be&&o.self&&o.self.location&&(be=o.self.location.protocol.slice(0,-1)),X=!Zl.test(be?be.toLowerCase():"")}P=X}if(P)Lt(h,"complete"),Lt(h,"success");else{h.m=6;try{var Fe=2<Hs(h)?h.g.statusText:""}catch{Fe=""}h.l=Fe+" ["+h.Z()+"]",CA(h)}}finally{$a(h)}}}}function $a(h,_){if(h.g){Wa(h);const P=h.g,X=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Lt(h,"ready");try{P.onreadystatechange=X}catch{}}}function Wa(h){h.I&&(o.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Hs(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Hs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),hr(_)}};function _A(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Vs(h){const _={};h=(h.g&&2<=Hs(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<h.length;X++){if(b(h[X]))continue;var P=F(h[X]);const be=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Fe=_[be]||[];_[be]=Fe,Fe.push(P)}L(_,function(X){return X.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(h,_,P){return P&&P.internalChannelParams&&P.internalChannelParams[h]||_}function v(h){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,h),this.cb=_s("retryDelaySeedMs",1e4,h),this.Wa=_s("forwardChannelMaxRetries",2,h),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Gl(h&&h.concurrentRequestLimit),this.Da=new ha,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=v.prototype,t.la=8,t.G=1,t.connect=function(h,_,P,X){Rr(0),this.W=h,this.H=_||{},P&&X!==void 0&&(this.H.OSID=P,this.H.OAID=X),this.F=this.X,this.I=zi(this,null,this.W),ye(this)};function O(h){if(de(h),h.G==3){var _=h.U++,P=Ms(h.I);if(ar(P,"SID",h.K),ar(P,"RID",_),ar(P,"TYPE","terminate"),ut(h,P),_=new Cn(h,h.j,_),_.L=2,_.v=_o(Ms(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(_.v.toString(),"")}catch{}!P&&o.Image&&(new Image().src=_.v,P=!0),P||(_.g=pa(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ma(_)}Mn(h)}function te(h){h.g&&(ur(h),h.g.cancel(),h.g=null)}function de(h){te(h),h.u&&(o.clearTimeout(h.u),h.u=null),$r(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&o.clearTimeout(h.s),h.s=null)}function ye(h){if(!ql(h.h)&&!h.s){h.s=!0;var _=h.Ga;ie||ue(),q||(ie(),q=!0),Y.add(_,h),h.B=0}}function Pe(h,_){return zl(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=jn(g(h.Ga,h,_),gn(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const be=new Cn(this,this.j,h);let Fe=this.o;if(this.S&&(Fe?(Fe=S(Fe),R(Fe,this.S)):Fe=this.S),this.m!==null||this.O||(be.H=Fe,Fe=null),this.P)e:{for(var _=0,P=0;P<this.i.length;P++){t:{var X=this.i[P];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(_+=X,4096<_){_=P;break e}if(_===4096||P===this.i.length-1){_=P+1;break e}}_=1e3}else _=1e3;_=xt(this,be,_),P=Ms(this.I),ar(P,"RID",h),ar(P,"CVER",22),this.D&&ar(P,"X-HTTP-Session-Id",this.D),ut(this,P),Fe&&(this.O?_="headers="+encodeURIComponent(String(Io(Fe)))+"&"+_:this.m&&Jl(P,this.m,Fe)),$l(this.h,be),this.Ua&&ar(P,"TYPE","init"),this.P?(ar(P,"$req",_),ar(P,"SID","null"),be.T=!0,Oa(be,P,null)):Oa(be,P,_),this.G=2}}else this.G==3&&(h?je(this,h):this.i.length==0||ql(this.h)||je(this))};function je(h,_){var P;_?P=_.l:P=h.U++;const X=Ms(h.I);ar(X,"SID",h.K),ar(X,"RID",P),ar(X,"AID",h.T),ut(h,X),h.m&&h.o&&Jl(X,h.m,h.o),P=new Cn(h,h.j,P,h.B+1),h.m===null&&(P.H=h.o),_&&(h.i=_.D.concat(h.i)),_=xt(h,P,1e3),P.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),$l(h.h,P),Oa(P,X,_)}function ut(h,_){h.H&&j(h.H,function(P,X){ar(_,X,P)}),h.l&&Va({},function(P,X){ar(_,X,P)})}function xt(h,_,P){P=Math.min(h.i.length,P);var X=h.l?g(h.l.Na,h.l,h):null;e:{var be=h.i;let Fe=-1;for(;;){const Ve=["count="+P];Fe==-1?0<P?(Fe=be[0].g,Ve.push("ofs="+Fe)):Fe=0:Ve.push("ofs="+Fe);let yr=!0;for(let tn=0;tn<P;tn++){let nr=be[tn].g;const or=be[tn].map;if(nr-=Fe,0>nr)Fe=Math.max(0,be[tn].g-100),yr=!1;else try{th(or,Ve,"req"+nr+"_")}catch{X&&X(or)}}if(yr){X=Ve.join("&");break e}}}return h=h.i.splice(0,P),_.D=h,X}function Rt(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ie||ue(),q||(ie(),q=!0),Y.add(_,h),h.v=0}}function Kt(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=jn(g(h.Fa,h),gn(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Mr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=jn(g(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rr(10),te(this),Mr(this))};function ur(h){h.A!=null&&(o.clearTimeout(h.A),h.A=null)}function Mr(h){h.g=new Cn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Ms(h.qa);ar(_,"RID","rpc"),ar(_,"SID",h.K),ar(_,"AID",h.T),ar(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&ar(_,"TO",h.ja),ar(_,"TYPE","xmlhttp"),ut(h,_),h.m&&h.o&&Jl(_,h.m,h.o),h.L&&(h.g.I=h.L);var P=h.g;h=h.ia,P.L=1,P.v=_o(Ms(_)),P.m=null,P.P=!0,bo(P,h)}t.Za=function(){this.C!=null&&(this.C=null,te(this),Kt(this),Rr(19))};function $r(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function br(h,_){var P=null;if(h.g==_){$r(h),ur(h),h.g=null;var X=2}else if(Ha(h.h,_))P=_.D,hn(h.h,_),X=1;else return;if(h.G!=0){if(_.o)if(X==1){P=_.m?_.m.length:0,_=Date.now()-_.F;var be=h.B;X=$t(),Lt(X,new Os(X,P)),ye(h)}else Rt(h);else if(be=_.s,be==3||be==0&&0<_.X||!(X==1&&Pe(h,_)||X==2&&Kt(h)))switch(P&&0<P.length&&(_=h.h,_.i=_.i.concat(P)),be){case 1:Lr(h,5);break;case 4:Lr(h,10);break;case 3:Lr(h,6);break;default:Lr(h,2)}}}function gn(h,_){let P=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(P*=2),P*_}function Lr(h,_){if(h.j.info("Error code "+_),_==2){var P=g(h.fb,h),X=h.Xa;const be=!X;X=new Cr(X||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vA(X,"https"),_o(X),be?Zd(X.toString(),P):eh(X.toString(),P)}else Rr(2);h.G=0,h.l&&h.l.sa(_),Mn(h),de(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Rr(2)):(this.j.info("Failed to ping google.com"),Rr(1))};function Mn(h){if(h.G=0,h.ka=[],h.l){const _=Wl(h.h);(_.length!=0||h.i.length!=0)&&(B(h.ka,_),B(h.ka,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.ra()}}function zi(h,_,P){var X=P instanceof Cr?Ms(P):new Cr(P);if(X.g!="")_&&(X.g=_+"."+X.g),yA(X,X.s);else{var be=o.location;X=be.protocol,_=_?_+"."+be.hostname:be.hostname,be=+be.port;var Fe=new Cr(null);X&&vA(Fe,X),_&&(Fe.g=_),be&&yA(Fe,be),P&&(Fe.l=P),X=Fe}return P=h.D,_=h.ya,P&&_&&ar(X,P,_),ar(X,"VER",h.la),ut(h,X),X}function pa(h,_,P){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Qr(new bA({eb:P})):new Qr(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lu(){}t=lu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fo(){}Fo.prototype.g=function(h,_){return new _n(h,_)};function _n(h,_){ze.call(this),this.g=new v(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!b(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!b(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new bi(this)}y(_n,ze),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){O(this.g)},_n.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var P={};P.__data__=h,h=P}else this.u&&(P={},P.__data__=Pt(h),h=P);_.i.push(new Kl(_.Ya++,h)),_.G==3&&ye(_)},_n.prototype.N=function(){this.g.l=null,delete this.j,O(this.g),delete this.g,_n.aa.N.call(this)};function si(h){Ye.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const P in _){h=P;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}y(si,Ye);function EA(){Je.call(this),this.status=1}y(EA,Je);function bi(h){this.g=h}y(bi,lu),bi.prototype.ua=function(){Lt(this.g,"a")},bi.prototype.ta=function(h){Lt(this.g,new si(h))},bi.prototype.sa=function(h){Lt(this.g,new EA)},bi.prototype.ra=function(){Lt(this.g,"b")},Fo.prototype.createWebChannel=Fo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,xT=function(){return new Fo},bT=function(){return $t()},BT=at,u2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wt.NO_ERROR=0,Wt.TIMEOUT=8,Wt.HTTP_ERROR=6,Pg=Wt,_t.COMPLETE="complete",yT=_t,st.EventType=Xe,Xe.OPEN="a",Xe.CLOSE="b",Xe.ERROR="c",Xe.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Gh=st,Qr.prototype.listenOnce=Qr.prototype.L,Qr.prototype.getLastError=Qr.prototype.Ka,Qr.prototype.getLastErrorCode=Qr.prototype.Ba,Qr.prototype.getStatus=Qr.prototype.Z,Qr.prototype.getResponseJson=Qr.prototype.Oa,Qr.prototype.getResponseText=Qr.prototype.oa,Qr.prototype.send=Qr.prototype.ea,Qr.prototype.setWithCredentials=Qr.prototype.Ha,vT=Qr}).apply(typeof Em<"u"?Em:typeof self<"u"?self:typeof window<"u"?window:{});const c5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vs.UNAUTHENTICATED=new vs(null),vs.GOOGLE_CREDENTIALS=new vs("google-credentials-uid"),vs.FIRST_PARTY=new vs("first-party-uid"),vs.MOCK_USER=new vs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new fb("@firebase/firestore");function Lu(){return Mc.logLevel}function qe(t,...e){if(Mc.logLevel<=lr.DEBUG){const r=e.map(Nb);Mc.debug(`Firestore (${Od}): ${t}`,...r)}}function Ws(t,...e){if(Mc.logLevel<=lr.ERROR){const r=e.map(Nb);Mc.error(`Firestore (${Od}): ${t}`,...r)}}function Il(t,...e){if(Mc.logLevel<=lr.WARN){const r=e.map(Nb);Mc.warn(`Firestore (${Od}): ${t}`,...r)}}function Nb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t="Unexpected state"){const e=`FIRESTORE (${Od}) INTERNAL ASSERTION FAILED: `+t;throw Ws(e),new Error(e)}function St(t,e){t||Bt()}function Vt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends pA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _T{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(vs.UNAUTHENTICATED))}shutdown(){}}class qM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class zM{constructor(e){this.t=e,this.currentUser=vs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){St(this.o===void 0);let n=this.i;const s=A=>this.i!==n?(n=this.i,r(A)):Promise.resolve();let i=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Na,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const A=i;e.enqueueRetryable(async()=>{await A.promise,await s(this.currentUser)})},o=A=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(A=>o(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Na)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(St(typeof n.accessToken=="string"),new CT(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string"),new vs(e)}}class $M{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=vs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WM{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new $M(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(vs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){St(this.o===void 0);const n=i=>{i.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,qe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(St(typeof r.token=="string"),this.R=r.token,new XM(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=JM(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function zt(t,e){return t<e?-1:t>e?1:0}function xd(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function ET(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new kt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new kt(0,0))}static max(){return new Ut(new kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,r,n){r===void 0?r=0:r>e.length&&Bt(),n===void 0?n=e.length-r:n>e.length-r&&Bt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Yf.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Yf?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Br extends Yf{construct(e,r,n){return new Br(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ze(Qe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Br(r)}static emptyPath(){return new Br([])}}const ZM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends Yf{construct(e,r,n){return new An(e,r,n)}static isValidIdentifier(e){return ZM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new An(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Ze(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Ze(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[s+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new Ze(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=A,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new Ze(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(r)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.path=e}static fromPath(e){return new rt(Br.fromString(e))}static fromName(e){return new rt(Br.fromString(e).popFirst(5))}static empty(){return new rt(Br.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Br.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Br.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new Br(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function d2(t){return t.fields.find(e=>e.kind===2)}function cc(t){return t.fields.filter(e=>e.kind!==2)}I0.UNKNOWN_ID=-1;class kg{constructor(e,r){this.fieldPath=e,this.kind=r}}class Jf{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Jf(0,ji.min())}}function e8(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ut.fromTimestamp(n===1e9?new kt(r+1,0):new kt(r,n));return new ji(s,rt.empty(),e)}function IT(t){return new ji(t.readTime,t.key,-1)}class ji{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ji(Ut.min(),rt.empty(),-1)}static max(){return new ji(Ut.max(),rt.empty(),-1)}}function Fb(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=rt.comparator(t.documentKey,e.documentKey),r!==0?r:zt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ST{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t){if(t.code!==Qe.FAILED_PRECONDITION||t.message!==NT)throw t;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ie((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ie?r:Ie.resolve(r)}catch(r){return Ie.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ie.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ie.reject(r)}static resolve(e){return new Ie((r,n)=>{r(e)})}static reject(e){return new Ie((r,n)=>{n(e)})}static waitFor(e){return new Ie((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},A=>n(A))}),a=!0,i===s&&r()})}static or(e){let r=Ie.resolve(!1);for(const n of e)r=r.next(s=>s?Ie.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ie((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let A=0;A<i;A++){const c=A;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Ie((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Na,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new hf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Tb(n.target.error);this.V.reject(new hf(e,s))}}static open(e,r,n,s){try{return new xw(r,e.transaction(s,n))}catch(i){throw new hf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new r8(r)}}class Bl{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Bl.S(Jn())===12.2&&Ws("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),hc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!F4())return!1;if(Bl.v())return!0;const e=Jn(),r=Bl.S(e),n=0<r&&r<10,s=FT(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(qe("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new hf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new Ze(Qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Ze(Qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new hf(e,a))},s.onupgradeneeded=i=>{qe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{qe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=xw.open(this.db,e,i?"readonly":"readwrite",n),A=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Ie.reject(c))).toPromise();return A.catch(()=>{}),await o.m,A}catch(o){const A=o,c=A.name!=="FirebaseError"&&a<3;if(qe("SimpleDb","Transaction failed with error:",A.message,"Retrying:",c),this.close(),!c)return Promise.reject(A)}}}close(){this.db&&this.db.close(),this.db=void 0}}function FT(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class t8{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return hc(this.B.delete())}}class hf extends Ze{constructor(e,r){super(Qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ml(t){return t.name==="IndexedDbTransactionError"}class r8{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(qe("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),hc(n)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),hc(this.store.add(e))}get(e){return hc(this.store.get(e)).next(r=>(r===void 0&&(r=null),qe("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),hc(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),hc(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Ie((a,o)=>{i.onerror=A=>{o(A.target.error)},i.onsuccess=A=>{a(A.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,A)=>{a.push(A)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ie((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){qe("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Ie((n,s)=>{r.onerror=i=>{const a=Tb(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Ie((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const A=new t8(o),c=r(o.primaryKey,o.value,A);if(c instanceof Ie){const u=c.catch(f=>(A.done(),Ie.reject(f)));n.push(u)}A.isDone?s():A.K===null?o.continue():o.continue(A.K)}}).next(()=>Ie.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function hc(t){return new Ie((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Tb(n.target.error);r(s)}})}let u5=!1;function Tb(t){const e=Bl.S(Jn());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return u5||(u5=!0,setTimeout(()=>{throw n},0)),n}}return t}class n8{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){qe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{qe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Ml(r)?qe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Jc(r)}await this.X(6e4)})}}class s8{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Ie.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return qe("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(qe("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=IT(i);Fb(a,n)>0&&(n=a)}),new ji(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}na.oe=-1;function Fp(t){return t==null}function Zf(t){return t===0&&1/t==-1/0}function i8(t){return typeof t=="number"&&Number.isInteger(t)&&!Zf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=d5(e)),e=a8(t.get(r),e);return d5(e)}function a8(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function d5(t){return t+""}function lo(t){const e=t.length;if(St(e>=2),e===2)return St(t.charAt(0)===""&&t.charAt(1)===""),Br.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&Bt(),t.charAt(a+1)){case"":const o=t.substring(i,a);let A;s.length===0?A=o:(s+=o,A=s,s=""),n.push(A);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:Bt()}i=a+2}return new Br(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,e){return[t,Ys(e)]}function TT(t,e,r){return[t,Ys(e),r]}const o8={},A8=["prefixPath","collectionGroup","readTime","documentId"],l8=["prefixPath","collectionGroup","documentId"],c8=["collectionGroup","readTime","prefixPath","documentId"],u8=["canonicalId","targetId"],d8=["targetId","path"],h8=["path","targetId"],f8=["collectionId","parent"],p8=["indexId","uid"],m8=["uid","sequenceNumber"],g8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],w8=["indexId","uid","orderedDocumentKey"],v8=["userId","collectionPath","documentId"],y8=["userId","collectionPath","largestBatchId"],B8=["userId","collectionGroup","largestBatchId"],UT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],b8=[...UT,"documentOverlays"],QT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LT=QT,Ub=[...LT,"indexConfiguration","indexState","indexEntries"],x8=Ub,C8=[...Ub,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2 extends ST{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Zn(t,e){const r=Vt(t);return Bl.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Zc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function PT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,r){this.comparator=e,this.root=r||ys.EMPTY}insert(e,r){return new un(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ys.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Im(this.root,e,this.comparator,!1)}getReverseIterator(){return new Im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Im(this.root,e,this.comparator,!0)}}class Im{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ys{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ys.RED,this.left=s??ys.EMPTY,this.right=i??ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ys(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ys.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ys.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1;ys.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new ys(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new p5(this.data.getIterator())}getIteratorFrom(e){return new p5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof kr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new kr(this.comparator);return r.data=e,r}}class p5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new fi([])}unionWith(e){let r=new kr(An.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new fi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return xd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kT("Invalid base64 string: "+i):i}}(e);return new Dn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Dn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const _8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dA(t){if(St(!!t),typeof t=="string"){let e=0;const r=_8.exec(t);if(St(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:sn(t.seconds),nanos:sn(t.nanos)}}function sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nl(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Lb(t){const e=t.mapValue.fields.__previous_value__;return Qb(e)?Lb(e):e}function ep(t){const e=dA(t.mapValue.fields.__local_write_time__.timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,r,n,s,i,a,o,A,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=c}}class Sl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dg={nullValue:"NULL_VALUE"};function Hc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qb(t)?4:RT(t)?9007199254740991:Cw(t)?10:11:Bt()}function go(t,e){if(t===e)return!0;const r=Hc(t);if(r!==Hc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ep(t).isEqual(ep(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=dA(s.timestampValue),o=dA(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Nl(s.bytesValue).isEqual(Nl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return sn(s.geoPointValue.latitude)===sn(i.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return sn(s.integerValue)===sn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=sn(s.doubleValue),o=sn(i.doubleValue);return a===o?Zf(a)===Zf(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return xd(t.arrayValue.values||[],e.arrayValue.values||[],go);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(f5(a)!==f5(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!go(a[A],o[A])))return!1;return!0}(t,e);default:return Bt()}}function tp(t,e){return(t.values||[]).find(r=>go(r,e))!==void 0}function Fl(t,e){if(t===e)return 0;const r=Hc(t),n=Hc(e);if(r!==n)return zt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return zt(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=sn(i.integerValue||i.doubleValue),A=sn(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1}(t,e);case 3:return m5(t.timestampValue,e.timestampValue);case 4:return m5(ep(t),ep(e));case 5:return zt(t.stringValue,e.stringValue);case 6:return function(i,a){const o=Nl(i),A=Nl(a);return o.compareTo(A)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),A=a.split("/");for(let c=0;c<o.length&&c<A.length;c++){const u=zt(o[c],A[c]);if(u!==0)return u}return zt(o.length,A.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=zt(sn(i.latitude),sn(a.latitude));return o!==0?o:zt(sn(i.longitude),sn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g5(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,A,c,u;const f=i.fields||{},g=a.fields||{},p=(o=f.value)===null||o===void 0?void 0:o.arrayValue,y=(A=g.value)===null||A===void 0?void 0:A.arrayValue,C=zt(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return C!==0?C:g5(p,y)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===il.mapValue&&a===il.mapValue)return 0;if(i===il.mapValue)return 1;if(a===il.mapValue)return-1;const o=i.fields||{},A=Object.keys(o),c=a.fields||{},u=Object.keys(c);A.sort(),u.sort();for(let f=0;f<A.length&&f<u.length;++f){const g=zt(A[f],u[f]);if(g!==0)return g;const p=Fl(o[A[f]],c[u[f]]);if(p!==0)return p}return zt(A.length,u.length)}(t.mapValue,e.mapValue);default:throw Bt()}}function m5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return zt(t,e);const r=dA(t),n=dA(e),s=zt(r.seconds,n.seconds);return s!==0?s:zt(r.nanos,n.nanos)}function g5(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Fl(r[s],n[s]);if(i)return i}return zt(r.length,n.length)}function Cd(t){return f2(t)}function f2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=dA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Nl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return rt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=f2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${f2(r.fields[a])}`;return s+"}"}(t.mapValue):Bt()}function rp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function p2(t){return!!t&&"integerValue"in t}function np(t){return!!t&&"arrayValue"in t}function w5(t){return!!t&&"nullValue"in t}function v5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jg(t){return!!t&&"mapValue"in t}function Cw(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ff(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ff(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ff(t.arrayValue.values[r]);return e}return Object.assign({},t)}function RT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const DT={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function I8(t){return"nullValue"in t?Dg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?rp(Sl.empty(),rt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Cw(t)?DT:{mapValue:{}}:Bt()}function N8(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?rp(Sl.empty(),rt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?DT:"mapValue"in t?Cw(t)?{mapValue:{}}:il:Bt()}function y5(t,e){const r=Fl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function B5(t,e){const r=Fl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.value=e}static empty(){return new Bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!jg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ff(r)}setAll(e){let r=An.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const A=this.getFieldsMap(r);this.applyChanges(A,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=ff(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());jg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return go(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];jg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Zc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Bs(ff(this.value))}}function jT(t){const e=[];return Zc(t.fields,(r,n)=>{const s=new An([r]);if(jg(n)){const i=jT(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new fi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new on(e,0,Ut.min(),Ut.min(),Ut.min(),Bs.empty(),0)}static newFoundDocument(e,r,n,s){return new on(e,1,r,Ut.min(),n,s,0)}static newNoDocument(e,r){return new on(e,2,r,Ut.min(),Ut.min(),Bs.empty(),0)}static newUnknownDocument(e,r){return new on(e,3,r,Ut.min(),Ut.min(),Bs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,r){this.position=e,this.inclusive=r}}function b5(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=rt.comparator(rt.fromName(a.referenceValue),r.key):n=Fl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function x5(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!go(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,r="asc"){this.field=e,this.dir=r}}function S8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{}class cr extends OT{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new F8(e,r,n):r==="array-contains"?new Q8(e,n):r==="in"?new qT(e,n):r==="not-in"?new L8(e,n):r==="array-contains-any"?new P8(e,n):new cr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new T8(e,n):new U8(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Fl(r,this.value)):r!==null&&Hc(this.value)===Hc(r)&&this.matchesComparison(Fl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends OT{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Tr(e,r)}matches(e){return Ed(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ed(t){return t.op==="and"}function m2(t){return t.op==="or"}function Pb(t){return MT(t)&&Ed(t)}function MT(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function g2(t){if(t instanceof cr)return t.field.canonicalString()+t.op.toString()+Cd(t.value);if(Pb(t))return t.filters.map(e=>g2(e)).join(",");{const e=t.filters.map(r=>g2(r)).join(",");return`${t.op}(${e})`}}function HT(t,e){return t instanceof cr?function(n,s){return s instanceof cr&&n.op===s.op&&n.field.isEqual(s.field)&&go(n.value,s.value)}(t,e):t instanceof Tr?function(n,s){return s instanceof Tr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&HT(a,s.filters[o]),!0):!1}(t,e):void Bt()}function VT(t,e){const r=t.filters.concat(e);return Tr.create(r,t.op)}function KT(t){return t instanceof cr?function(r){return`${r.field.canonicalString()} ${r.op} ${Cd(r.value)}`}(t):t instanceof Tr?function(r){return r.op.toString()+" {"+r.getFilters().map(KT).join(" ,")+"}"}(t):"Filter"}class F8 extends cr{constructor(e,r,n){super(e,r,n),this.key=rt.fromName(n.referenceValue)}matches(e){const r=rt.comparator(e.key,this.key);return this.matchesComparison(r)}}class T8 extends cr{constructor(e,r){super(e,"in",r),this.keys=GT("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class U8 extends cr{constructor(e,r){super(e,"not-in",r),this.keys=GT("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function GT(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>rt.fromName(n.referenceValue))}class Q8 extends cr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return np(r)&&tp(r.arrayValue,this.value)}}class qT extends cr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&tp(this.value.arrayValue,r)}}class L8 extends cr{constructor(e,r){super(e,"not-in",r)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!tp(this.value.arrayValue,r)}}class P8 extends cr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!np(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>tp(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function w2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new k8(t,e,r,n,s,i,a)}function Vc(t){const e=Vt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>g2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Fp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Cd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Cd(n)).join(",")),e.ue=r}return e.ue}function Tp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!S8(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!HT(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x5(t.startAt,e.startAt)&&x5(t.endAt,e.endAt)}function N0(t){return rt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function S0(t,e){return t.filters.filter(r=>r instanceof cr&&r.field.isEqual(e))}function C5(t,e,r){let n=Dg,s=!0;for(const i of S0(t,e)){let a=Dg,o=!0;switch(i.op){case"<":case"<=":a=I8(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Dg}y5({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];y5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function _5(t,e,r){let n=il,s=!0;for(const i of S0(t,e)){let a=il,o=!0;switch(i.op){case">=":case">":a=N8(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=il}B5({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];B5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,A=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=A,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function R8(t,e,r,n,s,i,a,o){return new Md(t,e,r,n,s,i,a,o)}function Up(t){return new Md(t)}function E5(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zT(t){return t.collectionGroup!==null}function pf(t){const e=Vt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new kr(An.comparator);return a.filters.forEach(A=>{A.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new sp(i,n))}),r.has(An.keyField().canonicalString())||e.ce.push(new sp(An.keyField(),n))}return e.ce}function oa(t){const e=Vt(t);return e.le||(e.le=D8(e,pf(t))),e.le}function D8(t,e){if(t.limitType==="F")return w2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sp(s.field,i)});const r=t.endAt?new _d(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new _d(t.startAt.position,t.startAt.inclusive):null;return w2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function v2(t,e){const r=t.filters.concat([e]);return new Md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function F0(t,e,r){return new Md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function _w(t,e){return Tp(oa(t),oa(e))&&t.limitType===e.limitType}function $T(t){return`${Vc(oa(t))}|lt:${t.limitType}`}function Pu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>KT(s)).join(", ")}]`),Fp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Cd(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Cd(s)).join(",")),`Target(${n})`}(oa(t))}; limitType=${t.limitType})`}function Qp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):rt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of pf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,A){const c=b5(a,o,A);return a.inclusive?c<=0:c<0}(n.startAt,pf(n),s)||n.endAt&&!function(a,o,A){const c=b5(a,o,A);return a.inclusive?c>=0:c>0}(n.endAt,pf(n),s))}(t,e)}function j8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WT(t){return(e,r)=>{let n=!1;for(const s of pf(t)){const i=O8(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function O8(t,e,r){const n=t.field.isKeyField()?rt.comparator(e.key,r.key):function(i,a,o){const A=a.data.field(i),c=o.data.field(i);return A!==null&&c!==null?Fl(A,c):Bt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return PT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=new un(rt.comparator);function Pi(){return M8}const XT=new un(rt.comparator);function qh(...t){let e=XT;for(const r of t)e=e.insert(r.key,r);return e}function YT(t){let e=XT;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function co(){return mf()}function JT(){return mf()}function mf(){return new Hl(t=>t.toString(),(t,e)=>t.isEqual(e))}const H8=new un(rt.comparator),V8=new kr(rt.comparator);function er(...t){let e=V8;for(const r of t)e=e.add(r);return e}const K8=new kr(zt);function G8(){return K8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zf(e)?"-0":e}}function ZT(t){return{integerValue:""+t}}function q8(t,e){return i8(e)?ZT(e):kb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this._=void 0}}function z8(t,e,r){return t instanceof ip?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Qb(i)&&(i=Lb(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Id?tU(t,e):t instanceof Nd?rU(t,e):function(s,i){const a=eU(s,i),o=I5(a)+I5(s.Pe);return p2(a)&&p2(s.Pe)?ZT(o):kb(s.serializer,o)}(t,e)}function $8(t,e,r){return t instanceof Id?tU(t,e):t instanceof Nd?rU(t,e):r}function eU(t,e){return t instanceof ap?function(n){return p2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class ip extends Ew{}class Id extends Ew{constructor(e){super(),this.elements=e}}function tU(t,e){const r=nU(e);for(const n of t.elements)r.some(s=>go(s,n))||r.push(n);return{arrayValue:{values:r}}}class Nd extends Ew{constructor(e){super(),this.elements=e}}function rU(t,e){let r=nU(e);for(const n of t.elements)r=r.filter(s=>!go(s,n));return{arrayValue:{values:r}}}class ap extends Ew{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function I5(t){return sn(t.integerValue||t.doubleValue)}function nU(t){return np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,r){this.field=e,this.transform=r}}function X8(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Id&&s instanceof Id||n instanceof Nd&&s instanceof Nd?xd(n.elements,s.elements,go):n instanceof ap&&s instanceof ap?go(n.Pe,s.Pe):n instanceof ip&&s instanceof ip}(t.transform,e.transform)}class Y8{constructor(e,r){this.version=e,this.transformResults=r}}class ln{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Og(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Iw{}function sU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vd(t.key,ln.none()):new Hd(t.key,t.data,ln.none());{const r=t.data,n=Bs.empty();let s=new kr(An.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new mA(t.key,n,new fi(s.toArray()),ln.none())}}function J8(t,e,r){t instanceof Hd?function(s,i,a){const o=s.value.clone(),A=S5(s.fieldTransforms,i,a.transformResults);o.setAll(A),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof mA?function(s,i,a){if(!Og(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=S5(s.fieldTransforms,i,a.transformResults),A=i.data;A.setAll(iU(s)),A.setAll(o),i.convertToFoundDocument(a.version,A).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function gf(t,e,r,n){return t instanceof Hd?function(i,a,o,A){if(!Og(i.precondition,a))return o;const c=i.value.clone(),u=F5(i.fieldTransforms,A,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof mA?function(i,a,o,A){if(!Og(i.precondition,a))return o;const c=F5(i.fieldTransforms,A,a),u=a.data;return u.setAll(iU(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,o){return Og(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function Z8(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=eU(n.transform,s||null);i!=null&&(r===null&&(r=Bs.empty()),r.set(n.field,i))}return r||null}function N5(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&xd(n,s,(i,a)=>X8(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hd extends Iw{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mA extends Iw{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iU(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function S5(t,e,r){const n=new Map;St(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,$8(a,o,r[s]))}return n}function F5(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,z8(i,a,e))}return n}class Vd extends Iw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rb extends Iw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&J8(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=gf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=gf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=JT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const A=sU(a,o);A!==null&&n.set(s.key,A),a.isValidDocument()||a.convertToNoDocument(Ut.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),er())}isEqual(e){return this.batchId===e.batchId&&xd(this.mutations,e.mutations,(r,n)=>N5(r,n))&&xd(this.baseMutations,e.baseMutations,(r,n)=>N5(r,n))}}class jb{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){St(e.mutations.length===n.length);let s=function(){return H8}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new jb(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn,pr;function aU(t){switch(t){default:return Bt();case Qe.CANCELLED:case Qe.UNKNOWN:case Qe.DEADLINE_EXCEEDED:case Qe.RESOURCE_EXHAUSTED:case Qe.INTERNAL:case Qe.UNAVAILABLE:case Qe.UNAUTHENTICATED:return!1;case Qe.INVALID_ARGUMENT:case Qe.NOT_FOUND:case Qe.ALREADY_EXISTS:case Qe.PERMISSION_DENIED:case Qe.FAILED_PRECONDITION:case Qe.ABORTED:case Qe.OUT_OF_RANGE:case Qe.UNIMPLEMENTED:case Qe.DATA_LOSS:return!0}}function oU(t){if(t===void 0)return Ws("GRPC error has no .code"),Qe.UNKNOWN;switch(t){case Hn.OK:return Qe.OK;case Hn.CANCELLED:return Qe.CANCELLED;case Hn.UNKNOWN:return Qe.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return Qe.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return Qe.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return Qe.INTERNAL;case Hn.UNAVAILABLE:return Qe.UNAVAILABLE;case Hn.UNAUTHENTICATED:return Qe.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return Qe.INVALID_ARGUMENT;case Hn.NOT_FOUND:return Qe.NOT_FOUND;case Hn.ALREADY_EXISTS:return Qe.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return Qe.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return Qe.FAILED_PRECONDITION;case Hn.ABORTED:return Qe.ABORTED;case Hn.OUT_OF_RANGE:return Qe.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return Qe.UNIMPLEMENTED;case Hn.DATA_LOSS:return Qe.DATA_LOSS;default:return Bt()}}(pr=Hn||(Hn={}))[pr.OK=0]="OK",pr[pr.CANCELLED=1]="CANCELLED",pr[pr.UNKNOWN=2]="UNKNOWN",pr[pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pr[pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pr[pr.NOT_FOUND=5]="NOT_FOUND",pr[pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",pr[pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",pr[pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",pr[pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pr[pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pr[pr.ABORTED=10]="ABORTED",pr[pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",pr[pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",pr[pr.INTERNAL=13]="INTERNAL",pr[pr.UNAVAILABLE=14]="UNAVAILABLE",pr[pr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=new Ec([4294967295,4294967295],0);function T5(t){const e=tH().encode(t),r=new wT;return r.update(e),new Uint8Array(r.digest())}function U5(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ec([r,n],0),new Ec([s,i],0)]}class Mb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new zh(`Invalid padding: ${r}`);if(n<0)throw new zh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new zh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new zh(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ec.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Ec.fromNumber(n)));return s.compare(rH)===1&&(s=new Ec([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=T5(e),[n,s]=U5(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Mb(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=T5(e),[n,s]=U5(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class zh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Lp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Nw(Ut.min(),s,new un(zt),Pi(),er())}}class Lp{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Lp(n,r,er(),er(),er())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class AU{constructor(e,r){this.targetId=e,this.me=r}}class lU{constructor(e,r,n=Dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class Q5{constructor(){this.fe=0,this.ge=P5(),this.pe=Dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=er(),r=er(),n=er();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Bt()}}),new Lp(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=P5()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,St(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nH{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pi(),this.qe=L5(),this.Qe=new un(zt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Bt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(N0(i))if(n===0){const a=new rt(i.path);this.Ue(r,a,on.newNoDocument(a,Ut.min()))}else St(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),A=o?this.Xe(o,e,a):1;if(A!==0){this.je(r);const c=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=Nl(n).toUint8Array()}catch(A){if(A instanceof kT)return Il("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new Mb(a,s,i)}catch(A){return Il(A instanceof zh?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&N0(o.target)){const A=new rt(o.target.path);this.ke.get(A)!==null||this.it(a,A)||this.Ue(a,A,on.newNoDocument(A,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=er();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(A=>{const c=this.Je(A);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Nw(e,r,this.Qe,this.ke,n);return this.ke=Pi(),this.qe=L5(),this.Qe=new un(zt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Q5,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new kr(zt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||qe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Q5),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function L5(){return new un(rt.comparator)}function P5(){return new un(rt.comparator)}const sH={asc:"ASCENDING",desc:"DESCENDING"},iH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aH={and:"AND",or:"OR"};class oH{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function y2(t,e){return t.useProto3Json||Fp(e)?e:{value:e}}function Sd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AH(t,e){return Sd(t,e.toTimestamp())}function ls(t){return St(!!t),Ut.fromTimestamp(function(r){const n=dA(r);return new kt(n.seconds,n.nanos)}(t))}function Hb(t,e){return B2(t,e).canonicalString()}function B2(t,e){const r=function(s){return new Br(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function uU(t){const e=Br.fromString(t);return St(yU(e)),e}function op(t,e){return Hb(t.databaseId,e.path)}function tA(t,e){const r=uU(e);if(r.get(1)!==t.databaseId.projectId)throw new Ze(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ze(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new rt(fU(r))}function dU(t,e){return Hb(t.databaseId,e)}function hU(t){const e=uU(t);return e.length===4?Br.emptyPath():fU(e)}function b2(t){return new Br(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fU(t){return St(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function k5(t,e,r){return{name:op(t,e),fields:r.value.mapValue.fields}}function lH(t,e,r){const n=tA(t,e.name),s=ls(e.updateTime),i=e.createTime?ls(e.createTime):Ut.min(),a=new Bs({mapValue:{fields:e.fields}}),o=on.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function cH(t,e){return"found"in e?function(n,s){St(!!s.found),s.found.name,s.found.updateTime;const i=tA(n,s.found.name),a=ls(s.found.updateTime),o=s.found.createTime?ls(s.found.createTime):Ut.min(),A=new Bs({mapValue:{fields:s.found.fields}});return on.newFoundDocument(i,a,o,A)}(t,e):"missing"in e?function(n,s){St(!!s.missing),St(!!s.readTime);const i=tA(n,s.missing),a=ls(s.readTime);return on.newNoDocument(i,a)}(t,e):Bt()}function uH(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(St(u===void 0||typeof u=="string"),Dn.fromBase64String(u||"")):(St(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Dn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?Qe.UNKNOWN:oU(c.code);return new Ze(u,c.message||"")}(a);r=new lU(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=tA(t,n.document.name),i=ls(n.document.updateTime),a=n.document.createTime?ls(n.document.createTime):Ut.min(),o=new Bs({mapValue:{fields:n.document.fields}}),A=on.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Mg(c,u,A.key,A)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=tA(t,n.document),i=n.readTime?ls(n.readTime):Ut.min(),a=on.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Mg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=tA(t,n.document),i=n.removedTargetIds||[];r=new Mg([],i,s,null)}else{if(!("filter"in e))return Bt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new eH(s,i),o=n.targetId;r=new AU(o,a)}}return r}function Ap(t,e){let r;if(e instanceof Hd)r={update:k5(t,e.key,e.value)};else if(e instanceof Vd)r={delete:op(t,e.key)};else if(e instanceof mA)r={update:k5(t,e.key,e.data),updateMask:gH(e.fieldMask)};else{if(!(e instanceof Rb))return Bt();r={verify:op(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof ip)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Id)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Nd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ap)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Bt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:AH(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Bt()}(t,e.precondition)),r}function x2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?ln.updateTime(ls(i.updateTime)):i.exists!==void 0?ln.exists(i.exists):ln.none()}(e.currentDocument):ln.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let A=null;if("setToServerValue"in o)St(o.setToServerValue==="REQUEST_TIME"),A=new ip;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];A=new Id(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];A=new Nd(u)}else"increment"in o?A=new ap(a,o.increment):Bt();const c=An.fromServerFormat(o.fieldPath);return new W8(c,A)}(t,s)):[];if(e.update){e.update.name;const s=tA(t,e.update.name),i=new Bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(A){const c=A.fieldPaths||[];return new fi(c.map(u=>An.fromServerFormat(u)))}(e.updateMask);return new mA(s,i,a,r,n)}return new Hd(s,i,r,n)}if(e.delete){const s=tA(t,e.delete);return new Vd(s,r)}if(e.verify){const s=tA(t,e.verify);return new Rb(s,r)}return Bt()}function dH(t,e){return t&&t.length>0?(St(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?ls(s.updateTime):ls(i);return a.isEqual(Ut.min())&&(a=ls(i)),new Y8(a,s.transformResults||[])}(r,e))):[]}function pU(t,e){return{documents:[dU(t,e.path)]}}function mU(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=dU(t,s);const i=function(c){if(c.length!==0)return vU(Tr.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(g){return{field:ku(g.field),direction:fH(g.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=y2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function gU(t){let e=hU(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){St(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(f){const g=wU(f);return g instanceof Tr&&Pb(g)?g.getFilters():[g]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(g=>function(y){return new sp(Ru(y.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g))}(r.orderBy));let o=null;r.limit&&(o=function(f){let g;return g=typeof f=="object"?f.value:f,Fp(g)?null:g}(r.limit));let A=null;r.startAt&&(A=function(f){const g=!!f.before,p=f.values||[];return new _d(p,g)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const g=!f.before,p=f.values||[];return new _d(p,g)}(r.endAt)),R8(e,s,a,i,o,"F",A,c)}function hH(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function wU(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ru(r.unaryFilter.field);return cr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ru(r.unaryFilter.field);return cr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ru(r.unaryFilter.field);return cr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ru(r.unaryFilter.field);return cr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(t):t.fieldFilter!==void 0?function(r){return cr.create(Ru(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Tr.create(r.compositeFilter.filters.map(n=>wU(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Bt()}}(r.compositeFilter.op))}(t):Bt()}function fH(t){return sH[t]}function pH(t){return iH[t]}function mH(t){return aH[t]}function ku(t){return{fieldPath:t.canonicalString()}}function Ru(t){return An.fromServerFormat(t.fieldPath)}function vU(t){return t instanceof cr?function(r){if(r.op==="=="){if(v5(r.value))return{unaryFilter:{field:ku(r.field),op:"IS_NAN"}};if(w5(r.value))return{unaryFilter:{field:ku(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(v5(r.value))return{unaryFilter:{field:ku(r.field),op:"IS_NOT_NAN"}};if(w5(r.value))return{unaryFilter:{field:ku(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(r.field),op:pH(r.op),value:r.value}}}(t):t instanceof Tr?function(r){const n=r.getFilters().map(s=>vU(s));return n.length===1?n[0]:{compositeFilter:{op:mH(r.op),filters:n}}}(t):Bt()}function gH(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function yU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,r,n,s,i=Ut.min(),a=Ut.min(),o=Dn.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(e){return new Yo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.ct=e}}function wH(t,e){let r;if(e.document)r=lH(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=rt.fromSegments(e.noDocument.path),s=Gc(e.noDocument.readTime);r=on.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bt();{const n=rt.fromSegments(e.unknownDocument.path),s=Gc(e.unknownDocument.version);r=on.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new kt(s[0],s[1]);return Ut.fromTimestamp(i)}(e.readTime)),r}function R5(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:T0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:op(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Sd(i,a.version.toTimestamp()),createTime:Sd(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Kc(e.version)};else{if(!e.isUnknownDocument())return Bt();n.unknownDocument={path:r.path.toArray(),version:Kc(e.version)}}return n}function T0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Kc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gc(t){const e=new kt(t.seconds,t.nanoseconds);return Ut.fromTimestamp(e)}function fc(t,e){const r=(e.baseMutations||[]).map(i=>x2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>x2(t.ct,i)),s=kt.fromMillis(e.localWriteTimeMs);return new Db(e.batchId,s,r,n)}function $h(t){const e=Gc(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Gc(t.lastLimboFreeSnapshotVersion):Ut.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return St(i.documents.length===1),oa(Up(hU(i.documents[0])))}(t.query):function(i){return oa(gU(i))}(t.query),new Yo(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Dn.fromBase64String(t.resumeToken))}function bU(t,e){const r=Kc(e.snapshotVersion),n=Kc(e.lastLimboFreeSnapshotVersion);let s;s=N0(e.target)?pU(t.ct,e.target):mU(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vc(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function xU(t){const e=gU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?F0(e,e.limit,"L"):e}function Ay(t,e){return new Ob(e.largestBatchId,x2(t.ct,e.overlayMutation))}function D5(t,e){const r=e.path.lastSegment();return[t,Ys(e.path.popLast()),r]}function j5(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Kc(n.readTime),documentKey:Ys(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{getBundleMetadata(e,r){return O5(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:Gc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return O5(e).put(function(s){return{bundleId:s.id,createTime:Kc(ls(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return M5(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:xU(i.bundledQuery),readTime:Gc(i.readTime)}}(n)})}saveNamedQuery(e,r){return M5(e).put(function(s){return{name:s.name,readTime:Kc(ls(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function O5(t){return Zn(t,"bundles")}function M5(t){return Zn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Sw(e,n)}getOverlay(e,r){return Bh(e).get(D5(this.userId,r)).next(n=>n?Ay(this.serializer,n):null)}getOverlays(e,r){const n=co();return Ie.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Ob(r,a);s.push(this.ht(e,o))}),Ie.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(Ys(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Bh(e).j("collectionPathOverlayIndex",o))}),Ie.waitFor(i)}getOverlaysForCollection(e,r,n){const s=co(),i=Ys(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Bh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const A of o){const c=Ay(this.serializer,A);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=co();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Bh(e).J({index:"collectionGroupOverlayIndex",range:o},(A,c,u)=>{const f=Ay(this.serializer,c);i.size()<s||f.largestBatchId===a?(i.set(f.getKey(),f),a=f.largestBatchId):u.done()}).next(()=>i)}ht(e,r){return Bh(e).put(function(s,i,a){const[o,A,c]=D5(i,a.mutation.key);return{userId:i,collectionPath:A,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ap(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Bh(t){return Zn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{Pt(e){return Zn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Dn.fromUint8Array(n):Dn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(sn(e.integerValue));else if("doubleValue"in e){const n=sn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Zf(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=dA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Nl(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?RT(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Cw(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Bt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(sn(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),rt.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}pc.vt=new pc;function BH(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function H5(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=BH(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class bH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=H5(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=H5(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class xH{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class CH{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class bh{constructor(){this.jt=new bH,this.Ht=new xH(this.jt),this.Jt=new CH(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,n)}}function RA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=V5(t.arrayValue,e.arrayValue),r!==0?r:(r=V5(t.directionalValue,e.directionalValue),r!==0?r:rt.comparator(t.documentKey,e.documentKey)))}function V5(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.Xt=new kr((r,n)=>An.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(St(e.collectionGroup===this.collectionId),this.nn)return!1;const r=d2(e);if(r!==void 0&&!this.sn(r))return!1;const n=cc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const A=n[i];if(!this.on(o,A)||!this._n(this.en[a++],A))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new kr(An.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new kg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new kg(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new kg(n.field,n.dir==="asc"?0:1)));return new I0(I0.UNKNOWN_ID,this.collectionId,r,Jf.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(t){var e,r;if(St(t instanceof cr||t instanceof Tr),t instanceof cr){if(t instanceof qT){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>cr.create(t.field,"==",i)))||[];return Tr.create(s,"or")}return t}const n=t.filters.map(s=>CU(s));return Tr.create(n,t.op)}function _H(t){if(t.getFilters().length===0)return[];const e=E2(CU(t));return St(_U(e)),C2(e)||_2(e)?[e]:e.getFilters()}function C2(t){return t instanceof cr}function _2(t){return t instanceof Tr&&Pb(t)}function _U(t){return C2(t)||_2(t)||function(r){if(r instanceof Tr&&m2(r)){for(const n of r.getFilters())if(!C2(n)&&!_2(n))return!1;return!0}return!1}(t)}function E2(t){if(St(t instanceof cr||t instanceof Tr),t instanceof cr)return t;if(t.filters.length===1)return E2(t.filters[0]);const e=t.filters.map(n=>E2(n));let r=Tr.create(e,t.op);return r=U0(r),_U(r)?r:(St(r instanceof Tr),St(Ed(r)),St(r.filters.length>1),r.filters.reduce((n,s)=>Vb(n,s)))}function Vb(t,e){let r;return St(t instanceof cr||t instanceof Tr),St(e instanceof cr||e instanceof Tr),r=t instanceof cr?e instanceof cr?function(s,i){return Tr.create([s,i],"and")}(t,e):G5(t,e):e instanceof cr?G5(e,t):function(s,i){if(St(s.filters.length>0&&i.filters.length>0),Ed(s)&&Ed(i))return VT(s,i.getFilters());const a=m2(s)?s:i,o=m2(s)?i:s,A=a.filters.map(c=>Vb(c,o));return Tr.create(A,"or")}(t,e),U0(r)}function G5(t,e){if(Ed(e))return VT(e,t.getFilters());{const r=e.filters.map(n=>Vb(t,n));return Tr.create(r,"or")}}function U0(t){if(St(t instanceof cr||t instanceof Tr),t instanceof cr)return t;const e=t.getFilters();if(e.length===1)return U0(e[0]);if(MT(t))return t;const r=e.map(s=>U0(s)),n=[];return r.forEach(s=>{s instanceof cr?n.push(s):s instanceof Tr&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Tr.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(){this.un=new Kb}addToCollectionParentIndex(e,r){return this.un.add(r),Ie.resolve()}getCollectionParents(e,r){return Ie.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ie.resolve()}deleteFieldIndex(e,r){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,r){return Ie.resolve()}getDocumentsMatchingTarget(e,r){return Ie.resolve(null)}getIndexType(e,r){return Ie.resolve(0)}getFieldIndexes(e,r){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,r){return Ie.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,r){return Ie.resolve(ji.min())}updateCollectionGroup(e,r,n){return Ie.resolve()}updateIndexEntries(e,r){return Ie.resolve()}}class Kb{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new kr(Br.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new kr(Br.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=new Uint8Array(0);class IH{constructor(e,r){this.databaseId=r,this.cn=new Kb,this.ln=new Hl(n=>Vc(n),(n,s)=>Tp(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:Ys(s)};return q5(e).put(i)}return Ie.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[ET(r),""],!1,!0);return q5(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(lo(a.parent))}return n})}addFieldIndex(e,r){const n=xh(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=wu(e);return i.next(o=>{a.put(j5(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=xh(e),s=wu(e),i=gu(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=xh(e),n=gu(e),s=wu(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Ie.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new K5(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=gu(e);let s=!0;const i=new Map;return Ie.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=er();const o=[];return Ie.forEach(i,(A,c)=>{qe("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(T=>`${T.fieldPath}:${T.kind}`).join(",")}`}(A)} to execute ${Vc(r)}`);const u=function(N,T){const V=d2(T);if(V===void 0)return null;for(const j of S0(N,V.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(c,A),f=function(N,T){const V=new Map;for(const j of cc(T))for(const L of S0(N,j.fieldPath))switch(L.op){case"==":case"in":V.set(j.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return V.set(j.fieldPath.canonicalString(),L.value),Array.from(V.values())}return null}(c,A),g=function(N,T){const V=[];let j=!0;for(const L of cc(T)){const S=L.kind===0?C5(N,L.fieldPath,N.startAt):_5(N,L.fieldPath,N.startAt);V.push(S.value),j&&(j=S.inclusive)}return new _d(V,j)}(c,A),p=function(N,T){const V=[];let j=!0;for(const L of cc(T)){const S=L.kind===0?_5(N,L.fieldPath,N.endAt):C5(N,L.fieldPath,N.endAt);V.push(S.value),j&&(j=S.inclusive)}return new _d(V,j)}(c,A),y=this.In(A,c,g),C=this.In(A,c,p),B=this.Tn(A,c,f),w=this.En(A.indexId,u,y,g.inclusive,C,p.inclusive,B);return Ie.forEach(w,b=>n.G(b,r.limit).next(N=>{N.forEach(T=>{const V=rt.fromSegments(T.documentKey);a.has(V)||(a=a.add(V),o.push(V))})}))}).next(()=>o)}return Ie.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=_H(Tr.create(e.filters,"and")).map(n=>w2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const A=(r!=null?r.length:1)*Math.max(n.length,i.length),c=A/(r!=null?r.length:1),u=[];for(let f=0;f<A;++f){const g=r?this.dn(r[f/c]):Nm,p=this.An(e,g,n[f%c],s),y=this.Rn(e,g,i[f%c],a),C=o.map(B=>this.An(e,g,B,!0));u.push(...this.createRange(p,y,C))}return u}An(e,r,n,s){const i=new mc(e,rt.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new mc(e,rt.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new K5(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Ie.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(A){let c=new kr(An.comparator),u=!1;for(const f of A.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?u=!0:c=c.add(g.field));for(const f of A.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(u?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new bh;for(const s of cc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);pc.vt.It(i,a)}return n.zt()}dn(e){const r=new bh;return pc.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new bh;return pc.vt.It(rp(this.databaseId,r),n.Yt(function(i){const a=cc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new bh);let i=0;for(const a of cc(e)){const o=n[i++];for(const A of s)if(this.fn(r,a.fieldPath)&&np(o))s=this.gn(s,a,o);else{const c=A.Yt(a.kind);pc.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const A=new bh;A.seed(o.zt()),pc.vt.It(a,A.Yt(r.kind)),i.push(A)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof cr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=xh(e),s=wu(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Ie.forEach(i,o=>s.get([o.indexId,this.uid]).next(A=>{a.push(function(u,f){const g=f?new Jf(f.sequenceNumber,new ji(Gc(f.readTime),new rt(lo(f.documentKey)),f.largestBatchId)):Jf.empty(),p=u.fields.map(([y,C])=>new kg(An.fromServerFormat(y),C));return new I0(u.indexId,u.collectionGroup,p,g)}(o,A))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:zt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=xh(e),i=wu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Ie.forEach(o,A=>i.put(j5(A.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Ie.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Ie.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Ie.forEach(o,A=>this.wn(e,s,A).next(c=>{const u=this.Sn(i,A);return c.isEqual(u)?Ie.resolve():this.bn(e,i,A,c,u)}))))})}Dn(e,r,n,s){return gu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return gu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=gu(e);let i=new kr(RA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new mc(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new kr(RA);const s=this.Vn(r,e);if(s==null)return n;const i=d2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(np(a))for(const o of a.arrayValue.values||[])n=n.add(new mc(r.indexId,e.key,this.dn(o),s))}else n=n.add(new mc(r.indexId,e.key,Nm,s));return n}bn(e,r,n,s,i){qe("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(A,c,u,f,g){const p=A.getIterator(),y=c.getIterator();let C=mu(p),B=mu(y);for(;C||B;){let w=!1,b=!1;if(C&&B){const N=u(C,B);N<0?b=!0:N>0&&(w=!0)}else C!=null?b=!0:w=!0;w?(f(B),B=mu(y)):b?(g(C),C=mu(p)):(C=mu(p),B=mu(y))}}(s,i,RA,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Ie.waitFor(a)}yn(e){let r=1;return wu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>RA(a,o)).filter((a,o,A)=>!o||RA(a,A[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=RA(a,e),A=RA(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&A<0)s.push(a),s.push(a.Zt());else if(A>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Nm,[]],A=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Nm,[]];i.push(IDBKeyRange.bound(o,A))}return i}Cn(e,r){return RA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(z5)}getMinOffset(e,r){return Ie.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Bt())).next(z5)}}function q5(t){return Zn(t,"collectionParents")}function gu(t){return Zn(t,"indexEntries")}function xh(t){return Zn(t,"indexConfiguration")}function wu(t){return Zn(t,"indexState")}function z5(t){St(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Fb(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new ji(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ci{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ci(e,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const A=n.J({range:a},(u,f,g)=>(o++,g.delete()));i.push(A.next(()=>{St(o===1)}));const c=[];for(const u of r.mutations){const f=TT(e,u.key.path,r.batchId);i.push(s.delete(f)),c.push(u.key)}return Ie.waitFor(i).next(()=>c)}function Q0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Bt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci.DEFAULT_COLLECTION_PERCENTILE=10,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ci.DEFAULT=new ci(41943040,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ci.DISABLED=new ci(-1,0,0);class Fw{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){St(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Fw(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return DA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Du(e),a=DA(e);return a.add({}).next(o=>{St(typeof o=="number");const A=new Db(o,r,n,s),c=function(p,y,C){const B=C.baseMutations.map(b=>Ap(p.ct,b)),w=C.mutations.map(b=>Ap(p.ct,b));return{userId:y,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:B,mutations:w}}(this.serializer,this.userId,A),u=[];let f=new kr((g,p)=>zt(g.canonicalString(),p.canonicalString()));for(const g of s){const p=TT(this.userId,g.key.path,o);f=f.add(g.key.path.popLast()),u.push(a.put(c)),u.push(i.put(p,o8))}return f.forEach(g=>{u.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[o]=A.keys()}),Ie.waitFor(u).next(()=>A)})}lookupMutationBatch(e,r){return DA(e).get(r).next(n=>n?(St(n.userId===this.userId),fc(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Ie.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return DA(e).J({index:"userMutationsIndex",range:s},(a,o,A)=>{o.userId===this.userId&&(St(o.batchId>=n),i=fc(this.serializer,o)),A.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return DA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return DA(e).U("userMutationsIndex",r).next(n=>n.map(s=>fc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Rg(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Du(e).J({range:s},(a,o,A)=>{const[c,u,f]=a,g=lo(u);if(c===this.userId&&r.path.isEqual(g))return DA(e).get(f).next(p=>{if(!p)throw Bt();St(p.userId===this.userId),i.push(fc(this.serializer,p))});A.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new kr(zt);const s=[];return r.forEach(i=>{const a=Rg(this.userId,i.path),o=IDBKeyRange.lowerBound(a),A=Du(e).J({range:o},(c,u,f)=>{const[g,p,y]=c,C=lo(p);g===this.userId&&i.path.isEqual(C)?n=n.add(y):f.done()});s.push(A)}),Ie.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=Rg(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new kr(zt);return Du(e).J({range:a},(A,c,u)=>{const[f,g,p]=A,y=lo(g);f===this.userId&&n.isPrefixOf(y)?y.length===s&&(o=o.add(p)):u.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(DA(e).get(i).next(a=>{if(a===null)throw Bt();St(a.userId===this.userId),n.push(fc(this.serializer,a))}))}),Ie.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return EU(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Ie.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ie.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Du(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const A=lo(i[1]);s.push(A)}else o.done()}).next(()=>{St(s.length===0)})})}containsKey(e,r){return IU(e,this.userId,r)}Nn(e){return NU(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IU(t,e,r){const n=Rg(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Du(t).J({range:i,H:!0},(o,A,c)=>{const[u,f,g]=o;u===e&&f===s&&(a=!0),c.done()}).next(()=>a)}function DA(t){return Zn(t,"mutations")}function Du(t){return Zn(t,"documentMutations")}function NU(t){return Zn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qc(0)}static kn(){return new qc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new qc(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Ut.fromTimestamp(new kt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>vu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(St(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return vu(e).J((a,o)=>{const A=$h(o);A.sequenceNumber<=r&&n.get(A.targetId)===null&&(s++,i.push(this.removeTargetData(e,A)))}).next(()=>Ie.waitFor(i)).next(()=>s)}forEachTarget(e,r){return vu(e).J((n,s)=>{const i=$h(s);r(i)})}qn(e){return W5(e).get("targetGlobalKey").next(r=>(St(r!==null),r))}Qn(e,r){return W5(e).put("targetGlobalKey",r)}Kn(e,r){return vu(e).put(bU(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Vc(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return vu(e).J({range:s,index:"queryTargetsIndex"},(a,o,A)=>{const c=$h(o);Tp(r,c.target)&&(i=c,A.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=el(e);return r.forEach(a=>{const o=Ys(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Ie.waitFor(s)}removeMatchingKeys(e,r,n){const s=el(e);return Ie.forEach(r,i=>{const a=Ys(i.path);return Ie.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=el(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=el(e);let i=er();return s.J({range:n,H:!0},(a,o,A)=>{const c=lo(a[1]),u=new rt(c);i=i.add(u)}).next(()=>i)}containsKey(e,r){const n=Ys(r.path),s=IDBKeyRange.bound([n],[ET(n)],!1,!0);let i=0;return el(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],A,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return vu(e).get(r).next(n=>n?$h(n):null)}}function vu(t){return Zn(t,"targets")}function W5(t){return Zn(t,"targetGlobal")}function el(t){return Zn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5([t,e],[r,n]){const s=zt(t,r);return s===0?zt(e,n):s}class SH{constructor(e){this.Un=e,this.buffer=new kr(X5),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();X5(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class FH{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ml(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Jc(r)}await this.Hn(3e5)})}}class TH{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ie.resolve(na.oe);const n=new SH(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve($5)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$5):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,A,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,A=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(c=Date.now(),Lu()<=lr.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(A-o)+`ms
	Removed ${f} documents in `+(c-A)+`ms
Total Duration: ${c-u}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function UH(t,e){return new TH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,r){this.db=e,this.garbageCollector=UH(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Sm(e,n)}removeReference(e,r,n){return Sm(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Sm(e,r)}nr(e,r){return function(s,i){let a=!1;return NU(s).Y(o=>IU(s,o,i).next(A=>(A&&(a=!0),Ie.resolve(!A)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const A=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,Ut.min()),el(e).delete(function(f){return[0,Ys(f.path)]}(a))))});s.push(A)}}).next(()=>Ie.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Sm(e,r)}tr(e,r){const n=el(e);let s,i=na.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:A,sequenceNumber:c})=>{a===0?(i!==na.oe&&r(new rt(lo(s)),i),i=c,s=A):i=na.oe}).next(()=>{i!==na.oe&&r(new rt(lo(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sm(t,e){return el(t).put(function(n,s){return{targetId:0,path:Ys(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this.changes=new Hl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ie.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return sc(e).put(n)}removeEntry(e,r,n){return sc(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],T0(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=on.newInvalidDocument(r);return sc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ch(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:on.newInvalidDocument(r)};return sc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ch(r))},(s,i)=>{n={document:this.ir(r,i),size:Q0(i)}}).next(()=>n)}getEntries(e,r){let n=Pi();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=Pi(),s=new un(rt.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,Q0(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Ie.resolve();let s=new kr(Z5);r.forEach(A=>s=s.add(A));const i=IDBKeyRange.bound(Ch(s.first()),Ch(s.last())),a=s.getIterator();let o=a.getNext();return sc(e).J({index:"documentKeyIndex",range:i},(A,c,u)=>{const f=rt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Z5(o,f)<0;)n(o,null),o=a.getNext();o&&o.isEqual(f)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?u.$(Ch(o)):u.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),T0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],A=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sc(e).U(IDBKeyRange.bound(o,A,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=Pi();for(const f of c){const g=this.ir(rt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Qp(r,g)||s.has(g.key))&&(u=u.insert(g.key,g))}return u})}getAllFromCollectionGroup(e,r,n,s){let i=Pi();const a=J5(r,n),o=J5(r,ji.max());return sc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(A,c,u)=>{const f=this.ir(rt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(f.key,f),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new PH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Y5(e).get("remoteDocumentGlobalKey").next(r=>(St(!!r),r))}rr(e,r){return Y5(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=wH(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ut.min())))return n}return on.newInvalidDocument(e)}}function FU(t){return new LH(t)}class PH extends SU{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Hl(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new kr((i,a)=>zt(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const A=R5(this.cr.serializer,a);s=s.add(i.path.popLast());const c=Q0(A);n+=c-o.size,r.push(this.cr.addEntry(e,i,A))}else if(n-=o.size,this.trackRemovals){const A=R5(this.cr.serializer,a.convertToNoDocument(Ut.min()));r.push(this.cr.addEntry(e,i,A))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Ie.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function Y5(t){return Zn(t,"remoteDocumentGlobal")}function sc(t){return Zn(t,"remoteDocumentsV14")}function Ch(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J5(t,e){const r=e.documentKey.path.toArray();return[t,T0(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Z5(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=zt(r[i],n[i]),s)return s;return s=zt(r.length,n.length),s||(s=zt(r[r.length-2],n[n.length-2]),s||zt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&gf(n.mutation,s,fi.empty(),kt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,er()).next(()=>n))}getLocalViewOfDocuments(e,r,n=er()){const s=co();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=qh();return i.forEach((o,A)=>{a=a.insert(o,A.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=co();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,er()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Pi();const a=mf(),o=function(){return mf()}();return r.forEach((A,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof mA)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),gf(u.mutation,c,u.mutation.getFieldMask(),kt.now())):a.set(c.key,fi.empty())}),this.recalculateAndSaveOverlays(e,i).next(A=>(A.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var f;return o.set(c,new kH(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=mf();let s=new un((a,o)=>a-o),i=er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(A=>{const c=r.get(A);if(c===null)return;let u=n.get(A)||fi.empty();u=o.applyToLocalView(c,u),n.set(A,u);const f=(s.get(o.batchId)||er()).add(A);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),c=A.key,u=A.value,f=JT();u.forEach(g=>{if(!i.has(g)){const p=sU(r.get(g),n.get(g));p!==null&&f.set(g,p),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ie.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return rt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):zT(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ie.resolve(co());let o=-1,A=i;return a.next(c=>Ie.forEach(c,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(u)?Ie.resolve():this.remoteDocumentCache.getEntry(e,u).next(g=>{A=A.insert(u,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,A,c,er())).next(u=>({batchId:o,changes:YT(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new rt(r)).next(n=>{let s=qh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=qh();return this.indexManager.getCollectionParents(e,i).next(o=>Ie.forEach(o,A=>{const c=function(f,g){return new Md(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,A.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((f,g)=>{a=a.insert(f,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((A,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,on.newInvalidDocument(u)))});let o=qh();return a.forEach((A,c)=>{const u=i.get(A);u!==void 0&&gf(u.mutation,c,fi.empty(),kt.now()),Qp(r,c)&&(o=o.insert(A,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ie.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ls(s.createTime)}}(r)),Ie.resolve()}getNamedQuery(e,r){return Ie.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:xU(s.bundledQuery),readTime:ls(s.readTime)}}(r)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(){this.overlays=new un(rt.comparator),this.Ir=new Map}getOverlay(e,r){return Ie.resolve(this.overlays.get(r))}getOverlays(e,r){const n=co();return Ie.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ie.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ie.resolve()}getOverlaysForCollection(e,r,n){const s=co(),i=r.length+1,a=new rt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,c=A.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&A.largestBatchId>n&&s.set(A.getKey(),A)}return Ie.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new un((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=co(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=co(),A=i.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Ie.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Ob(r,n));let i=this.Ir.get(r);i===void 0&&(i=er(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.Tr=new kr(as.Er),this.dr=new kr(as.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new as(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new as(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new rt(new Br([])),n=new as(r,e),s=new as(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new rt(new Br([])),n=new as(r,e),s=new as(r,e+1);let i=er();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new as(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class as{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return rt.comparator(e.key,r.key)||zt(e.wr,r.wr)}static Ar(e,r){return zt(e.wr,r.wr)||rt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new kr(as.Er)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Db(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new as(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ie.resolve(a)}lookupMutationBatch(e,r){return Ie.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new as(r,0),s=new as(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new kr(zt);return r.forEach(s=>{const i=new as(s,0),a=new as(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Ie.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;rt.isDocumentKey(i)||(i=i.child(""));const a=new as(new rt(i),0);let o=new kr(zt);return this.br.forEachWhile(A=>{const c=A.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(A.wr)),!0)},a),Ie.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){St(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ie.forEach(r.mutations,s=>{const i=new as(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new as(r,0),s=this.br.firstAfterOrEqual(n);return Ie.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e){this.Mr=e,this.docs=function(){return new un(rt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ie.resolve(n?n.document.mutableCopy():on.newInvalidDocument(r))}getEntries(e,r){let n=Pi();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():on.newInvalidDocument(s))}),Ie.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Pi();const a=r.path,o=new rt(a.child("")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:c,value:{document:u}}=A.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Fb(IT(u),n)<=0||(s.has(u.key)||Qp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Bt()}Or(e,r){return Ie.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new HH(this)}getSize(e){return Ie.resolve(this.size)}}class HH extends SU{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ie.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e){this.persistence=e,this.Nr=new Hl(r=>Vc(r),Tp),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Gb,this.targetCount=0,this.kr=qc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ie.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new qc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ie.resolve()}updateTargetData(e,r){return this.Kn(r),Ie.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ie.waitFor(i).next(()=>s)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ie.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ie.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ie.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ie.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ie.resolve(n)}containsKey(e,r){return Ie.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,r){this.qr={},this.overlays={},this.Qr=new na(0),this.Kr=!1,this.Kr=!0,this.$r=new jH,this.referenceDelegate=e(this),this.Ur=new VH(this),this.indexManager=new EH,this.remoteDocumentCache=function(s){return new MH(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new BU(r),this.Gr=new RH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new DH,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new OH(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){qe("MemoryPersistence","Starting transaction:",e);const s=new KH(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ie.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class KH extends ST{constructor(e){super(),this.currentSequenceNumber=e}}class Tw{constructor(e){this.persistence=e,this.Jr=new Gb,this.Yr=null}static Zr(e){return new Tw(e)}get Xr(){if(this.Yr)return this.Yr;throw Bt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ie.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ie.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ie.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Xr,n=>{const s=rt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Ut.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ie.or([()=>Ie.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e){this.serializer=e}O(e,r,n,s){const i=new xw("createOrUpgrade",r);n<1&&s>=1&&(function(A){A.createObjectStore("owner")}(e),function(A){A.createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",h5,{unique:!0}),A.createObjectStore("documentMutations")}(e),eE(e),function(A){A.createObjectStore("remoteDocuments")}(e));let a=Ie.resolve();return n<3&&s>=3&&(n!==0&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),eE(e)),a=a.next(()=>function(A){const c=A.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(A,c){return c.store("mutations").U().next(u=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",h5,{unique:!0});const f=c.store("mutations"),g=u.map(p=>f.put(p));return Ie.waitFor(g)})}(e,i))),a=a.next(()=>{(function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(A){const c=A.createObjectStore("documentOverlays",{keyPath:v8});c.createIndex("collectionPathOverlayIndex",y8,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",B8,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(A){const c=A.createObjectStore("remoteDocumentsV14",{keyPath:A8});c.createIndex("documentKeyIndex",l8),c.createIndex("collectionGroupIndex",c8)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:p8}).createIndex("sequenceNumberIndex",m8,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:g8}).createIndex("documentKeyIndex",w8,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(A){A.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Q0(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Ie.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Ie.forEach(o,A=>{St(A.userId===i.userId);const c=fc(this.serializer,A);return EU(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const A=new Br(a),c=function(f){return[0,Ys(f)]}(A);i.push(r.get(c).next(u=>u?Ie.resolve():(f=>r.put({targetId:0,path:Ys(f),sequenceNumber:s.highestListenSequenceNumber}))(A)))}).next(()=>Ie.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:f8});const n=r.store("collectionParents"),s=new Kb,i=a=>{if(s.add(a)){const o=a.lastSegment(),A=a.popLast();return n.put({collectionId:o,parent:Ys(A)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const A=new Br(a);return i(A.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,A],c)=>{const u=lo(o);return i(u.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=$h(s),a=bU(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),A=function(f){return f.document?new rt(Br.fromString(f.document.name).popFirst(5)):f.noDocument?rt.fromSegments(f.noDocument.path):f.unknownDocument?rt.fromSegments(f.unknownDocument.path):Bt()}(a).path.toArray(),c={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Ie.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=FU(this.serializer),i=new UU(Tw.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(A=>{var c;let u=(c=o.get(A.userId))!==null&&c!==void 0?c:er();fc(this.serializer,A).keys().forEach(f=>u=u.add(f)),o.set(A.userId,u)}),Ie.forEach(o,(A,c)=>{const u=new vs(c),f=Sw.lt(this.serializer,u),g=i.getIndexManager(u),p=Fw.lt(u,this.serializer,g,i.referenceDelegate);return new TU(s,p,f,g).recalculateAndSaveOverlaysForDocumentKeys(new h2(r,na.oe),A).next()})})}}function eE(t){t.createObjectStore("targetDocuments",{keyPath:d8}).createIndex("documentTargetsIndex",h8,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u8,{unique:!0}),t.createObjectStore("targetGlobal")}const ly="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qb{constructor(e,r,n,s,i,a,o,A,c,u,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=u,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!qb.D())throw new Ze(Qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QH(this,s),this.Ai=r+"main",this.serializer=new BU(A),this.Ri=new Bl(this.Ai,this.hi,new GH(this.serializer)),this.$r=new yH,this.Ur=new NH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FU(this.serializer),this.Gr=new vH,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&Ws("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(Qe.FAILED_PRECONDITION,ly);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new na(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Ml(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return _h(e).get("owner").next(r=>Ie.resolve(this.vi(r)))}Ci(e){return Fm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Zn(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Ie.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ie.resolve(!0):_h(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Ze(Qe.FAILED_PRECONDITION,ly);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fm(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&qe("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new h2(e,na.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Fm(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Fw.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IH(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sw.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){qe("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(A){return A===17?C8:A===16?x8:A===15?Ub:A===14?LT:A===13?QT:A===12?b8:A===11?UT:void Bt()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new h2(o,this.Qr?this.Qr.next():na.oe),r==="readwrite-primary"?this.wi(a).next(A=>!!A||this.Si(a)).next(A=>{if(!A)throw Ws(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ze(Qe.FAILED_PRECONDITION,NT);return n(a)}).next(A=>this.Di(a).next(()=>A)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return _h(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ze(Qe.FAILED_PRECONDITION,ly)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _h(e).put("owner",r)}static D(){return Bl.D()}bi(e){const r=_h(e);return r.get("owner").next(n=>this.vi(n)?(qe("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ie.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ws(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;S4()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return qe("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ws("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ws("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _h(t){return Zn(t,"owner")}function Fm(t){return Zn(t,"clientMetadata")}function qH(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=er(),s=er();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zb(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return S4()?8:FT(Jn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new zH;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Lu()<=lr.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",Pu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ie.resolve()):(Lu()<=lr.DEBUG&&qe("QueryEngine","Query:",Pu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Lu()<=lr.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",Pu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oa(r))):Ie.resolve())}Yi(e,r){if(E5(r))return Ie.resolve(null);let n=oa(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=F0(r,null,"F"),n=oa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=er(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(A=>{const c=this.ts(r,o);return this.ns(r,c,a,A.readTime)?this.Yi(e,F0(r,null,"F")):this.rs(e,c,r,A)}))})))}Zi(e,r,n,s){return E5(r)||s.isEqual(Ut.min())?Ie.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Ie.resolve(null):(Lu()<=lr.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pu(r)),this.rs(e,a,r,e8(s,-1)).next(o=>o))})}ts(e,r){let n=new kr(WT(e));return r.forEach((s,i)=>{Qp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Lu()<=lr.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",Pu(r)),this.Ji.getDocumentsMatchingQuery(e,r,ji.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new un(zt),this._s=new Hl(i=>Vc(i),Tp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function LU(t,e,r,n){return new $H(t,e,r,n)}async function PU(t,e){const r=Vt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let A=er();for(const c of s){a.push(c.batchId);for(const u of c.mutations)A=A.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)A=A.add(u.key)}return r.localDocuments.getDocuments(n,A).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function WH(t,e){const r=Vt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,A,c,u){const f=c.batch,g=f.keys();let p=Ie.resolve();return g.forEach(y=>{p=p.next(()=>u.getEntry(A,y)).next(C=>{const B=c.docVersions.get(y);St(B!==null),C.version.compareTo(B)<0&&(f.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),u.addEntry(C)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(A,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let A=er();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(A=A.add(o.batch.mutations[c].key));return A}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function kU(t){const e=Vt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function XH(t,e){const r=Vt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,f)=>{const g=s.get(f);if(!g)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,f)));let p=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Dn.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(f,p),function(C,B,w){return C.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,p,u)&&o.push(r.Ur.updateTargetData(i,p))});let A=Pi(),c=er();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(YH(i,a,e.documentUpdates).next(u=>{A=u.Ps,c=u.Is})),!n.isEqual(Ut.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(f=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Ie.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,A,c)).next(()=>A)}).then(i=>(r.os=s,i))}function YH(t,e,r){let n=er(),s=er();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Pi();return r.forEach((o,A)=>{const c=i.get(o);A.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),A.isNoDocument()&&A.version.isEqual(Ut.min())?(e.removeEntry(o,A.readTime),a=a.insert(o,A)):!c.isValidDocument()||A.version.compareTo(c.version)>0||A.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(A),a=a.insert(o,A)):qe("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",A.version)}),{Ps:a,Is:s}})}function JH(t,e){const r=Vt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ZH(t,e){const r=Vt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ie.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Yo(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function I2(t,e,r){const n=Vt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ml(a))throw a;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function tE(t,e,r){const n=Vt(t);let s=Ut.min(),i=er();return n.persistence.runTransaction("Execute query","readwrite",a=>function(A,c,u){const f=Vt(A),g=f._s.get(u);return g!==void 0?Ie.resolve(f.os.get(g)):f.Ur.getTargetData(c,u)}(n,a,oa(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(A=>{i=A})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Ut.min(),r?i:er())).next(o=>(eV(n,j8(e),o),{documents:o,Ts:i})))}function eV(t,e,r){let n=t.us.get(e)||Ut.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class rE{constructor(){this.activeTargetIds=G8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RU{constructor(){this.so=new rE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new rE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm=null;function cy(){return Tm===null?Tm=function(){return 268435456+Math.round(2147483648*Math.random())}():Tm++,"0x"+Tm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="WebChannelConnection";class sV extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=cy(),A=this.xo(r,n.toUriEncodedString());qe("RestConnection",`Sending RPC '${r}' ${o}:`,A,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,A,c,s).then(u=>(qe("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw Il("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",A,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Od}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=rV[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=cy();return new Promise((a,o)=>{const A=new vT;A.setWithCredentials(!0),A.listenOnce(yT.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Pg.NO_ERROR:const u=A.getResponseJson();qe(Ss,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Pg.TIMEOUT:qe(Ss,`RPC '${e}' ${i} timed out`),o(new Ze(Qe.DEADLINE_EXCEEDED,"Request time out"));break;case Pg.HTTP_ERROR:const f=A.getStatus();if(qe(Ss,`RPC '${e}' ${i} failed with status:`,f,"response text:",A.getResponseText()),f>0){let g=A.getResponseJson();Array.isArray(g)&&(g=g[0]);const p=g==null?void 0:g.error;if(p&&p.status&&p.message){const y=function(B){const w=B.toLowerCase().replace(/_/g,"-");return Object.values(Qe).indexOf(w)>=0?w:Qe.UNKNOWN}(p.status);o(new Ze(y,p.message))}else o(new Ze(Qe.UNKNOWN,"Server responded with status "+A.getStatus()))}else o(new Ze(Qe.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{qe(Ss,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);qe(Ss,`RPC '${e}' ${i} sending request:`,s),A.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=cy(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xT(),o=bT(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(A.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(A.useFetchStreams=!0),this.Oo(A.initMessageHeaders,r,n),A.encodeInitMessageHeaders=!0;const u=i.join("");qe(Ss,`Creating RPC '${e}' stream ${s}: ${u}`,A);const f=a.createWebChannel(u,A);let g=!1,p=!1;const y=new nV({Io:B=>{p?qe(Ss,`Not sending because RPC '${e}' stream ${s} is closed:`,B):(g||(qe(Ss,`Opening RPC '${e}' stream ${s} transport.`),f.open(),g=!0),qe(Ss,`RPC '${e}' stream ${s} sending:`,B),f.send(B))},To:()=>f.close()}),C=(B,w,b)=>{B.listen(w,N=>{try{b(N)}catch(T){setTimeout(()=>{throw T},0)}})};return C(f,Gh.EventType.OPEN,()=>{p||(qe(Ss,`RPC '${e}' stream ${s} transport opened.`),y.yo())}),C(f,Gh.EventType.CLOSE,()=>{p||(p=!0,qe(Ss,`RPC '${e}' stream ${s} transport closed`),y.So())}),C(f,Gh.EventType.ERROR,B=>{p||(p=!0,Il(Ss,`RPC '${e}' stream ${s} transport errored:`,B),y.So(new Ze(Qe.UNAVAILABLE,"The operation could not be completed")))}),C(f,Gh.EventType.MESSAGE,B=>{var w;if(!p){const b=B.data[0];St(!!b);const N=b,T=N.error||((w=N[0])===null||w===void 0?void 0:w.error);if(T){qe(Ss,`RPC '${e}' stream ${s} received error:`,T);const V=T.status;let j=function(I){const R=Hn[I];if(R!==void 0)return oU(R)}(V),L=T.message;j===void 0&&(j=Qe.INTERNAL,L="Unknown error status: "+V+" with message "+T.message),p=!0,y.So(new Ze(j,L)),f.close()}else qe(Ss,`RPC '${e}' stream ${s} received:`,b),y.bo(b)}}),C(o,BT.STAT_EVENT,B=>{B.stat===u2.PROXY?qe(Ss,`RPC '${e}' stream ${s} detected buffering proxy`):B.stat===u2.NOPROXY&&qe(Ss,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(){return typeof window<"u"?window:null}function Hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){return new oH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&qe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,r,n,s,i,a,o,A){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $b(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Qe.RESOURCE_EXHAUSTED?(Ws(r.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Qe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new Ze(Qe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aV extends DU{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=uH(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ut.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ut.min():a.readTime?ls(a.readTime):Ut.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=b2(this.serializer),r.addTarget=function(i,a){let o;const A=a.target;if(o=N0(A)?{documents:pU(i,A)}:{query:mU(i,A)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=cU(i,a.resumeToken);const c=y2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ut.min())>0){o.readTime=Sd(i,a.snapshotVersion.toTimestamp());const c=y2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=hH(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=b2(this.serializer),r.removeTarget=e,this.a_(r)}}class oV extends DU{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return St(!!e.streamToken),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=dH(e.writeResults,e.commitTime),n=ls(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=b2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Ap(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ze(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,B2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ze(Qe.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,B2(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(Qe.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class lV{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ws(r),this.D_=!1):qe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{eu(this)&&(qe("RemoteStore","Restarting streams for network reachability change."),await async function(A){const c=Vt(A);c.L_.add(4),await Pp(c),c.q_.set("Unknown"),c.L_.delete(4),await Qw(c)}(this))})}),this.q_=new lV(n,s)}}async function Qw(t){if(eu(t))for(const e of t.B_)await e(!0)}async function Pp(t){for(const e of t.B_)await e(!1)}function jU(t,e){const r=Vt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Jb(r)?Yb(r):Kd(r).r_()&&Xb(r,e))}function Wb(t,e){const r=Vt(t),n=Kd(r);r.N_.delete(e),n.r_()&&OU(r,e),r.N_.size===0&&(n.r_()?n.o_():eu(r)&&r.q_.set("Unknown"))}function Xb(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ut.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Kd(t).A_(e)}function OU(t,e){t.Q_.xe(e),Kd(t).R_(e)}function Yb(t){t.Q_=new nH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Kd(t).start(),t.q_.v_()}function Jb(t){return eu(t)&&!Kd(t).n_()&&t.N_.size>0}function eu(t){return Vt(t).L_.size===0}function MU(t){t.Q_=void 0}async function uV(t){t.q_.set("Online")}async function dV(t){t.N_.forEach((e,r)=>{Xb(t,e)})}async function hV(t,e){MU(t),Jb(t)?(t.q_.M_(e),Yb(t)):t.q_.set("Unknown")}async function fV(t,e,r){if(t.q_.set("Online"),e instanceof lU&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await L0(t,n)}else if(e instanceof Mg?t.Q_.Ke(e):e instanceof AU?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ut.min()))try{const n=await kU(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((A,c)=>{if(A.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(A.resumeToken,a))}}),o.targetMismatches.forEach((A,c)=>{const u=i.N_.get(A);if(!u)return;i.N_.set(A,u.withResumeToken(Dn.EMPTY_BYTE_STRING,u.snapshotVersion)),OU(i,A);const f=new Yo(u.target,A,c,u.sequenceNumber);Xb(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){qe("RemoteStore","Failed to raise snapshot:",n),await L0(t,n)}}async function L0(t,e,r){if(!Ml(e))throw e;t.L_.add(1),await Pp(t),t.q_.set("Offline"),r||(r=()=>kU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{qe("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Qw(t)})}function HU(t,e){return e().catch(r=>L0(t,r,e))}async function kp(t){const e=Vt(t),r=Tl(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;pV(e);)try{const s=await JH(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,mV(e,s)}catch(s){await L0(e,s)}VU(e)&&KU(e)}function pV(t){return eu(t)&&t.O_.length<10}function mV(t,e){t.O_.push(e);const r=Tl(t);r.r_()&&r.V_&&r.m_(e.mutations)}function VU(t){return eu(t)&&!Tl(t).n_()&&t.O_.length>0}function KU(t){Tl(t).start()}async function gV(t){Tl(t).p_()}async function wV(t){const e=Tl(t);for(const r of t.O_)e.m_(r.mutations)}async function vV(t,e,r){const n=t.O_.shift(),s=jb.from(n,e,r);await HU(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await kp(t)}async function yV(t,e){e&&Tl(t).V_&&await async function(n,s){if(function(a){return aU(a)&&a!==Qe.ABORTED}(s.code)){const i=n.O_.shift();Tl(n).s_(),await HU(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kp(n)}}(t,e),VU(t)&&KU(t)}async function sE(t,e){const r=Vt(t);r.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const n=eu(r);r.L_.add(3),await Pp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Qw(r)}async function BV(t,e){const r=Vt(t);e?(r.L_.delete(2),await Qw(r)):e||(r.L_.add(2),await Pp(r),r.q_.set("Unknown"))}function Kd(t){return t.K_||(t.K_=function(r,n,s){const i=Vt(r);return i.w_(),new aV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:uV.bind(null,t),Ro:dV.bind(null,t),mo:hV.bind(null,t),d_:fV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Jb(t)?Yb(t):t.q_.set("Unknown")):(await t.K_.stop(),MU(t))})),t.K_}function Tl(t){return t.U_||(t.U_=function(r,n,s){const i=Vt(r);return i.w_(),new oV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gV.bind(null,t),mo:yV.bind(null,t),f_:wV.bind(null,t),g_:vV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await kp(t)):(await t.U_.stop(),t.O_.length>0&&(qe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new Zb(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ex(t,e){if(Ws("AsyncQueue",`${e}: ${t}`),Ml(t))return new Ze(Qe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||rt.comparator(r.key,n.key):(r,n)=>rt.comparator(r.key,n.key),this.keyedMap=qh(),this.sortedSet=new un(this.comparator)}static emptySet(e){return new dd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof dd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new dd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.W_=new un(rt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Bt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Fd{constructor(e,r,n,s,i,a,o,A,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Fd(e,r,dd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_w(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class xV{constructor(){this.queries=aE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Vt(r),i=s.queries;s.queries=aE(),i.forEach((a,o)=>{for(const A of o.j_)A.onError(n)})})(this,new Ze(Qe.ABORTED,"Firestore shutting down"))}}function aE(){return new Hl(t=>$T(t),_w)}async function tx(t,e){const r=Vt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new bV,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=ex(a,`Initialization of query '${Pu(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&nx(r)}async function rx(t,e){const r=Vt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function CV(t,e){const r=Vt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&nx(r)}function _V(t,e,r){const n=Vt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function nx(t){t.Y_.forEach(e=>{e.next()})}var N2,oE;(oE=N2||(N2={})).ea="default",oE.Cache="cache";class sx{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Fd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Fd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==N2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.key=e}}class qU{constructor(e){this.key=e}}class EV{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=er(),this.mutatedKeys=er(),this.Aa=WT(e),this.Ra=new dd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new iE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const A=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const g=s.get(u),p=Qp(this.query,f)?f:null,y=!!g&&this.mutatedKeys.has(g.key),C=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let B=!1;g&&p?g.data.isEqual(p.data)?y!==C&&(n.track({type:3,doc:p}),B=!0):this.ga(g,p)||(n.track({type:2,doc:p}),B=!0,(A&&this.Aa(p,A)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!g&&p?(n.track({type:0,doc:p}),B=!0):g&&!p&&(n.track({type:1,doc:g}),B=!0,(A||c)&&(o=!0)),B&&(p?(a=a.add(p),i=C?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,f)=>function(p,y){const C=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return C(p)-C(y)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],A=this.da.size===0&&this.current&&!s?1:0,c=A!==this.Ea;return this.Ea=A,a.length!==0||c?{snapshot:new Fd(this.query,e.Ra,i,a,e.mutatedKeys,A===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=er(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new qU(n))}),this.da.forEach(n=>{e.has(n)||r.push(new GU(n))}),r}ba(e){this.Ta=e.Ts,this.da=er();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Fd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IV{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class NV{constructor(e){this.key=e,this.va=!1}}class SV{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Hl(o=>$T(o),_w),this.Ma=new Map,this.xa=new Set,this.Oa=new un(rt.comparator),this.Na=new Map,this.La=new Gb,this.Ba={},this.ka=new Map,this.qa=qc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function FV(t,e,r=!0){const n=JU(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await zU(n,e,r,!0),s}async function TV(t,e){const r=JU(t);await zU(r,e,!0,!1)}async function zU(t,e,r,n){const s=await ZH(t.localStore,oa(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await UV(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&jU(t.remoteStore,s),o}async function UV(t,e,r,n,s){t.Ka=(f,g,p)=>async function(C,B,w,b){let N=B.view.ma(w);N.ns&&(N=await tE(C.localStore,B.query,!1).then(({documents:L})=>B.view.ma(L,N)));const T=b&&b.targetChanges.get(B.targetId),V=b&&b.targetMismatches.get(B.targetId)!=null,j=B.view.applyChanges(N,C.isPrimaryClient,T,V);return lE(C,B.targetId,j.wa),j.snapshot}(t,f,g,p);const i=await tE(t.localStore,e,!0),a=new EV(e,i.Ts),o=a.ma(i.documents),A=Lp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,A);lE(t,r,c.wa);const u=new IV(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function QV(t,e,r){const n=Vt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!_w(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await I2(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Wb(n.remoteStore,s.targetId),S2(n,s.targetId)}).catch(Jc)):(S2(n,s.targetId),await I2(n.localStore,s.targetId,!0))}async function LV(t,e){const r=Vt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Wb(r.remoteStore,n.targetId))}async function PV(t,e,r){const n=ZU(t);try{const s=await function(a,o){const A=Vt(a),c=kt.now(),u=o.reduce((p,y)=>p.add(y.key),er());let f,g;return A.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Pi(),C=er();return A.cs.getEntries(p,u).next(B=>{y=B,y.forEach((w,b)=>{b.isValidDocument()||(C=C.add(w))})}).next(()=>A.localDocuments.getOverlayedDocuments(p,y)).next(B=>{f=B;const w=[];for(const b of o){const N=Z8(b,f.get(b.key).overlayedDocument);N!=null&&w.push(new mA(b.key,N,jT(N.value.mapValue),ln.exists(!0)))}return A.mutationQueue.addMutationBatch(p,c,w,o)}).next(B=>{g=B;const w=B.applyToLocalDocumentSet(f,C);return A.documentOverlayCache.saveOverlays(p,B.batchId,w)})}).then(()=>({batchId:g.batchId,changes:YT(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,A){let c=a.Ba[a.currentUser.toKey()];c||(c=new un(zt)),c=c.insert(o,A),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Rp(n,s.changes),await kp(n.remoteStore)}catch(s){const i=ex(s,"Failed to persist write");r.reject(i)}}async function $U(t,e){const r=Vt(t);try{const n=await XH(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(St(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?St(a.va):s.removedDocuments.size>0&&(St(a.va),a.va=!1))}),await Rp(r,n,e)}catch(n){await Jc(n)}}function AE(t,e,r){const n=Vt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const A=Vt(a);A.onlineState=o;let c=!1;A.queries.forEach((u,f)=>{for(const g of f.j_)g.Z_(o)&&(c=!0)}),c&&nx(A)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function kV(t,e,r){const n=Vt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new un(rt.comparator);a=a.insert(i,on.newNoDocument(i,Ut.min()));const o=er().add(i),A=new Nw(Ut.min(),new Map,new un(zt),a,o);await $U(n,A),n.Oa=n.Oa.remove(i),n.Na.delete(e),ix(n)}else await I2(n.localStore,e,!1).then(()=>S2(n,e,r)).catch(Jc)}async function RV(t,e){const r=Vt(t),n=e.batch.batchId;try{const s=await WH(r.localStore,e);XU(r,n,null),WU(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Rp(r,s)}catch(s){await Jc(s)}}async function DV(t,e,r){const n=Vt(t);try{const s=await function(a,o){const A=Vt(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return A.mutationQueue.lookupMutationBatch(c,o).next(f=>(St(f!==null),u=f.keys(),A.mutationQueue.removeMutationBatch(c,f))).next(()=>A.mutationQueue.performConsistencyCheck(c)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>A.localDocuments.getDocuments(c,u))})}(n.localStore,e);XU(n,e,r),WU(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Rp(n,s)}catch(s){await Jc(s)}}function WU(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function XU(t,e,r){const n=Vt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function S2(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||YU(t,n)})}function YU(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Wb(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),ix(t))}function lE(t,e,r){for(const n of r)n instanceof GU?(t.La.addReference(n.key,e),jV(t,n)):n instanceof qU?(qe("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||YU(t,n.key)):Bt()}function jV(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(qe("SyncEngine","New document in limbo: "+r),t.xa.add(n),ix(t))}function ix(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new rt(Br.fromString(e)),n=t.qa.next();t.Na.set(n,new NV(r)),t.Oa=t.Oa.insert(r,n),jU(t.remoteStore,new Yo(oa(Up(r.path)),n,"TargetPurposeLimboResolution",na.oe))}}async function Rp(t,e,r){const n=Vt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,A)=>{a.push(n.Ka(A,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(A.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(A.targetId,f?"current":"not-current")}if(c){s.push(c);const f=zb.Wi(A.targetId,c);i.push(f)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(A,c){const u=Vt(A);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ie.forEach(c,g=>Ie.forEach(g.$i,p=>u.persistence.referenceDelegate.addReference(f,g.targetId,p)).next(()=>Ie.forEach(g.Ui,p=>u.persistence.referenceDelegate.removeReference(f,g.targetId,p)))))}catch(f){if(!Ml(f))throw f;qe("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const g=f.targetId;if(!f.fromCache){const p=u.os.get(g),y=p.snapshotVersion,C=p.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(g,C)}}}(n.localStore,i))}async function OV(t,e){const r=Vt(t);if(!r.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const n=await PU(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(A=>{A.reject(new Ze(Qe.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Rp(r,n.hs)}}function MV(t,e){const r=Vt(t),n=r.Na.get(e);if(n&&n.va)return er().add(n.key);{let s=er();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function JU(t){const e=Vt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$U.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kV.bind(null,e),e.Ca.d_=CV.bind(null,e.eventManager),e.Ca.$a=_V.bind(null,e.eventManager),e}function ZU(t){const e=Vt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DV.bind(null,e),e}class lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return LU(this.persistence,new QU,e.initialUser,this.serializer)}Ga(e){return new UU(Tw.Zr,this.serializer)}Wa(e){return new RU}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lp.provider={build:()=>new lp};class HV extends lp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await ZU(this.Ja.syncEngine),await kp(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return LU(this.persistence,new QU,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new FH(n,e.asyncQueue,r)}Ha(e,r){const n=new s8(r,this.persistence);return new n8(e.asyncQueue,n)}Ga(e){const r=qH(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new qb(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,iV(),Hg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new RU}}class P0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>AE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=OV.bind(null,this.syncEngine),await BV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xV}()}createDatastore(e){const r=Uw(e.databaseInfo.databaseId),n=function(i){return new sV(i)}(e.databaseInfo);return function(i,a,o,A){return new AV(i,a,o,A)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new cV(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>AE(this.syncEngine,r,0),function(){return nE.D()?new nE:new tV}())}createSyncEngine(e,r){return function(s,i,a,o,A,c,u){const f=new SV(s,i,a,o,A,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Vt(s);qe("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Pp(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}P0.provider={build:()=>new P0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ze(Qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=Vt(s),o={documents:i.map(f=>op(a.serializer,f))},A=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Br.emptyPath(),o,i.length),c=new Map;A.forEach(f=>{const g=cH(a.serializer,f);c.set(g.key.toString(),g)});const u=[];return i.forEach(f=>{const g=c.get(f.toString());St(!!g),u.push(g)}),u}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=rt.fromPath(n);this.mutations.push(new Rb(s,this.precondition(s)))}),await async function(n,s){const i=Vt(n),a={writes:s.map(o=>Ap(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,Br.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Bt();r=Ut.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Ze(Qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ut.min())?ln.exists(!1):ln.updateTime(r):ln.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ut.min()))throw new Ze(Qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(r)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new $b(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new VV(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Fp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!aU(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=vs.UNAUTHENTICATED,this.clientId=Sb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{qe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(qe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ex(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function uy(t,e){t.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await PU(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await qV(t);qe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>sE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>sE(e.remoteStore,s)),t._onlineComponents=e}async function qV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{await uy(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Qe.FAILED_PRECONDITION||s.code===Qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Il("Error using user provided cache. Falling back to memory cache: "+r),await uy(t,new lp)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),await uy(t,new lp);return t._offlineComponents}async function ox(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),await cE(t,t._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),await cE(t,new P0))),t._onlineComponents}function zV(t){return ox(t).then(e=>e.syncEngine)}function $V(t){return ox(t).then(e=>e.datastore)}async function k0(t){const e=await ox(t),r=e.eventManager;return r.onListen=FV.bind(null,e.syncEngine),r.onUnlisten=QV.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=TV.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=LV.bind(null,e.syncEngine),r}function WV(t,e,r={}){const n=new Na;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const u=new ax({next:g=>{u.Za(),a.enqueueAndForget(()=>rx(i,f));const p=g.docs.has(o);!p&&g.fromCache?c.reject(new Ze(Qe.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&A&&A.source==="server"?c.reject(new Ze(Qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new sx(Up(o.path),u,{includeMetadataChanges:!0,_a:!0});return tx(i,f)}(await k0(t),t.asyncQueue,e,r,n)),n.promise}function XV(t,e,r={}){const n=new Na;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const u=new ax({next:g=>{u.Za(),a.enqueueAndForget(()=>rx(i,f)),g.fromCache&&A.source==="server"?c.reject(new Ze(Qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new sx(o,u,{includeMetadataChanges:!0,_a:!0});return tx(i,f)}(await k0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t,e,r){if(!r)throw new Ze(Qe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function r3(t,e,r,n){if(e===!0&&n===!0)throw new Ze(Qe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function dE(t){if(!rt.isDocumentKey(t))throw new Ze(Qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hE(t){if(rt.isDocumentKey(t))throw new Ze(Qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Bt()}function cs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Lw(t);throw new Ze(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e3((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pw{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fE(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new _T;switch(n.type){case"firstParty":return new WM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ze(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=uE.get(r);n&&(qe("ComponentProvider","Removing Datastore"),uE.delete(r),n.terminate())}(this),Promise.resolve()}}function n3(t,e,r,n={}){var s;const i=(t=cs(t,Pw))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,A;if(typeof n.mockUserToken=="string")o=n.mockUserToken,A=vs.MOCK_USER;else{o=d6(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Ze(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new vs(c)}t._authCredentials=new qM(new CT(o,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wo(this.firestore,e,this._query)}}class us{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new us(this.firestore,e,this._key)}}class rA extends wo{constructor(e,r,n){super(e,r,Up(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new us(this.firestore,null,new rt(e))}withConverter(e){return new rA(this.firestore,e,this._path)}}function ft(t,e,...r){if(t=xn(t),t3("collection","path",e),t instanceof Pw){const n=Br.fromString(e,...r);return hE(n),new rA(t,null,n)}{if(!(t instanceof us||t instanceof rA))throw new Ze(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Br.fromString(e,...r));return hE(n),new rA(t.firestore,null,n)}}function Dt(t,e,...r){if(t=xn(t),arguments.length===1&&(e=Sb.newId()),t3("doc","path",e),t instanceof Pw){const n=Br.fromString(e,...r);return dE(n),new us(t,null,new rt(n))}{if(!(t instanceof us||t instanceof rA))throw new Ze(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Br.fromString(e,...r));return dE(n),new us(t.firestore,t instanceof rA?t.converter:null,new rt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $b(this,"async_queue_retry"),this.Vu=()=>{const n=Hg();n&&qe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Hg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Hg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Na;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ml(e))throw e;qe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Ws("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Zb.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function mE(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Oi extends Pw{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new pE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pE(e),this._firestoreClient=void 0,await e}}}function s3(t,e){const r=typeof t=="object"?t:wb(),n=typeof t=="string"?t:"(default)",s=mb(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=c6("firestore");i&&n3(s,...i)}return s}function tu(t){if(t._terminated)throw new Ze(Qe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i3(t),t._firestoreClient}function i3(t){var e,r,n;const s=t._freezeSettings(),i=function(o,A,c,u){return new E8(o,A,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,e3(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new GV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}}(t._componentsProvider))}function a3(t,e){Il("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return YV(t,P0.provider,{build:n=>new HV(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function YV(t,e,r){if((t=cs(t,Oi))._firestoreClient||t._terminated)throw new Ze(Qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ze(Qe.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},i3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ul(Dn.fromBase64String(e))}catch(r){throw new Ze(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ul(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ze(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ze(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ze(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=/^__.*__$/;class ZV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new mA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Hd(e,this.data,r,this.fieldTransforms)}}class o3{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new mA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function A3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class Ax{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ax(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return R0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(A3(this.Cu)&&JV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class e7{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Uw(e)}Qu(e,r,n,s=!1){return new Ax({Cu:e,methodName:r,qu:n,path:An.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(t){const e=t._freezeSettings(),r=Uw(t._databaseId);return new e7(t._databaseId,!!e.ignoreUndefinedProperties,r)}function jw(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);ux("Data must be an object, but it was:",a,n);const o=l3(n,a);let A,c;if(i.merge)A=new fi(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const g=F2(e,f,r);if(!a.contains(g))throw new Ze(Qe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);u3(u,g)||u.push(g)}A=new fi(u),c=a.fieldTransforms.filter(f=>A.covers(f.field))}else A=null,c=a.fieldTransforms;return new ZV(new Bs(o),A,c)}class Ow extends kw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ow}}function lx(t,e,r,n){const s=t.Qu(1,e,r);ux("Data must be an object, but it was:",s,n);const i=[],a=Bs.empty();Zc(n,(A,c)=>{const u=dx(e,A,r);c=xn(c);const f=s.Nu(u);if(c instanceof Ow)i.push(u);else{const g=Dp(c,f);g!=null&&(i.push(u),a.set(u,g))}});const o=new fi(i);return new o3(a,o,s.fieldTransforms)}function cx(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[F2(e,n,r)],A=[s];if(i.length%2!=0)throw new Ze(Qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)o.push(F2(e,i[g])),A.push(i[g+1]);const c=[],u=Bs.empty();for(let g=o.length-1;g>=0;--g)if(!u3(c,o[g])){const p=o[g];let y=A[g];y=xn(y);const C=a.Nu(p);if(y instanceof Ow)c.push(p);else{const B=Dp(y,C);B!=null&&(c.push(p),u.set(p,B))}}const f=new fi(c);return new o3(u,f,a.fieldTransforms)}function t7(t,e,r,n=!1){return Dp(r,t.Qu(n?4:3,e))}function Dp(t,e){if(c3(t=xn(t)))return ux("Unsupported field value:",e,t),l3(t,e);if(t instanceof kw)return function(n,s){if(!A3(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let A=Dp(o,s.Lu(a));A==null&&(A={nullValue:"NULL_VALUE"}),i.push(A),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=xn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return q8(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=kt.fromDate(n);return{timestampValue:Sd(s.serializer,i)}}if(n instanceof kt){const i=new kt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Sd(s.serializer,i)}}if(n instanceof Rw)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ul)return{bytesValue:cU(s.serializer,n._byteString)};if(n instanceof us){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Dw)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(A=>{if(typeof A!="number")throw o.Bu("VectorValues must only contain numeric values.");return kb(o.serializer,A)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Lw(n)}`)}(t,e)}function l3(t,e){const r={};return PT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zc(t,(n,s)=>{const i=Dp(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function c3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof kt||t instanceof Rw||t instanceof Ul||t instanceof us||t instanceof kw||t instanceof Dw)}function ux(t,e,r){if(!c3(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Lw(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function F2(t,e,r){if((e=xn(e))instanceof ru)return e._internalPath;if(typeof e=="string")return dx(t,e);throw R0("Field path arguments must be of type string or ",t,!1,void 0,r)}const r7=new RegExp("[~\\*/\\[\\]]");function dx(t,e,r){if(e.search(r7)>=0)throw R0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ru(...e.split("."))._internalPath}catch{throw R0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function R0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(i||a)&&(A+=" (found",i&&(A+=` in field ${n}`),a&&(A+=` in document ${s}`),A+=")"),new Ze(Qe.INVALID_ARGUMENT,o+t+A)}function u3(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new us(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Mw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class n7 extends D0{data(){return super.data()}}function Mw(t,e){return typeof e=="string"?dx(t,e):e instanceof ru?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze(Qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hx{}class Hw extends hx{}function wr(t,e,...r){let n=[];e instanceof hx&&n.push(e),n=n.concat(r),function(i){const a=i.filter(A=>A instanceof Vw).length,o=i.filter(A=>A instanceof jp).length;if(a>1||a>0&&o>0)throw new Ze(Qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class jp extends Hw{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new jp(e,r,n)}_apply(e){const r=this._parse(e);return f3(e._query,r),new wo(e.firestore,e.converter,v2(e._query,r))}_parse(e){const r=Gd(e.firestore);return function(i,a,o,A,c,u,f){let g;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ze(Qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){wE(f,u);const p=[];for(const y of f)p.push(gE(A,i,y));g={arrayValue:{values:p}}}else g=gE(A,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||wE(f,u),g=t7(o,a,f,u==="in"||u==="not-in");return cr.create(c,u,g)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function zr(t,e,r){const n=e,s=Mw("where",t);return jp._create(s,n,r)}class Vw extends hx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Vw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Tr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const A of o)f3(a,A),a=v2(a,A)}(e._query,r),new wo(e.firestore,e.converter,v2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kw extends Hw{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Kw(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new Ze(Qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ze(Qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sp(i,a)}(e._query,this._field,this._direction);return new wo(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Md(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Mi(t,e="asc"){const r=e,n=Mw("orderBy",t);return Kw._create(n,r)}class Gw extends Hw{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Gw(e,r,n)}_apply(e){return new wo(e.firestore,e.converter,F0(e._query,this._limit,this._limitType))}}function h3(t){return Gw._create("limit",t,"F")}function gE(t,e,r){if(typeof(r=xn(r))=="string"){if(r==="")throw new Ze(Qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&r.indexOf("/")!==-1)throw new Ze(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Br.fromString(r));if(!rt.isDocumentKey(n))throw new Ze(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rp(t,new rt(n))}if(r instanceof us)return rp(t,r._key);throw new Ze(Qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lw(r)}.`)}function wE(t,e){if(!Array.isArray(t)||t.length===0)throw new Ze(Qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f3(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ze(Qe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Qe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class fx{convertValue(e,r="none"){switch(Hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Nl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Bt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Zc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>sn(a.doubleValue));return new Dw(i)}convertGeoPoint(e){return new Rw(sn(e.latitude),sn(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Lb(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const r=dA(e);return new kt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Br.fromString(e);St(yU(n));const s=new Sl(n.get(1),n.get(3)),i=new rt(n.popFirst(5));return s.isEqual(r)||Ws(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class s7 extends fx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new us(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zw extends D0{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Mw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class wf extends zw{data(e={}){return super.data(e)}}class px{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Bc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new wf(this._firestore,this._userDataWriter,n.key,n,new Bc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ze(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const A=new wf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Bc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const A=new wf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Bc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:i7(o.type),doc:A,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function i7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){t=cs(t,us);const e=cs(t.firestore,Oi);return WV(tu(e),t._key).then(r=>m3(e,t,r))}class $w extends fx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new us(this.firestore,null,r)}}function Mt(t){t=cs(t,wo);const e=cs(t.firestore,Oi),r=tu(e),n=new $w(e);return d3(t._query),XV(r,t._query).then(s=>new px(e,n,t,s))}function p3(t,e,r){t=cs(t,us);const n=cs(t.firestore,Oi),s=qw(t.converter,e,r);return qd(n,[jw(Gd(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ln.none())])}function dn(t,e,r,...n){t=cs(t,us);const s=cs(t.firestore,Oi),i=Gd(s);let a;return a=typeof(e=xn(e))=="string"||e instanceof ru?cx(i,"updateDoc",t._key,e,r,n):lx(i,"updateDoc",t._key,e),qd(s,[a.toMutation(t._key,ln.exists(!0))])}function Hi(t){return qd(cs(t.firestore,Oi),[new Vd(t._key,ln.none())])}function Ds(t,e){const r=cs(t.firestore,Oi),n=Dt(t),s=qw(t.converter,e);return qd(r,[jw(Gd(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,ln.exists(!1))]).then(()=>n)}function T2(t,...e){var r,n,s;t=xn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||mE(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(mE(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let A,c,u;if(t instanceof us)c=cs(t.firestore,Oi),u=Up(t._key.path),A={next:f=>{e[a]&&e[a](m3(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=cs(t,wo);c=cs(f.firestore,Oi),u=f._query;const g=new $w(c);A={next:p=>{e[a]&&e[a](new px(c,g,f,p))},error:e[a+1],complete:e[a+2]},d3(t._query)}return function(g,p,y,C){const B=new ax(C),w=new sx(p,B,y);return g.asyncQueue.enqueueAndForget(async()=>tx(await k0(g),w)),()=>{B.Za(),g.asyncQueue.enqueueAndForget(async()=>rx(await k0(g),w))}}(tu(c),u,o,A)}function qd(t,e){return function(n,s){const i=new Na;return n.asyncQueue.enqueueAndForget(async()=>PV(await zV(n),s,i)),i.promise}(tu(t),e)}function m3(t,e,r){const n=r.docs.get(e._key),s=new $w(t);return new zw(t,s,e._key,n,new Bc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Gd(e)}set(e,r,n){this._verifyNotCommitted();const s=tl(e,this._firestore),i=qw(s.converter,r,n),a=jw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,ln.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=tl(e,this._firestore);let a;return a=typeof(r=xn(r))=="string"||r instanceof ru?cx(this._dataReader,"WriteBatch.update",i._key,r,n,s):lx(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=tl(e,this._firestore);return this._mutations=this._mutations.concat(new Vd(r._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tl(t,e){if((t=xn(t)).firestore!==e)throw new Ze(Qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3 extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Gd(r)}get(r){const n=tl(r,this._firestore),s=new s7(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Bt();const a=i[0];if(a.isFoundDocument())return new D0(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new D0(this._firestore,s,n._key,null,n.converter);throw Bt()})}set(r,n,s){const i=tl(r,this._firestore),a=qw(i.converter,n,s),o=jw(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=tl(r,this._firestore);let o;return o=typeof(n=xn(n))=="string"||n instanceof ru?cx(this._dataReader,"Transaction.update",a._key,n,s,i):lx(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=tl(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=tl(e,this._firestore),n=new $w(this._firestore);return super.get(e).then(s=>new zw(this._firestore,n,r._key,s._document,new Bc(!1,!1),r.converter))}}function mx(t,e,r){t=cs(t,Oi);const n=Object.assign(Object.assign({},a7),r);return function(i){if(i.maxAttempts<1)throw new Ze(Qe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const A=new Na;return i.asyncQueue.enqueueAndForget(async()=>{const c=await $V(i);new KV(i.asyncQueue,c,o,a,A).au()}),A.promise}(tu(t),s=>e(new w3(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){return tu(t=cs(t,Oi)),new g3(t,e=>qd(t,e))}(function(e,r=!0){(function(s){Od=s})(Dd),bd(new Dc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new Oi(new zM(n.getProvider("auth-internal")),new YM(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ze(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),yl(c5,"4.7.3",e),yl(c5,"4.7.3","esm2017")})();const o7=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:fx,Bytes:Ul,CollectionReference:rA,DocumentReference:us,DocumentSnapshot:zw,FieldPath:ru,FieldValue:kw,Firestore:Oi,FirestoreError:Ze,GeoPoint:Rw,Query:wo,QueryCompositeFilterConstraint:Vw,QueryConstraint:Hw,QueryDocumentSnapshot:wf,QueryFieldFilterConstraint:jp,QueryLimitConstraint:Gw,QueryOrderByConstraint:Kw,QuerySnapshot:px,SnapshotMetadata:Bc,Timestamp:kt,Transaction:w3,VectorValue:Dw,WriteBatch:g3,_AutoId:Sb,_ByteString:Dn,_DatabaseId:Sl,_DocumentKey:rt,_EmptyAuthCredentialsProvider:_T,_FieldPath:An,_cast:cs,_logWarn:Il,_validateIsNotUsedTogether:r3,addDoc:Ds,collection:ft,connectFirestoreEmulator:n3,deleteDoc:Hi,doc:Dt,enableIndexedDbPersistence:a3,ensureFirestoreConfigured:tu,executeWrite:qd,getDoc:nu,getDocs:Mt,getFirestore:s3,limit:h3,onSnapshot:T2,orderBy:Mi,query:wr,runTransaction:mx,setDoc:p3,updateDoc:dn,where:zr,writeBatch:Ww},Symbol.toStringTag,{value:"Module"})),A7={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},v3=gb(A7),Re=s3(v3),Xw=gT(v3);a3(Re).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function l7(){const[t,e]=k.useState(""),[r,n]=k.useState(""),[s,i]=k.useState(!1),[a,o]=k.useState(""),A=gw(),c=async u=>{u.preventDefault();try{const g=(await FO(Xw,t,r)).user.uid,p=Dt(Re,"users",g),y=await nu(p);if(y.exists()){const B=y.data().role;B==="admin"?A("/admin"):B==="vendedor"?A("/admin/salesV2"):o("Rol no vlido")}else o("No se encontr el perfil de usuario")}catch(f){console.error(f),o("Credenciales incorrectas o error de conexin")}};return l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Iniciar Sesin"}),l.jsxs("form",{onSubmit:c,className:"space-y-4 w-64",children:[l.jsx("input",{type:"email",placeholder:"Correo",value:t,onChange:u=>e(u.target.value),className:"w-full p-2 border rounded-[20px]",required:!0}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:s?"text":"password",placeholder:"Contrasea",value:r,onChange:u=>n(u.target.value),className:"w-full p-2 border rounded-[20px] pr-10",required:!0}),l.jsx("button",{type:"button",onClick:()=>i(u=>!u),className:"absolute inset-y-0 right-2 my-auto text-sm text-gray-600 hover:text-gray-800","aria-label":s?"Ocultar contrasea":"Mostrar contrasea",title:s?"Ocultar contrasea":"Mostrar contrasea",children:s?"Ocultar":"Ver"})]}),a&&l.jsx("p",{className:"text-red-600 text-sm",children:a}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-[20px] hover:bg-blue-700",children:"Entrar"})]})]})}function Tn({children:t,allowedRoles:e}){const[r,n]=k.useState(!0),[s,i]=k.useState(!1);return k.useEffect(()=>{const a=iT(Xw,async o=>{if(o){const A=Dt(Re,"users",o.uid),c=await nu(A);if(c.exists()){const u=c.data().role;i(e.includes(u))}}n(!1)});return()=>a()},[e]),r?l.jsx("div",{className:"p-4",children:"Cargando..."}):s?t:l.jsx(Z1,{to:"/"})}function c7({role:t}){const e="/admin",r=({isActive:ae})=>`block rounded px-3 py-2 text-sm ${ae?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=gw(),[s,i]=k.useState(!1),[a,o]=k.useState(!1),[A,c]=k.useState(!1),[u,f]=k.useState(!1),[g,p]=k.useState(!1),[y,C]=k.useState(!1),[B,w]=k.useState(!1),[b,N]=k.useState(!1),[T,V]=k.useState(!1),[j,L]=k.useState(!1),[S,I]=k.useState(!1),[R,F]=k.useState(!1),E=async()=>{await aT(Xw),n("/")},U=({open:ae,onClick:le,children:ie})=>l.jsxs("button",{type:"button",onClick:le,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[l.jsx("span",{children:ie}),l.jsx("span",{className:"text-xs",children:ae?"":""})]}),K=({open:ae,onClick:le,title:ie})=>l.jsxs("button",{type:"button",onClick:le,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[l.jsx("span",{className:"text-blue-500 font-medium ",children:ie}),l.jsx("span",{className:"text-xs",children:ae?"":""})]});return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col`,children:[l.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded bg-gray-200 hover:bg-gray-300","aria-label":s?"Expandir men":"Colapsar men",children:s?l.jsx("span",{title:"Expandir men",children:""}):l.jsx("span",{title:"Colapsar men",children:""})}),!s&&l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"space-y-1",children:[t==="admin"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(U,{open:a,onClick:()=>o(ae=>!ae),children:"Operaciones Pollo"}),a&&l.jsxs("div",{className:"pb-2",children:[l.jsx(K,{open:A,onClick:()=>c(ae=>!ae),title:"Inventario"}),A&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(yn,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),l.jsx(yn,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),l.jsx(K,{open:u,onClick:()=>f(ae=>!ae),title:"Finanzas"}),u&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(yn,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),l.jsx(yn,{to:`${e}/billing`,className:r,children:"Facturacion"}),l.jsx(yn,{to:`${e}/expenses`,className:r,children:"Gastos"}),l.jsx(yn,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(yn,{to:`${e}/bills`,className:r,children:"Cierre"}),l.jsx(yn,{to:`${e}/billhistoric`,className:r,children:"Historial de Cierres"})]}),l.jsx(K,{open:g,onClick:()=>p(ae=>!ae),title:"Productos"}),g&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(U,{open:y,onClick:()=>C(ae=>!ae),children:"Operaciones Ropa"}),y&&l.jsxs("div",{className:"pb-2",children:[l.jsx(K,{open:B,onClick:()=>w(ae=>!ae),title:"Inventario"}),B&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/InventoryClothesBatches`,className:r,children:"Inventario Ropa"})}),l.jsx(K,{open:b,onClick:()=>N(ae=>!ae),title:"Productos"}),b&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),l.jsx(K,{open:T,onClick:()=>V(ae=>!ae),title:"Clientes"}),T&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})}),l.jsx(K,{open:j,onClick:()=>L(ae=>!ae),title:"Finanzas"}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"})}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(yn,{to:`${e}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),l.jsxs("div",{className:"border rounded",children:[l.jsx(U,{open:R,onClick:()=>F(ae=>!ae),children:"Operaciones Otras"}),R&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(yn,{to:`${e}/users`,className:r,children:"Usuarios"}),l.jsx(yn,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),l.jsx(yn,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),t==="vendedor"&&l.jsxs("div",{className:"border rounded",children:[l.jsx(U,{open:u,onClick:()=>f(ae=>!ae),children:"Finanzas"}),u&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(yn,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(yn,{to:`${e}/bills`,className:r,children:"Cierre"})]})]})]}),l.jsx("button",{onClick:E,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600",children:"Cerrar sesin"})]})]}),l.jsx("main",{className:"flex-1 p-6",children:l.jsx(xD,{})})]})}const y3=6048e5,u7=864e5,vE=Symbol.for("constructDateFrom");function Ua(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&vE in t?t[vE](e):t instanceof Date?new t.constructor(e):new Date(e)}function ei(t,e){return Ua(e||t,t)}function d7(t,e,r){const n=ei(t,r==null?void 0:r.in);return isNaN(e)?Ua(t,NaN):(n.setDate(n.getDate()+e),n)}function h7(t,e,r){const n=ei(t,r==null?void 0:r.in);if(isNaN(e))return Ua(t,NaN);const s=n.getDate(),i=Ua(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}let f7={};function Yw(){return f7}function cp(t,e){var o,A,c,u;const r=Yw(),n=(e==null?void 0:e.weekStartsOn)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=ei(t,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function j0(t,e){return cp(t,{...e,weekStartsOn:1})}function B3(t,e){const r=ei(t,e==null?void 0:e.in),n=r.getFullYear(),s=Ua(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=j0(s),a=Ua(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=j0(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function yE(t){const e=ei(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function p7(t,...e){const r=Ua.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function BE(t,e){const r=ei(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function m7(t,e,r){const[n,s]=p7(r==null?void 0:r.in,t,e),i=BE(n),a=BE(s),o=+i-yE(i),A=+a-yE(a);return Math.round((o-A)/u7)}function g7(t,e){const r=B3(t,e),n=Ua(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),j0(n)}function w7(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function v7(t){return!(!w7(t)&&typeof t!="number"||isNaN(+ei(t)))}function Op(t,e){const r=ei(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Mp(t,e){const r=ei(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function y7(t,e){const r=ei(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const B7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},b7=(t,e,r)=>{let n;const s=B7[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function dy(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const x7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},E7={date:dy({formats:x7,defaultWidth:"full"}),time:dy({formats:C7,defaultWidth:"full"}),dateTime:dy({formats:_7,defaultWidth:"full"})},I7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},N7=(t,e,r,n)=>I7[t];function Eh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const S7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},T7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},U7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Q7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},L7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},P7=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},k7={ordinalNumber:P7,era:Eh({values:S7,defaultWidth:"wide"}),quarter:Eh({values:F7,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Eh({values:T7,defaultWidth:"wide"}),day:Eh({values:U7,defaultWidth:"wide"}),dayPeriod:Eh({values:Q7,defaultWidth:"wide",formattingValues:L7,defaultFormattingWidth:"wide"})};function Ih(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],A=Array.isArray(o)?D7(o,f=>f.test(a)):R7(o,f=>f.test(a));let c;c=t.valueCallback?t.valueCallback(A):A,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function R7(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function D7(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function j7(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const O7=/^(\d+)(th|st|nd|rd)?/i,M7=/\d+/i,H7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},V7={any:[/^b/i,/^(a|c)/i]},K7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},G7={any:[/1/i,/2/i,/3/i,/4/i]},q7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},z7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},W7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},X7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Y7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},J7={ordinalNumber:j7({matchPattern:O7,parsePattern:M7,valueCallback:t=>parseInt(t,10)}),era:Ih({matchPatterns:H7,defaultMatchWidth:"wide",parsePatterns:V7,defaultParseWidth:"any"}),quarter:Ih({matchPatterns:K7,defaultMatchWidth:"wide",parsePatterns:G7,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ih({matchPatterns:q7,defaultMatchWidth:"wide",parsePatterns:z7,defaultParseWidth:"any"}),day:Ih({matchPatterns:$7,defaultMatchWidth:"wide",parsePatterns:W7,defaultParseWidth:"any"}),dayPeriod:Ih({matchPatterns:X7,defaultMatchWidth:"any",parsePatterns:Y7,defaultParseWidth:"any"})},Z7={code:"en-US",formatDistance:b7,formatLong:E7,formatRelative:N7,localize:k7,match:J7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function e9(t,e){const r=ei(t,e==null?void 0:e.in);return m7(r,y7(r))+1}function t9(t,e){const r=ei(t,e==null?void 0:e.in),n=+j0(r)-+g7(r);return Math.round(n/y3)+1}function b3(t,e){var u,f,g,p;const r=ei(t,e==null?void 0:e.in),n=r.getFullYear(),s=Yw(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(g=s.locale)==null?void 0:g.options)==null?void 0:p.firstWeekContainsDate)??1,a=Ua((e==null?void 0:e.in)||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=cp(a,e),A=Ua((e==null?void 0:e.in)||t,0);A.setFullYear(n,0,i),A.setHours(0,0,0,0);const c=cp(A,e);return+r>=+o?n+1:+r>=+c?n:n-1}function r9(t,e){var o,A,c,u;const r=Yw(),n=(e==null?void 0:e.firstWeekContainsDate)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=b3(t,e),i=Ua((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),cp(i,e)}function n9(t,e){const r=ei(t,e==null?void 0:e.in),n=+cp(r,e)-+r9(r,e);return Math.round(n/y3)+1}function Sr(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const jA={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Sr(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Sr(r+1,2)},d(t,e){return Sr(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Sr(t.getHours()%12||12,e.length)},H(t,e){return Sr(t.getHours(),e.length)},m(t,e){return Sr(t.getMinutes(),e.length)},s(t,e){return Sr(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Sr(s,e.length)}},yu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bE={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return jA.y(t,e)},Y:function(t,e,r,n){const s=b3(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Sr(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Sr(i,e.length)},R:function(t,e){const r=B3(t);return Sr(r,e.length)},u:function(t,e){const r=t.getFullYear();return Sr(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Sr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Sr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return jA.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Sr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=n9(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Sr(s,e.length)},I:function(t,e,r){const n=t9(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Sr(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):jA.d(t,e)},D:function(t,e,r){const n=e9(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Sr(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Sr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Sr(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Sr(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=yu.noon:n===0?s=yu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=yu.evening:n>=12?s=yu.afternoon:n>=4?s=yu.morning:s=yu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return jA.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):jA.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Sr(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Sr(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):jA.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):jA.s(t,e)},S:function(t,e){return jA.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return CE(n);case"XXXX":case"XX":return uc(n);case"XXXXX":case"XXX":default:return uc(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return CE(n);case"xxxx":case"xx":return uc(n);case"xxxxx":case"xxx":default:return uc(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+xE(n,":");case"OOOO":default:return"GMT"+uc(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+xE(n,":");case"zzzz":default:return"GMT"+uc(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Sr(n,e.length)},T:function(t,e,r){return Sr(+t,e.length)}};function xE(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+Sr(i,2)}function CE(t,e){return t%60===0?(t>0?"-":"+")+Sr(Math.abs(t)/60,2):uc(t,e)}function uc(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Sr(Math.trunc(n/60),2),i=Sr(n%60,2);return r+s+e+i}const _E=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},x3=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},s9=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return _E(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",_E(n,e)).replace("{{time}}",x3(s,e))},i9={p:x3,P:s9},a9=/^D+$/,o9=/^Y+$/,A9=["D","DD","YY","YYYY"];function l9(t){return a9.test(t)}function c9(t){return o9.test(t)}function u9(t,e,r){const n=d9(t,e,r);if(console.warn(n),A9.includes(t))throw new RangeError(n)}function d9(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const h9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,f9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p9=/^'([^]*?)'?$/,m9=/''/g,g9=/[a-zA-Z]/;function sr(t,e,r){var u,f,g,p;const n=Yw(),s=n.locale??Z7,i=n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=n.weekStartsOn??((p=(g=n.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??0,o=ei(t,r==null?void 0:r.in);if(!v7(o))throw new RangeError("Invalid time value");let A=e.match(f9).map(y=>{const C=y[0];if(C==="p"||C==="P"){const B=i9[C];return B(y,s.formatLong)}return y}).join("").match(h9).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const C=y[0];if(C==="'")return{isToken:!1,value:w9(y)};if(bE[C])return{isToken:!0,value:y};if(C.match(g9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(A=s.localize.preprocessor(o,A));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return A.map(y=>{if(!y.isToken)return y.value;const C=y.value;(c9(C)||l9(C))&&u9(C,e,String(t));const B=bE[C[0]];return B(o,C,s.localize,c)}).join("")}function w9(t){const e=t.match(p9);return e?e[1].replace(m9,"'"):t}function v9(t,e,r){return d7(t,-14,r)}function y9(t,e,r){return h7(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U2=function(t,e){return U2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},U2(t,e)};function ka(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");U2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Q2=function(){return Q2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Q2.apply(this,arguments)};function zs(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function A(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):s(u.value).then(o,A)}c((n=n.apply(t,[])).next())})}function Ls(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return A([c,u])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Um(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var hA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Jw=function(t,e){return hA.fromClientRect(t,e.getBoundingClientRect())},B9=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new hA(0,0,n,s)},Zw=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Qn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},EE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qm=0;Qm<EE.length;Qm++)b9[EE.charCodeAt(Qm)]=Qm;var IE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lm=0;Lm<IE.length;Lm++)Wh[IE.charCodeAt(Lm)]=Lm;var x9=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=Wh[t.charCodeAt(n)],a=Wh[t.charCodeAt(n+1)],o=Wh[t.charCodeAt(n+2)],A=Wh[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|A&63;return c},C9=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},_9=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Ic=5,gx=11,hy=2,E9=gx-Ic,C3=65536>>Ic,I9=1<<Ic,fy=I9-1,N9=1024>>Ic,S9=C3+N9,F9=S9,T9=32,U9=F9+T9,Q9=65536>>gx,L9=1<<E9,P9=L9-1,NE=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},k9=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},R9=function(t,e){var r=x9(t),n=Array.isArray(r)?_9(r):new Uint32Array(r),s=Array.isArray(r)?C9(r):new Uint16Array(r),i=24,a=NE(s,i/2,n[4]/2),o=n[5]===2?NE(s,(i+n[4])/2):k9(n,Math.ceil((i+n[4])/4));return new D9(n[0],n[1],n[2],n[3],a,o)},D9=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Ic],r=(r<<hy)+(e&fy),this.data[r];if(e<=65535)return r=this.index[C3+(e-55296>>Ic)],r=(r<<hy)+(e&fy),this.data[r];if(e<this.highStart)return r=U9-Q9+(e>>gx),r=this.index[r],r+=e>>Ic&P9,r=this.index[r],r=(r<<hy)+(e&fy),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),SE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pm=0;Pm<SE.length;Pm++)j9[SE.charCodeAt(Pm)]=Pm;var O9="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",FE=50,M9=1,_3=2,E3=3,H9=4,V9=5,TE=7,I3=8,UE=9,al=10,L2=11,QE=12,P2=13,K9=14,Xh=15,k2=16,km=17,Nh=18,G9=19,LE=20,R2=21,Sh=22,py=23,Bu=24,Ui=25,Yh=26,Jh=27,bu=28,q9=29,gc=30,z9=31,Rm=32,Dm=33,D2=34,j2=35,O2=36,up=37,M2=38,Vg=39,Kg=40,my=41,N3=42,$9=43,W9=[9001,65288],S3="!",Ar="",jm="",H2=R9(O9),ko=[gc,O2],V2=[M9,_3,E3,V9],F3=[al,I3],PE=[Jh,Yh],X9=V2.concat(F3),kE=[M2,Vg,Kg,D2,j2],Y9=[Xh,P2],J9=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var o=H2.get(i);if(o>FE?(s.push(!0),o-=FE):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(k2);if(o===H9||o===L2){if(a===0)return n.push(a),r.push(gc);var A=r[a-1];return X9.indexOf(A)===-1?(n.push(n[a-1]),r.push(A)):(n.push(a),r.push(gc))}if(n.push(a),o===z9)return r.push(e==="strict"?R2:up);if(o===N3||o===q9)return r.push(gc);if(o===$9)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(up):r.push(gc);r.push(o)}),[n,r,s]},gy=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==al)break}if(s===al)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var A=r;A<=n.length;){A++;var a=n[A];if(a===e)return!0;if(a!==al)break}if(o!==al)break}return!1},RE=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===al)r--;else return n}return 0},Z9=function(t,e,r,n,s){if(r[n]===0)return Ar;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return Ar;var a=i-1,o=i+1,A=e[i],c=a>=0?e[a]:0,u=e[o];if(A===_3&&u===E3)return Ar;if(V2.indexOf(A)!==-1)return S3;if(V2.indexOf(u)!==-1||F3.indexOf(u)!==-1)return Ar;if(RE(i,e)===I3)return jm;if(H2.get(t[i])===L2||(A===Rm||A===Dm)&&H2.get(t[o])===L2||A===TE||u===TE||A===UE||[al,P2,Xh].indexOf(A)===-1&&u===UE||[km,Nh,G9,Bu,bu].indexOf(u)!==-1||RE(i,e)===Sh||gy(py,Sh,i,e)||gy([km,Nh],R2,i,e)||gy(QE,QE,i,e))return Ar;if(A===al)return jm;if(A===py||u===py)return Ar;if(u===k2||A===k2)return jm;if([P2,Xh,R2].indexOf(u)!==-1||A===K9||c===O2&&Y9.indexOf(A)!==-1||A===bu&&u===O2||u===LE||ko.indexOf(u)!==-1&&A===Ui||ko.indexOf(A)!==-1&&u===Ui||A===Jh&&[up,Rm,Dm].indexOf(u)!==-1||[up,Rm,Dm].indexOf(A)!==-1&&u===Yh||ko.indexOf(A)!==-1&&PE.indexOf(u)!==-1||PE.indexOf(A)!==-1&&ko.indexOf(u)!==-1||[Jh,Yh].indexOf(A)!==-1&&(u===Ui||[Sh,Xh].indexOf(u)!==-1&&e[o+1]===Ui)||[Sh,Xh].indexOf(A)!==-1&&u===Ui||A===Ui&&[Ui,bu,Bu].indexOf(u)!==-1)return Ar;if([Ui,bu,Bu,km,Nh].indexOf(u)!==-1)for(var f=i;f>=0;){var g=e[f];if(g===Ui)return Ar;if([bu,Bu].indexOf(g)!==-1)f--;else break}if([Jh,Yh].indexOf(u)!==-1)for(var f=[km,Nh].indexOf(A)!==-1?a:i;f>=0;){var g=e[f];if(g===Ui)return Ar;if([bu,Bu].indexOf(g)!==-1)f--;else break}if(M2===A&&[M2,Vg,D2,j2].indexOf(u)!==-1||[Vg,D2].indexOf(A)!==-1&&[Vg,Kg].indexOf(u)!==-1||[Kg,j2].indexOf(A)!==-1&&u===Kg||kE.indexOf(A)!==-1&&[LE,Yh].indexOf(u)!==-1||kE.indexOf(u)!==-1&&A===Jh||ko.indexOf(A)!==-1&&ko.indexOf(u)!==-1||A===Bu&&ko.indexOf(u)!==-1||ko.concat(Ui).indexOf(A)!==-1&&u===Sh&&W9.indexOf(t[o])===-1||ko.concat(Ui).indexOf(u)!==-1&&A===Nh)return Ar;if(A===my&&u===my){for(var p=r[i],y=1;p>0&&(p--,e[p]===my);)y++;if(y%2!==0)return Ar}return A===Rm&&u===Dm?Ar:jm},eK=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=J9(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Ui,gc,N3].indexOf(o)!==-1?up:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,A){return o&&t[A]>=19968&&t[A]<=40959}):void 0;return[n,s,a]},tK=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===S3,this.start=n,this.end=s}return t.prototype.slice=function(){return Qn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),rK=function(t,e){var r=Zw(t),n=eK(r,e),s=n[0],i=n[1],a=n[2],o=r.length,A=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=Ar;c<o&&(u=Z9(r,i,s,++c,a))===Ar;);if(u!==Ar||c===o){var f=new tK(r,u,A,c);return A=c,{value:f,done:!1}}return{done:!0,value:null}}}},nK=1,sK=2,Hp=4,DE=8,O0=10,jE=47,vf=92,iK=9,aK=32,Om=34,Fh=61,oK=35,AK=36,lK=37,Mm=39,Hm=40,Th=41,cK=95,ui=45,uK=33,dK=60,hK=62,fK=64,pK=91,mK=93,gK=61,wK=123,Vm=63,vK=125,OE=124,yK=126,BK=128,ME=65533,wy=42,bc=43,bK=44,xK=58,CK=59,dp=46,_K=0,EK=8,IK=11,NK=14,SK=31,FK=127,no=-1,T3=48,U3=97,Q3=101,TK=102,UK=117,QK=122,L3=65,P3=69,k3=70,LK=85,PK=90,ks=function(t){return t>=T3&&t<=57},kK=function(t){return t>=55296&&t<=57343},xu=function(t){return ks(t)||t>=L3&&t<=k3||t>=U3&&t<=TK},RK=function(t){return t>=U3&&t<=QK},DK=function(t){return t>=L3&&t<=PK},jK=function(t){return RK(t)||DK(t)},OK=function(t){return t>=BK},Km=function(t){return t===O0||t===iK||t===aK},M0=function(t){return jK(t)||OK(t)||t===cK},HE=function(t){return M0(t)||ks(t)||t===ui},MK=function(t){return t>=_K&&t<=EK||t===IK||t>=NK&&t<=SK||t===FK},zA=function(t,e){return t!==vf?!1:e!==O0},Gm=function(t,e,r){return t===ui?M0(e)||zA(e,r):M0(t)?!0:!!(t===vf&&zA(t,e))},vy=function(t,e,r){return t===bc||t===ui?ks(e)?!0:e===dp&&ks(r):ks(t===dp?e:t)},HK=function(t){var e=0,r=1;(t[e]===bc||t[e]===ui)&&(t[e]===ui&&(r=-1),e++);for(var n=[];ks(t[e]);)n.push(t[e++]);var s=n.length?parseInt(Qn.apply(void 0,n),10):0;t[e]===dp&&e++;for(var i=[];ks(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(Qn.apply(void 0,i),10):0;(t[e]===P3||t[e]===Q3)&&e++;var A=1;(t[e]===bc||t[e]===ui)&&(t[e]===ui&&(A=-1),e++);for(var c=[];ks(t[e]);)c.push(t[e++]);var u=c.length?parseInt(Qn.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-a))*Math.pow(10,A*u)},VK={type:2},KK={type:3},GK={type:4},qK={type:13},zK={type:8},$K={type:21},WK={type:9},XK={type:10},YK={type:11},JK={type:12},ZK={type:14},qm={type:23},eG={type:1},tG={type:25},rG={type:24},nG={type:26},sG={type:27},iG={type:28},aG={type:29},oG={type:31},K2={type:32},R3=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Zw(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==K2;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Om:return this.consumeStringToken(Om);case oK:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(HE(r)||zA(n,s)){var i=Gm(r,n,s)?sK:nK,a=this.consumeName();return{type:5,value:a,flags:i}}break;case AK:if(this.peekCodePoint(0)===Fh)return this.consumeCodePoint(),qK;break;case Mm:return this.consumeStringToken(Mm);case Hm:return VK;case Th:return KK;case wy:if(this.peekCodePoint(0)===Fh)return this.consumeCodePoint(),ZK;break;case bc:if(vy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case bK:return GK;case ui:var o=e,A=this.peekCodePoint(0),c=this.peekCodePoint(1);if(vy(o,A,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Gm(o,A,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===ui&&c===hK)return this.consumeCodePoint(),this.consumeCodePoint(),rG;break;case dp:if(vy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jE:if(this.peekCodePoint(0)===wy)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===wy&&(u=this.consumeCodePoint(),u===jE))return this.consumeToken();if(u===no)return this.consumeToken()}break;case xK:return nG;case CK:return sG;case dK:if(this.peekCodePoint(0)===uK&&this.peekCodePoint(1)===ui&&this.peekCodePoint(2)===ui)return this.consumeCodePoint(),this.consumeCodePoint(),tG;break;case fK:var f=this.peekCodePoint(0),g=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Gm(f,g,p)){var a=this.consumeName();return{type:7,value:a}}break;case pK:return iG;case vf:if(zA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case mK:return aG;case gK:if(this.peekCodePoint(0)===Fh)return this.consumeCodePoint(),zK;break;case wK:return YK;case vK:return JK;case UK:case LK:var y=this.peekCodePoint(0),C=this.peekCodePoint(1);return y===bc&&(xu(C)||C===Vm)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case OE:if(this.peekCodePoint(0)===Fh)return this.consumeCodePoint(),WK;if(this.peekCodePoint(0)===OE)return this.consumeCodePoint(),$K;break;case yK:if(this.peekCodePoint(0)===Fh)return this.consumeCodePoint(),XK;break;case no:return K2}return Km(e)?(this.consumeWhiteSpace(),oG):ks(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):M0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Qn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();xu(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Vm&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(Qn.apply(void 0,e.map(function(A){return A===Vm?T3:A})),16),i=parseInt(Qn.apply(void 0,e.map(function(A){return A===Vm?k3:A})),16);return{type:30,start:s,end:i}}var a=parseInt(Qn.apply(void 0,e),16);if(this.peekCodePoint(0)===ui&&xu(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];xu(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(Qn.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Hm?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Hm?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===no)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Mm||r===Om){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===no||this.peekCodePoint(0)===Th)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),qm)}for(;;){var s=this.consumeCodePoint();if(s===no||s===Th)return{type:22,value:Qn.apply(void 0,e)};if(Km(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===no||this.peekCodePoint(0)===Th?(this.consumeCodePoint(),{type:22,value:Qn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),qm);if(s===Om||s===Mm||s===Hm||MK(s))return this.consumeBadUrlRemnants(),qm;if(s===vf)if(zA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),qm;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Km(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Th||e===no)return;zA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=Qn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===no||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===O0)return this._value.splice(0,n),eG;if(s===vf){var i=this._value[n+1];i!==no&&i!==void 0&&(i===O0?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):zA(s,i)&&(r+=this.consumeStringSlice(n),r+=Qn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Hp,n=this.peekCodePoint(0);for((n===bc||n===ui)&&e.push(this.consumeCodePoint());ks(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===dp&&ks(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=DE;ks(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===P3||n===Q3)&&((s===bc||s===ui)&&ks(i)||ks(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=DE;ks(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[HK(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Gm(s,i,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===lK?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(xu(e)){for(var r=Qn(e);xu(this.peekCodePoint(0))&&r.length<6;)r+=Qn(this.consumeCodePoint());Km(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||kK(n)||n>1114111?ME:n}return e===no?ME:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(HE(r))e+=Qn(r);else if(zA(r,this.peekCodePoint(0)))e+=Qn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),D3=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new R3;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||lG(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?K2:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Vp=function(t){return t.type===15},zd=function(t){return t.type===17},Pr=function(t){return t.type===20},AG=function(t){return t.type===0},G2=function(t,e){return Pr(t)&&t.value===e},j3=function(t){return t.type!==31},Td=function(t){return t.type!==31&&t.type!==4},vo=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},lG=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ql=function(t){return t.type===17||t.type===15},Vn=function(t){return t.type===16||Ql(t)},O3=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},bs={type:17,number:0,flags:Hp},wx={type:16,number:50,flags:Hp},ol={type:16,number:100,flags:Hp},Zh=function(t,e,r){var n=t[0],s=t[1];return[Gr(n,e),Gr(typeof s<"u"?s:n,r)]},Gr=function(t,e){if(t.type===16)return t.number/100*e;if(Vp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},M3="deg",H3="grad",V3="rad",K3="turn",ev={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case M3:return Math.PI*e.number/180;case H3:return Math.PI/200*e.number;case V3:return e.number;case K3:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},G3=function(t){return t.type===15&&(t.unit===M3||t.unit===H3||t.unit===V3||t.unit===K3)},q3=function(t){var e=t.filter(Pr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[bs,bs];case"to top":case"bottom":return sa(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[bs,ol];case"to right":case"left":return sa(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ol,ol];case"to bottom":case"top":return sa(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ol,bs];case"to left":case"right":return sa(270)}return 0},sa=function(t){return Math.PI*t/180},bl={name:"color",parse:function(t,e){if(e.type===18){var r=cG[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return Al(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return Al(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return Al(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return Al(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=nA[e.value.toUpperCase()];if(typeof o<"u")return o}return nA.TRANSPARENT}},xl=function(t){return(255&t)===0},is=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},Al=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},VE=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},KE=function(t,e){var r=e.filter(Td);if(r.length===3){var n=r.map(VE),s=n[0],i=n[1],a=n[2];return Al(s,i,a,1)}if(r.length===4){var o=r.map(VE),s=o[0],i=o[1],a=o[2],A=o[3];return Al(s,i,a,A)}return 0};function yy(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var GE=function(t,e){var r=e.filter(Td),n=r[0],s=r[1],i=r[2],a=r[3],o=(n.type===17?sa(n.number):ev.parse(t,n))/(Math.PI*2),A=Vn(s)?s.number/100:0,c=Vn(i)?i.number/100:0,u=typeof a<"u"&&Vn(a)?Gr(a,1):1;if(A===0)return Al(c*255,c*255,c*255,1);var f=c<=.5?c*(A+1):c+A-c*A,g=c*2-f,p=yy(g,f,o+1/3),y=yy(g,f,o),C=yy(g,f,o-1/3);return Al(p*255,y*255,C*255,u)},cG={hsl:GE,hsla:GE,rgb:KE,rgba:KE},yf=function(t,e){return bl.parse(t,D3.create(e).parseComponentValue())},nA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},uG={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Pr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},dG={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tv=function(t,e){var r=bl.parse(t,e[0]),n=e[1];return n&&Vn(n)?{color:r,stop:n}:{color:r,stop:null}},qE=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=bs),n.stop===null&&(n.stop=ol);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var A=Gr(o,e);A>i?s.push(A):s.push(i),i=A}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var u=s[a];if(u===null)c===null&&(c=a);else if(c!==null){for(var f=a-c,g=s[c-1],p=(u-g)/(f+1),y=1;y<=f;y++)s[c+y-1]=p*y;c=null}}return t.map(function(C,B){var w=C.color;return{color:w,stop:Math.max(Math.min(1,s[B]/e),0)}})},hG=function(t,e,r){var n=e/2,s=r/2,i=Gr(t[0],e)-n,a=s-Gr(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},fG=function(t,e,r){var n=typeof t=="number"?t:hG(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,o=s/2,A=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,i-c,i+c,a-A,a+A]},ba=function(t,e){return Math.sqrt(t*t+e*e)},zE=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var A=o[0],c=o[1],u=ba(r-A,n-c);return(s?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:o,optimumDistance:u}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},pG=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(ba(e,r),ba(e,r-s),ba(e-n,r),ba(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),A=zE(n,s,e,r,!0),c=A[0],u=A[1];i=ba(c-e,(u-r)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(ba(e,r),ba(e,r-s),ba(e-n,r),ba(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),f=zE(n,s,e,r,!1),c=f[0],u=f[1];i=ba(c-e,(u-r)/o),a=o*i}break}return Array.isArray(t.size)&&(i=Gr(t.size[0],n),a=t.size.length===2?Gr(t.size[1],s):i),[i,a]},mG=function(t,e){var r=sa(180),n=[];return vo(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=q3(s);return}else if(G3(a)){r=ev.parse(t,a);return}}var o=tv(t,s);n.push(o)}),{angle:r,stops:n,type:1}},zm=function(t,e){var r=sa(180),n=[];return vo(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=q3(s);return}else if(G3(a)){r=(ev.parse(t,a)+sa(270))%sa(360);return}}var o=tv(t,s);n.push(o)}),{angle:r,stops:n,type:1}},gG=function(t,e){var r=sa(180),n=[],s=1,i=0,a=3,o=[];return vo(e).forEach(function(A,c){var u=A[0];if(c===0){if(Pr(u)&&u.value==="linear"){s=1;return}else if(Pr(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var f=bl.parse(t,u.values[0]);n.push({stop:bs,color:f})}else if(u.name==="to"){var f=bl.parse(t,u.values[0]);n.push({stop:ol,color:f})}else if(u.name==="color-stop"){var g=u.values.filter(Td);if(g.length===2){var f=bl.parse(t,g[1]),p=g[0];zd(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),s===1?{angle:(r+sa(180))%sa(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:o,type:s}},z3="closest-side",$3="farthest-side",W3="closest-corner",X3="farthest-corner",Y3="circle",J3="ellipse",Z3="cover",eQ="contain",wG=function(t,e){var r=0,n=3,s=[],i=[];return vo(e).forEach(function(a,o){var A=!0;if(o===0){var c=!1;A=a.reduce(function(f,g){if(c)if(Pr(g))switch(g.value){case"center":return i.push(wx),f;case"top":case"left":return i.push(bs),f;case"right":case"bottom":return i.push(ol),f}else(Vn(g)||Ql(g))&&i.push(g);else if(Pr(g))switch(g.value){case Y3:return r=0,!1;case J3:return r=1,!1;case"at":return c=!0,!1;case z3:return n=0,!1;case Z3:case $3:return n=1,!1;case eQ:case W3:return n=2,!1;case X3:return n=3,!1}else if(Ql(g)||Vn(g))return Array.isArray(n)||(n=[]),n.push(g),!1;return f},A)}if(A){var u=tv(t,a);s.push(u)}}),{size:n,shape:r,stops:s,position:i,type:2}},$m=function(t,e){var r=0,n=3,s=[],i=[];return vo(e).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(u,f){if(Pr(f))switch(f.value){case"center":return i.push(wx),!1;case"top":case"left":return i.push(bs),!1;case"right":case"bottom":return i.push(ol),!1}else if(Vn(f)||Ql(f))return i.push(f),!1;return u},A):o===1&&(A=a.reduce(function(u,f){if(Pr(f))switch(f.value){case Y3:return r=0,!1;case J3:return r=1,!1;case eQ:case z3:return n=0,!1;case $3:return n=1,!1;case W3:return n=2,!1;case Z3:case X3:return n=3,!1}else if(Ql(f)||Vn(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return u},A)),A){var c=tv(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},vG=function(t){return t.type===1},yG=function(t){return t.type===2},vx={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=tQ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function BG(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!tQ[t.name])}var tQ={"linear-gradient":mG,"-moz-linear-gradient":zm,"-ms-linear-gradient":zm,"-o-linear-gradient":zm,"-webkit-linear-gradient":zm,"radial-gradient":wG,"-moz-radial-gradient":$m,"-ms-radial-gradient":$m,"-o-radial-gradient":$m,"-webkit-radial-gradient":$m,"-webkit-gradient":gG},bG={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Td(n)&&BG(n)}).map(function(n){return vx.parse(t,n)})}},xG={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Pr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},CG={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return vo(e).map(function(r){return r.filter(Vn)}).map(O3)}},_G={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return vo(e).map(function(r){return r.filter(Pr).map(function(n){return n.value}).join(" ")}).map(EG)}},EG=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},hd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(hd||(hd={}));var IG={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return vo(e).map(function(r){return r.filter(NG)})}},NG=function(t){return Pr(t)||Vn(t)},rv=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},SG=rv("top"),FG=rv("right"),TG=rv("bottom"),UG=rv("left"),nv=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return O3(r.filter(Vn))}}},QG=nv("top-left"),LG=nv("top-right"),PG=nv("bottom-right"),kG=nv("bottom-left"),sv=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},RG=sv("top"),DG=sv("right"),jG=sv("bottom"),OG=sv("left"),iv=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Vp(r)?r.number:0}}},MG=iv("top"),HG=iv("right"),VG=iv("bottom"),KG=iv("left"),GG={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qG={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},zG={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Pr).reduce(function(r,n){return r|$G(n.value)},0)}},$G=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},WG={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},XG={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},H0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(H0||(H0={}));var YG={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return H0.STRICT;case"normal":default:return H0.NORMAL}}},JG={name:"line-height",initialValue:"normal",prefix:!1,type:4},$E=function(t,e){return Pr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Vn(t)?Gr(t,e):e},ZG={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:vx.parse(t,e)}},eq={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},q2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},av=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},tq=av("top"),rq=av("right"),nq=av("bottom"),sq=av("left"),iq={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Pr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},aq={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},ov=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},oq=ov("top"),Aq=ov("right"),lq=ov("bottom"),cq=ov("left"),uq={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},dq={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},hq={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&G2(e[0],"none")?[]:vo(e).map(function(r){for(var n={color:nA.TRANSPARENT,offsetX:bs,offsetY:bs,blur:bs},s=0,i=0;i<r.length;i++){var a=r[i];Ql(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=bl.parse(t,a)}return n})}},fq={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},pq={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=wq[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},mq=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},gq=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,o]:null},wq={matrix:mq,matrix3d:gq},WE={type:16,number:50,flags:Hp},vq=[WE,WE],yq={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Vn);return r.length!==2?vq:[r[0],r[1]]}},Bq={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Bf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Bf||(Bf={}));var bq={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Bf.BREAK_ALL;case"keep-all":return Bf.KEEP_ALL;case"normal":default:return Bf.NORMAL}}},xq={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(zd(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},rQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Cq={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return zd(e)?e.number:1}},_q={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Eq={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Pr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Iq={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},Nq={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Sq={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(zd(e))return e.number;if(Pr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Fq={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Pr).map(function(r){return r.value})}},Tq={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Xn=function(t,e){return(t&e)!==0},Uq={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Qq={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(j3),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var A=o&&zd(o)?o.number:1;n.push({counter:a.value,increment:A})}}return n}},Lq={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(j3),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(Pr(i)&&i.value!=="none"){var o=a&&zd(a)?a.number:0;r.push({counter:i.value,reset:o})}}return r}},Pq={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Vp).map(function(r){return rQ.parse(t,r)})}},kq={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(AG);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;n.push({open:a,close:o})}return n}},XE=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},Rq={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&G2(e[0],"none")?[]:vo(e).map(function(r){for(var n={color:255,offsetX:bs,offsetY:bs,blur:bs,spread:bs,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];G2(a,"inset")?n.inset=!0:Ql(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=bl.parse(t,a)}return n})}},Dq={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Pr).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},jq={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Oq={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Vp(e)?e.number:0}},Mq=function(){function t(e,r){var n,s;this.animationDuration=dt(e,Pq,r.animationDuration),this.backgroundClip=dt(e,uG,r.backgroundClip),this.backgroundColor=dt(e,dG,r.backgroundColor),this.backgroundImage=dt(e,bG,r.backgroundImage),this.backgroundOrigin=dt(e,xG,r.backgroundOrigin),this.backgroundPosition=dt(e,CG,r.backgroundPosition),this.backgroundRepeat=dt(e,_G,r.backgroundRepeat),this.backgroundSize=dt(e,IG,r.backgroundSize),this.borderTopColor=dt(e,SG,r.borderTopColor),this.borderRightColor=dt(e,FG,r.borderRightColor),this.borderBottomColor=dt(e,TG,r.borderBottomColor),this.borderLeftColor=dt(e,UG,r.borderLeftColor),this.borderTopLeftRadius=dt(e,QG,r.borderTopLeftRadius),this.borderTopRightRadius=dt(e,LG,r.borderTopRightRadius),this.borderBottomRightRadius=dt(e,PG,r.borderBottomRightRadius),this.borderBottomLeftRadius=dt(e,kG,r.borderBottomLeftRadius),this.borderTopStyle=dt(e,RG,r.borderTopStyle),this.borderRightStyle=dt(e,DG,r.borderRightStyle),this.borderBottomStyle=dt(e,jG,r.borderBottomStyle),this.borderLeftStyle=dt(e,OG,r.borderLeftStyle),this.borderTopWidth=dt(e,MG,r.borderTopWidth),this.borderRightWidth=dt(e,HG,r.borderRightWidth),this.borderBottomWidth=dt(e,VG,r.borderBottomWidth),this.borderLeftWidth=dt(e,KG,r.borderLeftWidth),this.boxShadow=dt(e,Rq,r.boxShadow),this.color=dt(e,GG,r.color),this.direction=dt(e,qG,r.direction),this.display=dt(e,zG,r.display),this.float=dt(e,WG,r.cssFloat),this.fontFamily=dt(e,Iq,r.fontFamily),this.fontSize=dt(e,Nq,r.fontSize),this.fontStyle=dt(e,Tq,r.fontStyle),this.fontVariant=dt(e,Fq,r.fontVariant),this.fontWeight=dt(e,Sq,r.fontWeight),this.letterSpacing=dt(e,XG,r.letterSpacing),this.lineBreak=dt(e,YG,r.lineBreak),this.lineHeight=dt(e,JG,r.lineHeight),this.listStyleImage=dt(e,ZG,r.listStyleImage),this.listStylePosition=dt(e,eq,r.listStylePosition),this.listStyleType=dt(e,q2,r.listStyleType),this.marginTop=dt(e,tq,r.marginTop),this.marginRight=dt(e,rq,r.marginRight),this.marginBottom=dt(e,nq,r.marginBottom),this.marginLeft=dt(e,sq,r.marginLeft),this.opacity=dt(e,Cq,r.opacity);var i=dt(e,iq,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=dt(e,aq,r.overflowWrap),this.paddingTop=dt(e,oq,r.paddingTop),this.paddingRight=dt(e,Aq,r.paddingRight),this.paddingBottom=dt(e,lq,r.paddingBottom),this.paddingLeft=dt(e,cq,r.paddingLeft),this.paintOrder=dt(e,Dq,r.paintOrder),this.position=dt(e,dq,r.position),this.textAlign=dt(e,uq,r.textAlign),this.textDecorationColor=dt(e,_q,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=dt(e,Eq,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=dt(e,hq,r.textShadow),this.textTransform=dt(e,fq,r.textTransform),this.transform=dt(e,pq,r.transform),this.transformOrigin=dt(e,yq,r.transformOrigin),this.visibility=dt(e,Bq,r.visibility),this.webkitTextStrokeColor=dt(e,jq,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=dt(e,Oq,r.webkitTextStrokeWidth),this.wordBreak=dt(e,bq,r.wordBreak),this.zIndex=dt(e,xq,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return xl(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Xn(this.display,4)||Xn(this.display,33554432)||Xn(this.display,268435456)||Xn(this.display,536870912)||Xn(this.display,67108864)||Xn(this.display,134217728)},t}(),Hq=function(){function t(e,r){this.content=dt(e,Uq,r.content),this.quotes=dt(e,kq,r.quotes)}return t}(),YE=function(){function t(e,r){this.counterIncrement=dt(e,Qq,r.counterIncrement),this.counterReset=dt(e,Lq,r.counterReset)}return t}(),dt=function(t,e,r){var n=new R3,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new D3(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Pr(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return ev.parse(t,i.parseComponentValue());case"color":return bl.parse(t,i.parseComponentValue());case"image":return vx.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return Ql(o)?o:bs;case"length-percentage":var A=i.parseComponentValue();return Vn(A)?A:bs;case"time":return rQ.parse(t,i.parseComponentValue())}break}},Vq="data-html2canvas-debug",Kq=function(t){var e=t.getAttribute(Vq);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},z2=function(t,e){var r=Kq(t);return r===1||e===r},yo=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,z2(r,3))debugger;this.styles=new Mq(e,window.getComputedStyle(r,null)),X2(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Jw(this.context,r),z2(r,4)&&(this.flags|=16)}return t}(),Gq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",JE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ef=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wm=0;Wm<JE.length;Wm++)ef[JE.charCodeAt(Wm)]=Wm;var qq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=ef[t.charCodeAt(n)],a=ef[t.charCodeAt(n+1)],o=ef[t.charCodeAt(n+2)],A=ef[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|A&63;return c},zq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},$q=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Nc=5,yx=11,By=2,Wq=yx-Nc,nQ=65536>>Nc,Xq=1<<Nc,by=Xq-1,Yq=1024>>Nc,Jq=nQ+Yq,Zq=Jq,ez=32,tz=Zq+ez,rz=65536>>yx,nz=1<<Wq,sz=nz-1,ZE=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},iz=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},az=function(t,e){var r=qq(t),n=Array.isArray(r)?$q(r):new Uint32Array(r),s=Array.isArray(r)?zq(r):new Uint16Array(r),i=24,a=ZE(s,i/2,n[4]/2),o=n[5]===2?ZE(s,(i+n[4])/2):iz(n,Math.ceil((i+n[4])/4));return new oz(n[0],n[1],n[2],n[3],a,o)},oz=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Nc],r=(r<<By)+(e&by),this.data[r];if(e<=65535)return r=this.index[nQ+(e-55296>>Nc)],r=(r<<By)+(e&by),this.data[r];if(e<this.highStart)return r=tz-rz+(e>>yx),r=this.index[r],r+=e>>Nc&sz,r=this.index[r],r=(r<<By)+(e&by),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),eI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Az=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xm=0;Xm<eI.length;Xm++)Az[eI.charCodeAt(Xm)]=Xm;var lz=1,xy=2,Cy=3,tI=4,rI=5,cz=7,nI=8,_y=9,Ey=10,sI=11,iI=12,aI=13,oI=14,Iy=15,uz=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},dz=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},hz=az(Gq),Ji="",Ny="",fz=function(t){return hz.get(t)},pz=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===xy&&a===Cy)return Ji;if(i===xy||i===Cy||i===tI||a===xy||a===Cy||a===tI)return Ny;if(i===nI&&[nI,_y,sI,iI].indexOf(a)!==-1||(i===sI||i===_y)&&(a===_y||a===Ey)||(i===iI||i===Ey)&&a===Ey||a===aI||a===rI||a===cz||i===lz)return Ji;if(i===aI&&a===oI){for(;s===rI;)s=e[--n];if(s===oI)return Ji}if(i===Iy&&a===Iy){for(var o=0;s===Iy;)o++,s=e[--n];if(o%2===0)return Ji}return Ny},mz=function(t){var e=uz(t),r=e.length,n=0,s=0,i=e.map(fz);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=Ji;n<r&&(a=pz(e,i,++n))===Ji;);if(a!==Ji||n===r){var o=dz.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},gz=function(t){for(var e=mz(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},wz=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},vz=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=Zw(n.data).map(function(A){return Qn(A)}),i=0,a={},o=s.every(function(A,c){r.setStart(n,i),r.setEnd(n,i+A.length);var u=r.getBoundingClientRect();i+=A.length;var f=u.x>a.x||u.y>a.y;return a=u,c===0?!0:f});return t.body.removeChild(e),o},yz=function(){return typeof new Image().crossOrigin<"u"},Bz=function(){return typeof new XMLHttpRequest().responseType=="string"},bz=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},AI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},xz=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=$2(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),lI(a).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",AI(A)?lI($2(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),AI(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},$2=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},lI=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ws={get SUPPORT_RANGE_BOUNDS(){var t=wz(document);return Object.defineProperty(ws,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ws.SUPPORT_RANGE_BOUNDS&&vz(document);return Object.defineProperty(ws,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=bz(document);return Object.defineProperty(ws,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?xz(document):Promise.resolve(!1);return Object.defineProperty(ws,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=yz();return Object.defineProperty(ws,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Bz();return Object.defineProperty(ws,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ws,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ws,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},bf=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Cz=function(t,e,r,n){var s=Iz(e,r),i=[],a=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ws.SUPPORT_RANGE_BOUNDS){var A=cI(n,a,o.length).getClientRects();if(A.length>1){var c=Bx(o),u=0;c.forEach(function(g){i.push(new bf(g,hA.fromDOMRectList(t,cI(n,u+a,g.length).getClientRects()))),u+=g.length})}else i.push(new bf(o,hA.fromDOMRectList(t,A)))}else{var f=n.splitText(o.length);i.push(new bf(o,_z(t,n))),n=f}else ws.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),i},_z=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=Jw(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return hA.EMPTY},cI=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},Bx=function(t){if(ws.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return gz(t)},Ez=function(t,e){if(ws.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Sz(t,e)},Iz=function(t,e){return e.letterSpacing!==0?Bx(t):Ez(t,e)},Nz=[32,160,4961,65792,65793,4153,4241],Sz=function(t,e){for(var r=rK(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),o=Zw(a),A="";o.forEach(function(c){Nz.indexOf(c)===-1?A+=Qn(c):(A.length&&n.push(A),n.push(Qn(c)),A="")}),A.length&&n.push(A)}};!(s=r.next()).done;)i();return n},Fz=function(){function t(e,r,n){this.text=Tz(r.data,n.textTransform),this.textBounds=Cz(e,this.text,n,r)}return t}(),Tz=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Uz,Qz);case 2:return t.toUpperCase();default:return t}},Uz=/(^|\s|:|-|\(|\))([a-z])/g,Qz=function(t,e,r){return t.length>0?e+r.toUpperCase():t},sQ=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(yo),iQ=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(yo),aQ=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=Jw(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(yo),oQ=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(yo),W2=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(yo),Lz=[{type:15,flags:0,unit:"px",number:3}],Pz=[{type:16,flags:0,number:50}],kz=function(t){return t.width>t.height?new hA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new hA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Rz=function(t){var e=t.type===Dz?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},V0="checkbox",K0="radio",Dz="password",uI=707406591,bx=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=Rz(n),(s.type===V0||s.type===K0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=kz(s.bounds)),s.type){case V0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Lz;break;case K0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Pz;break}return s}return e}(yo),AQ=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(yo),lQ=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(yo),cQ=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=dQ(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?yf(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):nA.TRANSPARENT,a=n.contentWindow.document.body?yf(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):nA.TRANSPARENT;s.backgroundColor=xl(i)?xl(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(yo),jz=["OL","UL","MENU"],Gg=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,hQ(s)&&s.data.trim().length>0)r.textNodes.push(new Fz(t,s,r.styles));else if(rd(s))if(gQ(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Gg(t,o,r,n)});else{var a=uQ(t,s);a.styles.isVisible()&&(Oz(s,a,n)?a.flags|=4:Mz(a.styles)&&(a.flags|=2),jz.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?Gg(t,s.shadowRoot,a,n):!G0(s)&&!fQ(s)&&!q0(s)&&Gg(t,s,a,n))}},uQ=function(t,e){return Y2(e)?new sQ(t,e):pQ(e)?new iQ(t,e):fQ(e)?new aQ(t,e):Hz(e)?new oQ(t,e):Vz(e)?new W2(t,e):Kz(e)?new bx(t,e):q0(e)?new AQ(t,e):G0(e)?new lQ(t,e):mQ(e)?new cQ(t,e):new yo(t,e)},dQ=function(t,e){var r=uQ(t,e);return r.flags|=4,Gg(t,e,r,r),r},Oz=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||xx(t)&&r.styles.isTransparent()},Mz=function(t){return t.isPositioned()||t.isFloating()},hQ=function(t){return t.nodeType===Node.TEXT_NODE},rd=function(t){return t.nodeType===Node.ELEMENT_NODE},X2=function(t){return rd(t)&&typeof t.style<"u"&&!qg(t)},qg=function(t){return typeof t.className=="object"},Hz=function(t){return t.tagName==="LI"},Vz=function(t){return t.tagName==="OL"},Kz=function(t){return t.tagName==="INPUT"},Gz=function(t){return t.tagName==="HTML"},fQ=function(t){return t.tagName==="svg"},xx=function(t){return t.tagName==="BODY"},pQ=function(t){return t.tagName==="CANVAS"},dI=function(t){return t.tagName==="VIDEO"},Y2=function(t){return t.tagName==="IMG"},mQ=function(t){return t.tagName==="IFRAME"},hI=function(t){return t.tagName==="STYLE"},qz=function(t){return t.tagName==="SCRIPT"},G0=function(t){return t.tagName==="TEXTAREA"},q0=function(t){return t.tagName==="SELECT"},gQ=function(t){return t.tagName==="SLOT"},fI=function(t){return t.tagName.indexOf("-")>0},zz=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var A=r.counters[o.counter];A&&o.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var A=r.counters[o.counter];a.push(o.counter),A||(A=r.counters[o.counter]=[]),A.push(o.reset)}),a},t}(),pI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},mI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$z={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Wz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Cu=function(t,e,r,n,s,i){return t<e||t>r?hp(t,s,i.length>0):n.integers.reduce(function(a,o,A){for(;t>=o;)t-=o,a+=n.values[A];return a},"")+i},wQ=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},Un=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(wQ(Math.abs(t),i,n,function(a){return Qn(Math.floor(a%i)+e)})+s)},ic=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return wQ(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},ju=1,VA=2,KA=4,tf=8,Ro=function(t,e,r,n,s,i){if(t<-9999||t>9999)return hp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var A=0;a>0&&A<=4;A++){var c=a%10;c===0&&Xn(i,ju)&&o!==""?o=e[c]+o:c>1||c===1&&A===0||c===1&&A===1&&Xn(i,VA)||c===1&&A===1&&Xn(i,KA)&&t>100||c===1&&A>1&&Xn(i,tf)?o=e[c]+(A>0?r[A-1]:"")+o:c===1&&A>0&&(o=r[A-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},gI="",wI="",vI="",Sy="",hp=function(t,e,r){var n=r?". ":"",s=r?"":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=Un(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return ic(t,"",s);case 6:return Cu(t,1,3999,pI,3,n).toLowerCase();case 7:return Cu(t,1,3999,pI,3,n);case 8:return Un(t,945,969,!1,n);case 9:return Un(t,97,122,!1,n);case 10:return Un(t,65,90,!1,n);case 11:return Un(t,1632,1641,!0,n);case 12:case 49:return Cu(t,1,9999,mI,3,n);case 35:return Cu(t,1,9999,mI,3,n).toLowerCase();case 13:return Un(t,2534,2543,!0,n);case 14:case 30:return Un(t,6112,6121,!0,n);case 15:return ic(t,"",s);case 16:return ic(t,"",s);case 17:case 48:return Ro(t,"",gI,"",s,VA|KA|tf);case 47:return Ro(t,"",wI,"",s,ju|VA|KA|tf);case 42:return Ro(t,"",gI,"",s,VA|KA|tf);case 41:return Ro(t,"",wI,"",s,ju|VA|KA|tf);case 26:return Ro(t,"","",vI,s,0);case 25:return Ro(t,"","",vI,s,ju|VA|KA);case 31:return Ro(t,"","",Sy,i,ju|VA|KA);case 33:return Ro(t,"","",Sy,i,0);case 32:return Ro(t,"","",Sy,i,ju|VA|KA);case 18:return Un(t,2406,2415,!0,n);case 20:return Cu(t,1,19999,Wz,3,n);case 21:return Un(t,2790,2799,!0,n);case 22:return Un(t,2662,2671,!0,n);case 22:return Cu(t,1,10999,$z,3,n);case 23:return ic(t,"");case 24:return ic(t,"");case 27:return Un(t,3302,3311,!0,n);case 28:return ic(t,"",s);case 29:return ic(t,"",s);case 34:return Un(t,3792,3801,!0,n);case 37:return Un(t,6160,6169,!0,n);case 38:return Un(t,4160,4169,!0,n);case 39:return Un(t,2918,2927,!0,n);case 40:return Un(t,1776,1785,!0,n);case 43:return Un(t,3046,3055,!0,n);case 44:return Un(t,3174,3183,!0,n);case 45:return Un(t,3664,3673,!0,n);case 46:return Un(t,3872,3881,!0,n);case 3:default:return Un(t,48,57,!0,n)}},vQ="data-html2canvas-ignore",yI=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new zz,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=Xz(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,A=o.document,c=Zz(s).then(function(){return zs(n,void 0,void 0,function(){var u,f;return Ls(this,function(g){switch(g.label){case 0:return this.scrolledElements.forEach(n$),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),u=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:g.sent(),g.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Jz(A)]:[3,4];case 3:g.sent(),g.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,f)}).then(function(){return s})]:[2,s]}})})});return A.open(),A.write(t$(document.doctype)+"<html></html>"),r$(this.referenceElement.ownerDocument,i,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(e){if(z2(e,2))debugger;if(pQ(e))return this.createCanvasClone(e);if(dI(e))return this.createVideoClone(e);if(hI(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return Y2(r)&&(Y2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),fI(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Fy(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!rd(r)||!qz(r)&&!r.hasAttribute(vQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!rd(r)||!hI(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(rd(i)&&gQ(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(hQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&rd(e)&&(X2(e)||qg(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&X2(s)&&(this.clonedReferenceElement=s),xx(s)&&a$(s);var A=this.counters.parse(new YE(this.context,i)),c=this.resolvePseudoContent(e,s,a,xf.BEFORE);fI(e)&&(r=!0),dI(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,o,xf.AFTER);return u&&s.appendChild(u),this.counters.pop(A),(i&&(this.options.copyStyles||qg(e))&&!mQ(e)||r)&&Fy(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(G0(e)||q0(e))&&(G0(s)||q0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new YE(this.context,n));var A=new Hq(this.context,n),c=o.createElement("html2canvaspseudoelement");Fy(n,c),A.content.forEach(function(f){if(f.type===0)c.appendChild(o.createTextNode(f.value));else if(f.type===22){var g=o.createElement("img");g.src=f.value,g.style.opacity="1",c.appendChild(g)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(Pr);p.length&&c.appendChild(o.createTextNode(e.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var y=f.values.filter(Td),C=y[0],B=y[1];if(C&&Pr(C)){var w=i.counters.getCounterValue(C.value),b=B&&Pr(B)?q2.parse(i.context,B.value):3;c.appendChild(o.createTextNode(hp(w,b,!1)))}}else if(f.name==="counters"){var N=f.values.filter(Td),C=N[0],T=N[1],B=N[2];if(C&&Pr(C)){var V=i.counters.getCounterValues(C.value),j=B&&Pr(B)?q2.parse(i.context,B.value):3,L=T&&T.type===0?T.value:"",S=V.map(function(F){return hp(F,j,!1)}).join(L);c.appendChild(o.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":c.appendChild(o.createTextNode(XE(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(XE(A.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(f.value))}}),c.className=J2+" "+Z2;var u=s===xf.BEFORE?" "+J2:" "+Z2;return qg(r)?r.className.baseValue+=u:r.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),xf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(xf||(xf={}));var Xz=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(vQ,"true"),t.body.appendChild(r),r},Yz=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},Jz=function(t){return Promise.all([].slice.call(t.images,0).map(Yz))},Zz=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},e$=["all","d","content"],Fy=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);e$.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},t$=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},r$=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},n$=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},s$=":before",i$=":after",J2="___html2canvas___pseudoelement_before",Z2="___html2canvas___pseudoelement_after",BI=`{
    content: "" !important;
    display: none !important;
}`,a$=function(t){o$(t,"."+J2+s$+BI+`
         .`+Z2+i$+BI)},o$=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},yQ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),A$=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Uy(e)||d$(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return zs(this,void 0,void 0,function(){var r,n,s,i,a=this;return Ls(this,function(o){switch(o.label){case 0:return r=yQ.isSameOrigin(e),n=!Ty(e)&&this._options.useCORS===!0&&ws.SUPPORT_CORS_IMAGES&&!r,s=!Ty(e)&&!r&&!Uy(e)&&typeof this._options.proxy=="string"&&ws.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Ty(e)&&!Uy(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,c){var u=new Image;u.onload=function(){return A(u)},u.onerror=c,(h$(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return A(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=ws.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")i(A.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(g){return a(g)},!1),f.readAsDataURL(A.response)}else a("Failed to proxy resource "+s+" with status code "+A.status)},A.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),r._options.imageTimeout){var u=r._options.imageTimeout;A.timeout=u,A.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+s)}}A.send()})},t}(),l$=/^data:image\/svg\+xml/i,c$=/^data:image\/.*;base64,/i,u$=/^data:image\/.*/i,d$=function(t){return ws.SUPPORT_SVG_DRAWING||!f$(t)},Ty=function(t){return u$.test(t)},h$=function(t){return c$.test(t)},Uy=function(t){return t.substr(0,4)==="blob"},f$=function(t){return t.substr(-3).toLowerCase()==="svg"||l$.test(t)},lt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),_u=function(t,e,r){return new lt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Ym=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=_u(this.start,this.startControl,e),s=_u(this.startControl,this.endControl,e),i=_u(this.endControl,this.end,e),a=_u(n,s,e),o=_u(s,i,e),A=_u(a,o,e);return r?new t(this.start,n,a,A):new t(A,o,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ta=function(t){return t.type===1},p$=function(){function t(e){var r=e.styles,n=e.bounds,s=Zh(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],o=Zh(r.borderTopRightRadius,n.width,n.height),A=o[0],c=o[1],u=Zh(r.borderBottomRightRadius,n.width,n.height),f=u[0],g=u[1],p=Zh(r.borderBottomLeftRadius,n.width,n.height),y=p[0],C=p[1],B=[];B.push((i+A)/n.width),B.push((y+f)/n.width),B.push((a+C)/n.height),B.push((c+g)/n.height);var w=Math.max.apply(Math,B);w>1&&(i/=w,a/=w,A/=w,c/=w,f/=w,g/=w,y/=w,C/=w);var b=n.width-A,N=n.height-g,T=n.width-f,V=n.height-C,j=r.borderTopWidth,L=r.borderRightWidth,S=r.borderBottomWidth,I=r.borderLeftWidth,R=Gr(r.paddingTop,e.bounds.width),F=Gr(r.paddingRight,e.bounds.width),E=Gr(r.paddingBottom,e.bounds.width),U=Gr(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?rn(n.left+I/3,n.top+j/3,i-I/3,a-j/3,xr.TOP_LEFT):new lt(n.left+I/3,n.top+j/3),this.topRightBorderDoubleOuterBox=i>0||a>0?rn(n.left+b,n.top+j/3,A-L/3,c-j/3,xr.TOP_RIGHT):new lt(n.left+n.width-L/3,n.top+j/3),this.bottomRightBorderDoubleOuterBox=f>0||g>0?rn(n.left+T,n.top+N,f-L/3,g-S/3,xr.BOTTOM_RIGHT):new lt(n.left+n.width-L/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=y>0||C>0?rn(n.left+I/3,n.top+V,y-I/3,C-S/3,xr.BOTTOM_LEFT):new lt(n.left+I/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?rn(n.left+I*2/3,n.top+j*2/3,i-I*2/3,a-j*2/3,xr.TOP_LEFT):new lt(n.left+I*2/3,n.top+j*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?rn(n.left+b,n.top+j*2/3,A-L*2/3,c-j*2/3,xr.TOP_RIGHT):new lt(n.left+n.width-L*2/3,n.top+j*2/3),this.bottomRightBorderDoubleInnerBox=f>0||g>0?rn(n.left+T,n.top+N,f-L*2/3,g-S*2/3,xr.BOTTOM_RIGHT):new lt(n.left+n.width-L*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||C>0?rn(n.left+I*2/3,n.top+V,y-I*2/3,C-S*2/3,xr.BOTTOM_LEFT):new lt(n.left+I*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=i>0||a>0?rn(n.left+I/2,n.top+j/2,i-I/2,a-j/2,xr.TOP_LEFT):new lt(n.left+I/2,n.top+j/2),this.topRightBorderStroke=i>0||a>0?rn(n.left+b,n.top+j/2,A-L/2,c-j/2,xr.TOP_RIGHT):new lt(n.left+n.width-L/2,n.top+j/2),this.bottomRightBorderStroke=f>0||g>0?rn(n.left+T,n.top+N,f-L/2,g-S/2,xr.BOTTOM_RIGHT):new lt(n.left+n.width-L/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=y>0||C>0?rn(n.left+I/2,n.top+V,y-I/2,C-S/2,xr.BOTTOM_LEFT):new lt(n.left+I/2,n.top+n.height-S/2),this.topLeftBorderBox=i>0||a>0?rn(n.left,n.top,i,a,xr.TOP_LEFT):new lt(n.left,n.top),this.topRightBorderBox=A>0||c>0?rn(n.left+b,n.top,A,c,xr.TOP_RIGHT):new lt(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||g>0?rn(n.left+T,n.top+N,f,g,xr.BOTTOM_RIGHT):new lt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||C>0?rn(n.left,n.top+V,y,C,xr.BOTTOM_LEFT):new lt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?rn(n.left+I,n.top+j,Math.max(0,i-I),Math.max(0,a-j),xr.TOP_LEFT):new lt(n.left+I,n.top+j),this.topRightPaddingBox=A>0||c>0?rn(n.left+Math.min(b,n.width-L),n.top+j,b>n.width+L?0:Math.max(0,A-L),Math.max(0,c-j),xr.TOP_RIGHT):new lt(n.left+n.width-L,n.top+j),this.bottomRightPaddingBox=f>0||g>0?rn(n.left+Math.min(T,n.width-I),n.top+Math.min(N,n.height-S),Math.max(0,f-L),Math.max(0,g-S),xr.BOTTOM_RIGHT):new lt(n.left+n.width-L,n.top+n.height-S),this.bottomLeftPaddingBox=y>0||C>0?rn(n.left+I,n.top+Math.min(V,n.height-S),Math.max(0,y-I),Math.max(0,C-S),xr.BOTTOM_LEFT):new lt(n.left+I,n.top+n.height-S),this.topLeftContentBox=i>0||a>0?rn(n.left+I+U,n.top+j+R,Math.max(0,i-(I+U)),Math.max(0,a-(j+R)),xr.TOP_LEFT):new lt(n.left+I+U,n.top+j+R),this.topRightContentBox=A>0||c>0?rn(n.left+Math.min(b,n.width+I+U),n.top+j+R,b>n.width+I+U?0:A-I+U,c-(j+R),xr.TOP_RIGHT):new lt(n.left+n.width-(L+F),n.top+j+R),this.bottomRightContentBox=f>0||g>0?rn(n.left+Math.min(T,n.width-(I+U)),n.top+Math.min(N,n.height+j+R),Math.max(0,f-(L+F)),g-(S+E),xr.BOTTOM_RIGHT):new lt(n.left+n.width-(L+F),n.top+n.height-(S+E)),this.bottomLeftContentBox=y>0||C>0?rn(n.left+I+U,n.top+V,Math.max(0,y-(I+U)),C-(S+E),xr.BOTTOM_LEFT):new lt(n.left+I+U,n.top+n.height-(S+E))}return t}(),xr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(xr||(xr={}));var rn=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,o=n*i,A=t+r,c=e+n;switch(s){case xr.TOP_LEFT:return new Ym(new lt(t,c),new lt(t,c-o),new lt(A-a,e),new lt(A,e));case xr.TOP_RIGHT:return new Ym(new lt(t,e),new lt(t+a,e),new lt(A,c-o),new lt(A,c));case xr.BOTTOM_RIGHT:return new Ym(new lt(A,e),new lt(A,e+o),new lt(t+a,c),new lt(t,c));case xr.BOTTOM_LEFT:default:return new Ym(new lt(A,c),new lt(A-a,c),new lt(t,e+o),new lt(t,e))}},z0=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},m$=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},$0=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},g$=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Jm=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),w$=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),v$=function(t){return t.type===0},BQ=function(t){return t.type===1},y$=function(t){return t.type===2},bI=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},B$=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},bQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),xQ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new p$(this.container),this.container.styles.opacity<1&&this.effects.push(new w$(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new g$(n,s,i))}if(this.container.styles.overflowX!==0){var a=z0(this.curves),o=$0(this.curves);bI(a,o)?this.effects.push(new Jm(a,6)):(this.effects.push(new Jm(a,2)),this.effects.push(new Jm(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(A){return!BQ(A)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=z0(n.curves),o=$0(n.curves);bI(a,o)||s.unshift(new Jm(o,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(A){return Xn(A.target,e)})},t}(),eB=function(t,e,r,n){t.container.elements.forEach(function(s){var i=Xn(s.flags,4),a=Xn(s.flags,2),o=new xQ(s,t);Xn(s.styles.display,2048)&&n.push(o);var A=Xn(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,u=new bQ(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var f=s.styles.zIndex.order;if(f<0){var g=0;c.negativeZIndex.some(function(y,C){return f>y.element.container.styles.zIndex.order?(g=C,!1):g>0}),c.negativeZIndex.splice(g,0,u)}else if(f>0){var p=0;c.positiveZIndex.some(function(y,C){return f>=y.element.container.styles.zIndex.order?(p=C+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);eB(o,u,i?u:r,A)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),eB(o,e,r,A);Xn(s.flags,8)&&CQ(s,A)})},CQ=function(t,e){for(var r=t instanceof W2?t.start:1,n=t instanceof W2?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof oQ&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=hp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},b$=function(t){var e=new xQ(t,null),r=new bQ(e),n=[];return eB(e,r,r,n),CQ(e.container,n),r},xI=function(t,e){switch(e){case 0:return ia(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ia(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ia(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ia(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},x$=function(t,e){switch(e){case 0:return ia(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ia(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ia(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ia(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},C$=function(t,e){switch(e){case 0:return ia(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ia(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ia(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ia(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},_$=function(t,e){switch(e){case 0:return Zm(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Zm(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Zm(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Zm(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Zm=function(t,e){var r=[];return ta(t)?r.push(t.subdivide(.5,!1)):r.push(t),ta(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},ia=function(t,e,r,n){var s=[];return ta(t)?s.push(t.subdivide(.5,!1)):s.push(t),ta(r)?s.push(r.subdivide(.5,!0)):s.push(r),ta(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),ta(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},_Q=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},W0=function(t){var e=t.styles,r=t.bounds,n=Gr(e.paddingLeft,r.width),s=Gr(e.paddingRight,r.width),i=Gr(e.paddingTop,r.width),a=Gr(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},E$=function(t,e){return t===0?e.bounds:t===2?W0(e):_Q(e)},I$=function(t,e){return t===0?e.bounds:t===2?W0(e):_Q(e)},Qy=function(t,e,r){var n=E$(Ou(t.styles.backgroundOrigin,e),t),s=I$(Ou(t.styles.backgroundClip,e),t),i=N$(Ou(t.styles.backgroundSize,e),r,n),a=i[0],o=i[1],A=Zh(Ou(t.styles.backgroundPosition,e),n.width-a,n.height-o),c=S$(Ou(t.styles.backgroundRepeat,e),A,i,n,s),u=Math.round(n.left+A[0]),f=Math.round(n.top+A[1]);return[c,u,f,a,o]},Eu=function(t){return Pr(t)&&t.value===hd.AUTO},eg=function(t){return typeof t=="number"},N$=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(Vn(a)&&o&&Vn(o))return[Gr(a,r.width),Gr(o,r.height)];var A=eg(i);if(Pr(a)&&(a.value===hd.CONTAIN||a.value===hd.COVER)){if(eg(i)){var c=r.width/r.height;return c<i!=(a.value===hd.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=eg(n),f=eg(s),g=u||f;if(Eu(a)&&(!o||Eu(o))){if(u&&f)return[n,s];if(!A&&!g)return[r.width,r.height];if(g&&A){var p=u?n:s*i,y=f?s:n/i;return[p,y]}var C=u?n:r.width,B=f?s:r.height;return[C,B]}if(A){var w=0,b=0;return Vn(a)?w=Gr(a,r.width):Vn(o)&&(b=Gr(o,r.height)),Eu(a)?w=b*i:(!o||Eu(o))&&(b=w/i),[w,b]}var N=null,T=null;if(Vn(a)?N=Gr(a,r.width):o&&Vn(o)&&(T=Gr(o,r.height)),N!==null&&(!o||Eu(o))&&(T=u&&f?N/n*s:r.height),T!==null&&Eu(a)&&(N=u&&f?T/s*n:r.width),N!==null&&T!==null)return[N,T];throw new Error("Unable to calculate background-size for element")},Ou=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},S$=function(t,e,r,n,s){var i=e[0],a=e[1],o=r[0],A=r[1];switch(t){case 2:return[new lt(Math.round(n.left),Math.round(n.top+a)),new lt(Math.round(n.left+n.width),Math.round(n.top+a)),new lt(Math.round(n.left+n.width),Math.round(A+n.top+a)),new lt(Math.round(n.left),Math.round(A+n.top+a))];case 3:return[new lt(Math.round(n.left+i),Math.round(n.top)),new lt(Math.round(n.left+i+o),Math.round(n.top)),new lt(Math.round(n.left+i+o),Math.round(n.height+n.top)),new lt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new lt(Math.round(n.left+i),Math.round(n.top+a)),new lt(Math.round(n.left+i+o),Math.round(n.top+a)),new lt(Math.round(n.left+i+o),Math.round(n.top+a+A)),new lt(Math.round(n.left+i),Math.round(n.top+a+A))];default:return[new lt(Math.round(s.left),Math.round(s.top)),new lt(Math.round(s.left+s.width),Math.round(s.top)),new lt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new lt(Math.round(s.left),Math.round(s.height+s.top))]}},F$="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",CI="Hidden Text",T$=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=F$,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(CI)),n.appendChild(i),n.appendChild(s);var o=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(CI)),n.style.lineHeight="normal",s.style.verticalAlign="super";var A=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:A}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),EQ=function(){function t(e,r){this.context=e,this.options=r}return t}(),U$=1e4,Q$=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new T$(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),y$(r)&&(this.ctx.globalAlpha=r.opacity),v$(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),BQ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return zs(this,void 0,void 0,function(){var n;return Ls(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return zs(this,void 0,void 0,function(){return Ls(this,function(n){switch(n.label){case 0:if(Xn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=Bx(r.text);a.reduce(function(o,A){return i.ctx.fillText(A,o,r.bounds.top+s),o+i.ctx.measureText(A).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=D$(r.fontFamily).join(", "),i=Vp(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return zs(this,void 0,void 0,function(){var s,i,a,o,A,c,u,f,g=this;return Ls(this,function(p){return s=this.createFontStyle(n),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),c=A.baseline,u=A.middle,f=n.paintOrder,r.textBounds.forEach(function(y){f.forEach(function(C){switch(C){case 0:g.ctx.fillStyle=is(n.color),g.renderTextWithLetterSpacing(y,n.letterSpacing,c);var B=n.textShadow;B.length&&y.text.trim().length&&(B.slice(0).reverse().forEach(function(w){g.ctx.shadowColor=is(w.color),g.ctx.shadowOffsetX=w.offsetX.number*g.options.scale,g.ctx.shadowOffsetY=w.offsetY.number*g.options.scale,g.ctx.shadowBlur=w.blur.number,g.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),g.ctx.shadowColor="",g.ctx.shadowOffsetX=0,g.ctx.shadowOffsetY=0,g.ctx.shadowBlur=0),n.textDecorationLine.length&&(g.ctx.fillStyle=is(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(w){switch(w){case 1:g.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:g.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:g.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+u),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(g.ctx.strokeStyle=is(n.webkitTextStrokeColor),g.ctx.lineWidth=n.webkitTextStrokeWidth,g.ctx.lineJoin=window.chrome?"miter":"round",g.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),g.ctx.strokeStyle="",g.ctx.lineWidth=0,g.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=W0(r),a=$0(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return zs(this,void 0,void 0,function(){var n,s,i,a,o,A,b,b,c,u,f,g,T,p,y,V,C,B,w,b,N,T,V;return Ls(this,function(j){switch(j.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,o=n.textNodes,j.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,i)]):[3,4];case 2:j.sent(),j.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof sQ))return[3,8];j.label=5;case 5:return j.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return b=j.sent(),this.renderReplacedElement(n,s,b),[3,8];case 7:return j.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof iQ&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof aQ))return[3,12];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return b=j.sent(),this.renderReplacedElement(n,s,b),[3,12];case 11:return j.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof cQ&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=j.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),j.label=14;case 14:if(n instanceof bx&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===V0?n.checked&&(this.ctx.save(),this.path([new lt(n.bounds.left+f*.39363,n.bounds.top+f*.79),new lt(n.bounds.left+f*.16,n.bounds.top+f*.5549),new lt(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new lt(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new lt(n.bounds.left+f*.72983,n.bounds.top+f*.23),new lt(n.bounds.left+f*.84,n.bounds.top+f*.34085),new lt(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=is(uI),this.ctx.fill(),this.ctx.restore()):n.type===K0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=is(uI),this.ctx.fill(),this.ctx.restore())),L$(n)&&n.value.length){switch(g=this.createFontStyle(i),T=g[0],p=g[1],y=this.fontMetrics.getMetrics(T,p).baseline,this.ctx.font=T,this.ctx.fillStyle=is(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=k$(n.styles.textAlign),V=W0(n),C=0,n.styles.textAlign){case 1:C+=V.width/2;break;case 2:C+=V.width;break}B=V.add(C,0,0,-V.height/2+1),this.ctx.save(),this.path([new lt(V.left,V.top),new lt(V.left+V.width,V.top),new lt(V.left+V.width,V.top+V.height),new lt(V.left,V.top+V.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new bf(n.value,B),i.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Xn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(w=n.styles.listStyleImage,w.type!==0)return[3,18];b=void 0,N=w.url,j.label=15;case 15:return j.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return b=j.sent(),this.ctx.drawImage(b,n.bounds.left-(b.width+10),n.bounds.top),[3,18];case 17:return j.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(T=this.createFontStyle(i)[0],this.ctx.font=T,this.ctx.fillStyle=is(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",V=new hA(n.bounds.left,n.bounds.top+Gr(n.styles.paddingTop,n.bounds.width),n.bounds.width,$E(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new bf(r.listValue,V),i.letterSpacing,$E(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),j.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return zs(this,void 0,void 0,function(){var n,s,w,i,a,w,o,A,w,c,u,w,f,g,w,p,y,w,C,B,w;return Ls(this,function(b){switch(b.label){case 0:if(Xn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:b.sent(),n=0,s=r.negativeZIndex,b.label=2;case 2:return n<s.length?(w=s[n],[4,this.renderStack(w)]):[3,5];case 3:b.sent(),b.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:b.sent(),i=0,a=r.nonInlineLevel,b.label=7;case 7:return i<a.length?(w=a[i],[4,this.renderNode(w)]):[3,10];case 8:b.sent(),b.label=9;case 9:return i++,[3,7];case 10:o=0,A=r.nonPositionedFloats,b.label=11;case 11:return o<A.length?(w=A[o],[4,this.renderStack(w)]):[3,14];case 12:b.sent(),b.label=13;case 13:return o++,[3,11];case 14:c=0,u=r.nonPositionedInlineLevel,b.label=15;case 15:return c<u.length?(w=u[c],[4,this.renderStack(w)]):[3,18];case 16:b.sent(),b.label=17;case 17:return c++,[3,15];case 18:f=0,g=r.inlineLevel,b.label=19;case 19:return f<g.length?(w=g[f],[4,this.renderNode(w)]):[3,22];case 20:b.sent(),b.label=21;case 21:return f++,[3,19];case 22:p=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return p<y.length?(w=y[p],[4,this.renderStack(w)]):[3,26];case 24:b.sent(),b.label=25;case 25:return p++,[3,23];case 26:C=0,B=r.positiveZIndex,b.label=27;case 27:return C<B.length?(w=B[C],[4,this.renderStack(w)]):[3,30];case 28:b.sent(),b.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=ta(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),ta(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var A=o.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return zs(this,void 0,void 0,function(){var n,s,i,a,o,A;return Ls(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(u){var f,g,p,R,le,ie,U,K,S,y,R,le,ie,U,K,C,B,w,b,N,T,V,j,L,S,I,R,F,E,U,K,ae,le,ie,q,Y,ue,pe,D,W,ee,M;return Ls(this,function(Z){switch(Z.label){case 0:if(u.type!==0)return[3,5];f=void 0,g=u.url,Z.label=1;case 1:return Z.trys.push([1,3,,4]),[4,i.context.cache.match(g)];case 2:return f=Z.sent(),[3,4];case 3:return Z.sent(),i.context.logger.error("Error loading background-image "+g),[3,4];case 4:return f&&(p=Qy(r,n,[f.width,f.height,f.width/f.height]),R=p[0],le=p[1],ie=p[2],U=p[3],K=p[4],S=i.ctx.createPattern(i.resizeImage(f,U,K),"repeat"),i.renderRepeat(R,S,le,ie)),[3,6];case 5:vG(u)?(y=Qy(r,n,[null,null,null]),R=y[0],le=y[1],ie=y[2],U=y[3],K=y[4],C=fG(u.angle,U,K),B=C[0],w=C[1],b=C[2],N=C[3],T=C[4],V=document.createElement("canvas"),V.width=U,V.height=K,j=V.getContext("2d"),L=j.createLinearGradient(w,N,b,T),qE(u.stops,B).forEach(function(Ae){return L.addColorStop(Ae.stop,is(Ae.color))}),j.fillStyle=L,j.fillRect(0,0,U,K),U>0&&K>0&&(S=i.ctx.createPattern(V,"repeat"),i.renderRepeat(R,S,le,ie))):yG(u)&&(I=Qy(r,n,[null,null,null]),R=I[0],F=I[1],E=I[2],U=I[3],K=I[4],ae=u.position.length===0?[wx]:u.position,le=Gr(ae[0],U),ie=Gr(ae[ae.length-1],K),q=pG(u,le,ie,U,K),Y=q[0],ue=q[1],Y>0&&ue>0&&(pe=i.ctx.createRadialGradient(F+le,E+ie,0,F+le,E+ie,Y),qE(u.stops,Y*2).forEach(function(Ae){return pe.addColorStop(Ae.stop,is(Ae.color))}),i.path(R),i.ctx.fillStyle=pe,Y!==ue?(D=r.bounds.left+.5*r.bounds.width,W=r.bounds.top+.5*r.bounds.height,ee=ue/Y,M=1/ee,i.ctx.save(),i.ctx.translate(D,W),i.ctx.transform(1,0,0,ee,0,0),i.ctx.translate(-D,-W),i.ctx.fillRect(F,M*(E-W)+W,U,K*M),i.ctx.restore()):i.ctx.fill())),Z.label=6;case 6:return n--,[2]}})},i=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(A=o[a],[5,s(A)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return zs(this,void 0,void 0,function(){return Ls(this,function(i){return this.path(xI(s,n)),this.ctx.fillStyle=is(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return zs(this,void 0,void 0,function(){var a,o;return Ls(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return A.sent(),[2];case 2:return a=x$(i,s),this.path(a),this.ctx.fillStyle=is(r),this.ctx.fill(),o=C$(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return zs(this,void 0,void 0,function(){var n,s,i,a,o,A,c,u,f=this;return Ls(this,function(g){switch(g.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!xl(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=P$(Ou(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),xl(n.backgroundColor)||(this.ctx.fillStyle=is(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:g.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var y=z0(r.curves),C=p.inset?0:U$,B=B$(y,-C+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(y),f.ctx.clip(),f.mask(B)):(f.mask(y),f.ctx.clip(),f.path(B)),f.ctx.shadowOffsetX=p.offsetX.number+C,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=is(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?is(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),g.label=2;case 2:o=0,A=0,c=i,g.label=3;case 3:return A<c.length?(u=c[A],u.style!==0&&!xl(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return g.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,3)];case 6:return g.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,r.curves)];case 8:return g.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,r.curves)];case 10:g.sent(),g.label=11;case 11:o++,g.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return zs(this,void 0,void 0,function(){var o,A,c,u,f,g,p,y,C,B,w,b,N,T,V,j,V,j;return Ls(this,function(L){return this.ctx.save(),o=_$(i,s),A=xI(i,s),a===2&&(this.path(A),this.ctx.clip()),ta(A[0])?(c=A[0].start.x,u=A[0].start.y):(c=A[0].x,u=A[0].y),ta(A[1])?(f=A[1].end.x,g=A[1].end.y):(f=A[1].x,g=A[1].y),s===0||s===2?p=Math.abs(c-f):p=Math.abs(u-g),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),y=n<3?n*3:n*2,C=n<3?n*2:n,a===3&&(y=n,C=n),B=!0,p<=y*2?B=!1:p<=y*2+C?(w=p/(2*y+C),y*=w,C*=w):(b=Math.floor((p+C)/(y+C)),N=(p-b*y)/(b-1),T=(p-(b+1)*y)/b,C=T<=0||Math.abs(C-N)<Math.abs(C-T)?N:T),B&&(a===3?this.ctx.setLineDash([0,y+C]):this.ctx.setLineDash([y,C])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=is(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(ta(A[0])&&(V=A[3],j=A[0],this.ctx.beginPath(),this.formatPath([new lt(V.end.x,V.end.y),new lt(j.start.x,j.start.y)]),this.ctx.stroke()),ta(A[1])&&(V=A[1],j=A[2],this.ctx.beginPath(),this.formatPath([new lt(V.end.x,V.end.y),new lt(j.start.x,j.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return zs(this,void 0,void 0,function(){var n;return Ls(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=is(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=b$(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(EQ),L$=function(t){return t instanceof lQ||t instanceof AQ?!0:t instanceof bx&&t.type!==K0&&t.type!==V0},P$=function(t,e){switch(t){case 0:return z0(e);case 2:return m$(e);case 1:default:return $0(e)}},k$=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},R$=["-apple-system","system-ui"],D$=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return R$.indexOf(e)===-1}):t},j$=function(t){ka(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return zs(this,void 0,void 0,function(){var n,s;return Ls(this,function(i){switch(i.label){case 0:return n=$2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,O$(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=is(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(EQ),O$=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},M$=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Um([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Um([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Um([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Um([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),H$=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new M$({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new A$(this,e)}return t.instanceCount=1,t}(),Cx=function(t,e){return e===void 0&&(e={}),V$(t,e)};typeof window<"u"&&yQ.setContext(window);var V$=function(t,e){return zs(void 0,void 0,void 0,function(){var r,n,s,i,a,o,A,c,u,f,g,p,y,C,B,w,b,N,T,V,L,j,L,S,I,R,F,E,U,K,ae,le,ie,q,Y,ue,pe,D,W,ee;return Ls(this,function(M){switch(M.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(I=e.imageTimeout)!==null&&I!==void 0?I:15e3,proxy:e.proxy,useCORS:(R=e.useCORS)!==null&&R!==void 0?R:!1},i=Q2({logging:(F=e.logging)!==null&&F!==void 0?F:!0,cache:e.cache},s),a={windowWidth:(E=e.windowWidth)!==null&&E!==void 0?E:n.innerWidth,windowHeight:(U=e.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(K=e.scrollX)!==null&&K!==void 0?K:n.pageXOffset,scrollY:(ae=e.scrollY)!==null&&ae!==void 0?ae:n.pageYOffset},o=new hA(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new H$(i,o),c=(le=e.foreignObjectRendering)!==null&&le!==void 0?le:!1,u={allowTaint:(ie=e.allowTaint)!==null&&ie!==void 0?ie:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new yI(A,t,u),g=f.clonedReferenceElement,g?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=M.sent(),y=xx(g)||Gz(g)?B9(g.ownerDocument):Jw(A,g),C=y.width,B=y.height,w=y.left,b=y.top,N=K$(A,g,e.backgroundColor),T={canvas:e.canvas,backgroundColor:N,scale:(Y=(q=e.scale)!==null&&q!==void 0?q:n.devicePixelRatio)!==null&&Y!==void 0?Y:1,x:((ue=e.x)!==null&&ue!==void 0?ue:0)+w,y:((pe=e.y)!==null&&pe!==void 0?pe:0)+b,width:(D=e.width)!==null&&D!==void 0?D:Math.ceil(C),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(B)},c?(A.logger.debug("Document cloned, using foreign object rendering"),L=new j$(A,T),[4,L.render(g)]):[3,3];case 2:return V=M.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+w+","+b+" with size "+C+"x"+B+" using computed rendering"),A.logger.debug("Starting DOM parsing"),j=dQ(A,g),N===j.styles.backgroundColor&&(j.styles.backgroundColor=nA.TRANSPARENT),A.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),L=new Q$(A,T),[4,L.render(j)];case 4:V=M.sent(),M.label=5;case 5:return(!((ee=e.removeContainer)!==null&&ee!==void 0)||ee)&&(yI.destroy(p)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,V]}})})},K$=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?yf(t,getComputedStyle(n.documentElement).backgroundColor):nA.TRANSPARENT,i=n.body?yf(t,getComputedStyle(n.body).backgroundColor):nA.TRANSPARENT,a=typeof r=="string"?yf(t,r):r===null?nA.TRANSPARENT:4294967295;return e===n.documentElement?xl(s)?xl(i)?a:i:s:a};const _x=Object.freeze(Object.defineProperty({__proto__:null,default:Cx},Symbol.toStringTag,{value:"Module"})),G$="modulepreload",q$=function(t){return"/"+t},_I={},sA=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(A=>{if(A=q$(A),A in _I)return;_I[A]=!0;const c=A.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":G$,c||(f.as="script"),f.crossOrigin="",f.href=A,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((g,p)=>{f.addEventListener("load",g),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${A}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function Fr(t){"@babel/helpers - typeof";return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(t)}var Qa=Uint8Array,ki=Uint16Array,Ex=Int32Array,Ix=new Qa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nx=new Qa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),EI=new Qa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),IQ=function(t,e){for(var r=new ki(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new Ex(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},NQ=IQ(Ix,2),z$=NQ.b,tB=NQ.r;z$[28]=258,tB[258]=28;var $$=IQ(Nx,0),II=$$.r,rB=new ki(32768);for(var Jr=0;Jr<32768;++Jr){var OA=(Jr&43690)>>1|(Jr&21845)<<1;OA=(OA&52428)>>2|(OA&13107)<<2,OA=(OA&61680)>>4|(OA&3855)<<4,rB[Jr]=((OA&65280)>>8|(OA&255)<<8)>>1}var Cf=function(t,e,r){for(var n=t.length,s=0,i=new ki(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new ki(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new ki(1<<e);var A=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],f=a[t[s]-1]++<<u,g=f|(1<<u)-1;f<=g;++f)o[rB[f]>>A]=c}else for(o=new ki(n),s=0;s<n;++s)t[s]&&(o[s]=rB[a[t[s]-1]++]>>15-t[s]);return o},zc=new Qa(288);for(var Jr=0;Jr<144;++Jr)zc[Jr]=8;for(var Jr=144;Jr<256;++Jr)zc[Jr]=9;for(var Jr=256;Jr<280;++Jr)zc[Jr]=7;for(var Jr=280;Jr<288;++Jr)zc[Jr]=8;var X0=new Qa(32);for(var Jr=0;Jr<32;++Jr)X0[Jr]=5;var W$=Cf(zc,9,0),X$=Cf(X0,5,0),SQ=function(t){return(t+7)/8|0},Y$=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Qa(t.subarray(e,r))},Do=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Uh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Ly=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:TQ,l:0};if(s==1){var a=new Qa(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(V,j){return V.f-j.f}),r.push({s:-1,f:25001});var o=r[0],A=r[1],c=0,u=1,f=2;for(r[0]={s:-1,f:o.f+A.f,l:o,r:A};u!=s-1;)o=r[r[c].f<r[f].f?c++:f++],A=r[c!=u&&r[c].f<r[f].f?c++:f++],r[u++]={s:-1,f:o.f+A.f,l:o,r:A};for(var g=i[0].s,n=1;n<s;++n)i[n].s>g&&(g=i[n].s);var p=new ki(g+1),y=nB(r[u-1],p,0);if(y>e){var n=0,C=0,B=y-e,w=1<<B;for(i.sort(function(j,L){return p[L.s]-p[j.s]||j.f-L.f});n<s;++n){var b=i[n].s;if(p[b]>e)C+=w-(1<<y-p[b]),p[b]=e;else break}for(C>>=B;C>0;){var N=i[n].s;p[N]<e?C-=1<<e-p[N]++-1:++n}for(;n>=0&&C;--n){var T=i[n].s;p[T]==e&&(--p[T],++C)}y=e}return{t:new Qa(p),l:y}},nB=function(t,e,r){return t.s==-1?Math.max(nB(t.l,e,r+1),nB(t.r,e,r+1)):e[t.s]=r},NI=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ki(++e),n=0,s=t[0],i=1,a=function(A){r[n++]=A},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Qh=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},FQ=function(t,e,r){var n=r.length,s=SQ(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},SI=function(t,e,r,n,s,i,a,o,A,c,u){Do(e,u++,r),++s[256];for(var f=Ly(s,15),g=f.t,p=f.l,y=Ly(i,15),C=y.t,B=y.l,w=NI(g),b=w.c,N=w.n,T=NI(C),V=T.c,j=T.n,L=new ki(19),S=0;S<b.length;++S)++L[b[S]&31];for(var S=0;S<V.length;++S)++L[V[S]&31];for(var I=Ly(L,7),R=I.t,F=I.l,E=19;E>4&&!R[EI[E-1]];--E);var U=c+5<<3,K=Qh(s,zc)+Qh(i,X0)+a,ae=Qh(s,g)+Qh(i,C)+a+14+3*E+Qh(L,R)+2*L[16]+3*L[17]+7*L[18];if(A>=0&&U<=K&&U<=ae)return FQ(e,u,t.subarray(A,A+c));var le,ie,q,Y;if(Do(e,u,1+(ae<K)),u+=2,ae<K){le=Cf(g,p,0),ie=g,q=Cf(C,B,0),Y=C;var ue=Cf(R,F,0);Do(e,u,N-257),Do(e,u+5,j-1),Do(e,u+10,E-4),u+=14;for(var S=0;S<E;++S)Do(e,u+3*S,R[EI[S]]);u+=3*E;for(var pe=[b,V],D=0;D<2;++D)for(var W=pe[D],S=0;S<W.length;++S){var ee=W[S]&31;Do(e,u,ue[ee]),u+=R[ee],ee>15&&(Do(e,u,W[S]>>5&127),u+=W[S]>>12)}}else le=W$,ie=zc,q=X$,Y=X0;for(var S=0;S<o;++S){var M=n[S];if(M>255){var ee=M>>18&31;Uh(e,u,le[ee+257]),u+=ie[ee+257],ee>7&&(Do(e,u,M>>23&31),u+=Ix[ee]);var Z=M&31;Uh(e,u,q[Z]),u+=Y[Z],Z>3&&(Uh(e,u,M>>5&8191),u+=Nx[Z])}else Uh(e,u,le[M]),u+=ie[M]}return Uh(e,u,le[256]),u+ie[256]},J$=new Ex([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),TQ=new Qa(0),Z$=function(t,e,r,n,s,i){var a=i.z||t.length,o=new Qa(n+a+5*(1+Math.ceil(a/7e3))+s),A=o.subarray(n,o.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(A[0]=i.r>>3);for(var f=J$[e-1],g=f>>13,p=f&8191,y=(1<<r)-1,C=i.p||new ki(32768),B=i.h||new ki(y+1),w=Math.ceil(r/3),b=2*w,N=function(Ce){return(t[Ce]^t[Ce+1]<<w^t[Ce+2]<<b)&y},T=new Ex(25e3),V=new ki(288),j=new ki(32),L=0,S=0,I=i.i||0,R=0,F=i.w||0,E=0;I+2<a;++I){var U=N(I),K=I&32767,ae=B[U];if(C[K]=ae,B[U]=K,F<=I){var le=a-I;if((L>7e3||R>24576)&&(le>423||!c)){u=SI(t,A,0,T,V,j,S,R,E,I-E,u),R=L=S=0,E=I;for(var ie=0;ie<286;++ie)V[ie]=0;for(var ie=0;ie<30;++ie)j[ie]=0}var q=2,Y=0,ue=p,pe=K-ae&32767;if(le>2&&U==N(I-pe))for(var D=Math.min(g,le)-1,W=Math.min(32767,I),ee=Math.min(258,le);pe<=W&&--ue&&K!=ae;){if(t[I+q]==t[I+q-pe]){for(var M=0;M<ee&&t[I+M]==t[I+M-pe];++M);if(M>q){if(q=M,Y=pe,M>D)break;for(var Z=Math.min(pe,M-2),Ae=0,ie=0;ie<Z;++ie){var oe=I-pe+ie&32767,ce=C[oe],we=oe-ce&32767;we>Ae&&(Ae=we,ae=oe)}}}K=ae,ae=C[K],pe+=K-ae&32767}if(Y){T[R++]=268435456|tB[q]<<18|II[Y];var he=tB[q]&31,fe=II[Y]&31;S+=Ix[he]+Nx[fe],++V[257+he],++j[fe],F=I+q,++L}else T[R++]=t[I],++V[t[I]]}}for(I=Math.max(I,F);I<a;++I)T[R++]=t[I],++V[t[I]];u=SI(t,A,c,T,V,j,S,R,E,I-E,u),c||(i.r=u&7|A[u/8|0]<<3,u-=7,i.h=B,i.p=C,i.i=I,i.w=F)}else{for(var I=i.w||0;I<a+c;I+=65535){var Ne=I+65535;Ne>=a&&(A[u/8|0]=c,Ne=a),u=FQ(A,u+1,t.subarray(I,Ne))}i.i=a}return Y$(o,0,n+SQ(u)+s)},UQ=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},eW=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Qa(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return Z$(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},QQ=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},tW=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=UQ();s.p(e.dictionary),QQ(t,2,s.d())}};function sB(t,e){e||(e={});var r=UQ();r.p(t);var n=eW(t,e,e.dictionary?6:2,4);return tW(n,e),QQ(n,n.length-4,r.d()),n}var rW=typeof TextDecoder<"u"&&new TextDecoder,nW=0;try{rW.decode(TQ,{stream:!0}),nW=1}catch{}function sW(t){if(Array.isArray(t))return t}function iW(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,o=[],A=!0,c=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(A=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);A=!0);}catch(u){c=!0,s=u}finally{try{if(!A&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}function FI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function aW(t,e){if(t){if(typeof t=="string")return FI(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FI(t,e):void 0}}function oW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TI(t,e){return sW(t)||iW(t,e)||aW(t,e)||oW()}function UI(t,e="utf8"){return new TextDecoder(e).decode(t)}const AW=new TextEncoder;function lW(t){return AW.encode(t)}const cW=1024*8,uW=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Py={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Sx{constructor(e=cW,r={}){Nr(this,"buffer");Nr(this,"byteLength");Nr(this,"byteOffset");Nr(this,"length");Nr(this,"offset");Nr(this,"lastWrittenByte");Nr(this,"littleEndian");Nr(this,"_data");Nr(this,"_mark");Nr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,i=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof Sx)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=Py[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===uW&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+n));o.reverse();const A=new Py[r](o.buffer);return this.offset+=n,A.reverse(),A}const a=new Py[r](i);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return UI(this.readBytes(e))}decodeText(e=1,r="utf8"){return UI(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(lW(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function $d(t){let e=t.length;for(;--e>=0;)t[e]=0}const dW=3,hW=258,LQ=29,fW=256,pW=fW+1+LQ,PQ=30,mW=512,gW=new Array((pW+2)*2);$d(gW);const wW=new Array(PQ*2);$d(wW);const vW=new Array(mW);$d(vW);const yW=new Array(hW-dW+1);$d(yW);const BW=new Array(LQ);$d(BW);const bW=new Array(PQ);$d(bW);const xW=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do s=s+e[n++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var iB=xW;const CW=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},_W=new Uint32Array(CW()),EW=(t,e,r,n)=>{const s=_W,i=n+r;t^=-1;for(let a=n;a<i;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var so=EW,aB={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},kQ={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const IW=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var NW=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)IW(r,n)&&(t[n]=r[n])}}return t},SW=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let a=t[n];r.set(a,s),s+=a.length}return r},RQ={assign:NW,flattenChunks:SW};let DQ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{DQ=!1}const fp=new Uint8Array(256);for(let t=0;t<256;t++)fp[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;fp[254]=fp[254]=1;var FW=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,a=t.length,o=0;for(s=0;s<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),i=0,s=0;i<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const TW=(t,e)=>{if(e<65534&&t.subarray&&DQ)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var UW=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let a=t[n++];if(a<128){i[s++]=a;continue}let o=fp[a];if(o>4){i[s++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return TW(i,s)},QW=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+fp[t[r]]>e?r:e},oB={string2buf:FW,buf2string:UW,utf8border:QW};function LW(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var PW=LW;const tg=16209,kW=16191;var RW=function(e,r){let n,s,i,a,o,A,c,u,f,g,p,y,C,B,w,b,N,T,V,j,L,S,I,R;const F=e.state;n=e.next_in,I=e.input,s=n+(e.avail_in-5),i=e.next_out,R=e.output,a=i-(r-e.avail_out),o=i+(e.avail_out-257),A=F.dmax,c=F.wsize,u=F.whave,f=F.wnext,g=F.window,p=F.hold,y=F.bits,C=F.lencode,B=F.distcode,w=(1<<F.lenbits)-1,b=(1<<F.distbits)-1;e:do{y<15&&(p+=I[n++]<<y,y+=8,p+=I[n++]<<y,y+=8),N=C[p&w];t:for(;;){if(T=N>>>24,p>>>=T,y-=T,T=N>>>16&255,T===0)R[i++]=N&65535;else if(T&16){V=N&65535,T&=15,T&&(y<T&&(p+=I[n++]<<y,y+=8),V+=p&(1<<T)-1,p>>>=T,y-=T),y<15&&(p+=I[n++]<<y,y+=8,p+=I[n++]<<y,y+=8),N=B[p&b];r:for(;;){if(T=N>>>24,p>>>=T,y-=T,T=N>>>16&255,T&16){if(j=N&65535,T&=15,y<T&&(p+=I[n++]<<y,y+=8,y<T&&(p+=I[n++]<<y,y+=8)),j+=p&(1<<T)-1,j>A){e.msg="invalid distance too far back",F.mode=tg;break e}if(p>>>=T,y-=T,T=i-a,j>T){if(T=j-T,T>u&&F.sane){e.msg="invalid distance too far back",F.mode=tg;break e}if(L=0,S=g,f===0){if(L+=c-T,T<V){V-=T;do R[i++]=g[L++];while(--T);L=i-j,S=R}}else if(f<T){if(L+=c+f-T,T-=f,T<V){V-=T;do R[i++]=g[L++];while(--T);if(L=0,f<V){T=f,V-=T;do R[i++]=g[L++];while(--T);L=i-j,S=R}}}else if(L+=f-T,T<V){V-=T;do R[i++]=g[L++];while(--T);L=i-j,S=R}for(;V>2;)R[i++]=S[L++],R[i++]=S[L++],R[i++]=S[L++],V-=3;V&&(R[i++]=S[L++],V>1&&(R[i++]=S[L++]))}else{L=i-j;do R[i++]=R[L++],R[i++]=R[L++],R[i++]=R[L++],V-=3;while(V>2);V&&(R[i++]=R[L++],V>1&&(R[i++]=R[L++]))}}else if(T&64){e.msg="invalid distance code",F.mode=tg;break e}else{N=B[(N&65535)+(p&(1<<T)-1)];continue r}break}}else if(T&64)if(T&32){F.mode=kW;break e}else{e.msg="invalid literal/length code",F.mode=tg;break e}else{N=C[(N&65535)+(p&(1<<T)-1)];continue t}break}}while(n<s&&i<o);V=y>>3,n-=V,y-=V<<3,p&=(1<<y)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<o?257+(o-i):257-(i-o),F.hold=p,F.bits=y};const Iu=15,QI=852,LI=592,PI=0,ky=1,kI=2,DW=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),jW=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),OW=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),MW=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),HW=(t,e,r,n,s,i,a,o)=>{const A=o.bits;let c=0,u=0,f=0,g=0,p=0,y=0,C=0,B=0,w=0,b=0,N,T,V,j,L,S=null,I;const R=new Uint16Array(Iu+1),F=new Uint16Array(Iu+1);let E=null,U,K,ae;for(c=0;c<=Iu;c++)R[c]=0;for(u=0;u<n;u++)R[e[r+u]]++;for(p=A,g=Iu;g>=1&&R[g]===0;g--);if(p>g&&(p=g),g===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<g&&R[f]===0;f++);for(p<f&&(p=f),B=1,c=1;c<=Iu;c++)if(B<<=1,B-=R[c],B<0)return-1;if(B>0&&(t===PI||g!==1))return-1;for(F[1]=0,c=1;c<Iu;c++)F[c+1]=F[c]+R[c];for(u=0;u<n;u++)e[r+u]!==0&&(a[F[e[r+u]]++]=u);if(t===PI?(S=E=a,I=20):t===ky?(S=DW,E=jW,I=257):(S=OW,E=MW,I=0),b=0,u=0,c=f,L=i,y=p,C=0,V=-1,w=1<<p,j=w-1,t===ky&&w>QI||t===kI&&w>LI)return 1;for(;;){U=c-C,a[u]+1<I?(K=0,ae=a[u]):a[u]>=I?(K=E[a[u]-I],ae=S[a[u]-I]):(K=96,ae=0),N=1<<c-C,T=1<<y,f=T;do T-=N,s[L+(b>>C)+T]=U<<24|K<<16|ae|0;while(T!==0);for(N=1<<c-1;b&N;)N>>=1;if(N!==0?(b&=N-1,b+=N):b=0,u++,--R[c]===0){if(c===g)break;c=e[r+a[u]]}if(c>p&&(b&j)!==V){for(C===0&&(C=p),L+=f,y=c-C,B=1<<y;y+C<g&&(B-=R[y+C],!(B<=0));)y++,B<<=1;if(w+=1<<y,t===ky&&w>QI||t===kI&&w>LI)return 1;V=b&j,s[V]=p<<24|y<<16|L-i|0}}return b!==0&&(s[L+b]=c-C<<24|64<<16|0),o.bits=p,0};var _f=HW;const VW=0,jQ=1,OQ=2,{Z_FINISH:RI,Z_BLOCK:KW,Z_TREES:rg,Z_OK:$c,Z_STREAM_END:GW,Z_NEED_DICT:qW,Z_STREAM_ERROR:ca,Z_DATA_ERROR:MQ,Z_MEM_ERROR:HQ,Z_BUF_ERROR:zW,Z_DEFLATED:DI}=kQ,Av=16180,jI=16181,OI=16182,MI=16183,HI=16184,VI=16185,KI=16186,GI=16187,qI=16188,zI=16189,Y0=16190,jo=16191,Ry=16192,$I=16193,Dy=16194,WI=16195,XI=16196,YI=16197,JI=16198,ng=16199,sg=16200,ZI=16201,eN=16202,tN=16203,rN=16204,nN=16205,jy=16206,sN=16207,iN=16208,nn=16209,VQ=16210,KQ=16211,$W=852,WW=592,XW=15,YW=XW,aN=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function JW(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const su=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Av||e.mode>KQ?1:0},GQ=t=>{if(su(t))return ca;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Av,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array($W),e.distcode=e.distdyn=new Int32Array(WW),e.sane=1,e.back=-1,$c},qQ=t=>{if(su(t))return ca;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,GQ(t)},zQ=(t,e)=>{let r;if(su(t))return ca;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ca:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,qQ(t))},$Q=(t,e)=>{if(!t)return ca;const r=new JW;t.state=r,r.strm=t,r.window=null,r.mode=Av;const n=zQ(t,e);return n!==$c&&(t.state=null),n},ZW=t=>$Q(t,YW);let oN=!0,Oy,My;const eX=t=>{if(oN){Oy=new Int32Array(512),My=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(_f(jQ,t.lens,0,288,Oy,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;_f(OQ,t.lens,0,32,My,0,t.work,{bits:5}),oN=!1}t.lencode=Oy,t.lenbits=9,t.distcode=My,t.distbits=5},WQ=(t,e,r,n)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},tX=(t,e)=>{let r,n,s,i,a,o,A,c,u,f,g,p,y,C,B=0,w,b,N,T,V,j,L,S;const I=new Uint8Array(4);let R,F;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(su(t)||!t.output||!t.input&&t.avail_in!==0)return ca;r=t.state,r.mode===jo&&(r.mode=Ry),a=t.next_out,s=t.output,A=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,f=o,g=A,S=$c;e:for(;;)switch(r.mode){case Av:if(r.wrap===0){r.mode=Ry;break}for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,I[0]=c&255,I[1]=c>>>8&255,r.check=so(r.check,I,2,0),c=0,u=0,r.mode=jI;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=nn;break}if((c&15)!==DI){t.msg="unknown compression method",r.mode=nn;break}if(c>>>=4,u-=4,L=(c&15)+8,r.wbits===0&&(r.wbits=L),L>15||L>r.wbits){t.msg="invalid window size",r.mode=nn;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?zI:jo,c=0,u=0;break;case jI:for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==DI){t.msg="unknown compression method",r.mode=nn;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=nn;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,r.check=so(r.check,I,2,0)),c=0,u=0,r.mode=OI;case OI:for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,r.check=so(r.check,I,4,0)),c=0,u=0,r.mode=MI;case MI:for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,r.check=so(r.check,I,2,0)),c=0,u=0,r.mode=HI;case HI:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,r.check=so(r.check,I,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=VI;case VI:if(r.flags&1024&&(p=r.length,p>o&&(p=o),p&&(r.head&&(L=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+p),L)),r.flags&512&&r.wrap&4&&(r.check=so(r.check,n,p,i)),o-=p,i+=p,r.length-=p),r.length))break e;r.length=0,r.mode=KI;case KI:if(r.flags&2048){if(o===0)break e;p=0;do L=n[i+p++],r.head&&L&&r.length<65536&&(r.head.name+=String.fromCharCode(L));while(L&&p<o);if(r.flags&512&&r.wrap&4&&(r.check=so(r.check,n,p,i)),o-=p,i+=p,L)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=GI;case GI:if(r.flags&4096){if(o===0)break e;p=0;do L=n[i+p++],r.head&&L&&r.length<65536&&(r.head.comment+=String.fromCharCode(L));while(L&&p<o);if(r.flags&512&&r.wrap&4&&(r.check=so(r.check,n,p,i)),o-=p,i+=p,L)break e}else r.head&&(r.head.comment=null);r.mode=qI;case qI:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=nn;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=jo;break;case zI:for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}t.adler=r.check=aN(c),c=0,u=0,r.mode=Y0;case Y0:if(r.havedict===0)return t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,qW;t.adler=r.check=1,r.mode=jo;case jo:if(e===KW||e===rg)break e;case Ry:if(r.last){c>>>=u&7,u-=u&7,r.mode=jy;break}for(;u<3;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=$I;break;case 1:if(eX(r),r.mode=ng,e===rg){c>>>=2,u-=2;break e}break;case 2:r.mode=XI;break;case 3:t.msg="invalid block type",r.mode=nn}c>>>=2,u-=2;break;case $I:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=nn;break}if(r.length=c&65535,c=0,u=0,r.mode=Dy,e===rg)break e;case Dy:r.mode=WI;case WI:if(p=r.length,p){if(p>o&&(p=o),p>A&&(p=A),p===0)break e;s.set(n.subarray(i,i+p),a),o-=p,i+=p,A-=p,a+=p,r.length-=p;break}r.mode=jo;break;case XI:for(;u<14;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=nn;break}r.have=0,r.mode=YI;case YI:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.lens[E[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[E[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},S=_f(VW,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,S){t.msg="invalid code lengths set",r.mode=nn;break}r.have=0,r.mode=JI;case JI:for(;r.have<r.nlen+r.ndist;){for(;B=r.lencode[c&(1<<r.lenbits)-1],w=B>>>24,b=B>>>16&255,N=B&65535,!(w<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(N<16)c>>>=w,u-=w,r.lens[r.have++]=N;else{if(N===16){for(F=w+2;u<F;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(c>>>=w,u-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=nn;break}L=r.lens[r.have-1],p=3+(c&3),c>>>=2,u-=2}else if(N===17){for(F=w+3;u<F;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=w,u-=w,L=0,p=3+(c&7),c>>>=3,u-=3}else{for(F=w+7;u<F;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=w,u-=w,L=0,p=11+(c&127),c>>>=7,u-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=nn;break}for(;p--;)r.lens[r.have++]=L}}if(r.mode===nn)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=nn;break}if(r.lenbits=9,R={bits:r.lenbits},S=_f(jQ,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,S){t.msg="invalid literal/lengths set",r.mode=nn;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},S=_f(OQ,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,S){t.msg="invalid distances set",r.mode=nn;break}if(r.mode=ng,e===rg)break e;case ng:r.mode=sg;case sg:if(o>=6&&A>=258){t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,RW(t,g),a=t.next_out,s=t.output,A=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,r.mode===jo&&(r.back=-1);break}for(r.back=0;B=r.lencode[c&(1<<r.lenbits)-1],w=B>>>24,b=B>>>16&255,N=B&65535,!(w<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(b&&!(b&240)){for(T=w,V=b,j=N;B=r.lencode[j+((c&(1<<T+V)-1)>>T)],w=B>>>24,b=B>>>16&255,N=B&65535,!(T+w<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=T,u-=T,r.back+=T}if(c>>>=w,u-=w,r.back+=w,r.length=N,b===0){r.mode=nN;break}if(b&32){r.back=-1,r.mode=jo;break}if(b&64){t.msg="invalid literal/length code",r.mode=nn;break}r.extra=b&15,r.mode=ZI;case ZI:if(r.extra){for(F=r.extra;u<F;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=eN;case eN:for(;B=r.distcode[c&(1<<r.distbits)-1],w=B>>>24,b=B>>>16&255,N=B&65535,!(w<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(!(b&240)){for(T=w,V=b,j=N;B=r.distcode[j+((c&(1<<T+V)-1)>>T)],w=B>>>24,b=B>>>16&255,N=B&65535,!(T+w<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=T,u-=T,r.back+=T}if(c>>>=w,u-=w,r.back+=w,b&64){t.msg="invalid distance code",r.mode=nn;break}r.offset=N,r.extra=b&15,r.mode=tN;case tN:if(r.extra){for(F=r.extra;u<F;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=nn;break}r.mode=rN;case rN:if(A===0)break e;if(p=g-A,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=nn;break}p>r.wnext?(p-=r.wnext,y=r.wsize-p):y=r.wnext-p,p>r.length&&(p=r.length),C=r.window}else C=s,y=a-r.offset,p=r.length;p>A&&(p=A),A-=p,r.length-=p;do s[a++]=C[y++];while(--p);r.length===0&&(r.mode=sg);break;case nN:if(A===0)break e;s[a++]=r.length,A--,r.mode=sg;break;case jy:if(r.wrap){for(;u<32;){if(o===0)break e;o--,c|=n[i++]<<u,u+=8}if(g-=A,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?so(r.check,s,g,a-g):iB(r.check,s,g,a-g)),g=A,r.wrap&4&&(r.flags?c:aN(c))!==r.check){t.msg="incorrect data check",r.mode=nn;break}c=0,u=0}r.mode=sN;case sN:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=nn;break}c=0,u=0}r.mode=iN;case iN:S=GW;break e;case nn:S=MQ;break e;case VQ:return HQ;case KQ:default:return ca}return t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,(r.wsize||g!==t.avail_out&&r.mode<nn&&(r.mode<jy||e!==RI))&&WQ(t,t.output,t.next_out,g-t.avail_out),f-=t.avail_in,g-=t.avail_out,t.total_in+=f,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?so(r.check,s,g,t.next_out-g):iB(r.check,s,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===jo?128:0)+(r.mode===ng||r.mode===Dy?256:0),(f===0&&g===0||e===RI)&&S===$c&&(S=zW),S},rX=t=>{if(su(t))return ca;let e=t.state;return e.window&&(e.window=null),t.state=null,$c},nX=(t,e)=>{if(su(t))return ca;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,$c):ca},sX=(t,e)=>{const r=e.length;let n,s,i;return su(t)||(n=t.state,n.wrap!==0&&n.mode!==Y0)?ca:n.mode===Y0&&(s=1,s=iB(s,e,r,0),s!==n.check)?MQ:(i=WQ(t,e,r,r),i?(n.mode=VQ,HQ):(n.havedict=1,$c))};var iX=qQ,aX=zQ,oX=GQ,AX=ZW,lX=$Q,cX=tX,uX=rX,dX=nX,hX=sX,fX="pako inflate (from Nodeca project)",Go={inflateReset:iX,inflateReset2:aX,inflateResetKeep:oX,inflateInit:AX,inflateInit2:lX,inflate:cX,inflateEnd:uX,inflateGetHeader:dX,inflateSetDictionary:hX,inflateInfo:fX};function pX(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var mX=pX;const XQ=Object.prototype.toString,{Z_NO_FLUSH:gX,Z_FINISH:wX,Z_OK:pp,Z_STREAM_END:Hy,Z_NEED_DICT:Vy,Z_STREAM_ERROR:vX,Z_DATA_ERROR:AN,Z_MEM_ERROR:yX}=kQ;function Kp(t){this.options=RQ.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new PW,this.strm.avail_out=0;let r=Go.inflateInit2(this.strm,e.windowBits);if(r!==pp)throw new Error(aB[r]);if(this.header=new mX,Go.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=oB.string2buf(e.dictionary):XQ.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Go.inflateSetDictionary(this.strm,e.dictionary),r!==pp)))throw new Error(aB[r])}Kp.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?wX:gX,XQ.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Go.inflate(r,a),i===Vy&&s&&(i=Go.inflateSetDictionary(r,s),i===pp?i=Go.inflate(r,a):i===AN&&(i=Vy));r.avail_in>0&&i===Hy&&r.state.wrap>0&&t[r.next_in]!==0;)Go.inflateReset(r),i=Go.inflate(r,a);switch(i){case vX:case AN:case Vy:case yX:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===Hy))if(this.options.to==="string"){let A=oB.utf8border(r.output,r.next_out),c=r.next_out-A,u=oB.buf2string(r.output,A);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(A,A+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===pp&&o===0)){if(i===Hy)return i=Go.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Kp.prototype.onData=function(t){this.chunks.push(t)};Kp.prototype.onEnd=function(t){t===pp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=RQ.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function BX(t,e){const r=new Kp(e);if(r.push(t),r.err)throw r.msg||aB[r.err];return r.result}var bX=Kp,xX=BX,CX={Inflate:bX,inflate:xX};const{Inflate:_X,inflate:EX}=CX;var lN=_X,IX=EX;const YQ=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;YQ[t]=e}const cN=4294967295;function NX(t,e,r){let n=t;for(let s=0;s<r;s++)n=YQ[(n^e[s])&255]^n>>>8;return n}function SX(t,e){return(NX(cN,t,e)^cN)>>>0}function uN(t,e,r){const n=t.readUint32(),s=SX(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function JQ(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function ZQ(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function eL(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function tL(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-s]+r[i]>>1)&255}}function rL(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+FX(e[i-s],r[i],r[i-s])&255}}function FX(t,e,r){const n=t+e-r,s=Math.abs(n-t),i=Math.abs(n-e),a=Math.abs(n-r);return s<=i&&s<=a?t:i<=a?e:r}function TX(t,e,r,n,s,i){switch(t){case 0:JQ(e,r,s);break;case 1:ZQ(e,r,s,i);break;case 2:eL(e,r,n,s);break;case 3:tL(e,r,n,s,i);break;case 4:rL(e,r,n,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const UX=new Uint16Array([255]),QX=new Uint8Array(UX.buffer),LX=QX[0]===255;function PX(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*s,A=new Uint8Array(n*r*o);let c=0;for(let u=0;u<7;u++){const f=a[u],g=Math.ceil((r-f.x)/f.xStep),p=Math.ceil((n-f.y)/f.yStep);if(g<=0||p<=0)continue;const y=g*o,C=new Uint8Array(y);for(let B=0;B<p;B++){const w=e[c++],b=e.subarray(c,c+y);c+=y;const N=new Uint8Array(y);TX(w,b,N,C,y,o),C.set(N);for(let T=0;T<g;T++){const V=f.x+T*f.xStep,j=f.y+B*f.yStep;if(!(V>=r||j>=n))for(let L=0;L<o;L++)A[(j*r+V)*o+L]=N[T*o+L]}}}if(i===16){const u=new Uint16Array(A.buffer);if(LX)for(let f=0;f<u.length;f++)u[f]=kX(u[f]);return u}else return A}function kX(t){return(t&255)<<8|t>>8&255}const RX=new Uint16Array([255]),DX=new Uint8Array(RX.buffer),jX=DX[0]===255,OX=new Uint8Array(0);function dN(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=Math.ceil(i/8)*s,o=Math.ceil(i/8*s*r),A=new Uint8Array(n*o);let c=OX,u=0,f,g;for(let p=0;p<n;p++){switch(f=e.subarray(u+1,u+1+o),g=A.subarray(p*o,(p+1)*o),e[u]){case 0:JQ(f,g,o);break;case 1:ZQ(f,g,o,a);break;case 2:eL(f,g,c,o);break;case 3:tL(f,g,c,o,a);break;case 4:rL(f,g,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}c=g,u+=o+1}if(i===16){const p=new Uint16Array(A.buffer);if(jX)for(let y=0;y<p.length;y++)p[y]=MX(p[y]);return p}else return A}function MX(t){return(t&255)<<8|t>>8&255}const zg=Uint8Array.of(137,80,78,71,13,10,26,10);function hN(t){if(!HX(t.readBytes(zg.length)))throw new Error("wrong PNG signature")}function HX(t){if(t.length<zg.length)return!1;for(let e=0;e<zg.length;e++)if(t[e]!==zg[e])return!1;return!0}const VX="tEXt",KX=0,nL=new TextDecoder("latin1");function GX(t){if(zX(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const qX=/^[\u0000-\u00FF]*$/;function zX(t){if(!qX.test(t))throw new Error("invalid latin1 text")}function $X(t,e,r){const n=sL(e);t[n]=WX(e,r-n.length-1)}function sL(t){for(t.mark();t.readByte()!==KX;);const e=t.offset;t.reset();const r=nL.decode(t.readBytes(e-t.offset-1));return t.skip(1),GX(r),r}function WX(t,e){return nL.decode(t.readBytes(e))}const Ti={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Ky={UNKNOWN:-1,DEFLATE:0},fN={UNKNOWN:-1,ADAPTIVE:0},Gy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ig={NONE:0,BACKGROUND:1,PREVIOUS:2},qy={SOURCE:0,OVER:1};class XX extends Sx{constructor(r,n={}){super(r);Nr(this,"_checkCrc");Nr(this,"_inflator");Nr(this,"_png");Nr(this,"_apng");Nr(this,"_end");Nr(this,"_hasPalette");Nr(this,"_palette");Nr(this,"_hasTransparency");Nr(this,"_transparency");Nr(this,"_compressionMethod");Nr(this,"_filterMethod");Nr(this,"_interlaceMethod");Nr(this,"_colorType");Nr(this,"_isAnimated");Nr(this,"_numberOfFrames");Nr(this,"_numberOfPlays");Nr(this,"_frames");Nr(this,"_writingDataChunks");const{checkCrc:s=!1}=n;this._checkCrc=s,this._inflator=new lN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Ky.UNKNOWN,this._filterMethod=fN.UNKNOWN,this._interlaceMethod=Gy.UNKNOWN,this._colorType=Ti.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(hN(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(hN(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const s=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case VX:$X(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?uN(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const s=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?uN(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=YX(this.readUint8());const n=this.readUint8();this._colorType=n;let s;switch(n){case Ti.GREYSCALE:s=1;break;case Ti.TRUECOLOUR:s=3;break;case Ti.INDEXED_COLOUR:s=1;break;case Ti.GREYSCALE_ALPHA:s=2;break;case Ti.TRUECOLOUR_ALPHA:s=4;break;case Ti.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ky.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<n;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,s=this.offset+this.byteOffset;if(s+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ti.GREYSCALE:case Ti.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ti.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const s=this.readByte();this._palette[n].push(s)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ti.UNKNOWN:case Ti.GREYSCALE_ALPHA:case Ti.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=sL(this),s=this.readUint8();if(s!==Ky.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:IX(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:n,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=dN({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)n.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,n),this.addFrameDataToCanvas(n,s)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,s){switch(r.disposeOp){case ig.NONE:break;case ig.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const o=(i*r.width+a)*this._png.channels;for(let A=0;A<this._png.channels;A++)s.data[o+A]=0}break;case ig.PREVIOUS:s.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const s=1<<this._png.depth,i=(a,o)=>{const A=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(a*n.width+o)*this._png.channels;return{index:A,frameIndex:c}};switch(n.blendOp){case qy.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:c}=i(a,o);for(let u=0;u<this._png.channels;u++)r.data[A+u]=n.data[c+u]}break;case qy.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:c}=i(a,o);for(let u=0;u<this._png.channels;u++){const f=n.data[c+this._png.channels-1]/s,g=u%(this._png.channels-1)===0?1:n.data[c+u],p=Math.floor(f*g+(1-f)*r.data[A+u]);r.data[A+u]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==fN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Gy.NO_INTERLACE)this._png.data=dN({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Gy.ADAM7)this._png.data=PX({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ig.NONE,blendOp:qy.SOURCE,data:r}),this._inflator=new lN,this._writingDataChunks=!1}}function YX(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var pN;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(pN||(pN={}));function JX(t,e){return new XX(t,e).decode()}var Ht=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function zy(){Ht.console&&typeof Ht.console.log=="function"&&Ht.console.log.apply(Ht.console,arguments)}var jr={log:zy,warn:function(t){Ht.console&&(typeof Ht.console.warn=="function"?Ht.console.warn.apply(Ht.console,arguments):zy.call(null,arguments))},error:function(t){Ht.console&&(typeof Ht.console.error=="function"?Ht.console.error.apply(Ht.console,arguments):zy(t))}};function $y(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){dc(n.response,e,r)},n.onerror=function(){jr.error("could not download file")},n.send()}function mN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ag(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var dc=Ht.saveAs||((typeof window>"u"?"undefined":Fr(window))!=="object"||window!==Ht?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Ht.URL||Ht.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?mN(s.href)?$y(t,e,r):ag(s,s.target="_blank"):ag(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){ag(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(mN(t))$y(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){ag(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Fr(i)!=="object"&&(jr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return $y(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(Ht.HTMLElement)||Ht.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Fr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var A=Ht.URL||Ht.webkitURL,c=A.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){A.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function iL(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),c.length==1&&(c="0"+c),"#"+o+A+c}}var $g=Ht.atob.bind(Ht),gN=Ht.btoa.bind(Ht);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Wy(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=Fs(r,n,s,i,e[0],7,-680876936),i=Fs(i,r,n,s,e[1],12,-389564586),s=Fs(s,i,r,n,e[2],17,606105819),n=Fs(n,s,i,r,e[3],22,-1044525330),r=Fs(r,n,s,i,e[4],7,-176418897),i=Fs(i,r,n,s,e[5],12,1200080426),s=Fs(s,i,r,n,e[6],17,-1473231341),n=Fs(n,s,i,r,e[7],22,-45705983),r=Fs(r,n,s,i,e[8],7,1770035416),i=Fs(i,r,n,s,e[9],12,-1958414417),s=Fs(s,i,r,n,e[10],17,-42063),n=Fs(n,s,i,r,e[11],22,-1990404162),r=Fs(r,n,s,i,e[12],7,1804603682),i=Fs(i,r,n,s,e[13],12,-40341101),s=Fs(s,i,r,n,e[14],17,-1502002290),r=Ts(r,n=Fs(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Ts(i,r,n,s,e[6],9,-1069501632),s=Ts(s,i,r,n,e[11],14,643717713),n=Ts(n,s,i,r,e[0],20,-373897302),r=Ts(r,n,s,i,e[5],5,-701558691),i=Ts(i,r,n,s,e[10],9,38016083),s=Ts(s,i,r,n,e[15],14,-660478335),n=Ts(n,s,i,r,e[4],20,-405537848),r=Ts(r,n,s,i,e[9],5,568446438),i=Ts(i,r,n,s,e[14],9,-1019803690),s=Ts(s,i,r,n,e[3],14,-187363961),n=Ts(n,s,i,r,e[8],20,1163531501),r=Ts(r,n,s,i,e[13],5,-1444681467),i=Ts(i,r,n,s,e[2],9,-51403784),s=Ts(s,i,r,n,e[7],14,1735328473),r=Us(r,n=Ts(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Us(i,r,n,s,e[8],11,-2022574463),s=Us(s,i,r,n,e[11],16,1839030562),n=Us(n,s,i,r,e[14],23,-35309556),r=Us(r,n,s,i,e[1],4,-1530992060),i=Us(i,r,n,s,e[4],11,1272893353),s=Us(s,i,r,n,e[7],16,-155497632),n=Us(n,s,i,r,e[10],23,-1094730640),r=Us(r,n,s,i,e[13],4,681279174),i=Us(i,r,n,s,e[0],11,-358537222),s=Us(s,i,r,n,e[3],16,-722521979),n=Us(n,s,i,r,e[6],23,76029189),r=Us(r,n,s,i,e[9],4,-640364487),i=Us(i,r,n,s,e[12],11,-421815835),s=Us(s,i,r,n,e[15],16,530742520),r=Qs(r,n=Us(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=Qs(i,r,n,s,e[7],10,1126891415),s=Qs(s,i,r,n,e[14],15,-1416354905),n=Qs(n,s,i,r,e[5],21,-57434055),r=Qs(r,n,s,i,e[12],6,1700485571),i=Qs(i,r,n,s,e[3],10,-1894986606),s=Qs(s,i,r,n,e[10],15,-1051523),n=Qs(n,s,i,r,e[1],21,-2054922799),r=Qs(r,n,s,i,e[8],6,1873313359),i=Qs(i,r,n,s,e[15],10,-30611744),s=Qs(s,i,r,n,e[6],15,-1560198380),n=Qs(n,s,i,r,e[13],21,1309151649),r=Qs(r,n,s,i,e[4],6,-145523070),i=Qs(i,r,n,s,e[11],10,-1120210379),s=Qs(s,i,r,n,e[2],15,718787259),n=Qs(n,s,i,r,e[9],21,-343485551),t[0]=ll(r,t[0]),t[1]=ll(n,t[1]),t[2]=ll(s,t[2]),t[3]=ll(i,t[3])}function lv(t,e,r,n,s,i){return e=ll(ll(e,t),ll(n,i)),ll(e<<s|e>>>32-s,r)}function Fs(t,e,r,n,s,i,a){return lv(e&r|~e&n,t,e,s,i,a)}function Ts(t,e,r,n,s,i,a){return lv(e&n|r&~n,t,e,s,i,a)}function Us(t,e,r,n,s,i,a){return lv(e^r^n,t,e,s,i,a)}function Qs(t,e,r,n,s,i,a){return lv(r^(e|~n),t,e,s,i,a)}function aL(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Wy(n,ZX(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Wy(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,Wy(n,s),n}function ZX(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var wN="0123456789abcdef".split("");function eY(t){for(var e="",r=0;r<4;r++)e+=wN[t>>8*r+4&15]+wN[t>>8*r&15];return e}function tY(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function AB(t){return aL(t).map(tY).join("")}var rY=function(t){for(var e=0;e<t.length;e++)t[e]=eY(t[e]);return t.join("")}(aL("hello"))!="5d41402abc4b2a76b9719d911017c592";function ll(t,e){if(rY){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function lB(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),o=[],A=0;A<256;A++)o[A]=A;var c=0;for(A=0;A<256;A++){var u=o[A];c=(c+u+a.charCodeAt(A))%256,o[A]=o[c],o[c]=u}r=t,n=o}else o=n;var f=e.length,g=0,p=0,y="";for(A=0;A<f;A++)p=(p+(u=o[g=(g+1)%256]))%256,o[g]=o[p],o[p]=u,a=o[(o[g]+o[p])%256],y+=String.fromCharCode(e.charCodeAt(A)^a);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vN={print:4,modify:8,copy:16,"annot-forms":32};function Mu(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(vN.perm!==void 0)throw new Error("Invalid permission: "+o);s+=vN[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=AB(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=lB(this.encryptionKey,this.padding)}function Hu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function yN(t){if(Fr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){Ht.console&&jr.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function mp(t){if(!(this instanceof mp))return new mp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function oL(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function rl(t,e,r,n,s){if(!(this instanceof rl))return new rl(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,oL.call(this,n,s)}function xc(t,e,r,n,s){if(!(this instanceof xc))return new xc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,oL.call(this,n,s)}function Nt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,A=16,c="S",u=null;Fr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=yN;var y="1.3",C=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(v){y=v};var B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return B};var w=p.__private__.getPageFormat=function(v){return B[v]};s=s||"a4";var b="compat",N="advanced",T=b;function V(){this.saveGraphicsState(),se(new Ct(Qt,0,0,-Qt,0,Vs()*Qt).toString()+" cm"),this.setFontSize(this.getFontSize()/Qt),c="n",T=N}function j(){this.restoreGraphicsState(),c="S",T=b}var L=p.__private__.combineFontStyleAndFontWeight=function(v,O){if(v=="bold"&&O=="normal"||v=="bold"&&O==400||v=="normal"&&O=="italic"||v=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(v=O==400||O==="normal"?v==="italic"?"italic":"normal":O!=700&&O!=="bold"||v!=="normal"?(O==700?"bold":O)+""+v:"bold"),v};p.advancedAPI=function(v){var O=T===b;return O&&V.call(this),typeof v!="function"||(v(this),O&&j.call(this)),this},p.compatAPI=function(v){var O=T===N;return O&&j.call(this),typeof v!="function"||(v(this),O&&V.call(this)),this},p.isAdvancedAPI=function(){return T===N};var S,I=function(v){if(T!==N)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=p.roundToPrecision=p.__private__.roundToPrecision=function(v,O){var te=e||O;if(isNaN(v)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(te).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf=typeof A=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,A)}:A==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,16)};var F=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return R(v,2)},E=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return R(v,3)},U=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return T===b?v*Qt:T===N?v:void 0},K=function(v){return U(function(O){return T===b?Vs()-O:T===N?O:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ae,le="00000000000000000000000000000000",ie=p.__private__.getFileId=function(){return le},q=p.__private__.setFileId=function(v){return le=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Cr=new Mu(u.userPermissions,u.userPassword,u.ownerPassword,le)),le};p.setFileId=function(v){return q(v),this},p.getFileId=function(){return ie()};var Y=p.__private__.convertDateToPDFDate=function(v){var O=v.getTimezoneOffset(),te=O<0?"+":"-",de=Math.floor(Math.abs(O/60)),ye=Math.abs(O%60),Pe=[te,ee(de),"'",ee(ye),"'"].join("");return["D:",v.getFullYear(),ee(v.getMonth()+1),ee(v.getDate()),ee(v.getHours()),ee(v.getMinutes()),ee(v.getSeconds()),Pe].join("")},ue=p.__private__.convertPDFDateToDate=function(v){var O=parseInt(v.substr(2,4),10),te=parseInt(v.substr(6,2),10)-1,de=parseInt(v.substr(8,2),10),ye=parseInt(v.substr(10,2),10),Pe=parseInt(v.substr(12,2),10),je=parseInt(v.substr(14,2),10);return new Date(O,te,de,ye,Pe,je,0)},pe=p.__private__.setCreationDate=function(v){var O;if(v===void 0&&(v=new Date),v instanceof Date)O=Y(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=v}return ae=O},D=p.__private__.getCreationDate=function(v){var O=ae;return v==="jsDate"&&(O=ue(ae)),O};p.setCreationDate=function(v){return pe(v),this},p.getCreationDate=function(v){return D(v)};var W,ee=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},M=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},Z=0,Ae=[],oe=[],ce=0,we=[],he=[],fe=!1,Ne=oe;p.__private__.setCustomOutputDestination=function(v){fe=!0,Ne=v};var Ce=function(v){fe||(Ne=v)};p.__private__.resetCustomOutputDestination=function(){fe=!1,Ne=oe};var se=p.__private__.out=function(v){return v=v.toString(),ce+=v.length+1,Ne.push(v),Ne},wt=p.__private__.write=function(v){return se(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},it=p.__private__.getArrayBuffer=function(v){for(var O=v.length,te=new ArrayBuffer(O),de=new Uint8Array(te);O--;)de[O]=v.charCodeAt(O);return te},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return et};var De=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return De=T===N?v/Qt:v,this};var Be,Te=p.__private__.getFontSize=p.getFontSize=function(){return T===b?De:De*Qt},We=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return We=v,this},p.__private__.getR2L=p.getR2L=function(){return We};var Me,nt=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Be=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Be=v}else Be=parseInt(v,10)};p.__private__.getZoomMode=function(){return Be};var ct,ze=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Me=v};p.__private__.getPageMode=function(){return Me};var Lt=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ct=v};p.__private__.getLayoutMode=function(){return ct},p.__private__.setDisplayMode=p.setDisplayMode=function(v,O,te){return nt(v),Lt(O),ze(te),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(pt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[v]},p.__private__.getDocumentProperties=function(){return pt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var O in pt)pt.hasOwnProperty(O)&&v[O]&&(pt[O]=v[O]);return this},p.__private__.setDocumentProperty=function(v,O){if(Object.keys(pt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[v]=O};var At,Qt,mt,tr,Jt,ht={},Pt={},hr=[],Ft={},Se={},Ge={},st={},Xe=null,Ye=0,Je=[],at=new yN(p),rr=t.hotfixes||[],$t={},vr={},en=[],Ct=function v(O,te,de,ye,Pe,je){if(!(this instanceof v))return new v(O,te,de,ye,Pe,je);isNaN(O)&&(O=1),isNaN(te)&&(te=0),isNaN(de)&&(de=0),isNaN(ye)&&(ye=1),isNaN(Pe)&&(Pe=0),isNaN(je)&&(je=0),this._matrix=[O,te,de,ye,Pe,je]};Object.defineProperty(Ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ct.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(v)},Ct.prototype.multiply=function(v){var O=v.sx*this.sx+v.shy*this.shx,te=v.sx*this.shy+v.shy*this.sy,de=v.shx*this.sx+v.sy*this.shx,ye=v.shx*this.shy+v.sy*this.sy,Pe=v.tx*this.sx+v.ty*this.shx+this.tx,je=v.tx*this.shy+v.ty*this.sy+this.ty;return new Ct(O,te,de,ye,Pe,je)},Ct.prototype.decompose=function(){var v=this.sx,O=this.shy,te=this.shx,de=this.sy,ye=this.tx,Pe=this.ty,je=Math.sqrt(v*v+O*O),ut=(v/=je)*te+(O/=je)*de;te-=v*ut,de-=O*ut;var xt=Math.sqrt(te*te+de*de);return ut/=xt,v*(de/=xt)<O*(te/=xt)&&(v=-v,O=-O,ut=-ut,je=-je),{scale:new Ct(je,0,0,xt,0,0),translate:new Ct(1,0,0,1,ye,Pe),rotate:new Ct(v,O,-O,v,0,0),skew:new Ct(1,0,ut,1,0,0)}},Ct.prototype.toString=function(v){return this.join(" ")},Ct.prototype.inversed=function(){var v=this.sx,O=this.shy,te=this.shx,de=this.sy,ye=this.tx,Pe=this.ty,je=1/(v*de-O*te),ut=de*je,xt=-O*je,Rt=-te*je,Kt=v*je;return new Ct(ut,xt,Rt,Kt,-ut*ye-Rt*Pe,-xt*ye-Kt*Pe)},Ct.prototype.applyToPoint=function(v){var O=v.x*this.sx+v.y*this.shx+this.tx,te=v.x*this.shy+v.y*this.sy+this.ty;return new za(O,te)},Ct.prototype.applyToRectangle=function(v){var O=this.applyToPoint(v),te=this.applyToPoint(new za(v.x+v.w,v.y+v.h));return new CA(O.x,O.y,te.x-O.x,te.y-O.y)},Ct.prototype.clone=function(){var v=this.sx,O=this.shy,te=this.shx,de=this.sy,ye=this.tx,Pe=this.ty;return new Ct(v,O,te,de,ye,Pe)},p.Matrix=Ct;var Rr=p.matrixMult=function(v,O){return O.multiply(v)},Os=new Ct(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Os;var jn=function(v,O){if(!Se[v]){var te=(O instanceof rl?"Sh":"P")+(Object.keys(Ft).length+1).toString(10);O.id=te,Se[v]=te,Ft[te]=O,at.publish("addPattern",O)}};p.ShadingPattern=rl,p.TilingPattern=xc,p.addShadingPattern=function(v,O){return I("addShadingPattern()"),jn(v,O),this},p.beginTilingPattern=function(v){I("beginTilingPattern()"),$a(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,O){I("endTilingPattern()"),O.stream=he[W].join(`
`),jn(v,O),at.publish("endTilingPattern",O),en.pop().restore()};var On,Or=p.__private__.newObject=function(){var v=ve();return He(v,!0),v},ve=p.__private__.newObjectDeferred=function(){return Z++,Ae[Z]=function(){return ce},Z},He=function(v,O){return O=typeof O=="boolean"&&O,Ae[v]=ce,O&&se(v+" 0 obj"),v},ot=p.__private__.newAdditionalObject=function(){var v={objId:ve(),content:""};return we.push(v),v},Zt=ve(),Wt=ve(),_t=p.__private__.decodeColorString=function(v){var O=v.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var te=parseFloat(O[0]);O=[te,te,te,"r"]}for(var de="#",ye=0;ye<3;ye++)de+=("0"+Math.floor(255*parseFloat(O[ye])).toString(16)).slice(-2);return de},bt=p.__private__.encodeColorString=function(v){var O;typeof v=="string"&&(v={ch1:v});var te=v.ch1,de=v.ch2,ye=v.ch3,Pe=v.ch4,je=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var ut=new iL(te);if(ut.ok)te=ut.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var xt=parseInt(te.substr(1),16);te=xt>>16&255,de=xt>>8&255,ye=255&xt}if(de===void 0||Pe===void 0&&te===de&&de===ye)O=typeof te=="string"?te+" "+je[0]:v.precision===2?F(te/255)+" "+je[0]:E(te/255)+" "+je[0];else if(Pe===void 0||Fr(Pe)==="object"){if(Pe&&!isNaN(Pe.a)&&Pe.a===0)return["1.","1.","1.",je[1]].join(" ");O=typeof te=="string"?[te,de,ye,je[1]].join(" "):v.precision===2?[F(te/255),F(de/255),F(ye/255),je[1]].join(" "):[E(te/255),E(de/255),E(ye/255),je[1]].join(" ")}else O=typeof te=="string"?[te,de,ye,Pe,je[2]].join(" "):v.precision===2?[F(te),F(de),F(ye),F(Pe),je[2]].join(" "):[E(te),E(de),E(ye),E(Pe),je[2]].join(" ");return O},es=p.__private__.getFilters=function(){return a},Cn=p.__private__.putStream=function(v){var O=(v=v||{}).data||"",te=v.filters||es(),de=v.alreadyAppliedFilters||[],ye=v.addLength1||!1,Pe=O.length,je=v.objectId,ut=function(gn){return gn};if(u!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ut=Cr.encryptor(je,0));var xt={};te===!0&&(te=["FlateEncode"]);var Rt=v.additionalKeyValues||[],Kt=(xt=Nt.API.processDataByFilters!==void 0?Nt.API.processDataByFilters(O,te):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(xt.data.length!==0&&(Rt.push({key:"Length",value:xt.data.length}),ye===!0&&Rt.push({key:"Length1",value:Pe})),Kt.length!=0)if(Kt.split("/").length-1==1)Rt.push({key:"Filter",value:Kt});else{Rt.push({key:"Filter",value:"["+Kt+"]"});for(var ur=0;ur<Rt.length;ur+=1)if(Rt[ur].key==="DecodeParms"){for(var Mr=[],$r=0;$r<xt.reverseChain.split("/").length-1;$r+=1)Mr.push("null");Mr.push(Rt[ur].value),Rt[ur].value="["+Mr.join(" ")+"]"}}se("<<");for(var br=0;br<Rt.length;br++)se("/"+Rt[br].key+" "+Rt[br].value);se(">>"),xt.data.length!==0&&(se("stream"),se(ut(xt.data)),se("endstream"))},ja=p.__private__.putPage=function(v){var O=v.number,te=v.data,de=v.objId,ye=v.contentsObjId;He(de,!0),se("<</Type /Page"),se("/Parent "+v.rootDictionaryObjId+" 0 R"),se("/Resources "+v.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(S(v.mediaBox.bottomLeftX))+" "+parseFloat(S(v.mediaBox.bottomLeftY))+" "+S(v.mediaBox.topRightX)+" "+S(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&se("/CropBox ["+S(v.cropBox.bottomLeftX)+" "+S(v.cropBox.bottomLeftY)+" "+S(v.cropBox.topRightX)+" "+S(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&se("/BleedBox ["+S(v.bleedBox.bottomLeftX)+" "+S(v.bleedBox.bottomLeftY)+" "+S(v.bleedBox.topRightX)+" "+S(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&se("/TrimBox ["+S(v.trimBox.bottomLeftX)+" "+S(v.trimBox.bottomLeftY)+" "+S(v.trimBox.topRightX)+" "+S(v.trimBox.topRightY)+"]"),v.artBox!==null&&se("/ArtBox ["+S(v.artBox.bottomLeftX)+" "+S(v.artBox.bottomLeftY)+" "+S(v.artBox.topRightX)+" "+S(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&se("/UserUnit "+v.userUnit),at.publish("putPage",{objId:de,pageContext:Je[O],pageNumber:O,page:te}),se("/Contents "+ye+" 0 R"),se(">>"),se("endobj");var Pe=te.join(`
`);return T===N&&(Pe+=`
Q`),He(ye,!0),Cn({data:Pe,filters:es(),objectId:ye}),se("endobj"),de},vi=p.__private__.putPages=function(){var v,O,te=[];for(v=1;v<=Ye;v++)Je[v].objId=ve(),Je[v].contentsObjId=ve();for(v=1;v<=Ye;v++)te.push(ja({number:v,data:he[v],objId:Je[v].objId,contentsObjId:Je[v].contentsObjId,mediaBox:Je[v].mediaBox,cropBox:Je[v].cropBox,bleedBox:Je[v].bleedBox,trimBox:Je[v].trimBox,artBox:Je[v].artBox,userUnit:Je[v].userUnit,rootDictionaryObjId:Zt,resourceDictionaryObjId:Wt}));He(Zt,!0),se("<</Type /Pages");var de="/Kids [";for(O=0;O<Ye;O++)de+=te[O]+" 0 R ";se(de+"]"),se("/Count "+Ye),se(">>"),se("endobj"),at.publish("postPutPages")},ua=function(v){at.publish("putFont",{font:v,out:se,newObject:Or,putStream:Cn}),v.isAlreadyPutted!==!0&&(v.objectNumber=Or(),se("<<"),se("/Type /Font"),se("/BaseFont /"+Hu(v.postScriptName)),se("/Subtype /Type1"),typeof v.encoding=="string"&&se("/Encoding /"+v.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},Oa=function(v){v.objectNumber=Or();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[S(v.x),S(v.y),S(v.x+v.width),S(v.y+v.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var te=v.pages[1].join(`
`);Cn({data:te,additionalKeyValues:O,objectId:v.objectNumber}),se("endobj")},bo=function(v,O){O||(O=21);var te=Or(),de=function(je,ut){var xt,Rt=[],Kt=1/(ut-1);for(xt=0;xt<1;xt+=Kt)Rt.push(xt);if(Rt.push(1),je[0].offset!=0){var ur={offset:0,color:je[0].color};je.unshift(ur)}if(je[je.length-1].offset!=1){var Mr={offset:1,color:je[je.length-1].color};je.push(Mr)}for(var $r="",br=0,gn=0;gn<Rt.length;gn++){for(xt=Rt[gn];xt>je[br+1].offset;)br++;var Lr=je[br].offset,Mn=(xt-Lr)/(je[br+1].offset-Lr),zi=je[br].color,pa=je[br+1].color;$r+=M(Math.round((1-Mn)*zi[0]+Mn*pa[0]).toString(16))+M(Math.round((1-Mn)*zi[1]+Mn*pa[1]).toString(16))+M(Math.round((1-Mn)*zi[2]+Mn*pa[2]).toString(16))}return $r.trim()}(v.colors,O),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+O+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cn({data:de,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),se("endobj"),v.objectNumber=Or(),se("<< /ShadingType "+v.type),se("/ColorSpace /DeviceRGB");var Pe="/Coords ["+S(parseFloat(v.coords[0]))+" "+S(parseFloat(v.coords[1]))+" ";v.type===2?Pe+=S(parseFloat(v.coords[2]))+" "+S(parseFloat(v.coords[3])):Pe+=S(parseFloat(v.coords[2]))+" "+S(parseFloat(v.coords[3]))+" "+S(parseFloat(v.coords[4]))+" "+S(parseFloat(v.coords[5])),se(Pe+="]"),v.matrix&&se("/Matrix ["+v.matrix.toString()+"]"),se("/Function "+te+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},xo=function(v,O){var te=ve(),de=Or();O.push({resourcesOid:te,objectOid:de}),v.objectNumber=de;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+v.boundingBox.map(S).join(" ")+"]"}),ye.push({key:"XStep",value:S(v.xStep)}),ye.push({key:"YStep",value:S(v.yStep)}),ye.push({key:"Resources",value:te+" 0 R"}),v.matrix&&ye.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Cn({data:v.stream,additionalKeyValues:ye,objectId:v.objectNumber}),se("endobj")},Wd=function(v){for(var O in v.objectNumber=Or(),se("<<"),v)switch(O){case"opacity":se("/ca "+F(v[O]));break;case"stroke-opacity":se("/CA "+F(v[O]))}se(">>"),se("endobj")},Ma=function(v){He(v.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var O in se("/Font <<"),ht)ht.hasOwnProperty(O)&&(f===!1||f===!0&&g.hasOwnProperty(O))&&se("/"+O+" "+ht[O].objectNumber+" 0 R");se(">>")}(),function(){if(Object.keys(Ft).length>0){for(var O in se("/Shading <<"),Ft)Ft.hasOwnProperty(O)&&Ft[O]instanceof rl&&Ft[O].objectNumber>=0&&se("/"+O+" "+Ft[O].objectNumber+" 0 R");at.publish("putShadingPatternDict"),se(">>")}}(),function(O){if(Object.keys(Ft).length>0){for(var te in se("/Pattern <<"),Ft)Ft.hasOwnProperty(te)&&Ft[te]instanceof p.TilingPattern&&Ft[te].objectNumber>=0&&Ft[te].objectNumber<O&&se("/"+te+" "+Ft[te].objectNumber+" 0 R");at.publish("putTilingPatternDict"),se(">>")}}(v.objectOid),function(){if(Object.keys(Ge).length>0){var O;for(O in se("/ExtGState <<"),Ge)Ge.hasOwnProperty(O)&&Ge[O].objectNumber>=0&&se("/"+O+" "+Ge[O].objectNumber+" 0 R");at.publish("putGStateDict"),se(">>")}}(),function(){for(var O in se("/XObject <<"),$t)$t.hasOwnProperty(O)&&$t[O].objectNumber>=0&&se("/"+O+" "+$t[O].objectNumber+" 0 R");at.publish("putXobjectDict"),se(">>")}(),se(">>"),se("endobj")},Vl=function(v){Pt[v.fontName]=Pt[v.fontName]||{},Pt[v.fontName][v.fontStyle]=v.id},gA=function(v,O,te,de,ye){var Pe={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:v,fontName:O,fontStyle:te,encoding:de,isStandardFont:ye||!1,metadata:{}};return at.publish("addFont",{font:Pe,instance:this}),ht[Pe.id]=Pe,Vl(Pe),Pe.id},ts=p.__private__.pdfEscape=p.pdfEscape=function(v,O){return function(te,de){var ye,Pe,je,ut,xt,Rt,Kt,ur,Mr;if(je=(de=de||{}).sourceEncoding||"Unicode",xt=de.outputEncoding,(de.autoencode||xt)&&ht[At].metadata&&ht[At].metadata[je]&&ht[At].metadata[je].encoding&&(ut=ht[At].metadata[je].encoding,!xt&&ht[At].encoding&&(xt=ht[At].encoding),!xt&&ut.codePages&&(xt=ut.codePages[0]),typeof xt=="string"&&(xt=ut[xt]),xt)){for(Kt=!1,Rt=[],ye=0,Pe=te.length;ye<Pe;ye++)(ur=xt[te.charCodeAt(ye)])?Rt.push(String.fromCharCode(ur)):Rt.push(te[ye]),Rt[ye].charCodeAt(0)>>8&&(Kt=!0);te=Rt.join("")}for(ye=te.length;Kt===void 0&&ye!==0;)te.charCodeAt(ye-1)>>8&&(Kt=!0),ye--;if(!Kt)return te;for(Rt=de.noBOM?[]:[254,255],ye=0,Pe=te.length;ye<Pe;ye++){if((Mr=(ur=te.charCodeAt(ye))>>8)>>8)throw new Error("Character at position "+ye+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rt.push(Mr),Rt.push(ur-(Mr<<8))}return String.fromCharCode.apply(void 0,Rt)}(v,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yi=p.__private__.beginPage=function(v){he[++Ye]=[],Je[Ye]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Gl(Ye),Ce(he[W])},wA=function(v,O){var te,de,ye;switch(r=O||r,typeof v=="string"&&(te=w(v.toLowerCase()),Array.isArray(te)&&(de=te[0],ye=te[1])),Array.isArray(v)&&(de=v[0]*Qt,ye=v[1]*Qt),isNaN(de)&&(de=s[0],ye=s[1]),(de>14400||ye>14400)&&(jr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),ye=Math.min(14400,ye)),s=[de,ye],r.substr(0,1)){case"l":ye>de&&(s=[ye,de]);break;case"p":de>ye&&(s=[ye,de])}yi(s),qa(BA),se(fa),Qr!==0&&se(Qr+" J"),Zl!==0&&se(Zl+" j"),at.publish("addPage",{pageNumber:Ye})},Kl=function(v){v>0&&v<=Ye&&(he.splice(v,1),Je.splice(v,1),Ye--,W>Ye&&(W=Ye),this.setPage(W))},Gl=function(v){v>0&&v<=Ye&&(W=v)},ql=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return he.length-1},zl=function(v,O,te){var de,ye=void 0;return te=te||{},v=v!==void 0?v:ht[At].fontName,O=O!==void 0?O:ht[At].fontStyle,de=v.toLowerCase(),Pt[de]!==void 0&&Pt[de][O]!==void 0?ye=Pt[de][O]:Pt[v]!==void 0&&Pt[v][O]!==void 0?ye=Pt[v][O]:te.disableWarning===!1&&jr.warn("Unable to look up font label for font '"+v+"', '"+O+"'. Refer to getFontList() for available fonts."),ye||te.noFallback||(ye=Pt.times[O])==null&&(ye=Pt.times.normal),ye},Ha=p.__private__.putInfo=function(){var v=Or(),O=function(de){return de};for(var te in u!==null&&(O=Cr.encryptor(v,0)),se("<<"),se("/Producer ("+ts(O("jsPDF "+Nt.version))+")"),pt)pt.hasOwnProperty(te)&&pt[te]&&se("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+ts(O(pt[te]))+")");se("/CreationDate ("+ts(O(ae))+")"),se(">>"),se("endobj")},$l=p.__private__.putCatalog=function(v){var O=(v=v||{}).rootDictionaryObjId||Zt;switch(Or(),se("<<"),se("/Type /Catalog"),se("/Pages "+O+" 0 R"),Be||(Be="fullwidth"),Be){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Be;te.substr(te.length-1)==="%"&&(Be=parseInt(Be)/100),typeof Be=="number"&&se("/OpenAction [3 0 R /XYZ null null "+F(Be)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}Me&&se("/PageMode /"+Me),at.publish("putCatalog"),se(">>"),se("endobj")},hn=p.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(Z+1)),se("/Root "+Z+" 0 R"),se("/Info "+(Z-1)+" 0 R"),u!==null&&se("/Encrypt "+Cr.oid+" 0 R"),se("/ID [ <"+le+"> <"+le+"> ]"),se(">>")},Wl=p.__private__.putHeader=function(){se("%PDF-"+y),se("%")},au=p.__private__.putXRef=function(){var v="0000000000";se("xref"),se("0 "+(Z+1)),se("0000000000 65535 f ");for(var O=1;O<=Z;O++)typeof Ae[O]=="function"?se((v+Ae[O]()).slice(-10)+" 00000 n "):Ae[O]!==void 0?se((v+Ae[O]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},da=p.__private__.buildDocument=function(){var v;Z=0,ce=0,oe=[],Ae=[],we=[],Zt=ve(),Wt=ve(),Ce(oe),at.publish("buildDocument"),Wl(),vi(),function(){at.publish("putAdditionalObjects");for(var te=0;te<we.length;te++){var de=we[te];He(de.objId,!0),se(de.content),se("endobj")}at.publish("postPutAdditionalObjects")}(),v=[],function(){for(var te in ht)ht.hasOwnProperty(te)&&(f===!1||f===!0&&g.hasOwnProperty(te))&&ua(ht[te])}(),function(){var te;for(te in Ge)Ge.hasOwnProperty(te)&&Wd(Ge[te])}(),function(){for(var te in $t)$t.hasOwnProperty(te)&&Oa($t[te])}(),function(te){var de;for(de in Ft)Ft.hasOwnProperty(de)&&(Ft[de]instanceof rl?bo(Ft[de]):Ft[de]instanceof xc&&xo(Ft[de],te))}(v),at.publish("putResources"),v.forEach(Ma),Ma({resourcesOid:Wt,objectOid:Number.MAX_SAFE_INTEGER}),at.publish("postPutResources"),u!==null&&(Cr.oid=Or(),se("<<"),se("/Filter /Standard"),se("/V "+Cr.v),se("/R "+Cr.r),se("/U <"+Cr.toHexString(Cr.U)+">"),se("/O <"+Cr.toHexString(Cr.O)+">"),se("/P "+Cr.P),se(">>"),se("endobj")),Ha(),$l();var O=ce;return au(),hn(),se("startxref"),se(""+O),se("%%EOF"),Ce(he[W]),oe.join(`
`)},Va=p.__private__.getBlob=function(v){return new Blob([it(v)],{type:"application/pdf"})},ti=p.output=p.__private__.output=(On=function(v,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",v){case void 0:return da();case"save":p.save(O.filename);break;case"arraybuffer":return it(da());case"blob":return Va(da());case"bloburi":case"bloburl":if(Ht.URL!==void 0&&typeof Ht.URL.createObjectURL=="function")return Ht.URL&&Ht.URL.createObjectURL(Va(da()))||void 0;jr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",de=da();try{te=gN(de)}catch{te=gN(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+O.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ht)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(ye=O.pdfObjectUrl,Pe="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Pe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",ut=Ht.open();return ut!==null&&ut.document.write(je),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ht)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',Rt=Ht.open();if(Rt!==null){Rt.document.write(xt);var Kt=this;Rt.document.documentElement.querySelector("#pdfViewer").onload=function(){Rt.document.title=O.filename,Rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kt.output("bloburl"))}}return Rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ht)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Mr=Ht.open();if(Mr!==null&&(Mr.document.write(ur),Mr.document.title=O.filename),Mr||typeof safari>"u")return Mr;break;case"datauri":case"dataurl":return Ht.document.location.href=this.output("datauristring",O);default:return null}},On.foo=function(){try{return On.apply(this,arguments)}catch(te){var v=te.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var O="Error in function "+v.split(`
`)[0].split("<")[0]+": "+te.message;if(!Ht.console)throw new Error(O);Ht.console.error(O,te),Ht.alert&&alert(O)}},On.foo.bar=On,On.foo),Co=function(v){return Array.isArray(rr)===!0&&rr.indexOf(v)>-1};switch(n){case"pt":Qt=1;break;case"mm":Qt=72/25.4;break;case"cm":Qt=72/2.54;break;case"in":Qt=72;break;case"px":Qt=Co("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qt=12;break;case"ex":Qt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Qt=n}var Cr=null;pe(),q();var Ms=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[v].objId,pageNumber:v,pageContext:Je[v]}},vA=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in Je)if(Je[O].objId===v)break;return Ms(O)},yA=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Je[W].objId,pageNumber:W,pageContext:Je[W]}};p.addPage=function(){return wA.apply(this,arguments),this},p.setPage=function(){return Gl.apply(this,arguments),Ce.call(this,he[W]),this},p.insertPage=function(v){return this.addPage(),this.movePage(W,v),this},p.movePage=function(v,O){var te,de;if(v>O){te=he[v],de=Je[v];for(var ye=v;ye>O;ye--)he[ye]=he[ye-1],Je[ye]=Je[ye-1];he[O]=te,Je[O]=de,this.setPage(O)}else if(v<O){te=he[v],de=Je[v];for(var Pe=v;Pe<O;Pe++)he[Pe]=he[Pe+1],Je[Pe]=Je[Pe+1];he[O]=te,Je[O]=de,this.setPage(O)}return this},p.deletePage=function(){return Kl.apply(this,arguments),this},p.__private__.text=p.text=function(v,O,te,de,ye){var Pe,je,ut,xt,Rt,Kt,ur,Mr,$r,br=(de=de||{}).scope||this;if(typeof v=="number"&&typeof O=="number"&&(typeof te=="string"||Array.isArray(te))){var gn=te;te=O,O=v,v=gn}if(arguments[3]instanceof Ct==0?(ut=arguments[4],xt=arguments[5],Fr(ur=arguments[3])==="object"&&ur!==null||(typeof ut=="string"&&(xt=ut,ut=null),typeof ur=="string"&&(xt=ur,ur=null),typeof ur=="number"&&(ut=ur,ur=null),de={flags:ur,angle:ut,align:xt})):(I("The transform parameter of text() with a Matrix value"),$r=ye),isNaN(O)||isNaN(te)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return br;var Lr,Mn="",zi=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:Ga,pa=br.internal.scaleFactor;function lu(Hr){return Hr=Hr.split("	").join(Array(de.TabLen||9).join(" ")),ts(Hr,ur)}function Fo(Hr){for(var Vr,In=Hr.concat(),Nn=[],Uo=In.length;Uo--;)typeof(Vr=In.shift())=="string"?Nn.push(Vr):Array.isArray(Hr)&&(Vr.length===1||Vr[1]===void 0&&Vr[2]===void 0)?Nn.push(Vr[0]):Nn.push([Vr[0],Vr[1],Vr[2]]);return Nn}function _n(Hr,Vr){var In;if(typeof Hr=="string")In=Vr(Hr)[0];else if(Array.isArray(Hr)){for(var Nn,Uo,hu=Hr.concat(),to=[],ih=hu.length;ih--;)typeof(Nn=hu.shift())=="string"?to.push(Vr(Nn)[0]):Array.isArray(Nn)&&typeof Nn[0]=="string"&&(Uo=Vr(Nn[0],Nn[1],Nn[2]),to.push([Uo[0],Uo[1],Uo[2]]));In=to}return In}var si=!1,EA=!0;if(typeof v=="string")si=!0;else if(Array.isArray(v)){var bi=v.concat();je=[];for(var h,_=bi.length;_--;)(typeof(h=bi.shift())!="string"||Array.isArray(h)&&typeof h[0]!="string")&&(EA=!1);si=EA}if(si===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var P=De/br.internal.scaleFactor,X=P*(zi-1);switch(de.baseline){case"bottom":te-=X;break;case"top":te+=P-X;break;case"hanging":te+=P-2*X;break;case"middle":te+=P/2-X}if((Kt=de.maxWidth||0)>0&&(typeof v=="string"?v=br.splitTextToSize(v,Kt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Hr,Vr){return Hr.concat(br.splitTextToSize(Vr,Kt))},[]))),Pe={text:v,x:O,y:te,options:de,mutex:{pdfEscape:ts,activeFontKey:At,fonts:ht,activeFontSize:De}},at.publish("preProcessText",Pe),v=Pe.text,ut=(de=Pe.options).angle,$r instanceof Ct==0&&ut&&typeof ut=="number"){ut*=Math.PI/180,de.rotationDirection===0&&(ut=-ut),T===N&&(ut=-ut);var be=Math.cos(ut),Fe=Math.sin(ut);$r=new Ct(be,Fe,-Fe,be,0,0)}else ut&&ut instanceof Ct&&($r=ut);T!==N||$r||($r=Os),(Rt=de.charSpace||Io)!==void 0&&(Mn+=S(U(Rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mr=de.horizontalScale)!==void 0&&(Mn+=S(100*Mr)+` Tz
`),de.lang;var Ve=-1,yr=de.renderingMode!==void 0?de.renderingMode:de.stroke,tn=br.internal.getCurrentPageInfo().pageContext;switch(yr){case 0:case!1:case"fill":Ve=0;break;case 1:case!0:case"stroke":Ve=1;break;case 2:case"fillThenStroke":Ve=2;break;case 3:case"invisible":Ve=3;break;case 4:case"fillAndAddForClipping":Ve=4;break;case 5:case"strokeAndAddPathForClipping":Ve=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ve=6;break;case 7:case"addToPathForClipping":Ve=7}var nr=tn.usedRenderingMode!==void 0?tn.usedRenderingMode:-1;Ve!==-1?Mn+=Ve+` Tr
`:nr!==-1&&(Mn+=`0 Tr
`),Ve!==-1&&(tn.usedRenderingMode=Ve),xt=de.align||"left";var or,_r=De*zi,$i=br.internal.pageSize.getWidth(),ds=ht[At];Rt=de.charSpace||Io,Kt=de.maxWidth||0,ur=Object.assign({autoencode:!0,noBOM:!0},de.flags);var xi=[],Xa=function(Hr){return br.getStringUnitWidth(Hr,{font:ds,charSpace:Rt,fontSize:De,doKerning:!1})*De/pa};if(Object.prototype.toString.call(v)==="[object Array]"){var ii;je=Fo(v),xt!=="left"&&(or=je.map(Xa));var ai,ec=0;if(xt==="right"){O-=or[0],v=[],_=je.length;for(var Ya=0;Ya<_;Ya++)Ya===0?(ai=rs(O),ii=ha(te)):(ai=U(ec-or[Ya]),ii=-_r),v.push([je[Ya],ai,ii]),ec=or[Ya]}else if(xt==="center"){O-=or[0]/2,v=[],_=je.length;for(var IA=0;IA<_;IA++)IA===0?(ai=rs(O),ii=ha(te)):(ai=U((ec-or[IA])/2),ii=-_r),v.push([je[IA],ai,ii]),ec=or[IA]}else if(xt==="left"){v=[],_=je.length;for(var rh=0;rh<_;rh++)v.push(je[rh])}else if(xt==="justify"&&ds.encoding==="Identity-H"){v=[],_=je.length,Kt=Kt!==0?Kt:$i;for(var NA=0,En=0;En<_;En++)if(ii=En===0?ha(te):-_r,ai=En===0?rs(O):NA,En<_-1){var cv=U((Kt-or[En])/(je[En].split(" ").length-1)),Ja=je[En].split(" ");v.push([Ja[0]+" ",ai,ii]),NA=0;for(var Za=1;Za<Ja.length;Za++){var cu=(Xa(Ja[Za-1]+" "+Ja[Za])-Xa(Ja[Za]))*pa+cv;Za==Ja.length-1?v.push([Ja[Za],cu,0]):v.push([Ja[Za]+" ",cu,0]),NA-=cu}}else v.push([je[En],ai,ii]);v.push(["",NA,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],_=je.length,Kt=Kt!==0?Kt:$i,En=0;En<_;En++)ii=En===0?ha(te):-_r,ai=En===0?rs(O):0,En<_-1?xi.push(S(U((Kt-or[En])/(je[En].split(" ").length-1)))):xi.push(0),v.push([je[En],ai,ii])}}(typeof de.R2L=="boolean"?de.R2L:We)===!0&&(v=_n(v,function(Hr,Vr,In){return[Hr.split("").reverse().join(""),Vr,In]})),Pe={text:v,x:O,y:te,options:de,mutex:{pdfEscape:ts,activeFontKey:At,fonts:ht,activeFontSize:De}},at.publish("postProcessText",Pe),v=Pe.text,Lr=Pe.mutex.isHex||!1;var nh=ht[At].encoding;nh!=="WinAnsiEncoding"&&nh!=="StandardEncoding"||(v=_n(v,function(Hr,Vr,In){return[lu(Hr),Vr,In]})),je=Fo(v),v=[];for(var uu,du,tc,rc=Array.isArray(je[0])?1:0,To="",sh=function(Hr,Vr,In){var Nn="";return In instanceof Ct?(In=typeof de.angle=="number"?Rr(In,new Ct(1,0,0,1,Hr,Vr)):Rr(new Ct(1,0,0,1,Hr,Vr),In),T===N&&(In=Rr(new Ct(1,0,0,-1,0,0),In)),Nn=In.join(" ")+` Tm
`):Nn=S(Hr)+" "+S(Vr)+` Td
`,Nn},Ci=0;Ci<je.length;Ci++){switch(To="",rc){case 1:tc=(Lr?"<":"(")+je[Ci][0]+(Lr?">":")"),uu=parseFloat(je[Ci][1]),du=parseFloat(je[Ci][2]);break;case 0:tc=(Lr?"<":"(")+je[Ci]+(Lr?">":")"),uu=rs(O),du=ha(te)}xi!==void 0&&xi[Ci]!==void 0&&(To=xi[Ci]+` Tw
`),Ci===0?v.push(To+sh(uu,du,$r)+tc):rc===0?v.push(To+tc):rc===1&&v.push(To+sh(uu,du,$r)+tc)}v=rc===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var eo=`BT
/`;return eo+=At+" "+De+` Tf
`,eo+=S(De*zi)+` TL
`,eo+=Bi+`
`,eo+=Mn,eo+=v,se(eo+="ET"),g[At]=!0,br};var ou=p.__private__.clip=p.clip=function(v){return se(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return ou("evenodd")},p.__private__.discardPath=p.discardPath=function(){return se("n"),this};var ar=p.__private__.isValidStyle=function(v){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(O=!0),O};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return ar(v)&&(c=v),this};var _o=p.__private__.getStyle=p.getStyle=function(v){var O=c;switch(v){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=v}return O},Ka=p.close=function(){return se("h"),this};p.stroke=function(){return se("S"),this},p.fill=function(v){return ri("f",v),this},p.fillEvenOdd=function(v){return ri("f*",v),this},p.fillStroke=function(v){return ri("B",v),this},p.fillStrokeEvenOdd=function(v){return ri("B*",v),this};var ri=function(v,O){Fr(O)==="object"?Xd(O,v):se(v)},Xl=function(v){v===null||T===N&&v===void 0||(v=_o(v),se(v))};function Au(v,O,te,de,ye){var Pe=new xc(O||this.boundingBox,te||this.xStep,de||this.yStep,this.gState,ye||this.matrix);Pe.stream=this.stream;var je=v+"$$"+this.cloneIndex+++"$$";return jn(je,Pe),Pe}var Xd=function(v,O){var te=Se[v.key],de=Ft[te];if(de instanceof rl)se("q"),se(Yd(O)),de.gState&&p.setGState(de.gState),se(v.matrix.toString()+" cm"),se("/"+te+" sh"),se("Q");else if(de instanceof xc){var ye=new Ct(1,0,0,-1,0,Vs());v.matrix&&(ye=ye.multiply(v.matrix||Os),te=Au.call(de,v.key,v.boundingBox,v.xStep,v.yStep,ye).id),se("q"),se("/Pattern cs"),se("/"+te+" scn"),de.gState&&p.setGState(de.gState),se(O),se("Q")}},Yd=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Yl=p.moveTo=function(v,O){return se(S(U(v))+" "+S(K(O))+" m"),this},Eo=p.lineTo=function(v,O){return se(S(U(v))+" "+S(K(O))+" l"),this},ni=p.curveTo=function(v,O,te,de,ye,Pe){return se([S(U(v)),S(K(O)),S(U(te)),S(K(de)),S(U(ye)),S(K(Pe)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,O,te,de,ye){if(isNaN(v)||isNaN(O)||isNaN(te)||isNaN(de)||!ar(ye))throw new Error("Invalid arguments passed to jsPDF.line");return T===b?this.lines([[te-v,de-O]],v,O,[1,1],ye||"S"):this.lines([[te-v,de-O]],v,O,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,O,te,de,ye,Pe){var je,ut,xt,Rt,Kt,ur,Mr,$r,br,gn,Lr,Mn;if(typeof v=="number"&&(Mn=te,te=O,O=v,v=Mn),de=de||[1,1],Pe=Pe||!1,isNaN(O)||isNaN(te)||!Array.isArray(v)||!Array.isArray(de)||!ar(ye)||typeof Pe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Yl(O,te),je=de[0],ut=de[1],Rt=v.length,gn=O,Lr=te,xt=0;xt<Rt;xt++)(Kt=v[xt]).length===2?(gn=Kt[0]*je+gn,Lr=Kt[1]*ut+Lr,Eo(gn,Lr)):(ur=Kt[0]*je+gn,Mr=Kt[1]*ut+Lr,$r=Kt[2]*je+gn,br=Kt[3]*ut+Lr,gn=Kt[4]*je+gn,Lr=Kt[5]*ut+Lr,ni(ur,Mr,$r,br,gn,Lr));return Pe&&Ka(),Xl(ye),this},p.path=function(v){for(var O=0;O<v.length;O++){var te=v[O],de=te.c;switch(te.op){case"m":Yl(de[0],de[1]);break;case"l":Eo(de[0],de[1]);break;case"c":ni.apply(this,de);break;case"h":Ka()}}return this},p.__private__.rect=p.rect=function(v,O,te,de,ye){if(isNaN(v)||isNaN(O)||isNaN(te)||isNaN(de)||!ar(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return T===b&&(de=-de),se([S(U(v)),S(K(O)),S(U(te)),S(U(de)),"re"].join(" ")),Xl(ye),this},p.__private__.triangle=p.triangle=function(v,O,te,de,ye,Pe,je){if(isNaN(v)||isNaN(O)||isNaN(te)||isNaN(de)||isNaN(ye)||isNaN(Pe)||!ar(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-v,de-O],[ye-te,Pe-de],[v-ye,O-Pe]],v,O,[1,1],je,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,O,te,de,ye,Pe,je){if(isNaN(v)||isNaN(O)||isNaN(te)||isNaN(de)||isNaN(ye)||isNaN(Pe)||!ar(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*te),Pe=Math.min(Pe,.5*de),this.lines([[te-2*ye,0],[ye*ut,0,ye,Pe-Pe*ut,ye,Pe],[0,de-2*Pe],[0,Pe*ut,-ye*ut,Pe,-ye,Pe],[2*ye-te,0],[-ye*ut,0,-ye,-Pe*ut,-ye,-Pe],[0,2*Pe-de],[0,-Pe*ut,ye*ut,-Pe,ye,-Pe]],v+ye,O,[1,1],je,!0),this},p.__private__.ellipse=p.ellipse=function(v,O,te,de,ye){if(isNaN(v)||isNaN(O)||isNaN(te)||isNaN(de)||!ar(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pe=4/3*(Math.SQRT2-1)*te,je=4/3*(Math.SQRT2-1)*de;return Yl(v+te,O),ni(v+te,O-je,v+Pe,O-de,v,O-de),ni(v-Pe,O-de,v-te,O-je,v-te,O),ni(v-te,O+je,v-Pe,O+de,v,O+de),ni(v+Pe,O+de,v+te,O+je,v+te,O),Xl(ye),this},p.__private__.circle=p.circle=function(v,O,te,de){if(isNaN(v)||isNaN(O)||isNaN(te)||!ar(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,O,te,te,de)},p.setFont=function(v,O,te){return te&&(O=L(O,te)),At=zl(v,O,{disableWarning:!1}),this};var Gi=p.__private__.getFont=p.getFont=function(){return ht[zl.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,O,te={};for(v in Pt)if(Pt.hasOwnProperty(v))for(O in te[v]=[],Pt[v])Pt[v].hasOwnProperty(O)&&te[v].push(O);return te},p.addFont=function(v,O,te,de,ye){var Pe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pe.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Pe.indexOf(arguments[3])==-1&&(te=L(te,de)),gA.call(this,v,O,te,ye=ye||"Identity-H")};var Ga,BA=t.lineWidth||.200025,jt=p.__private__.getLineWidth=p.getLineWidth=function(){return BA},qa=p.__private__.setLineWidth=p.setLineWidth=function(v){return BA=v,se(S(U(v))+" w"),this};p.__private__.setLineDash=Nt.API.setLineDash=Nt.API.setLineDashPattern=function(v,O){if(v=v||[],O=O||0,isNaN(O)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(te){return S(U(te))}).join(" "),O=S(U(O)),se("["+v+"] "+O+" d"),this};var Jd=p.__private__.getLineHeight=p.getLineHeight=function(){return De*Ga};p.__private__.getLineHeight=p.getLineHeight=function(){return De*Ga};var Zd=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Ga=v),this},eh=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ga};Zd(t.lineHeight);var rs=p.__private__.getHorizontalCoordinate=function(v){return U(v)},ha=p.__private__.getVerticalCoordinate=function(v){return T===N?v:Je[W].mediaBox.topRightY-Je[W].mediaBox.bottomLeftY-U(v)},th=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return S(rs(v))},bA=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return S(ha(v))},fa=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return _t(fa)},p.__private__.setStrokeColor=p.setDrawColor=function(v,O,te,de){return fa=bt({ch1:v,ch2:O,ch3:te,ch4:de,pdfColorType:"draw",precision:2}),se(fa),this};var xA=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return _t(xA)},p.__private__.setFillColor=p.setFillColor=function(v,O,te,de){return xA=bt({ch1:v,ch2:O,ch3:te,ch4:de,pdfColorType:"fill",precision:2}),se(xA),this};var Bi=t.textColor||"0 g",qi=p.__private__.getTextColor=p.getTextColor=function(){return _t(Bi)};p.__private__.setTextColor=p.setTextColor=function(v,O,te,de){return Bi=bt({ch1:v,ch2:O,ch3:te,ch4:de,pdfColorType:"text",precision:3}),this};var Io=t.charSpace,Jl=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Io||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Io=v,this};var Qr=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var O=p.CapJoinStyles[v];if(O===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qr=O,se(O+" J"),this};var Zl=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var O=p.CapJoinStyles[v];if(O===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zl=O,se(O+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(S(U(v))+" M"),this},p.GState=mp,p.setGState=function(v){(v=typeof v=="string"?Ge[st[v]]:No(null,v)).equals(Xe)||(se("/"+v.id+" gs"),Xe=v)};var No=function(v,O){if(!v||!st[v]){var te=!1;for(var de in Ge)if(Ge.hasOwnProperty(de)&&Ge[de].equals(O)){te=!0;break}if(te)O=Ge[de];else{var ye="GS"+(Object.keys(Ge).length+1).toString(10);Ge[ye]=O,O.id=ye}return v&&(st[v]=O.id),at.publish("addGState",O),O}};p.addGState=function(v,O){return No(v,O),this},p.saveGraphicsState=function(){return se("q"),hr.push({key:At,size:De,color:Bi}),this},p.restoreGraphicsState=function(){se("Q");var v=hr.pop();return At=v.key,De=v.size,Bi=v.color,Xe=null,this},p.setCurrentTransformationMatrix=function(v){return se(v.toString()+" cm"),this},p.comment=function(v){return se("#"+v),this};var za=function(v,O){var te=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(Pe){isNaN(Pe)||(te=parseFloat(Pe))}});var de=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Pe){isNaN(Pe)||(de=parseFloat(Pe))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Pe){ye=Pe.toString()}}),this},CA=function(v,O,te,de){za.call(this,v,O),this.type="rect";var ye=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(je){isNaN(je)||(ye=parseFloat(je))}});var Pe=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pe},set:function(je){isNaN(je)||(Pe=parseFloat(je))}}),this},So=function(){this.page=Ye,this.currentPage=W,this.pages=he.slice(0),this.pagesContext=Je.slice(0),this.x=mt,this.y=tr,this.matrix=Jt,this.width=Hs(W),this.height=Vs(W),this.outputDestination=Ne,this.id="",this.objectNumber=-1};So.prototype.restore=function(){Ye=this.page,W=this.currentPage,Je=this.pagesContext,he=this.pages,mt=this.x,tr=this.y,Jt=this.matrix,_A(W,this.width),_s(W,this.height),Ne=this.outputDestination};var $a=function(v,O,te,de,ye){en.push(new So),Ye=W=0,he=[],mt=v,tr=O,Jt=ye,yi([te,de])};for(var Wa in p.beginFormObject=function(v,O,te,de,ye){return $a(v,O,te,de,ye),this},p.endFormObject=function(v){return function(O){if(vr[O])en.pop().restore();else{var te=new So,de="Xo"+(Object.keys($t).length+1).toString(10);te.id=de,vr[O]=de,$t[de]=te,at.publish("addFormObject",te),en.pop().restore()}}(v),this},p.doFormObject=function(v,O){var te=$t[vr[v]];return se("q"),se(O.toString()+" cm"),se("/"+te.id+" Do"),se("Q"),this},p.getFormObject=function(v){var O=$t[vr[v]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},p.save=function(v,O){return v=v||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(dc(Va(da()),v),typeof dc.unload=="function"&&Ht.setTimeout&&setTimeout(dc.unload,911),this):new Promise(function(te,de){try{var ye=dc(Va(da()),v);typeof dc.unload=="function"&&Ht.setTimeout&&setTimeout(dc.unload,911),te(ye)}catch(Pe){de(Pe.message)}})},Nt.API)Nt.API.hasOwnProperty(Wa)&&(Wa==="events"&&Nt.API.events.length?function(v,O){var te,de,ye;for(ye=O.length-1;ye!==-1;ye--)te=O[ye][0],de=O[ye][1],v.subscribe.apply(v,[te].concat(typeof de=="function"?[de]:de))}(at,Nt.API.events):p[Wa]=Nt.API[Wa]);var Hs=p.getPageWidth=function(v){return(Je[v=v||W].mediaBox.topRightX-Je[v].mediaBox.bottomLeftX)/Qt},_A=p.setPageWidth=function(v,O){Je[v].mediaBox.topRightX=O*Qt+Je[v].mediaBox.bottomLeftX},Vs=p.getPageHeight=function(v){return(Je[v=v||W].mediaBox.topRightY-Je[v].mediaBox.bottomLeftY)/Qt},_s=p.setPageHeight=function(v,O){Je[v].mediaBox.topRightY=O*Qt+Je[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:ts,getStyle:_o,getFont:Gi,getFontSize:Te,getCharSpace:Jl,getTextColor:qi,getLineHeight:Jd,getLineHeightFactor:eh,getLineWidth:jt,write:wt,getHorizontalCoordinate:rs,getVerticalCoordinate:ha,getCoordinateString:th,getVerticalCoordinateString:bA,collections:{},newObject:Or,newAdditionalObject:ot,newObjectDeferred:ve,newObjectDeferredBegin:He,getFilters:es,putStream:Cn,events:at,scaleFactor:Qt,pageSize:{getWidth:function(){return Hs(W)},setWidth:function(v){_A(W,v)},getHeight:function(){return Vs(W)},setHeight:function(v){_s(W,v)}},encryptionOptions:u,encryption:Cr,getEncryptor:function(v){return u!==null?Cr.encryptor(v,0):function(O){return O}},output:ti,getNumberOfPages:ql,pages:he,out:se,f2:F,f3:E,getPageInfo:Ms,getPageInfoByObjId:vA,getCurrentPageInfo:yA,getPDFVersion:C,Point:za,Rectangle:CA,Matrix:Ct,hasHotfix:Co},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Hs(W)},set:function(v){_A(W,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Vs(W)},set:function(v){_s(W,v)},enumerable:!0,configurable:!0}),(function(v){for(var O=0,te=et.length;O<te;O++){var de=gA.call(this,v[O][0],v[O][1],v[O][2],et[O][3],!0);f===!1&&(g[de]=!0);var ye=v[O][0].split("-");Vl({id:de,fontName:ye[0],fontStyle:ye[1]||""})}at.publish("addFonts",{fonts:ht,dictionary:Pt})}).call(p,et),At="F1",wA(s,r),at.publish("initialized"),p}Mu.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Mu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Mu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Mu.prototype.processOwnerPassword=function(t,e){return lB(AB(e).substr(0,5),t)},Mu.prototype.encryptor=function(t,e){var r=AB(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return lB(r,n)}},mp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Fr(t)!==Fr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Nt.API={events:[]},Nt.version="3.0.2";var Bn=Nt.API,Fx=1,iu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gt=function(t){return t.toFixed(2)},MA=function(t){return t.toFixed(5)};Bn.__acroform__={};var wi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},BN=function(t){return t*Fx},io=function(t){var e=new lL,r=yt.internal.getHeight(t)||0,n=yt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Gt(n)),Number(Gt(r))],e},nY=Bn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},sY=Bn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},iY=Bn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Pn=Bn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return iY(t,e-1)},kn=Bn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return nY(t,e-1)},Rn=Bn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sY(t,e-1)},aY=Bn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],A={};return A.lowerLeft_X=r(s)||0,A.lowerLeft_Y=n(i+o)||0,A.upperRight_X=r(s+a)||0,A.upperRight_Y=n(i)||0,[Number(Gt(A.lowerLeft_X)),Number(Gt(A.lowerLeft_Y)),Number(Gt(A.upperRight_X)),Number(Gt(A.upperRight_Y))]},oY=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=cB(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Gt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=io(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},cB=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(F){return F.split(`
`)}):s.map(function(F){return[F]});var i=r,a=yt.internal.getHeight(t)||0;a=a<0?-a:a;var o=yt.internal.getWidth(t)||0;o=o<0?-o:o;var A=function(F,E,U){if(F+1<s.length){var K=E+" "+s[F+1][0];return og(K,t,U).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,f=og("3",t,i).height,g=t.multiline?a-i:(a-f)/2,p=g+=2,y=0,C=0,B=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+og(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var w="",b=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var T=!1;if(s[N].length!==1&&B!==s[N].length-1){if((f+2)*(b+2)+2>a)continue e;w+=s[N][B],T=!0,C=N,N--}else{w=(w+=s[N][B]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var V=parseInt(N),j=A(V,w,i),L=N>=s.length-1;if(j&&!L){w+=" ",B=0;continue}if(j||L){if(L)C=V;else if(t.multiline&&(f+2)*(b+2)+2>a)continue e}else{if(!t.multiline||(f+2)*(b+2)+2>a)continue e;C=V}}for(var S="",I=y;I<=C;I++){var R=s[I];if(t.multiline){if(I===C){S+=R[B]+" ",B=(B+1)%R.length;continue}if(I===y){S+=R[R.length-1]+" ";continue}}S+=R[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,u=og(S,t,i).width,t.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}e+=Gt(c)+" "+Gt(p)+` Td
`,e+="("+iu(S)+`) Tj
`,e+=-Gt(c)+` 0 Td
`,p=-(i+2),u=0,y=T?C:C+1,b++,w=""}break}return n.text=e,n.fontSize=i,n},og=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},AY={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lY=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},cY=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ra.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(AY)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Fx=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new cL,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&lY(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],A=[],c=o.Rect;if(o.Rect&&(o.Rect=aY(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=yt.createDefaultAppearanceStream(o),Fr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=oY(o);A.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var f="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var p=o.appearanceStreamContent[g];if(f+="/"+g+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var y=p[a];typeof y=="function"&&(y=y.call(s,o)),f+="/"+a+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(s,o)),f+="/"+a+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);f+=">>"}A.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:A,objectId:o.objId}),s.internal.out("endobj")}i&&function(C,B){for(var w in C)if(C.hasOwnProperty(w)){var b=w,N=C[w];B.internal.newObjectDeferredBegin(N.objId,!0),Fr(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete C[b]}}(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},AL=Bn.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Fr(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+iu(n(t[i].toString()))+")"):s+=t[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Xy=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+iu(n(t))+")"},uo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};uo.prototype.toString=function(){return this.objId+" 0 R"},uo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},uo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:AL(s,this.objId,this.scope)}):s instanceof uo?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var lL=function(){uo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};wi(lL,uo);var cL=function(){uo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+iu(r(t))+")"}},set:function(r){t=r}})};wi(cL,uo);var Ra=function t(){uo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pn(e,3)},set:function(w){w?this.F=kn(e,3):this.F=Rn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof J0)return;i="FieldObject"+t.FieldNum++}var w=function(b){return b};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+iu(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(w){A=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Fx:c},set:function(w){c=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof J0||this instanceof Cl))return Xy(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Wn==0?Xy(g,this.objId,this.scope):g},set:function(w){w=w.toString(),g=this instanceof Wn==0?w.substr(0,1)==="("?Nu(w.substr(1,w.length-2)):Nu(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn==1?Nu(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof Wn==1?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Wn==0?Xy(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof Wn==0?w.substr(0,1)==="("?Nu(w.substr(1,w.length-2)):Nu(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn==1?Nu(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Wn==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(w){w=!!w,C=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(w){y=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,1)},set:function(w){w?this.Ff=kn(this.Ff,1):this.Ff=Rn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,2)},set:function(w){w?this.Ff=kn(this.Ff,2):this.Ff=Rn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,3)},set:function(w){w?this.Ff=kn(this.Ff,3):this.Ff=Rn(this.Ff,3)}});var B=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(B!==null)return B},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');B=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(B){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:B=2;break;case"center":case 1:B=1;break;default:B=0}}})};wi(Ra,uo);var Sc=function(){Ra.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return AL(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var A,c=[];A=a.exec(i);)c.push(A[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,18)},set:function(r){r?this.Ff=kn(this.Ff,18):this.Ff=Rn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=kn(this.Ff,19):this.Ff=Rn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,20)},set:function(r){r?(this.Ff=kn(this.Ff,20),e.sort()):this.Ff=Rn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,22)},set:function(r){r?this.Ff=kn(this.Ff,22):this.Ff=Rn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(r){r?this.Ff=kn(this.Ff,23):this.Ff=Rn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,27)},set:function(r){r?this.Ff=kn(this.Ff,27):this.Ff=Rn(this.Ff,27)}}),this.hasAppearanceStream=!1};wi(Sc,Ra);var Fc=function(){Sc.call(this),this.fontName="helvetica",this.combo=!1};wi(Fc,Sc);var Tc=function(){Fc.call(this),this.combo=!0};wi(Tc,Fc);var Ef=function(){Tc.call(this),this.edit=!0};wi(Ef,Tc);var Wn=function(){Ra.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,15)},set:function(r){r?this.Ff=kn(this.Ff,15):this.Ff=Rn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,16)},set:function(r){r?this.Ff=kn(this.Ff,16):this.Ff=Rn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,17)},set:function(r){r?this.Ff=kn(this.Ff,17):this.Ff=Rn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(r){r?this.Ff=kn(this.Ff,26):this.Ff=Rn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+iu(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Fr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};wi(Wn,Ra);var If=function(){Wn.call(this),this.pushButton=!0};wi(If,Wn);var Uc=function(){Wn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};wi(Uc,Wn);var J0=function(){var t,e;Ra.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+iu(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Fr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};wi(J0,Ra),Uc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Uc.prototype.createOption=function(t){var e=new J0;return e.Parent=this,e.optionName=t,this.Kids.push(e),uY.call(this.scope,e),e};var Nf=function(){Wn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};wi(Nf,Wn);var Cl=function(){Ra.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,13)},set:function(e){e?this.Ff=kn(this.Ff,13):this.Ff=Rn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,21)},set:function(e){e?this.Ff=kn(this.Ff,21):this.Ff=Rn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(e){e?this.Ff=kn(this.Ff,23):this.Ff=Rn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,24)},set:function(e){e?this.Ff=kn(this.Ff,24):this.Ff=Rn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,25)},set:function(e){e?this.Ff=kn(this.Ff,25):this.Ff=Rn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(e){e?this.Ff=kn(this.Ff,26):this.Ff=Rn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};wi(Cl,Ra);var Sf=function(){Cl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,14)},set:function(t){t?this.Ff=kn(this.Ff,14):this.Ff=Rn(this.Ff,14)}}),this.password=!0};wi(Sf,Cl);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=io(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=cB(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Gt(yt.internal.getWidth(t))+" "+Gt(yt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Gt(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=io(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=yt.internal.getHeight(t),a=yt.internal.getWidth(t),o=cB(t,t.caption);return s.push("1 g"),s.push("0 0 "+Gt(a)+" "+Gt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Gt(a-1)+" "+Gt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Gt(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=io(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Gt(yt.internal.getWidth(t))+" "+Gt(yt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=yt.RadioButton.Circle.YesNormal,e.D[t]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=io(t);e.scope=t.scope;var r=[],n=yt.internal.getWidth(t)<=yt.internal.getHeight(t)?yt.internal.getWidth(t)/4:yt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=yt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+MA(yt.internal.getWidth(t)/2)+" "+MA(yt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=io(t);e.scope=t.scope;var r=[],n=yt.internal.getWidth(t)<=yt.internal.getHeight(t)?yt.internal.getWidth(t)/4:yt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*yt.internal.Bezier_C).toFixed(5)),a=Number((n*yt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+MA(yt.internal.getWidth(t)/2)+" "+MA(yt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+MA(yt.internal.getWidth(t)/2)+" "+MA(yt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=io(t);e.scope=t.scope;var r=[],n=yt.internal.getWidth(t)<=yt.internal.getHeight(t)?yt.internal.getWidth(t)/4:yt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*yt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+MA(yt.internal.getWidth(t)/2)+" "+MA(yt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=yt.RadioButton.Cross.YesNormal,e.D[t]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=io(t);e.scope=t.scope;var r=[],n=yt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Gt(yt.internal.getWidth(t)-2)+" "+Gt(yt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Gt(n.x1.x)+" "+Gt(n.x1.y)+" m"),r.push(Gt(n.x2.x)+" "+Gt(n.x2.y)+" l"),r.push(Gt(n.x4.x)+" "+Gt(n.x4.y)+" m"),r.push(Gt(n.x3.x)+" "+Gt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=io(t);e.scope=t.scope;var r=yt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(yt.internal.getWidth(t))+" "+Gt(yt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Gt(yt.internal.getWidth(t)-2)+" "+Gt(yt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Gt(r.x1.x)+" "+Gt(r.x1.y)+" m"),n.push(Gt(r.x2.x)+" "+Gt(r.x2.y)+" l"),n.push(Gt(r.x4.x)+" "+Gt(r.x4.y)+" m"),n.push(Gt(r.x3.x)+" "+Gt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=io(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Gt(yt.internal.getWidth(t))+" "+Gt(yt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};yt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=yt.internal.getWidth(t),r=yt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},yt.internal.getWidth=function(t){var e=0;return Fr(t)==="object"&&(e=BN(t.Rect[2])),e},yt.internal.getHeight=function(t){var e=0;return Fr(t)==="object"&&(e=BN(t.Rect[3])),e};var uY=Bn.addField=function(t){if(cY(this,t),!(t instanceof Ra))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Bn.AcroFormChoiceField=Sc,Bn.AcroFormListBox=Fc,Bn.AcroFormComboBox=Tc,Bn.AcroFormEditBox=Ef,Bn.AcroFormButton=Wn,Bn.AcroFormPushButton=If,Bn.AcroFormRadioButton=Uc,Bn.AcroFormCheckBox=Nf,Bn.AcroFormTextField=Cl,Bn.AcroFormPasswordField=Sf,Bn.AcroFormAppearance=yt,Bn.AcroForm={ChoiceField:Sc,ListBox:Fc,ComboBox:Tc,EditBox:Ef,Button:Wn,PushButton:If,RadioButton:Uc,CheckBox:Nf,TextField:Cl,PasswordField:Sf,Appearance:yt},Nt.AcroForm={ChoiceField:Sc,ListBox:Fc,ComboBox:Tc,EditBox:Ef,Button:Wn,PushButton:If,RadioButton:Uc,CheckBox:Nf,TextField:Cl,PasswordField:Sf,Appearance:yt};var dY=Nt.AcroForm;function uL(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(F,E){var U,K,ae,le,ie,q=r;if((E=E||r)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(j(F))for(ie in n)for(ae=n[ie],U=0;U<ae.length;U+=1){for(le=!0,K=0;K<ae[U].length;K+=1)if(ae[U][K]!==void 0&&ae[U][K]!==F[K]){le=!1;break}if(le===!0){q=ie;break}}else for(ie in n)for(ae=n[ie],U=0;U<ae.length;U+=1){for(le=!0,K=0;K<ae[U].length;K+=1)if(ae[U][K]!==void 0&&ae[U][K]!==F.charCodeAt(K)){le=!1;break}if(le===!0){q=ie;break}}return q===r&&E!==r&&(q=E),q},i=function F(E){for(var U=this.internal.write,K=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:E.width}),le.push({key:"Height",value:E.height}),E.colorSpace===w.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===w.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var ie="",q=0,Y=E.transparency.length;q<Y;q++)ie+=E.transparency[q]+" "+E.transparency[q]+" ";le.push({key:"Mask",value:"["+ie+"]"})}E.sMask!==void 0&&le.push({key:"SMask",value:E.objectId+1+" 0 R"});var ue=E.filter!==void 0?["/"+E.filter]:void 0;if(K({data:E.data,additionalKeyValues:le,alreadyAppliedFilters:ue,objectId:E.objectId}),U("endobj"),"sMask"in E&&E.sMask!==void 0){var pe=(E.predictor!=null?"/Predictor "+E.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+E.width,D={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:pe,data:E.sMask};"filter"in E&&(D.filter=E.filter),F.call(this,D)}if(E.colorSpace===w.INDEXED){var W=this.internal.newObject();K({data:S(new Uint8Array(E.palette)),objectId:W}),U("endobj")}},a=function(){var F=this.internal.collections[e+"images"];for(var E in F)i.call(this,F[E])},o=function(){var F,E=this.internal.collections[e+"images"],U=this.internal.write;for(var K in E)U("/I"+(F=E[K]).index,F.objectId,"0","R")},A=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var F=this.internal.collections[e+"images"];return A.call(this),F},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(F){return typeof t["process"+F.toUpperCase()]=="function"},g=function(F){return Fr(F)==="object"&&F.nodeType===1},p=function(F,E){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var U=""+F.getAttribute("src");if(U.indexOf("data:image/")===0)return $g(unescape(U).split("base64,").pop());var K=t.loadFile(U,!0);if(K!==void 0)return K}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var ae;switch(E){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return $g(F.toDataURL(ae,1).split("base64,").pop())}},y=function(F){var E=this.internal.collections[e+"images"];if(E){for(var U in E)if(F===E[U].alias)return E[U]}},C=function(F,E,U){return F||E||(F=-96,E=-96),F<0&&(F=-1*U.width*72/F/this.internal.scaleFactor),E<0&&(E=-1*U.height*72/E/this.internal.scaleFactor),F===0&&(F=E*U.width/U.height),E===0&&(E=F*U.height/U.width),[F,E]},B=function(F,E,U,K,ae,le){var ie=C.call(this,U,K,ae),q=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,ue=c.call(this);if(U=ie[0],K=ie[1],ue[ae.index]=ae,le){le*=Math.PI/180;var pe=Math.cos(le),D=Math.sin(le),W=function(M){return M.toFixed(4)},ee=[W(pe),W(D),W(-1*D),W(pe),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,q(F),Y(E+K),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([q(U),"0","0",q(K),"0","0","cm"].join(" "))):this.internal.write([q(U),"0","0",q(K),q(F),Y(E+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(F){var E,U,K=0;if(typeof F=="string")for(U=F.length,E=0;E<U;E++)K=(K<<5)-K+F.charCodeAt(E),K|=0;else if(j(F))for(U=F.byteLength/2,E=0;E<U;E++)K=(K<<5)-K+F[E],K|=0;return K},T=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var E=!0;return F.length===0&&(E=!1),F.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(E=!1),E},V=t.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var E=F.indexOf(",");return E<0?null:F.substring(0,E).trim().endsWith("base64")?F.substring(E+1):null};t.__addimage__.isArrayBuffer=function(F){return F instanceof ArrayBuffer};var j=t.__addimage__.isArrayBufferView=function(F){return F instanceof Int8Array||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array},L=t.__addimage__.binaryStringToUint8Array=function(F){for(var E=F.length,U=new Uint8Array(E),K=0;K<E;K++)U[K]=F.charCodeAt(K);return U},S=t.__addimage__.arrayBufferToBinaryString=function(F){for(var E="",U=j(F)?F:new Uint8Array(F),K=0;K<U.length;K+=8192)E+=String.fromCharCode.apply(null,U.subarray(K,K+8192));return E};t.addImage=function(){var F,E,U,K,ae,le,ie,q,Y;if(typeof arguments[1]=="number"?(E=r,U=arguments[1],K=arguments[2],ae=arguments[3],le=arguments[4],ie=arguments[5],q=arguments[6],Y=arguments[7]):(E=arguments[1],U=arguments[2],K=arguments[3],ae=arguments[4],le=arguments[5],ie=arguments[6],q=arguments[7],Y=arguments[8]),Fr(F=arguments[0])==="object"&&!g(F)&&"imageData"in F){var ue=F;F=ue.imageData,E=ue.format||E||r,U=ue.x||U||0,K=ue.y||K||0,ae=ue.w||ue.width||ae,le=ue.h||ue.height||le,ie=ue.alias||ie,q=ue.compression||q,Y=ue.rotation||ue.angle||Y}var pe=this.internal.getFilters();if(q===void 0&&pe.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(U)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var D=I.call(this,F,E,ie,q);return B.call(this,U,K,ae,le,D,Y),this};var I=function(F,E,U,K){var ae,le,ie;if(typeof F=="string"&&s(F)===r){F=unescape(F);var q=R(F,!1);(q!==""||(q=t.loadFile(F,!0))!==void 0)&&(F=q)}if(g(F)&&(F=p(F,E)),E=s(F,E),!f(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((ie=U)==null||ie.length===0)&&(U=function(Y){return typeof Y=="string"||j(Y)?N(Y):j(Y.data)?N(Y.data):null}(F)),(ae=y.call(this,U))||(F instanceof Uint8Array||E==="RGBA"||(le=F,F=L(F)),ae=this["process"+E.toUpperCase()](F,u.call(this),U,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:b.NONE}(K),le)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},R=t.__addimage__.convertBase64ToBinaryString=function(F,E){E=typeof E!="boolean"||E;var U,K="";if(typeof F=="string"){var ae;U=(ae=V(F))!==null&&ae!==void 0?ae:F;try{K=$g(U)}catch(le){if(E)throw T(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};t.getImageProperties=function(F){var E,U,K="";if(g(F)&&(F=p(F)),typeof F=="string"&&s(F)===r&&((K=R(F,!1))===""&&(K=t.loadFile(F)||""),F=K),U=s(F),!f(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(F instanceof Uint8Array||(F=L(F)),!(E=this["process"+U.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=U,E}})(Nt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Nt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,f=0;f<c.length&&!u;f++)switch((n=c[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){n=c[g];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),B=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(C.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(w(n.contents))+")",i+=" /Popup "+B.objId+" 0 R",i+=" /P "+A.objId+" 0 R",i+=" /T ("+p(w(b))+") >>",C.content=i;var N=C.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",B.content=i,this.internal.write(C.objId,"0 R",B.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var T=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var V=this.annotations._nameMap[n.options.name];n.options.pageNumber=V.page,n.options.top=V.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var j=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+j+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(r),y:c(n),w:A(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,A=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;a=Math.ceil(c*u)}else o=A,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=A/2),i.align==="right"&&(n-=A),this.link(n,s-c,o,a,i),A},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Nt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},o=t.__arabicParser__.isArabicEndLetter=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(C){return a(C)&&s.indexOf(C.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(C){var B=0,w=r,b="",N=0;for(B=0;B<C.length;B+=1)w[C.charCodeAt(B)]!==void 0?(N++,typeof(w=w[C.charCodeAt(B)])=="number"&&(b+=String.fromCharCode(w),w=r,N=0),B===C.length-1&&(w=r,b+=C.charAt(B-(N-1)),B-=N-1,N=0)):(w=r,b+=C.charAt(B-N),B-=N,N=0);return b};t.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&n[C.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(C,B,w){return a(C)?i(C)===!1?-1:!c(C)||!a(B)&&!a(w)||!a(w)&&o(B)||o(C)&&!a(B)||o(C)&&A(B)||o(C)&&o(B)?0:u(C)&&a(B)&&!o(B)&&a(w)&&c(w)?3:o(C)||!a(w)?1:2:-1},p=function(C){var B=0,w=0,b=0,N="",T="",V="",j=(C=C||"").split("\\s+"),L=[];for(B=0;B<j.length;B+=1){for(L.push(""),w=0;w<j[B].length;w+=1)N=j[B][w],T=j[B][w-1],V=j[B][w+1],a(N)?(b=g(N,T,V),L[B]+=b!==-1?String.fromCharCode(e[N.charCodeAt(0)][b]):N):L[B]+=N;L[B]=f(L[B])}return L.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var C,B=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(B)){var b=0;for(w=[],b=0;b<B.length;b+=1)Array.isArray(B[b])?w.push([p(B[b][0]),B[b][1],B[b][2]]):w.push([p(B[b])]);C=w}else C=p(B);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};t.events.push(["preProcessText",y])}(Nt.API),Nt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Nt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(C){A=C}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(C){c=C}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(C){u=C}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(C){f=C}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(C){g=C}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(C){y=C}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,p=0,y=0,C=0,B=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var w=c.maxWidth;w>0?typeof A=="string"?A=this.splitTextToSize(A,w):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(N,T){return N.concat(B.splitTextToSize(T,w))},[])):A=Array.isArray(A)?A:[A];for(var b=0;b<A.length;b++)p<(C=this.getStringUnitWidth(A[b],{font:f})*u)&&(p=C);return p!==0&&(y=A.length),{w:p/=g,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var A;A=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===A.lineNumber?(A.x=(c.x||0)+(c.width||0),A.y=c.y||0):c.y+c.height+A.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=f.top,p&&g&&(this.printHeaderRow(A.lineNumber,!0),A.y+=g[0].height)):A.y=c.y+c.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,r===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-u,A.y+u,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+u,{align:"center",baseline:"top",maxWidth:A.width-u-u}):this.text(A.text,A.x+u,A.y+u,{align:"left",baseline:"top",maxWidth:A.width-u-u})),this.internal.__cell__.lastCell=A,this};t.table=function(A,c,u,f,g){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,y,C,B,w=[],b=[],N=[],T={},V={},j=[],L=[],S=(g=g||{}).autoSize||!1,I=g.printHeaders!==!1,R=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,F=g.margins||Object.assign({width:this.getPageWidth()},e),E=typeof g.padding=="number"?g.padding:3,U=g.headerBackgroundColor||"#c8c8c8",K=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=K,this.setFontSize(R),f==null)b=w=Object.keys(u[0]),N=w.map(function(){return"left"});else if(Array.isArray(f)&&Fr(f[0])==="object")for(w=f.map(function(ue){return ue.name}),b=f.map(function(ue){return ue.prompt||ue.name||""}),N=f.map(function(ue){return ue.align||"left"}),p=0;p<f.length;p+=1)V[f[p].name]=.7499990551181103*f[p].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=w=f,N=w.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<w.length;p+=1){for(T[B=w[p]]=u.map(function(ue){return ue[B]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=T[B],this.setFont(void 0,"normal"),C=0;C<y.length;C+=1)j.push(this.getTextDimensions(y[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[B]=Math.max.apply(null,j)+E+E,j=[]}if(I){var ae={};for(p=0;p<w.length;p+=1)ae[w[p]]={},ae[w[p]].text=b[p],ae[w[p]].align=N[p];var le=o.call(this,ae,V);L=w.map(function(ue){return new i(A,c,V[ue],le,ae[ue].text,void 0,ae[ue].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var ie=f.reduce(function(ue,pe){return ue[pe.name]=pe.align,ue},{});for(p=0;p<u.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:u[p]},this);var q=o.call(this,u[p],V);for(C=0;C<w.length;C+=1){var Y=u[p][w[C]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:C,data:Y},this),a.call(this,new i(A,c,V[w[C]],q,Y,p+2,ie[w[C]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=c,this};var o=function(A,c){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(A).map(function(p){var y=A[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/g+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};t.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,g.push(u)),u.lineNumber=A;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(y)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}}(Nt.API);var dL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uB=uL(hL),fL=[100,200,300,400,500,600,700,800,900],hY=uL(fL);function Yy(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return dL[i=i||"normal"]?i:"normal"}(t.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),s=function(i){return typeof uB[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function bN(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var fY={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function CN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function _N(t){return t.trimLeft()}function pY(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function mY(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ag,EN,IN,Su,lg,NN,SN,FN,Jy=["times"];function TN(t,e,r,n){var s=4,i=QN;switch(n){case Nt.API.image_compression.FAST:s=1,i=UN;break;case Nt.API.image_compression.MEDIUM:s=6,i=LN;break;case Nt.API.image_compression.SLOW:s=9,i=PN}t=function(o,A,c,u){for(var f,g=o.length/A,p=new Uint8Array(o.length+g),y=[gY,UN,QN,LN,PN],C=0;C<g;C+=1){var B=C*A,w=o.subarray(B,B+A);if(u)p.set(u(w,c,f),B+C);else{for(var b=y.length,N=[],T=0;T<b;T+=1)N[T]=y[T](w,c,f);var V=vY(N.concat());p.set(N[V],B+C)}f=w}return p}(t,e,r,i);var a=sB(t,{level:s});return Nt.API.__addimage__.arrayBufferToBinaryString(a)}function gY(t){var e=Array.apply([],t);return e.unshift(0),e}function UN(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var i=t[s-e]||0;n[s+1]=t[s]-i+256&255}return n}function QN(t,e,r){var n=t.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var a=r&&r[i]||0;s[i+1]=t[i]-a+256&255}return s}function LN(t,e,r){var n=t.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var a=t[i-e]||0,o=r&&r[i]||0;s[i+1]=t[i]+256-(a+o>>>1)&255}return s}function PN(t,e,r){var n=t.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var a=wY(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);s[i+1]=t[i]-a+256&255}return s}function wY(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=s&&n<=i?t:s<=i?e:r}function vY(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function Zy(t,e,r){var n=e*r,s=Math.floor(n/8),i=16-(n-8*s+r),a=(1<<r)-1;return pL(t,s)>>i&a}function kN(t,e,r,n){var s=r*n,i=Math.floor(s/8),a=16-(s-8*i+n),o=(1<<n)-1,A=(e&o)<<a;(function(c,u,f){if(u+1<c.byteLength)c.setUint16(u,f,!1);else{var g=f>>8&255;c.setUint8(u,g)}})(t,i,pL(t,i)&~(o<<a)&65535|A)}function pL(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function yY(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<1+(7&s);t[e++],t[e++];var o=null,A=null;i&&(o=e,A=a,e+=3*a);var c=!0,u=[],f=0,g=null,p=0,y=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=t[e++];f=t[e++]|t[e++]<<8,g=t[e++],1&C||(g=null),p=C>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var B=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,T=t[e++],V=T>>6&1,j=1<<1+(7&T),L=o,S=A,I=!1;T>>7&&(I=!0,L=e,S=j,e+=3*j);var R=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}u.push({x:B,y:w,width:b,height:N,has_local_palette:I,palette_offset:L,palette_size:S,data_offset:R,data_length:e-R,transparent_index:g,interlaced:!!V,delay:f,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,U){var K=this.frameInfo(E),ae=K.width*K.height,le=new Uint8Array(ae);RN(t,K.data_offset,le,ae);var ie=K.palette_offset,q=K.transparent_index;q===null&&(q=256);var Y=K.width,ue=r-Y,pe=Y,D=4*(K.y*r+K.x),W=4*((K.y+K.height)*r+K.x),ee=D,M=4*ue;K.interlaced===!0&&(M+=4*r*7);for(var Z=8,Ae=0,oe=le.length;Ae<oe;++Ae){var ce=le[Ae];if(pe===0&&(pe=Y,(ee+=M)>=W&&(M=4*ue+4*r*(Z-1),ee=D+(Y+ue)*(Z<<1),Z>>=1)),ce===q)ee+=4;else{var we=t[ie+3*ce],he=t[ie+3*ce+1],fe=t[ie+3*ce+2];U[ee++]=fe,U[ee++]=he,U[ee++]=we,U[ee++]=255}--pe}},this.decodeAndBlitFrameRGBA=function(E,U){var K=this.frameInfo(E),ae=K.width*K.height,le=new Uint8Array(ae);RN(t,K.data_offset,le,ae);var ie=K.palette_offset,q=K.transparent_index;q===null&&(q=256);var Y=K.width,ue=r-Y,pe=Y,D=4*(K.y*r+K.x),W=4*((K.y+K.height)*r+K.x),ee=D,M=4*ue;K.interlaced===!0&&(M+=4*r*7);for(var Z=8,Ae=0,oe=le.length;Ae<oe;++Ae){var ce=le[Ae];if(pe===0&&(pe=Y,(ee+=M)>=W&&(M=4*ue+4*r*(Z-1),ee=D+(Y+ue)*(Z<<1),Z>>=1)),ce===q)ee+=4;else{var we=t[ie+3*ce],he=t[ie+3*ce+1],fe=t[ie+3*ce+2];U[ee++]=we,U[ee++]=he,U[ee++]=fe,U[ee++]=255}--pe}}}function RN(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,A=s+1,c=(1<<A)-1,u=0,f=0,g=0,p=t[e++],y=new Int32Array(4096),C=null;;){for(;u<16&&p!==0;)f|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<A)break;var B=f&c;if(f>>=A,u-=A,B!==i){if(B===a)break;for(var w=B<o?B:C,b=0,N=w;N>i;)N=y[N]>>8,++b;var T=N;if(g+b+(w!==B?1:0)>n)return void jr.log("Warning, gif stream longer than expected.");r[g++]=T;var V=g+=b;for(w!==B&&(r[g++]=T),N=w;b--;)N=y[N],r[--V]=255&N,N>>=8;C!==null&&o<4096&&(y[o++]=C<<8|T,o>=c+1&&A<12&&(++A,c=c<<1|1)),C=B}else o=a+1,c=(1<<(A=s+1))-1,C=null}return g!==n&&jr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function e1(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),A=new Array(64),c=new Array(64),u=new Array(64),f=new Array(65535),g=new Array(65535),p=new Array(64),y=new Array(64),C=[],B=0,w=7,b=new Array(64),N=new Array(64),T=new Array(64),V=new Array(256),j=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(D,W){for(var ee=0,M=0,Z=new Array,Ae=1;Ae<=16;Ae++){for(var oe=1;oe<=D[Ae];oe++)Z[W[M]]=[],Z[W[M]][0]=ee,Z[W[M]][1]=Ae,M++,ee++;ee*=2}return Z}function ie(D){for(var W=D[0],ee=D[1]-1;ee>=0;)W&1<<ee&&(B|=1<<w),ee--,--w<0&&(B==255?(q(255),q(0)):q(B),w=7,B=0)}function q(D){C.push(D)}function Y(D){q(D>>8&255),q(255&D)}function ue(D,W,ee,M,Z){for(var Ae,oe=Z[0],ce=Z[240],we=function(De,Be){var Te,We,Me,nt,ct,ze,Lt,pt,At,Qt,mt=0;for(At=0;At<8;++At){Te=De[mt],We=De[mt+1],Me=De[mt+2],nt=De[mt+3],ct=De[mt+4],ze=De[mt+5],Lt=De[mt+6];var tr=Te+(pt=De[mt+7]),Jt=Te-pt,ht=We+Lt,Pt=We-Lt,hr=Me+ze,Ft=Me-ze,Se=nt+ct,Ge=nt-ct,st=tr+Se,Xe=tr-Se,Ye=ht+hr,Je=ht-hr;De[mt]=st+Ye,De[mt+4]=st-Ye;var at=.707106781*(Je+Xe);De[mt+2]=Xe+at,De[mt+6]=Xe-at;var rr=.382683433*((st=Ge+Ft)-(Je=Pt+Jt)),$t=.5411961*st+rr,vr=1.306562965*Je+rr,en=.707106781*(Ye=Ft+Pt),Ct=Jt+en,Rr=Jt-en;De[mt+5]=Rr+$t,De[mt+3]=Rr-$t,De[mt+1]=Ct+vr,De[mt+7]=Ct-vr,mt+=8}for(mt=0,At=0;At<8;++At){Te=De[mt],We=De[mt+8],Me=De[mt+16],nt=De[mt+24],ct=De[mt+32],ze=De[mt+40],Lt=De[mt+48];var Os=Te+(pt=De[mt+56]),jn=Te-pt,On=We+Lt,Or=We-Lt,ve=Me+ze,He=Me-ze,ot=nt+ct,Zt=nt-ct,Wt=Os+ot,_t=Os-ot,bt=On+ve,es=On-ve;De[mt]=Wt+bt,De[mt+32]=Wt-bt;var Cn=.707106781*(es+_t);De[mt+16]=_t+Cn,De[mt+48]=_t-Cn;var ja=.382683433*((Wt=Zt+He)-(es=Or+jn)),vi=.5411961*Wt+ja,ua=1.306562965*es+ja,Oa=.707106781*(bt=He+Or),bo=jn+Oa,xo=jn-Oa;De[mt+40]=xo+vi,De[mt+24]=xo-vi,De[mt+8]=bo+ua,De[mt+56]=bo-ua,mt++}for(At=0;At<64;++At)Qt=De[At]*Be[At],p[At]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(D,W),he=0;he<64;++he)y[L[he]]=we[he];var fe=y[0]-ee;ee=y[0],fe==0?ie(M[0]):(ie(M[g[Ae=32767+fe]]),ie(f[Ae]));for(var Ne=63;Ne>0&&y[Ne]==0;)Ne--;if(Ne==0)return ie(oe),ee;for(var Ce,se=1;se<=Ne;){for(var wt=se;y[se]==0&&se<=Ne;)++se;var it=se-wt;if(it>=16){Ce=it>>4;for(var et=1;et<=Ce;++et)ie(ce);it&=15}Ae=32767+y[se],ie(Z[(it<<4)+g[Ae]]),ie(f[Ae]),se++}return Ne!=63&&ie(oe),ee}function pe(D){D=Math.min(Math.max(D,1),100),i!=D&&(function(W){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],M=0;M<64;M++){var Z=a((ee[M]*W+50)/100);Z=Math.min(Math.max(Z,1),255),o[L[M]]=Z}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=a((Ae[oe]*W+50)/100);ce=Math.min(Math.max(ce,1),255),A[L[oe]]=ce}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],he=0,fe=0;fe<8;fe++)for(var Ne=0;Ne<8;Ne++)c[he]=1/(o[L[he]]*we[fe]*we[Ne]*8),u[he]=1/(A[L[he]]*we[fe]*we[Ne]*8),he++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),i=D)}this.encode=function(D,W){W&&pe(W),C=new Array,B=0,w=7,Y(65496),Y(65504),Y(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),Y(1),Y(1),q(0),q(0),function(){Y(65499),Y(132),q(0);for(var We=0;We<64;We++)q(o[We]);q(1);for(var Me=0;Me<64;Me++)q(A[Me])}(),function(We,Me){Y(65472),Y(17),q(8),Y(Me),Y(We),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(D.width,D.height),function(){Y(65476),Y(418),q(0);for(var We=0;We<16;We++)q(S[We+1]);for(var Me=0;Me<=11;Me++)q(I[Me]);q(16);for(var nt=0;nt<16;nt++)q(R[nt+1]);for(var ct=0;ct<=161;ct++)q(F[ct]);q(1);for(var ze=0;ze<16;ze++)q(E[ze+1]);for(var Lt=0;Lt<=11;Lt++)q(U[Lt]);q(17);for(var pt=0;pt<16;pt++)q(K[pt+1]);for(var At=0;At<=161;At++)q(ae[At])}(),Y(65498),Y(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var ee=0,M=0,Z=0;B=0,w=7,this.encode.displayName="_encode_";for(var Ae,oe,ce,we,he,fe,Ne,Ce,se,wt=D.data,it=D.width,et=D.height,De=4*it,Be=0;Be<et;){for(Ae=0;Ae<De;){for(he=De*Be+Ae,Ne=-1,Ce=0,se=0;se<64;se++)fe=he+(Ce=se>>3)*De+(Ne=4*(7&se)),Be+Ce>=et&&(fe-=De*(Be+1+Ce-et)),Ae+Ne>=De&&(fe-=Ae+Ne-De+4),oe=wt[fe++],ce=wt[fe++],we=wt[fe++],b[se]=(j[oe]+j[ce+256|0]+j[we+512|0]>>16)-128,N[se]=(j[oe+768|0]+j[ce+1024|0]+j[we+1280|0]>>16)-128,T[se]=(j[oe+1280|0]+j[ce+1536|0]+j[we+1792|0]>>16)-128;ee=ue(b,c,ee,e,n),M=ue(N,u,M,r,s),Z=ue(T,u,Z,r,s),Ae+=32}Be+=8}if(w>=0){var Te=[];Te[1]=w+1,Te[0]=(1<<w+1)-1,ie(Te)}return Y(65497),new Uint8Array(C)},t=t||50,function(){for(var D=String.fromCharCode,W=0;W<256;W++)V[W]=D(W)}(),e=le(S,I),r=le(E,U),n=le(R,F),s=le(K,ae),function(){for(var D=1,W=2,ee=1;ee<=15;ee++){for(var M=D;M<W;M++)g[32767+M]=ee,f[32767+M]=[],f[32767+M][1]=ee,f[32767+M][0]=M;for(var Z=-(W-1);Z<=-D;Z++)g[32767+Z]=ee,f[32767+Z]=[],f[32767+Z][1]=ee,f[32767+Z][0]=W-1+Z;D<<=1,W<<=1}}(),function(){for(var D=0;D<256;D++)j[D]=19595*D,j[D+256|0]=38470*D,j[D+512|0]=7471*D+32768,j[D+768|0]=-11059*D,j[D+1024|0]=-21709*D,j[D+1280|0]=32768*D+8421375,j[D+1536|0]=-27439*D,j[D+1792|0]=-5329*D}(),pe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ya(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function DN(t){function e(I){if(!I)throw Error("assert :P")}function r(I,R,F){for(var E=0;4>E;E++)if(I[R+E]!=F.charCodeAt(E))return!0;return!1}function n(I,R,F,E,U){for(var K=0;K<U;K++)I[R+K]=F[E+K]}function s(I,R,F,E){for(var U=0;U<E;U++)I[R+U]=F}function i(I){return new Int32Array(I)}function a(I,R){for(var F=[],E=0;E<I;E++)F.push(new R);return F}function o(I,R){var F=[];return function E(U,K,ae){for(var le=ae[K],ie=0;ie<le&&(U.push(ae.length>K+1?[]:new R),!(ae.length<K+1));ie++)E(U[ie],K+1,ae)}(F,0,I),F}var A=function(){var I=this;function R(d,m){for(var x=1<<m-1>>>0;d&x;)x>>>=1;return x?(d&x-1)+x:d}function F(d,m,x,Q,H){e(!(Q%x));do d[m+(Q-=x)]=H;while(0<Q)}function E(d,m,x,Q,H){if(e(2328>=H),512>=H)var G=i(512);else if((G=i(H))==null)return 0;return function(z,$,J,re,me,Ee){var ne,ge,xe=$,Ue=1<<J,_e=i(16),Le=i(16);for(e(me!=0),e(re!=null),e(z!=null),e(0<J),ge=0;ge<me;++ge){if(15<re[ge])return 0;++_e[re[ge]]}if(_e[0]==me)return 0;for(Le[1]=0,ne=1;15>ne;++ne){if(_e[ne]>1<<ne)return 0;Le[ne+1]=Le[ne]+_e[ne]}for(ge=0;ge<me;++ge)ne=re[ge],0<re[ge]&&(Ee[Le[ne]++]=ge);if(Le[15]==1)return(re=new U).g=0,re.value=Ee[0],F(z,xe,1,Ue,re),Ue;var ke,Ke=-1,Oe=Ue-1,Tt=0,vt=1,Xt=1,Et=1<<J;for(ge=0,ne=1,me=2;ne<=J;++ne,me<<=1){if(vt+=Xt<<=1,0>(Xt-=_e[ne]))return 0;for(;0<_e[ne];--_e[ne])(re=new U).g=ne,re.value=Ee[ge++],F(z,xe+Tt,me,Et,re),Tt=R(Tt,ne)}for(ne=J+1,me=2;15>=ne;++ne,me<<=1){if(vt+=Xt<<=1,0>(Xt-=_e[ne]))return 0;for(;0<_e[ne];--_e[ne]){if(re=new U,(Tt&Oe)!=Ke){for(xe+=Et,ke=1<<(Ke=ne)-J;15>Ke&&!(0>=(ke-=_e[Ke]));)++Ke,ke<<=1;Ue+=Et=1<<(ke=Ke-J),z[$+(Ke=Tt&Oe)].g=ke+J,z[$+Ke].value=xe-$-Ke}re.g=ne-J,re.value=Ee[ge++],F(z,xe+(Tt>>J),me,Et,re),Tt=R(Tt,ne)}}return vt!=2*Le[15]-1?0:Ue}(d,m,x,Q,H,G)}function U(){this.value=this.g=0}function K(){this.value=this.g=0}function ae(){this.G=a(5,U),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Ya,K)}function le(d,m,x,Q){e(d!=null),e(m!=null),e(2147483648>Q),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=m,d.pa=x,d.Jd=m,d.Yc=x+Q,d.Zc=4<=Q?x+Q-4+1:x,oe(d)}function ie(d,m){for(var x=0;0<m--;)x|=we(d,128)<<m;return x}function q(d,m){var x=ie(d,m);return ce(d)?-x:x}function Y(d,m,x,Q){var H,G=0;for(e(d!=null),e(m!=null),e(4294967288>Q),d.Sb=Q,d.Ra=0,d.u=0,d.h=0,4<Q&&(Q=4),H=0;H<Q;++H)G+=m[x+H]<<8*H;d.Ra=G,d.bb=Q,d.oa=m,d.pa=x}function ue(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<NA-8>>>0,++d.bb,d.u-=8;M(d)&&(d.h=1,d.u=0)}function pe(d,m){if(e(0<=m),!d.h&&m<=rh){var x=ee(d)&IA[m];return d.u+=m,ue(d),x}return d.h=1,d.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(d){return d.Ra>>>(d.u&NA-1)>>>0}function M(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>NA}function Z(d,m){d.u=m,d.h=M(d)}function Ae(d){d.u>=En&&(e(d.u>=En),ue(d))}function oe(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ce(d){return ie(d,1)}function we(d,m){var x=d.Ca;0>d.b&&oe(d);var Q=d.b,H=x*m>>>8,G=(d.I>>>Q>H)+0;for(G?(x-=H,d.I-=H+1<<Q>>>0):x=H+1,Q=x,H=0;256<=Q;)H+=8,Q>>=8;return Q=7^H+cv[Q],d.b-=Q,d.Ca=(x<<Q)-1,G}function he(d,m,x){d[m+0]=x>>24&255,d[m+1]=x>>16&255,d[m+2]=x>>8&255,d[m+3]=255&x}function fe(d,m){return d[m+0]|d[m+1]<<8}function Ne(d,m){return fe(d,m)|d[m+2]<<16}function Ce(d,m){return fe(d,m)|fe(d,m+2)<<16}function se(d,m){var x=1<<m;return e(d!=null),e(0<m),d.X=i(x),d.X==null?0:(d.Mb=32-m,d.Xa=m,1)}function wt(d,m){e(d!=null),e(m!=null),e(d.Xa==m.Xa),n(m.X,0,d.X,0,1<<m.Xa)}function it(){this.X=[],this.Xa=this.Mb=0}function et(d,m,x,Q){e(x!=null),e(Q!=null);var H=x[0],G=Q[0];return H==0&&(H=(d*G+m/2)/m),G==0&&(G=(m*H+d/2)/d),0>=H||0>=G?0:(x[0]=H,Q[0]=G,1)}function De(d,m){return d+(1<<m)-1>>>m}function Be(d,m){return((4278255360&d)+(4278255360&m)>>>0&4278255360)+((16711935&d)+(16711935&m)>>>0&16711935)>>>0}function Te(d,m){I[m]=function(x,Q,H,G,z,$,J){var re;for(re=0;re<z;++re){var me=I[d]($[J+re-1],H,G+re);$[J+re]=Be(x[Q+re],me)}}}function We(){this.ud=this.hd=this.jd=0}function Me(d,m){return((4278124286&(d^m))>>>1)+(d&m)>>>0}function nt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function ct(d,m){return nt(d+(d-m+.5>>1))}function ze(d,m,x){return Math.abs(m-x)-Math.abs(d-x)}function Lt(d,m,x,Q,H,G,z){for(Q=G[z-1],x=0;x<H;++x)G[z+x]=Q=Be(d[m+x],Q)}function pt(d,m,x,Q,H){var G;for(G=0;G<x;++G){var z=d[m+G],$=z>>8&255,J=16711935&(J=(J=16711935&z)+(($<<16)+$));Q[H+G]=(4278255360&z)+J>>>0}}function At(d,m){m.jd=255&d,m.hd=d>>8&255,m.ud=d>>16&255}function Qt(d,m,x,Q,H,G){var z;for(z=0;z<Q;++z){var $=m[x+z],J=$>>>8,re=$,me=255&(me=(me=$>>>16)+((d.jd<<24>>24)*(J<<24>>24)>>>5));re=255&(re=(re+=(d.hd<<24>>24)*(J<<24>>24)>>>5)+((d.ud<<24>>24)*(me<<24>>24)>>>5)),H[G+z]=(4278255360&$)+(me<<16)+re}}function mt(d,m,x,Q,H){I[m]=function(G,z,$,J,re,me,Ee,ne,ge){for(J=Ee;J<ne;++J)for(Ee=0;Ee<ge;++Ee)re[me++]=H($[Q(G[z++])])},I[d]=function(G,z,$,J,re,me,Ee){var ne=8>>G.b,ge=G.Ea,xe=G.K[0],Ue=G.w;if(8>ne)for(G=(1<<G.b)-1,Ue=(1<<ne)-1;z<$;++z){var _e,Le=0;for(_e=0;_e<ge;++_e)_e&G||(Le=Q(J[re++])),me[Ee++]=H(xe[Le&Ue]),Le>>=ne}else I["VP8LMapColor"+x](J,re,xe,Ue,me,Ee,z,$,ge)}}function tr(d,m,x,Q,H){for(x=m+x;m<x;){var G=d[m++];Q[H++]=G>>16&255,Q[H++]=G>>8&255,Q[H++]=255&G}}function Jt(d,m,x,Q,H){for(x=m+x;m<x;){var G=d[m++];Q[H++]=G>>16&255,Q[H++]=G>>8&255,Q[H++]=255&G,Q[H++]=G>>24&255}}function ht(d,m,x,Q,H){for(x=m+x;m<x;){var G=(z=d[m++])>>16&240|z>>12&15,z=240&z|z>>28&15;Q[H++]=G,Q[H++]=z}}function Pt(d,m,x,Q,H){for(x=m+x;m<x;){var G=(z=d[m++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;Q[H++]=G,Q[H++]=z}}function hr(d,m,x,Q,H){for(x=m+x;m<x;){var G=d[m++];Q[H++]=255&G,Q[H++]=G>>8&255,Q[H++]=G>>16&255}}function Ft(d,m,x,Q,H,G){if(G==0)for(x=m+x;m<x;)he(Q,((G=d[m++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),H+=32;else n(Q,H,d,m,x)}function Se(d,m){I[m][0]=I[d+"0"],I[m][1]=I[d+"1"],I[m][2]=I[d+"2"],I[m][3]=I[d+"3"],I[m][4]=I[d+"4"],I[m][5]=I[d+"5"],I[m][6]=I[d+"6"],I[m][7]=I[d+"7"],I[m][8]=I[d+"8"],I[m][9]=I[d+"9"],I[m][10]=I[d+"10"],I[m][11]=I[d+"11"],I[m][12]=I[d+"12"],I[m][13]=I[d+"13"],I[m][14]=I[d+"0"],I[m][15]=I[d+"0"]}function Ge(d){return d==hv||d==fv||d==Xp||d==pv}function st(){this.eb=[],this.size=this.A=this.fb=0}function Xe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ye(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new st,this.f.kb=new Xe,this.sd=null}function Je(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function at(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rr(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function $t(d,m){var x=d.T,Q=m.ba.f.RGBA,H=Q.eb,G=Q.fb+d.ka*Q.A,z=Xi[m.ba.S],$=d.y,J=d.O,re=d.f,me=d.N,Ee=d.ea,ne=d.W,ge=m.cc,xe=m.dc,Ue=m.Mc,_e=m.Nc,Le=d.ka,ke=d.ka+d.T,Ke=d.U,Oe=Ke+1>>1;for(Le==0?z($,J,null,null,re,me,Ee,ne,re,me,Ee,ne,H,G,null,null,Ke):(z(m.ec,m.fc,$,J,ge,xe,Ue,_e,re,me,Ee,ne,H,G-Q.A,H,G,Ke),++x);Le+2<ke;Le+=2)ge=re,xe=me,Ue=Ee,_e=ne,me+=d.Rc,ne+=d.Rc,G+=2*Q.A,z($,(J+=2*d.fa)-d.fa,$,J,ge,xe,Ue,_e,re,me,Ee,ne,H,G-Q.A,H,G,Ke);return J+=d.fa,d.j+ke<d.o?(n(m.ec,m.fc,$,J,Ke),n(m.cc,m.dc,re,me,Oe),n(m.Mc,m.Nc,Ee,ne,Oe),x--):1&ke||z($,J,null,null,re,me,Ee,ne,re,me,Ee,ne,H,G+Q.A,null,null,Ke),x}function vr(d,m,x){var Q=d.F,H=[d.J];if(Q!=null){var G=d.U,z=m.ba.S,$=z==Wp||z==Xp;m=m.ba.f.RGBA;var J=[0],re=d.ka;J[0]=d.T,d.Kb&&(re==0?--J[0]:(--re,H[0]-=d.width),d.j+d.ka+d.T==d.o&&(J[0]=d.o-d.j-re));var me=m.eb;re=m.fb+re*m.A,d=Kx(Q,H[0],d.width,G,J,me,re+($?0:3),m.A),e(x==J),d&&Ge(z)&&ah(me,re,$,G,J,m.A)}return 0}function en(d){var m=d.ma,x=m.ba.S,Q=11>x,H=x==zp||x==$p||x==Wp||x==dv||x==12||Ge(x);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!ii(m.Oa,d,H?11:12))return 0;if(H&&Ge(x)&&EA(),d.da)alert("todo:use_scaling");else{if(Q){if(m.Ib=rr,d.Kb){if(x=d.U+1>>1,m.memory=i(d.U+2*x),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+d.U,m.Mc=m.cc,m.Nc=m.dc+x,m.Ib=$t,EA()}}else alert("todo:EmitYUV");H&&(m.Jb=vr,Q&&_n())}if(Q&&!aC){for(d=0;256>d;++d)OL[d]=89858*(d-128)+Jp>>Yp,VL[d]=-22014*(d-128)+Jp,HL[d]=-45773*(d-128),ML[d]=113618*(d-128)+Jp>>Yp;for(d=Ah;d<wv;++d)m=76283*(d-16)+Jp>>Yp,KL[d-Ah]=or(m,255),GL[d-Ah]=or(m+8>>4,15);aC=1}return 1}function Ct(d){var m=d.ma,x=d.U,Q=d.T;return e(!(1&d.ka)),0>=x||0>=Q?0:(x=m.Ib(d,m),m.Jb!=null&&m.Jb(d,m,x),m.Dc+=x,1)}function Rr(d){d.ma.memory=null}function Os(d,m,x,Q){return pe(d,8)!=47?0:(m[0]=pe(d,14)+1,x[0]=pe(d,14)+1,Q[0]=pe(d,1),pe(d,3)!=0?0:!d.h)}function jn(d,m){if(4>d)return d+1;var x=d-2>>1;return(2+(1&d)<<x)+pe(m,x)+1}function On(d,m){return 120<m?m-120:1<=(x=((x=EL[m-1])>>4)*d+(8-(15&x)))?x:1;var x}function Or(d,m,x){var Q=ee(x),H=d[m+=255&Q].g-8;return 0<H&&(Z(x,x.u+8),Q=ee(x),m+=d[m].value,m+=Q&(1<<H)-1),Z(x,x.u+d[m].g),d[m].value}function ve(d,m,x){return x.g+=d.g,x.value+=d.value<<m>>>0,e(8>=x.g),d.g}function He(d,m,x){var Q=d.xc;return e((m=Q==0?0:d.vc[d.md*(x>>Q)+(m>>Q)])<d.Wb),d.Ya[m]}function ot(d,m,x,Q){var H=d.ab,G=d.c*m,z=d.C;m=z+m;var $=x,J=Q;for(Q=d.Ta,x=d.Ua;0<H--;){var re=d.gc[H],me=z,Ee=m,ne=$,ge=J,xe=(J=Q,$=x,re.Ea);switch(e(me<Ee),e(Ee<=re.nc),re.hc){case 2:cu(ne,ge,(Ee-me)*xe,J,$);break;case 0:var Ue=me,_e=Ee,Le=J,ke=$,Ke=(Et=re).Ea;Ue==0&&(Ja(ne,ge,null,null,1,Le,ke),Lt(ne,ge+1,0,0,Ke-1,Le,ke+1),ge+=Ke,ke+=Ke,++Ue);for(var Oe=1<<Et.b,Tt=Oe-1,vt=De(Ke,Et.b),Xt=Et.K,Et=Et.w+(Ue>>Et.b)*vt;Ue<_e;){var dr=Xt,Gn=Et,Yt=1;for(Za(ne,ge,Le,ke-Ke,1,Le,ke);Yt<Ke;){var It=(Yt&~Tt)+Oe;It>Ke&&(It=Ke),(0,rc[dr[Gn++]>>8&15])(ne,ge+ +Yt,Le,ke+Yt-Ke,It-Yt,Le,ke+Yt),Yt=It}ge+=Ke,ke+=Ke,++Ue&Tt||(Et+=vt)}Ee!=re.nc&&n(J,$-xe,J,$+(Ee-me-1)*xe,xe);break;case 1:for(xe=ne,_e=ge,Ke=(ne=re.Ea)-(ke=ne&~(Le=(ge=1<<re.b)-1)),Ue=De(ne,re.b),Oe=re.K,re=re.w+(me>>re.b)*Ue;me<Ee;){for(Tt=Oe,vt=re,Xt=new We,Et=_e+ke,dr=_e+ne;_e<Et;)At(Tt[vt++],Xt),To(Xt,xe,_e,ge,J,$),_e+=ge,$+=ge;_e<dr&&(At(Tt[vt++],Xt),To(Xt,xe,_e,Ke,J,$),_e+=Ke,$+=Ke),++me&Le||(re+=Ue)}break;case 3:if(ne==J&&ge==$&&0<re.b){for(_e=J,ne=xe=$+(Ee-me)*xe-(ke=(Ee-me)*De(re.Ea,re.b)),ge=J,Le=$,Ue=[],ke=(Ke=ke)-1;0<=ke;--ke)Ue[ke]=ge[Le+ke];for(ke=Ke-1;0<=ke;--ke)_e[ne+ke]=Ue[ke];nh(re,me,Ee,J,xe,J,$)}else nh(re,me,Ee,ne,ge,J,$)}$=Q,J=x}J!=x&&n(Q,x,$,J,G)}function Zt(d,m){var x=d.V,Q=d.Ba+d.c*d.C,H=m-d.C;if(e(m<=d.l.o),e(16>=H),0<H){var G=d.l,z=d.Ta,$=d.Ua,J=G.width;if(ot(d,H,x,Q),H=$=[$],e((x=d.C)<(Q=m)),e(G.v<G.va),Q>G.o&&(Q=G.o),x<G.j){var re=G.j-x;x=G.j,H[0]+=re*J}if(x>=Q?x=0:(H[0]+=4*G.v,G.ka=x-G.j,G.U=G.va-G.v,G.T=Q-x,x=1),x){if($=$[0],11>(x=d.ca).S){var me=x.f.RGBA,Ee=(Q=x.S,H=G.U,G=G.T,re=me.eb,me.A),ne=G;for(me=me.fb+d.Ma*me.A;0<ne--;){var ge=z,xe=$,Ue=H,_e=re,Le=me;switch(Q){case qp:sh(ge,xe,Ue,_e,Le);break;case zp:Ci(ge,xe,Ue,_e,Le);break;case hv:Ci(ge,xe,Ue,_e,Le),ah(_e,Le,0,Ue,1,0);break;case Yx:Vr(ge,xe,Ue,_e,Le);break;case $p:Ft(ge,xe,Ue,_e,Le,1);break;case fv:Ft(ge,xe,Ue,_e,Le,1),ah(_e,Le,0,Ue,1,0);break;case Wp:Ft(ge,xe,Ue,_e,Le,0);break;case Xp:Ft(ge,xe,Ue,_e,Le,0),ah(_e,Le,1,Ue,1,0);break;case dv:eo(ge,xe,Ue,_e,Le);break;case pv:eo(ge,xe,Ue,_e,Le),Vx(_e,Le,Ue,1,0);break;case Jx:Hr(ge,xe,Ue,_e,Le);break;default:e(0)}$+=J,me+=Ee}d.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=x.height)}}d.C=m,e(d.C<=d.i)}function Wt(d){var m;if(0<d.ua)return 0;for(m=0;m<d.Wb;++m){var x=d.Ya[m].G,Q=d.Ya[m].H;if(0<x[1][Q[1]+0].g||0<x[2][Q[2]+0].g||0<x[3][Q[3]+0].g)return 0}return 1}function _t(d,m,x,Q,H,G){if(d.Z!=0){var z=d.qd,$=d.rd;for(e(FA[d.Z]!=null);m<x;++m)FA[d.Z](z,$,Q,H,Q,H,G),z=Q,$=H,H+=G;d.qd=z,d.rd=$}}function bt(d,m){var x=d.l.ma,Q=x.Z==0||x.Z==1?d.l.j:d.C;if(Q=d.C<Q?Q:d.C,e(m<=d.l.o),m>Q){var H=d.l.width,G=x.ca,z=x.tb+H*Q,$=d.V,J=d.Ba+d.c*Q,re=d.gc;e(d.ab==1),e(re[0].hc==3),du(re[0],Q,m,$,J,G,z),_t(x,Q,m,G,z,H)}d.C=d.Ma=m}function es(d,m,x,Q,H,G,z){var $=d.$/Q,J=d.$%Q,re=d.m,me=d.s,Ee=x+d.$,ne=Ee;H=x+Q*H;var ge=x+Q*G,xe=280+me.ua,Ue=d.Pb?$:16777216,_e=0<me.ua?me.Wa:null,Le=me.wc,ke=Ee<ge?He(me,J,$):null;e(d.C<G),e(ge<=H);var Ke=!1;e:for(;;){for(;Ke||Ee<ge;){var Oe=0;if($>=Ue){var Tt=Ee-x;e((Ue=d).Pb),Ue.wd=Ue.m,Ue.xd=Tt,0<Ue.s.ua&&wt(Ue.s.Wa,Ue.s.vb),Ue=$+NL}if(J&Le||(ke=He(me,J,$)),e(ke!=null),ke.Qb&&(m[Ee]=ke.qb,Ke=!0),!Ke)if(Ae(re),ke.jc){Oe=re,Tt=m;var vt=Ee,Xt=ke.pd[ee(Oe)&Ya-1];e(ke.jc),256>Xt.g?(Z(Oe,Oe.u+Xt.g),Tt[vt]=Xt.value,Oe=0):(Z(Oe,Oe.u+Xt.g-256),e(256<=Xt.value),Oe=Xt.value),Oe==0&&(Ke=!0)}else Oe=Or(ke.G[0],ke.H[0],re);if(re.h)break;if(Ke||256>Oe){if(!Ke)if(ke.nd)m[Ee]=(ke.qb|Oe<<8)>>>0;else{if(Ae(re),Ke=Or(ke.G[1],ke.H[1],re),Ae(re),Tt=Or(ke.G[2],ke.H[2],re),vt=Or(ke.G[3],ke.H[3],re),re.h)break;m[Ee]=(vt<<24|Ke<<16|Oe<<8|Tt)>>>0}if(Ke=!1,++Ee,++J>=Q&&(J=0,++$,z!=null&&$<=G&&!($%16)&&z(d,$),_e!=null))for(;ne<Ee;)Oe=m[ne++],_e.X[(506832829*Oe&4294967295)>>>_e.Mb]=Oe}else if(280>Oe){if(Oe=jn(Oe-256,re),Tt=Or(ke.G[4],ke.H[4],re),Ae(re),Tt=On(Q,Tt=jn(Tt,re)),re.h)break;if(Ee-x<Tt||H-Ee<Oe)break e;for(vt=0;vt<Oe;++vt)m[Ee+vt]=m[Ee+vt-Tt];for(Ee+=Oe,J+=Oe;J>=Q;)J-=Q,++$,z!=null&&$<=G&&!($%16)&&z(d,$);if(e(Ee<=H),J&Le&&(ke=He(me,J,$)),_e!=null)for(;ne<Ee;)Oe=m[ne++],_e.X[(506832829*Oe&4294967295)>>>_e.Mb]=Oe}else{if(!(Oe<xe))break e;for(Ke=Oe-280,e(_e!=null);ne<Ee;)Oe=m[ne++],_e.X[(506832829*Oe&4294967295)>>>_e.Mb]=Oe;Oe=Ee,e(!(Ke>>>(Tt=_e).Xa)),m[Oe]=Tt.X[Ke],Ke=!0}Ke||e(re.h==M(re))}if(d.Pb&&re.h&&Ee<H)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&wt(d.s.vb,d.s.Wa);else{if(re.h)break e;z!=null&&z(d,$>G?G:$),d.a=0,d.$=Ee-x}return 1}return d.a=3,0}function Cn(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var m=d.Wa;m!=null&&(m.X=null),d.vb=null,e(d!=null)}function ja(){var d=new Mr;return d==null?null:(d.a=0,d.xb=tC,Se("Predictor","VP8LPredictors"),Se("Predictor","VP8LPredictors_C"),Se("PredictorAdd","VP8LPredictorsAdd"),Se("PredictorAdd","VP8LPredictorsAdd_C"),cu=pt,To=Qt,sh=tr,Ci=Jt,eo=ht,Hr=Pt,Vr=hr,I.VP8LMapColor32b=uu,I.VP8LMapColor8b=tc,d)}function vi(d,m,x,Q,H){var G=1,z=[d],$=[m],J=Q.m,re=Q.s,me=null,Ee=0;e:for(;;){if(x)for(;G&&pe(J,1);){var ne=z,ge=$,xe=Q,Ue=1,_e=xe.m,Le=xe.gc[xe.ab],ke=pe(_e,2);if(xe.Oc&1<<ke)G=0;else{switch(xe.Oc|=1<<ke,Le.hc=ke,Le.Ea=ne[0],Le.nc=ge[0],Le.K=[null],++xe.ab,e(4>=xe.ab),ke){case 0:case 1:Le.b=pe(_e,3)+2,Ue=vi(De(Le.Ea,Le.b),De(Le.nc,Le.b),0,xe,Le.K),Le.K=Le.K[0];break;case 3:var Ke,Oe=pe(_e,8)+1,Tt=16<Oe?0:4<Oe?1:2<Oe?2:3;if(ne[0]=De(Le.Ea,Tt),Le.b=Tt,Ke=Ue=vi(Oe,1,0,xe,Le.K)){var vt,Xt=Oe,Et=Le,dr=1<<(8>>Et.b),Gn=i(dr);if(Gn==null)Ke=0;else{var Yt=Et.K[0],It=Et.w;for(Gn[0]=Et.K[0][0],vt=1;vt<1*Xt;++vt)Gn[vt]=Be(Yt[It+vt],Gn[vt-1]);for(;vt<4*dr;++vt)Gn[vt]=0;Et.K[0]=null,Et.K[0]=Gn,Ke=1}}Ue=Ke;break;case 2:break;default:e(0)}G=Ue}}if(z=z[0],$=$[0],G&&pe(J,1)&&!(G=1<=(Ee=pe(J,4))&&11>=Ee)){Q.a=3;break e}var tt;if(tt=G)t:{var Sn,qt,fr,Wr=Q,hs=z,Ks=$,wn=Ee,Es=x,Gs=Wr.m,qn=Wr.s,mr=[null],Er=1,vn=0,Ir=IL[wn];r:for(;;){if(Es&&pe(Gs,1)){var fs=pe(Gs,3)+2,ga=De(hs,fs),Fn=De(Ks,fs),oi=ga*Fn;if(!vi(ga,Fn,0,Wr,mr))break r;for(mr=mr[0],qn.xc=fs,Sn=0;Sn<oi;++Sn){var Dr=mr[Sn]>>8&65535;mr[Sn]=Dr,Dr>=Er&&(Er=Dr+1)}}if(Gs.h)break r;for(qt=0;5>qt;++qt){var zn=Zx[qt];!qt&&0<wn&&(zn+=1<<wn),vn<zn&&(vn=zn)}var Ei=a(Er*Ir,U),qs=Er,Ii=a(qs,ae);if(Ii==null)var Ni=null;else e(65536>=qs),Ni=Ii;var Ai=i(vn);if(Ni==null||Ai==null||Ei==null){Wr.a=1;break r}var Si=Ei;for(Sn=fr=0;Sn<Er;++Sn){var Kr=Ni[Sn],Fi=Kr.G,wa=Kr.H,nc=0,Lo=1,ps=0;for(qt=0;5>qt;++qt){zn=Zx[qt],Fi[qt]=Si,wa[qt]=fr,!qt&&0<wn&&(zn+=1<<wn);s:{var em,vv=zn,tm=Wr,lh=Ai,$L=Si,WL=fr,yv=0,TA=tm.m,XL=pe(TA,1);if(s(lh,0,0,vv),XL){var YL=pe(TA,1)+1,JL=pe(TA,1),lC=pe(TA,JL==0?1:8);lh[lC]=1,YL==2&&(lh[lC=pe(TA,8)]=1);var rm=1}else{var cC=i(19),uC=pe(TA,4)+4;if(19<uC){tm.a=3;var nm=0;break s}for(em=0;em<uC;++em)cC[_L[em]]=pe(TA,3);var Bv=void 0,ch=void 0,dC=tm,ZL=cC,sm=vv,hC=lh,bv=0,UA=dC.m,fC=8,pC=a(128,U);n:for(;E(pC,0,7,ZL,19);){if(pe(UA,1)){var eP=2+2*pe(UA,3);if((Bv=2+pe(UA,eP))>sm)break n}else Bv=sm;for(ch=0;ch<sm&&Bv--;){Ae(UA);var mC=pC[0+(127&ee(UA))];Z(UA,UA.u+mC.g);var fu=mC.value;if(16>fu)hC[ch++]=fu,fu!=0&&(fC=fu);else{var tP=fu==16,gC=fu-16,rP=xL[gC],wC=pe(UA,bL[gC])+rP;if(ch+wC>sm)break n;for(var nP=tP?fC:0;0<wC--;)hC[ch++]=nP}}bv=1;break n}bv||(dC.a=3),rm=bv}(rm=rm&&!TA.h)&&(yv=E($L,WL,8,lh,vv)),rm&&yv!=0?nm=yv:(tm.a=3,nm=0)}if(nm==0)break r;if(Lo&&CL[qt]==1&&(Lo=Si[fr].g==0),nc+=Si[fr].g,fr+=nm,3>=qt){var uh,xv=Ai[0];for(uh=1;uh<zn;++uh)Ai[uh]>xv&&(xv=Ai[uh]);ps+=xv}}if(Kr.nd=Lo,Kr.Qb=0,Lo&&(Kr.qb=(Fi[3][wa[3]+0].value<<24|Fi[1][wa[1]+0].value<<16|Fi[2][wa[2]+0].value)>>>0,nc==0&&256>Fi[0][wa[0]+0].value&&(Kr.Qb=1,Kr.qb+=Fi[0][wa[0]+0].value<<8)),Kr.jc=!Kr.Qb&&6>ps,Kr.jc){var im,Po=Kr;for(im=0;im<Ya;++im){var QA=im,LA=Po.pd[QA],am=Po.G[0][Po.H[0]+QA];256<=am.value?(LA.g=am.g+256,LA.value=am.value):(LA.g=0,LA.value=0,QA>>=ve(am,8,LA),QA>>=ve(Po.G[1][Po.H[1]+QA],16,LA),QA>>=ve(Po.G[2][Po.H[2]+QA],0,LA),ve(Po.G[3][Po.H[3]+QA],24,LA))}}}qn.vc=mr,qn.Wb=Er,qn.Ya=Ni,qn.yc=Ei,tt=1;break t}tt=0}if(!(G=tt)){Q.a=3;break e}if(0<Ee){if(re.ua=1<<Ee,!se(re.Wa,Ee)){Q.a=1,G=0;break e}}else re.ua=0;var Cv=Q,vC=z,sP=$,_v=Cv.s,Ev=_v.xc;if(Cv.c=vC,Cv.i=sP,_v.md=De(vC,Ev),_v.wc=Ev==0?-1:(1<<Ev)-1,x){Q.xb=PL;break e}if((me=i(z*$))==null){Q.a=1,G=0;break e}G=(G=es(Q,me,0,z,$,$,null))&&!J.h;break e}return G?(H!=null?H[0]=me:(e(me==null),e(x)),Q.$=0,x||Cn(re)):Cn(re),G}function ua(d,m){var x=d.c*d.i,Q=x+m+16*m;return e(d.c<=m),d.V=i(Q),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+x+m,1)}function Oa(d,m){var x=d.C,Q=m-x,H=d.V,G=d.Ba+d.c*x;for(e(m<=d.l.o);0<Q;){var z=16<Q?16:Q,$=d.l.ma,J=d.l.width,re=J*z,me=$.ca,Ee=$.tb+J*x,ne=d.Ta,ge=d.Ua;ot(d,z,H,G),Gx(ne,ge,me,Ee,re),_t($,x,x+z,me,Ee,J),Q-=z,H+=z*d.c,x+=z}e(x==m),d.C=d.Ma=m}function bo(){this.ub=this.yd=this.td=this.Rb=0}function xo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wd(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ma(){this.Yb=function(){var d=[];return function m(x,Q,H){for(var G=H[Q],z=0;z<G&&(x.push(H.length>Q+1?[]:0),!(H.length<Q+1));z++)m(x[z],Q+1,H)}(d,0,[3,11]),d}()}function Vl(){this.jb=i(3),this.Wc=o([4,8],Ma),this.Xc=o([4,17],Ma)}function gA(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ts(){this.ld=this.La=this.dd=this.tc=0}function yi(){this.Na=this.la=0}function wA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Kl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gl(){this.uc=this.M=this.Nb=0,this.wa=Array(new ts),this.Y=0,this.ya=Array(new Kl),this.aa=0,this.l=new Ha}function ql(){this.y=i(16),this.f=i(8),this.ea=i(8)}function zl(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new bo,this.Kc=new xo,this.ed=new gA,this.Qa=new Wd,this.Ic=this.$c=this.Aa=0,this.D=new Gl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,D),this.ia=0,this.pb=a(4,wA),this.Pa=new Vl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ql),this.Hd=0,this.rb=Array(new yi),this.sb=0,this.wa=Array(new ts),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Kl),this.L=this.aa=0,this.gd=o([4,2],ts),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ha(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $l(){var d=new zl;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,oh||(oh=da)),d}function hn(d,m,x){return d.a==0&&(d.a=m,d.sc=x,d.cb=0),0}function Wl(d,m,x){return 3<=x&&d[m+0]==157&&d[m+1]==1&&d[m+2]==42}function au(d,m){if(d==null)return 0;if(d.a=0,d.sc="OK",m==null)return hn(d,2,"null VP8Io passed to VP8GetHeaders()");var x=m.data,Q=m.w,H=m.ha;if(4>H)return hn(d,7,"Truncated header.");var G=x[Q+0]|x[Q+1]<<8|x[Q+2]<<16,z=d.Od;if(z.Rb=!(1&G),z.td=G>>1&7,z.yd=G>>4&1,z.ub=G>>5,3<z.td)return hn(d,3,"Incorrect keyframe parameters.");if(!z.yd)return hn(d,4,"Frame not displayable.");Q+=3,H-=3;var $=d.Kc;if(z.Rb){if(7>H)return hn(d,7,"cannot parse picture header");if(!Wl(x,Q,H))return hn(d,3,"Bad code word");$.c=16383&(x[Q+4]<<8|x[Q+3]),$.Td=x[Q+4]>>6,$.i=16383&(x[Q+6]<<8|x[Q+5]),$.Ud=x[Q+6]>>6,Q+=7,H-=7,d.za=$.c+15>>4,d.Ub=$.i+15>>4,m.width=$.c,m.height=$.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,s((G=d.Pa).jb,0,255,G.jb.length),e((G=d.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,s(G.Zb,0,0,G.Zb.length),s(G.Lb,0,0,G.Lb)}if(z.ub>H)return hn(d,7,"bad partition length");le(G=d.m,x,Q,z.ub),Q+=z.ub,H-=z.ub,z.Rb&&($.Ld=ce(G),$.Kd=ce(G)),$=d.Qa;var J,re=d.Pa;if(e(G!=null),e($!=null),$.Cb=ce(G),$.Cb){if($.Bb=ce(G),ce(G)){for($.Fb=ce(G),J=0;4>J;++J)$.Zb[J]=ce(G)?q(G,7):0;for(J=0;4>J;++J)$.Lb[J]=ce(G)?q(G,6):0}if($.Bb)for(J=0;3>J;++J)re.jb[J]=ce(G)?ie(G,8):255}else $.Bb=0;if(G.Ka)return hn(d,3,"cannot parse segment header");if(($=d.ed).zd=ce(G),$.Tb=ie(G,6),$.wb=ie(G,3),$.Pc=ce(G),$.Pc&&ce(G)){for(re=0;4>re;++re)ce(G)&&($.vd[re]=q(G,6));for(re=0;4>re;++re)ce(G)&&($.od[re]=q(G,6))}if(d.L=$.Tb==0?0:$.zd?1:2,G.Ka)return hn(d,3,"cannot parse filter header");var me=H;if(H=J=Q,Q=J+me,$=me,d.Xb=(1<<ie(d.m,2))-1,me<3*(re=d.Xb))x=7;else{for(J+=3*re,$-=3*re,me=0;me<re;++me){var Ee=x[H+0]|x[H+1]<<8|x[H+2]<<16;Ee>$&&(Ee=$),le(d.Jc[+me],x,J,Ee),J+=Ee,$-=Ee,H+=3}le(d.Jc[+re],x,J,$),x=J<Q?0:5}if(x!=0)return hn(d,x,"cannot parse partitions");for(x=ie(J=d.m,7),H=ce(J)?q(J,4):0,Q=ce(J)?q(J,4):0,$=ce(J)?q(J,4):0,re=ce(J)?q(J,4):0,J=ce(J)?q(J,4):0,me=d.Qa,Ee=0;4>Ee;++Ee){if(me.Cb){var ne=me.Zb[Ee];me.Fb||(ne+=x)}else{if(0<Ee){d.pb[Ee]=d.pb[0];continue}ne=x}var ge=d.pb[Ee];ge.Sc[0]=mv[or(ne+H,127)],ge.Sc[1]=gv[or(ne+0,127)],ge.Eb[0]=2*mv[or(ne+Q,127)],ge.Eb[1]=101581*gv[or(ne+$,127)]>>16,8>ge.Eb[1]&&(ge.Eb[1]=8),ge.Qc[0]=mv[or(ne+re,117)],ge.Qc[1]=gv[or(ne+J,127)],ge.lc=ne+J}if(!z.Rb)return hn(d,4,"Not a key frame.");for(ce(G),z=d.Pa,x=0;4>x;++x){for(H=0;8>H;++H)for(Q=0;3>Q;++Q)for($=0;11>$;++$)re=we(G,QL[x][H][Q][$])?ie(G,8):TL[x][H][Q][$],z.Wc[x][H].Yb[Q][$]=re;for(H=0;17>H;++H)z.Xc[x][H]=z.Wc[x][LL[H]]}return d.kc=ce(G),d.kc&&(d.Bd=ie(G,8)),d.cb=1}function da(d,m,x,Q,H,G,z){var $=m[H].Yb[x];for(x=0;16>H;++H){if(!we(d,$[x+0]))return H;for(;!we(d,$[x+1]);)if($=m[++H].Yb[0],x=0,H==16)return 16;var J=m[H+1].Yb;if(we(d,$[x+2])){var re=d,me=0;if(we(re,(ne=$)[(Ee=x)+3]))if(we(re,ne[Ee+6])){for($=0,Ee=2*(me=we(re,ne[Ee+8]))+(ne=we(re,ne[Ee+9+me])),me=0,ne=SL[Ee];ne[$];++$)me+=me+we(re,ne[$]);me+=3+(8<<Ee)}else we(re,ne[Ee+7])?(me=7+2*we(re,165),me+=we(re,145)):me=5+we(re,159);else me=we(re,ne[Ee+4])?3+we(re,ne[Ee+5]):2;$=J[2]}else me=1,$=J[1];J=z+FL[H],0>(re=d).b&&oe(re);var Ee,ne=re.b,ge=(Ee=re.Ca>>1)-(re.I>>ne)>>31;--re.b,re.Ca+=ge,re.Ca|=1,re.I-=(Ee+1&ge)<<ne,G[J]=((me^ge)-ge)*Q[(0<H)+0]}return 16}function Va(d){var m=d.rb[d.sb-1];m.la=0,m.Na=0,s(d.zc,0,0,d.zc.length),d.ja=0}function ti(d,m,x,Q,H){H=d[m+x+32*Q]+(H>>3),d[m+x+32*Q]=-256&H?0>H?0:255:H}function Co(d,m,x,Q,H,G){ti(d,m,0,x,Q+H),ti(d,m,1,x,Q+G),ti(d,m,2,x,Q-G),ti(d,m,3,x,Q-H)}function Cr(d){return(20091*d>>16)+d}function Ms(d,m,x,Q){var H,G=0,z=i(16);for(H=0;4>H;++H){var $=d[m+0]+d[m+8],J=d[m+0]-d[m+8],re=(35468*d[m+4]>>16)-Cr(d[m+12]),me=Cr(d[m+4])+(35468*d[m+12]>>16);z[G+0]=$+me,z[G+1]=J+re,z[G+2]=J-re,z[G+3]=$-me,G+=4,m++}for(H=G=0;4>H;++H)$=(d=z[G+0]+4)+z[G+8],J=d-z[G+8],re=(35468*z[G+4]>>16)-Cr(z[G+12]),ti(x,Q,0,0,$+(me=Cr(z[G+4])+(35468*z[G+12]>>16))),ti(x,Q,1,0,J+re),ti(x,Q,2,0,J-re),ti(x,Q,3,0,$-me),G++,Q+=32}function vA(d,m,x,Q){var H=d[m+0]+4,G=35468*d[m+4]>>16,z=Cr(d[m+4]),$=35468*d[m+1]>>16;Co(x,Q,0,H+z,d=Cr(d[m+1]),$),Co(x,Q,1,H+G,d,$),Co(x,Q,2,H-G,d,$),Co(x,Q,3,H-z,d,$)}function yA(d,m,x,Q,H){Ms(d,m,x,Q),H&&Ms(d,m+16,x,Q+4)}function ou(d,m,x,Q){Nn(d,m+0,x,Q,1),Nn(d,m+32,x,Q+128,1)}function ar(d,m,x,Q){var H;for(d=d[m+0]+4,H=0;4>H;++H)for(m=0;4>m;++m)ti(x,Q,m,H,d)}function _o(d,m,x,Q){d[m+0]&&to(d,m+0,x,Q),d[m+16]&&to(d,m+16,x,Q+4),d[m+32]&&to(d,m+32,x,Q+128),d[m+48]&&to(d,m+48,x,Q+128+4)}function Ka(d,m,x,Q){var H,G=i(16);for(H=0;4>H;++H){var z=d[m+0+H]+d[m+12+H],$=d[m+4+H]+d[m+8+H],J=d[m+4+H]-d[m+8+H],re=d[m+0+H]-d[m+12+H];G[0+H]=z+$,G[8+H]=z-$,G[4+H]=re+J,G[12+H]=re-J}for(H=0;4>H;++H)z=(d=G[0+4*H]+3)+G[3+4*H],$=G[1+4*H]+G[2+4*H],J=G[1+4*H]-G[2+4*H],re=d-G[3+4*H],x[Q+0]=z+$>>3,x[Q+16]=re+J>>3,x[Q+32]=z-$>>3,x[Q+48]=re-J>>3,Q+=64}function ri(d,m,x){var Q,H=m-32,G=_i,z=255-d[H-1];for(Q=0;Q<x;++Q){var $,J=G,re=z+d[m-1];for($=0;$<x;++$)d[m+$]=J[re+d[H+$]];m+=32}}function Xl(d,m){ri(d,m,4)}function Au(d,m){ri(d,m,8)}function Xd(d,m){ri(d,m,16)}function Yd(d,m){var x;for(x=0;16>x;++x)n(d,m+32*x,d,m-32,16)}function Yl(d,m){var x;for(x=16;0<x;--x)s(d,m,d[m-1],16),m+=32}function Eo(d,m,x){var Q;for(Q=0;16>Q;++Q)s(m,x+32*Q,d,16)}function ni(d,m){var x,Q=16;for(x=0;16>x;++x)Q+=d[m-1+32*x]+d[m+x-32];Eo(Q>>5,d,m)}function Gi(d,m){var x,Q=8;for(x=0;16>x;++x)Q+=d[m-1+32*x];Eo(Q>>4,d,m)}function Ga(d,m){var x,Q=8;for(x=0;16>x;++x)Q+=d[m+x-32];Eo(Q>>4,d,m)}function BA(d,m){Eo(128,d,m)}function jt(d,m,x){return d+2*m+x+2>>2}function qa(d,m){var x,Q=m-32;for(Q=new Uint8Array([jt(d[Q-1],d[Q+0],d[Q+1]),jt(d[Q+0],d[Q+1],d[Q+2]),jt(d[Q+1],d[Q+2],d[Q+3]),jt(d[Q+2],d[Q+3],d[Q+4])]),x=0;4>x;++x)n(d,m+32*x,Q,0,Q.length)}function Jd(d,m){var x=d[m-1],Q=d[m-1+32],H=d[m-1+64],G=d[m-1+96];he(d,m+0,16843009*jt(d[m-1-32],x,Q)),he(d,m+32,16843009*jt(x,Q,H)),he(d,m+64,16843009*jt(Q,H,G)),he(d,m+96,16843009*jt(H,G,G))}function Zd(d,m){var x,Q=4;for(x=0;4>x;++x)Q+=d[m+x-32]+d[m-1+32*x];for(Q>>=3,x=0;4>x;++x)s(d,m+32*x,Q,4)}function eh(d,m){var x=d[m-1+0],Q=d[m-1+32],H=d[m-1+64],G=d[m-1-32],z=d[m+0-32],$=d[m+1-32],J=d[m+2-32],re=d[m+3-32];d[m+0+96]=jt(Q,H,d[m-1+96]),d[m+1+96]=d[m+0+64]=jt(x,Q,H),d[m+2+96]=d[m+1+64]=d[m+0+32]=jt(G,x,Q),d[m+3+96]=d[m+2+64]=d[m+1+32]=d[m+0+0]=jt(z,G,x),d[m+3+64]=d[m+2+32]=d[m+1+0]=jt($,z,G),d[m+3+32]=d[m+2+0]=jt(J,$,z),d[m+3+0]=jt(re,J,$)}function rs(d,m){var x=d[m+1-32],Q=d[m+2-32],H=d[m+3-32],G=d[m+4-32],z=d[m+5-32],$=d[m+6-32],J=d[m+7-32];d[m+0+0]=jt(d[m+0-32],x,Q),d[m+1+0]=d[m+0+32]=jt(x,Q,H),d[m+2+0]=d[m+1+32]=d[m+0+64]=jt(Q,H,G),d[m+3+0]=d[m+2+32]=d[m+1+64]=d[m+0+96]=jt(H,G,z),d[m+3+32]=d[m+2+64]=d[m+1+96]=jt(G,z,$),d[m+3+64]=d[m+2+96]=jt(z,$,J),d[m+3+96]=jt($,J,J)}function ha(d,m){var x=d[m-1+0],Q=d[m-1+32],H=d[m-1+64],G=d[m-1-32],z=d[m+0-32],$=d[m+1-32],J=d[m+2-32],re=d[m+3-32];d[m+0+0]=d[m+1+64]=G+z+1>>1,d[m+1+0]=d[m+2+64]=z+$+1>>1,d[m+2+0]=d[m+3+64]=$+J+1>>1,d[m+3+0]=J+re+1>>1,d[m+0+96]=jt(H,Q,x),d[m+0+64]=jt(Q,x,G),d[m+0+32]=d[m+1+96]=jt(x,G,z),d[m+1+32]=d[m+2+96]=jt(G,z,$),d[m+2+32]=d[m+3+96]=jt(z,$,J),d[m+3+32]=jt($,J,re)}function th(d,m){var x=d[m+0-32],Q=d[m+1-32],H=d[m+2-32],G=d[m+3-32],z=d[m+4-32],$=d[m+5-32],J=d[m+6-32],re=d[m+7-32];d[m+0+0]=x+Q+1>>1,d[m+1+0]=d[m+0+64]=Q+H+1>>1,d[m+2+0]=d[m+1+64]=H+G+1>>1,d[m+3+0]=d[m+2+64]=G+z+1>>1,d[m+0+32]=jt(x,Q,H),d[m+1+32]=d[m+0+96]=jt(Q,H,G),d[m+2+32]=d[m+1+96]=jt(H,G,z),d[m+3+32]=d[m+2+96]=jt(G,z,$),d[m+3+64]=jt(z,$,J),d[m+3+96]=jt($,J,re)}function bA(d,m){var x=d[m-1+0],Q=d[m-1+32],H=d[m-1+64],G=d[m-1+96];d[m+0+0]=x+Q+1>>1,d[m+2+0]=d[m+0+32]=Q+H+1>>1,d[m+2+32]=d[m+0+64]=H+G+1>>1,d[m+1+0]=jt(x,Q,H),d[m+3+0]=d[m+1+32]=jt(Q,H,G),d[m+3+32]=d[m+1+64]=jt(H,G,G),d[m+3+64]=d[m+2+64]=d[m+0+96]=d[m+1+96]=d[m+2+96]=d[m+3+96]=G}function fa(d,m){var x=d[m-1+0],Q=d[m-1+32],H=d[m-1+64],G=d[m-1+96],z=d[m-1-32],$=d[m+0-32],J=d[m+1-32],re=d[m+2-32];d[m+0+0]=d[m+2+32]=x+z+1>>1,d[m+0+32]=d[m+2+64]=Q+x+1>>1,d[m+0+64]=d[m+2+96]=H+Q+1>>1,d[m+0+96]=G+H+1>>1,d[m+3+0]=jt($,J,re),d[m+2+0]=jt(z,$,J),d[m+1+0]=d[m+3+32]=jt(x,z,$),d[m+1+32]=d[m+3+64]=jt(Q,x,z),d[m+1+64]=d[m+3+96]=jt(H,Q,x),d[m+1+96]=jt(G,H,Q)}function xA(d,m){var x;for(x=0;8>x;++x)n(d,m+32*x,d,m-32,8)}function Bi(d,m){var x;for(x=0;8>x;++x)s(d,m,d[m-1],8),m+=32}function qi(d,m,x){var Q;for(Q=0;8>Q;++Q)s(m,x+32*Q,d,8)}function Io(d,m){var x,Q=8;for(x=0;8>x;++x)Q+=d[m+x-32]+d[m-1+32*x];qi(Q>>4,d,m)}function Jl(d,m){var x,Q=4;for(x=0;8>x;++x)Q+=d[m+x-32];qi(Q>>3,d,m)}function Qr(d,m){var x,Q=4;for(x=0;8>x;++x)Q+=d[m-1+32*x];qi(Q>>3,d,m)}function Zl(d,m){qi(128,d,m)}function No(d,m,x){var Q=d[m-x],H=d[m+0],G=3*(H-Q)+uv[1020+d[m-2*x]-d[m+x]],z=Gp[112+(G+4>>3)];d[m-x]=_i[255+Q+Gp[112+(G+3>>3)]],d[m+0]=_i[255+H-z]}function za(d,m,x,Q){var H=d[m+0],G=d[m+x];return Wi[255+d[m-2*x]-d[m-x]]>Q||Wi[255+G-H]>Q}function CA(d,m,x,Q){return 4*Wi[255+d[m-x]-d[m+0]]+Wi[255+d[m-2*x]-d[m+x]]<=Q}function So(d,m,x,Q,H){var G=d[m-3*x],z=d[m-2*x],$=d[m-x],J=d[m+0],re=d[m+x],me=d[m+2*x],Ee=d[m+3*x];return 4*Wi[255+$-J]+Wi[255+z-re]>Q?0:Wi[255+d[m-4*x]-G]<=H&&Wi[255+G-z]<=H&&Wi[255+z-$]<=H&&Wi[255+Ee-me]<=H&&Wi[255+me-re]<=H&&Wi[255+re-J]<=H}function $a(d,m,x,Q){var H=2*Q+1;for(Q=0;16>Q;++Q)CA(d,m+Q,x,H)&&No(d,m+Q,x)}function Wa(d,m,x,Q){var H=2*Q+1;for(Q=0;16>Q;++Q)CA(d,m+Q*x,1,H)&&No(d,m+Q*x,1)}function Hs(d,m,x,Q){var H;for(H=3;0<H;--H)$a(d,m+=4*x,x,Q)}function _A(d,m,x,Q){var H;for(H=3;0<H;--H)Wa(d,m+=4,x,Q)}function Vs(d,m,x,Q,H,G,z,$){for(G=2*G+1;0<H--;){if(So(d,m,x,G,z))if(za(d,m,x,$))No(d,m,x);else{var J=d,re=m,me=x,Ee=J[re-2*me],ne=J[re-me],ge=J[re+0],xe=J[re+me],Ue=J[re+2*me],_e=27*(ke=uv[1020+3*(ge-ne)+uv[1020+Ee-xe]])+63>>7,Le=18*ke+63>>7,ke=9*ke+63>>7;J[re-3*me]=_i[255+J[re-3*me]+ke],J[re-2*me]=_i[255+Ee+Le],J[re-me]=_i[255+ne+_e],J[re+0]=_i[255+ge-_e],J[re+me]=_i[255+xe-Le],J[re+2*me]=_i[255+Ue-ke]}m+=Q}}function _s(d,m,x,Q,H,G,z,$){for(G=2*G+1;0<H--;){if(So(d,m,x,G,z))if(za(d,m,x,$))No(d,m,x);else{var J=d,re=m,me=x,Ee=J[re-me],ne=J[re+0],ge=J[re+me],xe=Gp[112+(4+(Ue=3*(ne-Ee))>>3)],Ue=Gp[112+(Ue+3>>3)],_e=xe+1>>1;J[re-2*me]=_i[255+J[re-2*me]+_e],J[re-me]=_i[255+Ee+Ue],J[re+0]=_i[255+ne-xe],J[re+me]=_i[255+ge-_e]}m+=Q}}function v(d,m,x,Q,H,G){Vs(d,m,x,1,16,Q,H,G)}function O(d,m,x,Q,H,G){Vs(d,m,1,x,16,Q,H,G)}function te(d,m,x,Q,H,G){var z;for(z=3;0<z;--z)_s(d,m+=4*x,x,1,16,Q,H,G)}function de(d,m,x,Q,H,G){var z;for(z=3;0<z;--z)_s(d,m+=4,1,x,16,Q,H,G)}function ye(d,m,x,Q,H,G,z,$){Vs(d,m,H,1,8,G,z,$),Vs(x,Q,H,1,8,G,z,$)}function Pe(d,m,x,Q,H,G,z,$){Vs(d,m,1,H,8,G,z,$),Vs(x,Q,1,H,8,G,z,$)}function je(d,m,x,Q,H,G,z,$){_s(d,m+4*H,H,1,8,G,z,$),_s(x,Q+4*H,H,1,8,G,z,$)}function ut(d,m,x,Q,H,G,z,$){_s(d,m+4,1,H,8,G,z,$),_s(x,Q+4,1,H,8,G,z,$)}function xt(){this.ba=new Ye,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new at,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Kt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ur(){this.ua=0,this.Wa=new it,this.vb=new it,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new U}function Mr(){this.xb=this.a=0,this.l=new Ha,this.ca=new Ye,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ur,this.ab=0,this.gc=a(4,Kt),this.Oc=0}function $r(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ha,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function br(d,m,x,Q,H,G,z){for(d=d==null?0:d[m+0],m=0;m<z;++m)H[G+m]=d+x[Q+m]&255,d=H[G+m]}function gn(d,m,x,Q,H,G,z){var $;if(d==null)br(null,null,x,Q,H,G,z);else for($=0;$<z;++$)H[G+$]=d[m+$]+x[Q+$]&255}function Lr(d,m,x,Q,H,G,z){if(d==null)br(null,null,x,Q,H,G,z);else{var $,J=d[m+0],re=J,me=J;for($=0;$<z;++$)re=me+(J=d[m+$])-re,me=x[Q+$]+(-256&re?0>re?0:255:re)&255,re=J,H[G+$]=me}}function Mn(d,m,x,Q){var H=m.width,G=m.o;if(e(d!=null&&m!=null),0>x||0>=Q||x+Q>G)return null;if(!d.Cc){if(d.ga==null){var z;if(d.ga=new $r,(z=d.ga==null)||(z=m.width*m.o,e(d.Gb.length==0),d.Gb=i(z),d.Uc=0,d.Gb==null?z=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,z=1),z=!z),!z){z=d.ga;var $=d.Fa,J=d.P,re=d.qc,me=d.mb,Ee=d.nb,ne=J+1,ge=re-1,xe=z.l;if(e($!=null&&me!=null&&m!=null),FA[0]=null,FA[1]=br,FA[2]=gn,FA[3]=Lr,z.ca=me,z.tb=Ee,z.c=m.width,z.i=m.height,e(0<z.c&&0<z.i),1>=re)m=0;else if(z.$a=3&$[J+0],z.Z=$[J+0]>>2&3,z.Lc=$[J+0]>>4&3,J=$[J+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||J)m=0;else if(xe.put=Ct,xe.ac=en,xe.bc=Rr,xe.ma=z,xe.width=m.width,xe.height=m.height,xe.Da=m.Da,xe.v=m.v,xe.va=m.va,xe.j=m.j,xe.o=m.o,z.$a)e:{e(z.$a==1),m=ja();t:for(;;){if(m==null){m=0;break e}if(e(z!=null),z.mc=m,m.c=z.c,m.i=z.i,m.l=z.l,m.l.ma=z,m.l.width=z.c,m.l.height=z.i,m.a=0,Y(m.m,$,ne,ge),!vi(z.c,z.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Wt(m.s)?(z.ic=1,$=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i($),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(z.ic=0,m=ua(m,z.c)),!m))break t;m=1;break e}z.mc=null,m=0}else m=ge>=z.c*z.i;z=!m}if(z)return null;d.ga.Lc!=1?d.Ga=0:Q=G-x}e(d.ga!=null),e(x+Q<=G);e:{if(m=($=d.ga).c,G=$.l.o,$.$a==0){if(ne=d.rc,ge=d.Vc,xe=d.Fa,J=d.P+1+x*m,re=d.mb,me=d.nb+x*m,e(J<=d.P+d.qc),$.Z!=0)for(e(FA[$.Z]!=null),z=0;z<Q;++z)FA[$.Z](ne,ge,xe,J,re,me,m),ne=re,ge=me,me+=m,J+=m;else for(z=0;z<Q;++z)n(re,me,xe,J,m),ne=re,ge=me,me+=m,J+=m;d.rc=ne,d.Vc=ge}else{if(e($.mc!=null),m=x+Q,e((z=$.mc)!=null),e(m<=z.i),z.C>=m)m=1;else if($.ic||_n(),$.ic){$=z.V,ne=z.Ba,ge=z.c;var Ue=z.i,_e=(xe=1,J=z.$/ge,re=z.$%ge,me=z.m,Ee=z.s,z.$),Le=ge*Ue,ke=ge*m,Ke=Ee.wc,Oe=_e<ke?He(Ee,re,J):null;e(_e<=Le),e(m<=Ue),e(Wt(Ee));t:for(;;){for(;!me.h&&_e<ke;){if(re&Ke||(Oe=He(Ee,re,J)),e(Oe!=null),Ae(me),256>(Ue=Or(Oe.G[0],Oe.H[0],me)))$[ne+_e]=Ue,++_e,++re>=ge&&(re=0,++J<=m&&!(J%16)&&bt(z,J));else{if(!(280>Ue)){xe=0;break t}Ue=jn(Ue-256,me);var Tt,vt=Or(Oe.G[4],Oe.H[4],me);if(Ae(me),!(_e>=(vt=On(ge,vt=jn(vt,me)))&&Le-_e>=Ue)){xe=0;break t}for(Tt=0;Tt<Ue;++Tt)$[ne+_e+Tt]=$[ne+_e+Tt-vt];for(_e+=Ue,re+=Ue;re>=ge;)re-=ge,++J<=m&&!(J%16)&&bt(z,J);_e<ke&&re&Ke&&(Oe=He(Ee,re,J))}e(me.h==M(me))}bt(z,J>m?m:J);break t}!xe||me.h&&_e<Le?(xe=0,z.a=me.h?5:3):z.$=_e,m=xe}else m=es(z,z.V,z.Ba,z.c,z.i,m,Oa);if(!m){Q=0;break e}}x+Q>=G&&(d.Cc=1),Q=1}if(!Q)return null;if(d.Cc&&((Q=d.ga)!=null&&(Q.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+x*H}function zi(d,m,x,Q,H,G){for(;0<H--;){var z,$=d,J=m+(x?1:0),re=d,me=m+(x?0:3);for(z=0;z<Q;++z){var Ee=re[me+4*z];Ee!=255&&(Ee*=32897,$[J+4*z+0]=$[J+4*z+0]*Ee>>23,$[J+4*z+1]=$[J+4*z+1]*Ee>>23,$[J+4*z+2]=$[J+4*z+2]*Ee>>23)}m+=G}}function pa(d,m,x,Q,H){for(;0<Q--;){var G;for(G=0;G<x;++G){var z=d[m+2*G+0],$=15&(re=d[m+2*G+1]),J=4369*$,re=(240&re|re>>4)*J>>16;d[m+2*G+0]=(240&z|z>>4)*J>>16&240|(15&z|z<<4)*J>>16>>4&15,d[m+2*G+1]=240&re|$}m+=H}}function lu(d,m,x,Q,H,G,z,$){var J,re,me=255;for(re=0;re<H;++re){for(J=0;J<Q;++J){var Ee=d[m+J];G[z+4*J]=Ee,me&=Ee}m+=x,z+=$}return me!=255}function Fo(d,m,x,Q,H){var G;for(G=0;G<H;++G)x[Q+G]=d[m+G]>>8}function _n(){ah=zi,Vx=pa,Kx=lu,Gx=Fo}function si(d,m,x){I[d]=function(Q,H,G,z,$,J,re,me,Ee,ne,ge,xe,Ue,_e,Le,ke,Ke){var Oe,Tt=Ke-1>>1,vt=$[J+0]|re[me+0]<<16,Xt=Ee[ne+0]|ge[xe+0]<<16;e(Q!=null);var Et=3*vt+Xt+131074>>2;for(m(Q[H+0],255&Et,Et>>16,Ue,_e),G!=null&&(Et=3*Xt+vt+131074>>2,m(G[z+0],255&Et,Et>>16,Le,ke)),Oe=1;Oe<=Tt;++Oe){var dr=$[J+Oe]|re[me+Oe]<<16,Gn=Ee[ne+Oe]|ge[xe+Oe]<<16,Yt=vt+dr+Xt+Gn+524296,It=Yt+2*(dr+Xt)>>3;Et=It+vt>>1,vt=(Yt=Yt+2*(vt+Gn)>>3)+dr>>1,m(Q[H+2*Oe-1],255&Et,Et>>16,Ue,_e+(2*Oe-1)*x),m(Q[H+2*Oe-0],255&vt,vt>>16,Ue,_e+(2*Oe-0)*x),G!=null&&(Et=Yt+Xt>>1,vt=It+Gn>>1,m(G[z+2*Oe-1],255&Et,Et>>16,Le,ke+(2*Oe-1)*x),m(G[z+2*Oe+0],255&vt,vt>>16,Le,ke+(2*Oe+0)*x)),vt=dr,Xt=Gn}1&Ke||(Et=3*vt+Xt+131074>>2,m(Q[H+Ke-1],255&Et,Et>>16,Ue,_e+(Ke-1)*x),G!=null&&(Et=3*Xt+vt+131074>>2,m(G[z+Ke-1],255&Et,Et>>16,Le,ke+(Ke-1)*x)))}}function EA(){Xi[qp]=kL,Xi[zp]=rC,Xi[Yx]=RL,Xi[$p]=nC,Xi[Wp]=sC,Xi[dv]=iC,Xi[Jx]=DL,Xi[hv]=rC,Xi[fv]=nC,Xi[Xp]=sC,Xi[pv]=iC}function bi(d){return d&-16384?0>d?0:255:d>>jL}function h(d,m){return bi((19077*d>>8)+(26149*m>>8)-14234)}function _(d,m,x){return bi((19077*d>>8)-(6419*m>>8)-(13320*x>>8)+8708)}function P(d,m){return bi((19077*d>>8)+(33050*m>>8)-17685)}function X(d,m,x,Q,H){Q[H+0]=h(d,x),Q[H+1]=_(d,m,x),Q[H+2]=P(d,m)}function be(d,m,x,Q,H){Q[H+0]=P(d,m),Q[H+1]=_(d,m,x),Q[H+2]=h(d,x)}function Fe(d,m,x,Q,H){var G=_(d,m,x);m=G<<3&224|P(d,m)>>3,Q[H+0]=248&h(d,x)|G>>5,Q[H+1]=m}function Ve(d,m,x,Q,H){var G=240&P(d,m)|15;Q[H+0]=240&h(d,x)|_(d,m,x)>>4,Q[H+1]=G}function yr(d,m,x,Q,H){Q[H+0]=255,X(d,m,x,Q,H+1)}function tn(d,m,x,Q,H){be(d,m,x,Q,H),Q[H+3]=255}function nr(d,m,x,Q,H){X(d,m,x,Q,H),Q[H+3]=255}function or(d,m){return 0>d?0:d>m?m:d}function _r(d,m,x){I[d]=function(Q,H,G,z,$,J,re,me,Ee){for(var ne=me+(-2&Ee)*x;me!=ne;)m(Q[H+0],G[z+0],$[J+0],re,me),m(Q[H+1],G[z+0],$[J+0],re,me+x),H+=2,++z,++J,me+=2*x;1&Ee&&m(Q[H+0],G[z+0],$[J+0],re,me)}}function $i(d,m,x){return x==0?d==0?m==0?6:5:m==0?4:0:x}function ds(d,m,x,Q,H){switch(d>>>30){case 3:Nn(m,x,Q,H,0);break;case 2:Uo(m,x,Q,H);break;case 1:to(m,x,Q,H)}}function xi(d,m){var x,Q,H=m.M,G=m.Nb,z=d.oc,$=d.pc+40,J=d.oc,re=d.pc+584,me=d.oc,Ee=d.pc+600;for(x=0;16>x;++x)z[$+32*x-1]=129;for(x=0;8>x;++x)J[re+32*x-1]=129,me[Ee+32*x-1]=129;for(0<H?z[$-1-32]=J[re-1-32]=me[Ee-1-32]=129:(s(z,$-32-1,127,21),s(J,re-32-1,127,9),s(me,Ee-32-1,127,9)),Q=0;Q<d.za;++Q){var ne=m.ya[m.aa+Q];if(0<Q){for(x=-1;16>x;++x)n(z,$+32*x-4,z,$+32*x+12,4);for(x=-1;8>x;++x)n(J,re+32*x-4,J,re+32*x+4,4),n(me,Ee+32*x-4,me,Ee+32*x+4,4)}var ge=d.Gd,xe=d.Hd+Q,Ue=ne.ad,_e=ne.Hc;if(0<H&&(n(z,$-32,ge[xe].y,0,16),n(J,re-32,ge[xe].f,0,8),n(me,Ee-32,ge[xe].ea,0,8)),ne.Za){var Le=z,ke=$-32+16;for(0<H&&(Q>=d.za-1?s(Le,ke,ge[xe].y[15],4):n(Le,ke,ge[xe+1].y,0,4)),x=0;4>x;x++)Le[ke+128+x]=Le[ke+256+x]=Le[ke+384+x]=Le[ke+0+x];for(x=0;16>x;++x,_e<<=2)Le=z,ke=$+oC[x],ma[ne.Ob[x]](Le,ke),ds(_e,Ue,16*+x,Le,ke)}else if(Le=$i(Q,H,ne.Ob[0]),SA[Le](z,$),_e!=0)for(x=0;16>x;++x,_e<<=2)ds(_e,Ue,16*+x,z,$+oC[x]);for(x=ne.Gc,Le=$i(Q,H,ne.Dd),Qo[Le](J,re),Qo[Le](me,Ee),_e=Ue,Le=J,ke=re,255&(ne=0|x)&&(170&ne?hu(_e,256,Le,ke):ih(_e,256,Le,ke)),ne=me,_e=Ee,255&(x>>=8)&&(170&x?hu(Ue,320,ne,_e):ih(Ue,320,ne,_e)),H<d.Ub-1&&(n(ge[xe].y,0,z,$+480,16),n(ge[xe].f,0,J,re+224,8),n(ge[xe].ea,0,me,Ee+224,8)),x=8*G*d.B,ge=d.sa,xe=d.ta+16*Q+16*G*d.R,Ue=d.qa,ne=d.ra+8*Q+x,_e=d.Ha,Le=d.Ia+8*Q+x,x=0;16>x;++x)n(ge,xe+x*d.R,z,$+32*x,16);for(x=0;8>x;++x)n(Ue,ne+x*d.B,J,re+32*x,8),n(_e,Le+x*d.B,me,Ee+32*x,8)}}function Xa(d,m,x,Q,H,G,z,$,J){var re=[0],me=[0],Ee=0,ne=J!=null?J.kd:0,ge=J??new Rt;if(d==null||12>x)return 7;ge.data=d,ge.w=m,ge.ha=x,m=[m],x=[x],ge.gb=[ge.gb];e:{var xe=m,Ue=x,_e=ge.gb;if(e(d!=null),e(Ue!=null),e(_e!=null),_e[0]=0,12<=Ue[0]&&!r(d,xe[0],"RIFF")){if(r(d,xe[0]+8,"WEBP")){_e=3;break e}var Le=Ce(d,xe[0]+4);if(12>Le||4294967286<Le){_e=3;break e}if(ne&&Le>Ue[0]-8){_e=7;break e}_e[0]=Le,xe[0]+=12,Ue[0]-=12}_e=0}if(_e!=0)return _e;for(Le=0<ge.gb[0],x=x[0];;){e:{var ke=d;Ue=m,_e=x;var Ke=re,Oe=me,Tt=xe=[0];if((Et=Ee=[Ee])[0]=0,8>_e[0])_e=7;else{if(!r(ke,Ue[0],"VP8X")){if(Ce(ke,Ue[0]+4)!=10){_e=3;break e}if(18>_e[0]){_e=7;break e}var vt=Ce(ke,Ue[0]+8),Xt=1+Ne(ke,Ue[0]+12);if(2147483648<=Xt*(ke=1+Ne(ke,Ue[0]+15))){_e=3;break e}Tt!=null&&(Tt[0]=vt),Ke!=null&&(Ke[0]=Xt),Oe!=null&&(Oe[0]=ke),Ue[0]+=18,_e[0]-=18,Et[0]=1}_e=0}}if(Ee=Ee[0],xe=xe[0],_e!=0)return _e;if(Ue=!!(2&xe),!Le&&Ee)return 3;if(G!=null&&(G[0]=!!(16&xe)),z!=null&&(z[0]=Ue),$!=null&&($[0]=0),z=re[0],xe=me[0],Ee&&Ue&&J==null){_e=0;break}if(4>x){_e=7;break}if(Le&&Ee||!Le&&!Ee&&!r(d,m[0],"ALPH")){x=[x],ge.na=[ge.na],ge.P=[ge.P],ge.Sa=[ge.Sa];e:{vt=d,_e=m,Le=x;var Et=ge.gb;Ke=ge.na,Oe=ge.P,Tt=ge.Sa,Xt=22,e(vt!=null),e(Le!=null),ke=_e[0];var dr=Le[0];for(e(Ke!=null),e(Tt!=null),Ke[0]=null,Oe[0]=null,Tt[0]=0;;){if(_e[0]=ke,Le[0]=dr,8>dr){_e=7;break e}var Gn=Ce(vt,ke+4);if(4294967286<Gn){_e=3;break e}var Yt=8+Gn+1&-2;if(Xt+=Yt,0<Et&&Xt>Et){_e=3;break e}if(!r(vt,ke,"VP8 ")||!r(vt,ke,"VP8L")){_e=0;break e}if(dr[0]<Yt){_e=7;break e}r(vt,ke,"ALPH")||(Ke[0]=vt,Oe[0]=ke+8,Tt[0]=Gn),ke+=Yt,dr-=Yt}}if(x=x[0],ge.na=ge.na[0],ge.P=ge.P[0],ge.Sa=ge.Sa[0],_e!=0)break}x=[x],ge.Ja=[ge.Ja],ge.xa=[ge.xa];e:if(Et=d,_e=m,Le=x,Ke=ge.gb[0],Oe=ge.Ja,Tt=ge.xa,vt=_e[0],ke=!r(Et,vt,"VP8 "),Xt=!r(Et,vt,"VP8L"),e(Et!=null),e(Le!=null),e(Oe!=null),e(Tt!=null),8>Le[0])_e=7;else{if(ke||Xt){if(Et=Ce(Et,vt+4),12<=Ke&&Et>Ke-12){_e=3;break e}if(ne&&Et>Le[0]-8){_e=7;break e}Oe[0]=Et,_e[0]+=8,Le[0]-=8,Tt[0]=Xt}else Tt[0]=5<=Le[0]&&Et[vt+0]==47&&!(Et[vt+4]>>5),Oe[0]=Le[0];_e=0}if(x=x[0],ge.Ja=ge.Ja[0],ge.xa=ge.xa[0],m=m[0],_e!=0)break;if(4294967286<ge.Ja)return 3;if($==null||Ue||($[0]=ge.xa?2:1),z=[z],xe=[xe],ge.xa){if(5>x){_e=7;break}$=z,ne=xe,Ue=G,d==null||5>x?d=0:5<=x&&d[m+0]==47&&!(d[m+4]>>5)?(Le=[0],Et=[0],Ke=[0],Y(Oe=new W,d,m,x),Os(Oe,Le,Et,Ke)?($!=null&&($[0]=Le[0]),ne!=null&&(ne[0]=Et[0]),Ue!=null&&(Ue[0]=Ke[0]),d=1):d=0):d=0}else{if(10>x){_e=7;break}$=xe,d==null||10>x||!Wl(d,m+3,x-3)?d=0:(ne=d[m+0]|d[m+1]<<8|d[m+2]<<16,Ue=16383&(d[m+7]<<8|d[m+6]),d=16383&(d[m+9]<<8|d[m+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=ge.Ja||!Ue||!d?d=0:(z&&(z[0]=Ue),$&&($[0]=d),d=1))}if(!d||(z=z[0],xe=xe[0],Ee&&(re[0]!=z||me[0]!=xe)))return 3;J!=null&&(J[0]=ge,J.offset=m-J.w,e(4294967286>m-J.w),e(J.offset==J.ha-x));break}return _e==0||_e==7&&Ee&&J==null?(G!=null&&(G[0]|=ge.na!=null&&0<ge.na.length),Q!=null&&(Q[0]=z),H!=null&&(H[0]=xe),0):_e}function ii(d,m,x){var Q=m.width,H=m.height,G=0,z=0,$=Q,J=H;if(m.Da=d!=null&&0<d.Da,m.Da&&($=d.cd,J=d.bd,G=d.v,z=d.j,11>x||(G&=-2,z&=-2),0>G||0>z||0>=$||0>=J||G+$>Q||z+J>H))return 0;if(m.v=G,m.j=z,m.va=G+$,m.o=z+J,m.U=$,m.T=J,m.da=d!=null&&0<d.da,m.da){if(!et($,J,x=[d.ib],G=[d.hb]))return 0;m.ib=x[0],m.hb=G[0]}return m.ob=d!=null&&d.ob,m.Kb=d==null||!d.Sd,m.da&&(m.ob=m.ib<3*Q/4&&m.hb<3*H/4,m.Kb=0),1}function ai(d){if(d==null)return 2;if(11>d.S){var m=d.f.RGBA;m.fb+=(d.height-1)*m.A,m.A=-m.A}else m=d.f.kb,d=d.height,m.O+=(d-1)*m.fa,m.fa=-m.fa,m.N+=(d-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(d-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(d-1)*m.lb,m.lb=-m.lb);return 0}function ec(d,m,x,Q){if(Q==null||0>=d||0>=m)return 2;if(x!=null){if(x.Da){var H=x.cd,G=x.bd,z=-2&x.v,$=-2&x.j;if(0>z||0>$||0>=H||0>=G||z+H>d||$+G>m)return 2;d=H,m=G}if(x.da){if(!et(d,m,H=[x.ib],G=[x.hb]))return 2;d=H[0],m=G[0]}}Q.width=d,Q.height=m;e:{var J=Q.width,re=Q.height;if(d=Q.S,0>=J||0>=re||!(d>=qp&&13>d))d=2;else{if(0>=Q.Rd&&Q.sd==null){z=G=H=m=0;var me=($=J*AC[d])*re;if(11>d||(G=(re+1)/2*(m=(J+1)/2),d==12&&(z=(H=J)*re)),(re=i(me+2*G+z))==null){d=1;break e}Q.sd=re,11>d?((J=Q.f.RGBA).eb=re,J.fb=0,J.A=$,J.size=me):((J=Q.f.kb).y=re,J.O=0,J.fa=$,J.Fd=me,J.f=re,J.N=0+me,J.Ab=m,J.Cd=G,J.ea=re,J.W=0+me+G,J.Db=m,J.Ed=G,d==12&&(J.F=re,J.J=0+me+2*G),J.Tc=z,J.lb=H)}if(m=1,H=Q.S,G=Q.width,z=Q.height,H>=qp&&13>H)if(11>H)d=Q.f.RGBA,m&=($=Math.abs(d.A))*(z-1)+G<=d.size,m&=$>=G*AC[H],m&=d.eb!=null;else{d=Q.f.kb,$=(G+1)/2,me=(z+1)/2,J=Math.abs(d.fa),re=Math.abs(d.Ab);var Ee=Math.abs(d.Db),ne=Math.abs(d.lb),ge=ne*(z-1)+G;m&=J*(z-1)+G<=d.Fd,m&=re*(me-1)+$<=d.Cd,m=(m&=Ee*(me-1)+$<=d.Ed)&J>=G&re>=$&Ee>=$,m&=d.y!=null,m&=d.f!=null,m&=d.ea!=null,H==12&&(m&=ne>=G,m&=ge<=d.Tc,m&=d.F!=null)}else m=0;d=m?0:2}}return d!=0||x!=null&&x.fd&&(d=ai(Q)),d}var Ya=64,IA=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],rh=24,NA=32,En=8,cv=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Te("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(d){return d},I.Predictor2=function(d,m,x){return m[x+0]},I.Predictor3=function(d,m,x){return m[x+1]},I.Predictor4=function(d,m,x){return m[x-1]},I.Predictor5=function(d,m,x){return Me(Me(d,m[x+1]),m[x+0])},I.Predictor6=function(d,m,x){return Me(d,m[x-1])},I.Predictor7=function(d,m,x){return Me(d,m[x+0])},I.Predictor8=function(d,m,x){return Me(m[x-1],m[x+0])},I.Predictor9=function(d,m,x){return Me(m[x+0],m[x+1])},I.Predictor10=function(d,m,x){return Me(Me(d,m[x-1]),Me(m[x+0],m[x+1]))},I.Predictor11=function(d,m,x){var Q=m[x+0];return 0>=ze(Q>>24&255,d>>24&255,(m=m[x-1])>>24&255)+ze(Q>>16&255,d>>16&255,m>>16&255)+ze(Q>>8&255,d>>8&255,m>>8&255)+ze(255&Q,255&d,255&m)?Q:d},I.Predictor12=function(d,m,x){var Q=m[x+0];return(nt((d>>24&255)+(Q>>24&255)-((m=m[x-1])>>24&255))<<24|nt((d>>16&255)+(Q>>16&255)-(m>>16&255))<<16|nt((d>>8&255)+(Q>>8&255)-(m>>8&255))<<8|nt((255&d)+(255&Q)-(255&m)))>>>0},I.Predictor13=function(d,m,x){var Q=m[x-1];return(ct((d=Me(d,m[x+0]))>>24&255,Q>>24&255)<<24|ct(d>>16&255,Q>>16&255)<<16|ct(d>>8&255,Q>>8&255)<<8|ct(255&d,255&Q))>>>0};var Ja=I.PredictorAdd0;I.PredictorAdd1=Lt,Te("Predictor2","PredictorAdd2"),Te("Predictor3","PredictorAdd3"),Te("Predictor4","PredictorAdd4"),Te("Predictor5","PredictorAdd5"),Te("Predictor6","PredictorAdd6"),Te("Predictor7","PredictorAdd7"),Te("Predictor8","PredictorAdd8"),Te("Predictor9","PredictorAdd9"),Te("Predictor10","PredictorAdd10"),Te("Predictor11","PredictorAdd11"),Te("Predictor12","PredictorAdd12"),Te("Predictor13","PredictorAdd13");var Za=I.PredictorAdd2;mt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var cu,nh=I.ColorIndexInverseTransform,uu=I.MapARGB,du=I.VP8LColorIndexInverseTransformAlpha,tc=I.MapAlpha,rc=I.VP8LPredictorsAdd=[];rc.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var To,sh,Ci,eo,Hr,Vr,In,Nn,Uo,hu,to,ih,Tx,Ux,Qx,Lx,Px,kx,Rx,Dx,jx,Ox,Mx,Hx,ah,Vx,Kx,Gx,qx=i(511),zx=i(2041),$x=i(225),Wx=i(767),Xx=0,uv=zx,Gp=$x,_i=Wx,Wi=qx,qp=0,zp=1,Yx=2,$p=3,Wp=4,dv=5,Jx=6,hv=7,fv=8,Xp=9,pv=10,bL=[2,3,7],xL=[3,3,11],Zx=[280,256,256,256,40],CL=[0,1,1,1,0],_L=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],EL=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],IL=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],NL=8,mv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oh=null,SL=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],FL=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],eC=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],TL=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],UL=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],QL=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],LL=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],SA=[],ma=[],Qo=[],PL=1,tC=2,FA=[],Xi=[];si("UpsampleRgbLinePair",X,3),si("UpsampleBgrLinePair",be,3),si("UpsampleRgbaLinePair",nr,4),si("UpsampleBgraLinePair",tn,4),si("UpsampleArgbLinePair",yr,4),si("UpsampleRgba4444LinePair",Ve,2),si("UpsampleRgb565LinePair",Fe,2);var kL=I.UpsampleRgbLinePair,RL=I.UpsampleBgrLinePair,rC=I.UpsampleRgbaLinePair,nC=I.UpsampleBgraLinePair,sC=I.UpsampleArgbLinePair,iC=I.UpsampleRgba4444LinePair,DL=I.UpsampleRgb565LinePair,Yp=16,Jp=1<<Yp-1,Ah=-227,wv=482,jL=6,aC=0,OL=i(256),ML=i(256),HL=i(256),VL=i(256),KL=i(wv-Ah),GL=i(wv-Ah);_r("YuvToRgbRow",X,3),_r("YuvToBgrRow",be,3),_r("YuvToRgbaRow",nr,4),_r("YuvToBgraRow",tn,4),_r("YuvToArgbRow",yr,4),_r("YuvToRgba4444Row",Ve,2),_r("YuvToRgb565Row",Fe,2);var oC=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Zp=[0,2,8],qL=[8,7,6,4,4,2,2,2,1,1,1,1],zL=1;this.WebPDecodeRGBA=function(d,m,x,Q,H){var G=zp,z=new xt,$=new Ye;z.ba=$,$.S=G,$.width=[$.width],$.height=[$.height];var J=$.width,re=$.height,me=new Je;if(me==null||d==null)var Ee=2;else e(me!=null),Ee=Xa(d,m,x,me.width,me.height,me.Pd,me.Qd,me.format,null);if(Ee!=0?J=0:(J!=null&&(J[0]=me.width[0]),re!=null&&(re[0]=me.height[0]),J=1),J){$.width=$.width[0],$.height=$.height[0],Q!=null&&(Q[0]=$.width),H!=null&&(H[0]=$.height);e:{if(Q=new Ha,(H=new Rt).data=d,H.w=m,H.ha=x,H.kd=1,m=[0],e(H!=null),((d=Xa(H.data,H.w,H.ha,null,null,null,m,null,H))==0||d==7)&&m[0]&&(d=4),(m=d)==0){if(e(z!=null),Q.data=H.data,Q.w=H.w+H.offset,Q.ha=H.ha-H.offset,Q.put=Ct,Q.ac=en,Q.bc=Rr,Q.ma=z,H.xa){if((d=ja())==null){z=1;break e}if(function(ne,ge){var xe=[0],Ue=[0],_e=[0];t:for(;;){if(ne==null)return 0;if(ge==null)return ne.a=2,0;if(ne.l=ge,ne.a=0,Y(ne.m,ge.data,ge.w,ge.ha),!Os(ne.m,xe,Ue,_e)){ne.a=3;break t}if(ne.xb=tC,ge.width=xe[0],ge.height=Ue[0],!vi(xe[0],Ue[0],1,ne,null))break t;return 1}return e(ne.a!=0),0}(d,Q)){if(Q=(m=ec(Q.width,Q.height,z.Oa,z.ba))==0){t:{Q=d;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((x=Q.l)!=null),e((H=x.ma)!=null),Q.xb!=0){if(Q.ca=H.ba,Q.tb=H.tb,e(Q.ca!=null),!ii(H.Oa,x,$p)){Q.a=2;break r}if(!ua(Q,x.width)||x.da)break r;if((x.da||Ge(Q.ca.S))&&_n(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&_n()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!se(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!es(Q,Q.V,Q.Ba,Q.c,Q.i,x.o,Zt))break r;H.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(m=d.a)}else m=d.a}else{if((d=new $l)==null){z=1;break e}if(d.Fa=H.na,d.P=H.P,d.qc=H.Sa,au(d,Q)){if((m=ec(Q.width,Q.height,z.Oa,z.ba))==0){if(d.Aa=0,x=z.Oa,e((H=d)!=null),x!=null){if(0<(J=0>(J=x.Md)?0:100<J?255:255*J/100)){for(re=me=0;4>re;++re)12>(Ee=H.pb[re]).lc&&(Ee.ia=J*qL[0>Ee.lc?0:Ee.lc]>>3),me|=Ee.ia;me&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=x.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ne,ge){if(ne==null)return 0;if(ge==null)return hn(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!au(ne,ge))return 0;if(e(ne.cb),ge.ac==null||ge.ac(ge)){ge.ob&&(ne.L=0);var xe=Zp[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=ge.v-xe>>4,ne.zb=ge.j-xe>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=ge.o+15+xe>>4,ne.Hb=ge.va+15+xe>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var Ue=ne.ed;for(xe=0;4>xe;++xe){var _e;if(ne.Qa.Cb){var Le=ne.Qa.Lb[xe];ne.Qa.Fb||(Le+=Ue.Tb)}else Le=Ue.Tb;for(_e=0;1>=_e;++_e){var ke=ne.gd[xe][_e],Ke=Le;if(Ue.Pc&&(Ke+=Ue.vd[0],_e&&(Ke+=Ue.od[0])),0<(Ke=0>Ke?0:63<Ke?63:Ke)){var Oe=Ke;0<Ue.wb&&(Oe=4<Ue.wb?Oe>>2:Oe>>1)>9-Ue.wb&&(Oe=9-Ue.wb),1>Oe&&(Oe=1),ke.dd=Oe,ke.tc=2*Ke+Oe,ke.ld=40<=Ke?2:15<=Ke?1:0}else ke.tc=0;ke.La=_e}}}xe=0}else hn(ne,6,"Frame setup failed"),xe=ne.a;if(xe=xe==0){if(xe){ne.$c=0,0<ne.Aa||(ne.Ic=zL);t:{xe=ne.Ic,Ue=4*(Oe=ne.za);var Tt=32*Oe,vt=Oe+1,Xt=0<ne.L?Oe*(0<ne.Aa?2:1):0,Et=(ne.Aa==2?2:1)*Oe;if((ke=Ue+832+(_e=3*(16*xe+Zp[ne.L])/2*Tt)+(Le=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=ke)xe=0;else{if(ke>ne.Vb){if(ne.Vb=0,ne.Ec=i(ke),ne.Fc=0,ne.Ec==null){xe=hn(ne,1,"no memory during frame initialization.");break t}ne.Vb=ke}ke=ne.Ec,Ke=ne.Fc,ne.Ac=ke,ne.Bc=Ke,Ke+=Ue,ne.Gd=a(Tt,ql),ne.Hd=0,ne.rb=a(vt+1,yi),ne.sb=1,ne.wa=Xt?a(Xt,ts):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=Oe),e(!0),ne.oc=ke,ne.pc=Ke,Ke+=832,ne.ya=a(Et,Kl),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=Oe),ne.R=16*Oe,ne.B=8*Oe,Oe=(Tt=Zp[ne.L])*ne.R,Tt=Tt/2*ne.B,ne.sa=ke,ne.ta=Ke+Oe,ne.qa=ne.sa,ne.ra=ne.ta+16*xe*ne.R+Tt,ne.Ha=ne.qa,ne.Ia=ne.ra+8*xe*ne.B+Tt,ne.$c=0,Ke+=_e,ne.mb=Le?ke:null,ne.nb=Le?Ke:null,e(Ke+Le<=ne.Fc+ne.Vb),Va(ne),s(ne.Ac,ne.Bc,0,Ue),xe=1}}if(xe){if(ge.ka=0,ge.y=ne.sa,ge.O=ne.ta,ge.f=ne.qa,ge.N=ne.ra,ge.ea=ne.Ha,ge.Vd=ne.Ia,ge.fa=ne.R,ge.Rc=ne.B,ge.F=null,ge.J=0,!Xx){for(xe=-255;255>=xe;++xe)qx[255+xe]=0>xe?-xe:xe;for(xe=-1020;1020>=xe;++xe)zx[1020+xe]=-128>xe?-128:127<xe?127:xe;for(xe=-112;112>=xe;++xe)$x[112+xe]=-16>xe?-16:15<xe?15:xe;for(xe=-255;510>=xe;++xe)Wx[255+xe]=0>xe?0:255<xe?255:xe;Xx=1}In=Ka,Nn=yA,hu=ou,to=ar,ih=_o,Uo=vA,Tx=v,Ux=O,Qx=ye,Lx=Pe,Px=te,kx=de,Rx=je,Dx=ut,jx=$a,Ox=Wa,Mx=Hs,Hx=_A,ma[0]=Zd,ma[1]=Xl,ma[2]=qa,ma[3]=Jd,ma[4]=eh,ma[5]=ha,ma[6]=rs,ma[7]=th,ma[8]=fa,ma[9]=bA,SA[0]=ni,SA[1]=Xd,SA[2]=Yd,SA[3]=Yl,SA[4]=Gi,SA[5]=Ga,SA[6]=BA,Qo[0]=Io,Qo[1]=Au,Qo[2]=xA,Qo[3]=Bi,Qo[4]=Qr,Qo[5]=Jl,Qo[6]=Zl,xe=1}else xe=0}xe&&(xe=function(dr,Gn){for(dr.M=0;dr.M<dr.Va;++dr.M){var Yt,It=dr.Jc[dr.M&dr.Xb],tt=dr.m,Sn=dr;for(Yt=0;Yt<Sn.za;++Yt){var qt=tt,fr=Sn,Wr=fr.Ac,hs=fr.Bc+4*Yt,Ks=fr.zc,wn=fr.ya[fr.aa+Yt];if(fr.Qa.Bb?wn.$b=we(qt,fr.Pa.jb[0])?2+we(qt,fr.Pa.jb[2]):we(qt,fr.Pa.jb[1]):wn.$b=0,fr.kc&&(wn.Ad=we(qt,fr.Bd)),wn.Za=!we(qt,145)+0,wn.Za){var Es=wn.Ob,Gs=0;for(fr=0;4>fr;++fr){var qn,mr=Ks[0+fr];for(qn=0;4>qn;++qn){mr=UL[Wr[hs+qn]][mr];for(var Er=eC[we(qt,mr[0])];0<Er;)Er=eC[2*Er+we(qt,mr[Er])];mr=-Er,Wr[hs+qn]=mr}n(Es,Gs,Wr,hs,4),Gs+=4,Ks[0+fr]=mr}}else mr=we(qt,156)?we(qt,128)?1:3:we(qt,163)?2:0,wn.Ob[0]=mr,s(Wr,hs,mr,4),s(Ks,0,mr,4);wn.Dd=we(qt,142)?we(qt,114)?we(qt,183)?1:3:2:0}if(Sn.m.Ka)return hn(dr,7,"Premature end-of-partition0 encountered.");for(;dr.ja<dr.za;++dr.ja){if(Sn=It,qt=(tt=dr).rb[tt.sb-1],Wr=tt.rb[tt.sb+tt.ja],Yt=tt.ya[tt.aa+tt.ja],hs=tt.kc?Yt.Ad:0)qt.la=Wr.la=0,Yt.Za||(qt.Na=Wr.Na=0),Yt.Hc=0,Yt.Gc=0,Yt.ia=0;else{var vn,Ir;if(qt=Wr,Wr=Sn,hs=tt.Pa.Xc,Ks=tt.ya[tt.aa+tt.ja],wn=tt.pb[Ks.$b],fr=Ks.ad,Es=0,Gs=tt.rb[tt.sb-1],mr=qn=0,s(fr,Es,0,384),Ks.Za)var fs=0,ga=hs[3];else{Er=i(16);var Fn=qt.Na+Gs.Na;if(Fn=oh(Wr,hs[1],Fn,wn.Eb,0,Er,0),qt.Na=Gs.Na=(0<Fn)+0,1<Fn)In(Er,0,fr,Es);else{var oi=Er[0]+3>>3;for(Er=0;256>Er;Er+=16)fr[Es+Er]=oi}fs=1,ga=hs[0]}var Dr=15&qt.la,zn=15&Gs.la;for(Er=0;4>Er;++Er){var Ei=1&zn;for(oi=Ir=0;4>oi;++oi)Dr=Dr>>1|(Ei=(Fn=oh(Wr,ga,Fn=Ei+(1&Dr),wn.Sc,fs,fr,Es))>fs)<<7,Ir=Ir<<2|(3<Fn?3:1<Fn?2:fr[Es+0]!=0),Es+=16;Dr>>=4,zn=zn>>1|Ei<<7,qn=(qn<<8|Ir)>>>0}for(ga=Dr,fs=zn>>4,vn=0;4>vn;vn+=2){for(Ir=0,Dr=qt.la>>4+vn,zn=Gs.la>>4+vn,Er=0;2>Er;++Er){for(Ei=1&zn,oi=0;2>oi;++oi)Fn=Ei+(1&Dr),Dr=Dr>>1|(Ei=0<(Fn=oh(Wr,hs[2],Fn,wn.Qc,0,fr,Es)))<<3,Ir=Ir<<2|(3<Fn?3:1<Fn?2:fr[Es+0]!=0),Es+=16;Dr>>=2,zn=zn>>1|Ei<<5}mr|=Ir<<4*vn,ga|=Dr<<4<<vn,fs|=(240&zn)<<vn}qt.la=ga,Gs.la=fs,Ks.Hc=qn,Ks.Gc=mr,Ks.ia=43690&mr?0:wn.ia,hs=!(qn|mr)}if(0<tt.L&&(tt.wa[tt.Y+tt.ja]=tt.gd[Yt.$b][Yt.Za],tt.wa[tt.Y+tt.ja].La|=!hs),Sn.Ka)return hn(dr,7,"Premature end-of-file encountered.")}if(Va(dr),tt=Gn,Sn=1,Yt=(It=dr).D,qt=0<It.L&&It.M>=It.zb&&It.M<=It.Va,It.Aa==0)t:{if(Yt.M=It.M,Yt.uc=qt,xi(It,Yt),Sn=1,Yt=(Ir=It.D).Nb,qt=(mr=Zp[It.L])*It.R,Wr=mr/2*It.B,Er=16*Yt*It.R,oi=8*Yt*It.B,hs=It.sa,Ks=It.ta-qt+Er,wn=It.qa,fr=It.ra-Wr+oi,Es=It.Ha,Gs=It.Ia-Wr+oi,zn=(Dr=Ir.M)==0,qn=Dr>=It.Va-1,It.Aa==2&&xi(It,Ir),Ir.uc)for(Ei=(Fn=It).D.M,e(Fn.D.uc),Ir=Fn.yb;Ir<Fn.Hb;++Ir){fs=Ir,ga=Ei;var qs=(Ii=(ps=Fn).D).Nb;vn=ps.R;var Ii=Ii.wa[Ii.Y+fs],Ni=ps.sa,Ai=ps.ta+16*qs*vn+16*fs,Si=Ii.dd,Kr=Ii.tc;if(Kr!=0)if(e(3<=Kr),ps.L==1)0<fs&&Ox(Ni,Ai,vn,Kr+4),Ii.La&&Hx(Ni,Ai,vn,Kr),0<ga&&jx(Ni,Ai,vn,Kr+4),Ii.La&&Mx(Ni,Ai,vn,Kr);else{var Fi=ps.B,wa=ps.qa,nc=ps.ra+8*qs*Fi+8*fs,Lo=ps.Ha,ps=ps.Ia+8*qs*Fi+8*fs;qs=Ii.ld,0<fs&&(Ux(Ni,Ai,vn,Kr+4,Si,qs),Lx(wa,nc,Lo,ps,Fi,Kr+4,Si,qs)),Ii.La&&(kx(Ni,Ai,vn,Kr,Si,qs),Dx(wa,nc,Lo,ps,Fi,Kr,Si,qs)),0<ga&&(Tx(Ni,Ai,vn,Kr+4,Si,qs),Qx(wa,nc,Lo,ps,Fi,Kr+4,Si,qs)),Ii.La&&(Px(Ni,Ai,vn,Kr,Si,qs),Rx(wa,nc,Lo,ps,Fi,Kr,Si,qs))}}if(It.ia&&alert("todo:DitherRow"),tt.put!=null){if(Ir=16*Dr,Dr=16*(Dr+1),zn?(tt.y=It.sa,tt.O=It.ta+Er,tt.f=It.qa,tt.N=It.ra+oi,tt.ea=It.Ha,tt.W=It.Ia+oi):(Ir-=mr,tt.y=hs,tt.O=Ks,tt.f=wn,tt.N=fr,tt.ea=Es,tt.W=Gs),qn||(Dr-=mr),Dr>tt.o&&(Dr=tt.o),tt.F=null,tt.J=null,It.Fa!=null&&0<It.Fa.length&&Ir<Dr&&(tt.J=Mn(It,tt,Ir,Dr-Ir),tt.F=It.mb,tt.F==null&&tt.F.length==0)){Sn=hn(It,3,"Could not decode alpha data.");break t}Ir<tt.j&&(mr=tt.j-Ir,Ir=tt.j,e(!(1&mr)),tt.O+=It.R*mr,tt.N+=It.B*(mr>>1),tt.W+=It.B*(mr>>1),tt.F!=null&&(tt.J+=tt.width*mr)),Ir<Dr&&(tt.O+=tt.v,tt.N+=tt.v>>1,tt.W+=tt.v>>1,tt.F!=null&&(tt.J+=tt.v),tt.ka=Ir-tt.j,tt.U=tt.va-tt.v,tt.T=Dr-Ir,Sn=tt.put(tt))}Yt+1!=It.Ic||qn||(n(It.sa,It.ta-qt,hs,Ks+16*It.R,qt),n(It.qa,It.ra-Wr,wn,fr+8*It.B,Wr),n(It.Ha,It.Ia-Wr,Es,Gs+8*It.B,Wr))}if(!Sn)return hn(dr,6,"Output aborted.")}return 1}(ne,ge)),ge.bc!=null&&ge.bc(ge),xe&=1}return xe?(ne.cb=0,xe):0})(d,Q)||(m=d.a)}}else m=d.a}m==0&&z.Oa!=null&&z.Oa.fd&&(m=ai(z.ba))}z=m}G=z!=0?null:11>G?$.f.RGBA.eb:$.f.kb.y}else G=null;return G};var AC=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(I,R){for(var F="",E=0;E<4;E++)F+=String.fromCharCode(I[R++]);return F}function u(I,R){return I[R+0]|I[R+1]<<8}function f(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16)>>>0}function g(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16|I[R+3]<<24)>>>0}new A;var p=[0],y=[0],C=[],B=new A,w=t,b=function(I,R){var F={},E=0,U=!1,K=0,ae=0;if(F.frames=[],!function(D,W){for(var ee=0;ee<4;ee++)if(D[W+ee]!="RIFF".charCodeAt(ee))return!0;return!1}(I,R)){for(g(I,R+=4),R+=8;R<I.length;){var le=c(I,R),ie=g(I,R+=4);R+=4;var q=ie+(1&ie);switch(le){case"VP8 ":case"VP8L":F.frames[E]===void 0&&(F.frames[E]={}),(pe=F.frames[E]).src_off=U?ae:R-8,pe.src_size=K+ie+8,E++,U&&(U=!1,K=0,ae=0);break;case"VP8X":(pe=F.header={}).feature_flags=I[R];var Y=R+4;pe.canvas_width=1+f(I,Y),Y+=3,pe.canvas_height=1+f(I,Y),Y+=3;break;case"ALPH":U=!0,K=q+8,ae=R-8;break;case"ANIM":(pe=F.header).bgcolor=g(I,R),Y=R+4,pe.loop_count=u(I,Y),Y+=2;break;case"ANMF":var ue,pe;(pe=F.frames[E]={}).offset_x=2*f(I,R),R+=3,pe.offset_y=2*f(I,R),R+=3,pe.width=1+f(I,R),R+=3,pe.height=1+f(I,R),R+=3,pe.duration=f(I,R),R+=3,ue=I[R++],pe.dispose=1&ue,pe.blend=ue>>1&1}le!="ANMF"&&(R+=q)}return F}}(w,0);b.response=w,b.rgbaoutput=!0,b.dataurl=!1;var N=b.header?b.header:null,T=b.frames?b.frames:null;if(N){N.loop_counter=N.loop_count,p=[N.canvas_height],y=[N.canvas_width];for(var V=0;V<T.length&&T[V].blend!=0;V++);}var j=T[0],L=B.WebPDecodeRGBA(w,j.src_off,j.src_size,y,p);j.rgba=L,j.imgwidth=y[0],j.imgheight=p[0];for(var S=0;S<y[0]*p[0]*4;S++)C[S]=L[S];return this.width=y,this.height=p,this.data=C,this}(function(t){var e,r,n,s,i,a,o,A,c,u=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new A,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new a,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new a,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,c=new u}]);var f=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=D;Object.defineProperty(this,"pdf",{get:function(){return W}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(Ce){ee=!!Ce}});var M=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return M},set:function(Ce){M=!!Ce}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(Ce){isNaN(Ce)||(Z=Ce)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(Ce){isNaN(Ce)||(Ae=Ce)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ce){var se;typeof Ce=="number"?se=[Ce,Ce,Ce,Ce]:((se=new Array(4))[0]=Ce[0],se[1]=Ce.length>=2?Ce[1]:se[0],se[2]=Ce.length>=3?Ce[2]:se[0],se[3]=Ce.length>=4?Ce[3]:se[1]),c.margin=se}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(Ce){oe=Ce}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Ce){ce=Ce}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(Ce){we=Ce}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ce){Ce instanceof u&&(c=Ce)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ce){c.path=Ce}});var he=[];Object.defineProperty(this,"ctxStack",{get:function(){return he},set:function(Ce){he=Ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ce){var se;se=g(Ce),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ce){var se=g(Ce);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ce){["butt","round","square"].indexOf(Ce)!==-1&&(this.ctx.lineCap=Ce,this.pdf.setLineCap(Ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ce){isNaN(Ce)||(this.ctx.lineWidth=Ce,this.pdf.setLineWidth(Ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ce){["bevel","round","miter"].indexOf(Ce)!==-1&&(this.ctx.lineJoin=Ce,this.pdf.setLineJoin(Ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ce){isNaN(Ce)||(this.ctx.miterLimit=Ce,this.pdf.setMiterLimit(Ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ce){this.ctx.textBaseline=Ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ce){["right","end","center","left","start"].indexOf(Ce)!==-1&&(this.ctx.textAlign=Ce)}});var fe=null,Ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ne},set:function(Ce){fe=null,Ne=Ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ce){var se;if(this.ctx.font=Ce,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ce))!==null){var wt=se[1];se[2];var it=se[3],et=se[4];se[5];var De=se[6],Be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(Be==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:Be==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var Te=function(Qt){var mt,tr,Jt=[],ht=Qt.trim();if(ht==="")return Jy;if(ht in xN)return[xN[ht]];for(;ht!=="";){switch(tr=null,mt=(ht=_N(ht)).charAt(0)){case'"':case"'":tr=pY(ht.substring(1),mt);break;default:tr=mY(ht)}if(tr===null||(Jt.push(tr[0]),(ht=_N(tr[1]))!==""&&ht.charAt(0)!==","))return Jy;ht=ht.replace(/^,/,"")}return Jt}(De);if(this.fontFaces){var We=function(Qt,mt){if(fe===null){var tr=function(Jt){var ht=[];return Object.keys(Jt).forEach(function(Pt){Jt[Pt].forEach(function(hr){var Ft=null;switch(hr){case"bold":Ft={family:Pt,weight:"bold"};break;case"italic":Ft={family:Pt,style:"italic"};break;case"bolditalic":Ft={family:Pt,weight:"bold",style:"italic"};break;case"":case"normal":Ft={family:Pt}}Ft!==null&&(Ft.ref={name:Pt,style:hr},ht.push(Ft))})}),ht}(Qt.getFontList());fe=function(Jt){for(var ht={},Pt=0;Pt<Jt.length;++Pt){var hr=Yy(Jt[Pt]),Ft=hr.family,Se=hr.stretch,Ge=hr.style,st=hr.weight;ht[Ft]=ht[Ft]||{},ht[Ft][Se]=ht[Ft][Se]||{},ht[Ft][Se][Ge]=ht[Ft][Se][Ge]||{},ht[Ft][Se][Ge][st]=hr}return ht}(tr.concat(mt))}return fe}(this.pdf,this.fontFaces),Me=Te.map(function(Qt){return{family:Qt,stretch:"normal",weight:it,style:wt}}),nt=function(Qt,mt,tr){for(var Jt=(tr=tr||{}).defaultFontFamily||"times",ht=Object.assign({},fY,tr.genericFontFamilies||{}),Pt=null,hr=null,Ft=0;Ft<mt.length;++Ft)if(ht[(Pt=Yy(mt[Ft])).family]&&(Pt.family=ht[Pt.family]),Qt.hasOwnProperty(Pt.family)){hr=Qt[Pt.family];break}if(!(hr=hr||Qt[Jt]))throw new Error("Could not find a font-family for the rule '"+CN(Pt)+"' and default family '"+Jt+"'.");if(hr=function(Se,Ge){if(Ge[Se])return Ge[Se];var st=uB[Se],Xe=st<=uB.normal?-1:1,Ye=bN(Ge,hL,st,Xe);if(!Ye)throw new Error("Could not find a matching font-stretch value for "+Se);return Ye}(Pt.stretch,hr),hr=function(Se,Ge){if(Ge[Se])return Ge[Se];for(var st=dL[Se],Xe=0;Xe<st.length;++Xe)if(Ge[st[Xe]])return Ge[st[Xe]];throw new Error("Could not find a matching font-style for "+Se)}(Pt.style,hr),!(hr=function(Se,Ge){if(Ge[Se])return Ge[Se];if(Se===400&&Ge[500])return Ge[500];if(Se===500&&Ge[400])return Ge[400];var st=hY[Se],Xe=bN(Ge,fL,st,Se<400?-1:1);if(!Xe)throw new Error("Could not find a matching font-weight for value "+Se);return Xe}(Pt.weight,hr)))throw new Error("Failed to resolve a font for the rule '"+CN(Pt)+"'.");return hr}(We,Me);this.pdf.setFont(nt.ref.name,nt.ref.style)}else{var ct="";(it==="bold"||parseInt(it,10)>=700||wt==="bold")&&(ct="bold"),wt==="italic"&&(ct+="italic"),ct.length===0&&(ct="normal");for(var ze="",Lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pt=0;pt<Te.length;pt++){if(this.pdf.internal.getFont(Te[pt],ct,{noFallback:!0,disableWarning:!0})!==void 0){ze=Te[pt];break}if(ct==="bolditalic"&&this.pdf.internal.getFont(Te[pt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ze=Te[pt],ct="bold";else if(this.pdf.internal.getFont(Te[pt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ze=Te[pt],ct="normal";break}}if(ze===""){for(var At=0;At<Te.length;At++)if(Lt[Te[At]]){ze=Lt[Te[At]];break}}ze=ze===""?"Times":ze,this.pdf.setFont(ze,ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ce){this.ctx.globalCompositeOperation=Ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ce){this.ctx.globalAlpha=Ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ce){this.ctx.lineDashOffset=Ce,pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ce){this.ctx.lineDash=Ce,pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ce){this.ctx.ignoreClearRect=!!Ce}})};f.prototype.setLineDash=function(D){this.lineDash=D},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){T.call(this,"fill",!1)},f.prototype.stroke=function(){T.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(D,W){if(isNaN(D)||isNaN(W))throw jr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new a(D,W));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new a(D,W)},f.prototype.closePath=function(){var D=new a(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Fr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){D=new a(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(D.x,D.y)},f.prototype.lineTo=function(D,W){if(isNaN(D)||isNaN(W))throw jr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new a(D,W));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new a(ee.x,ee.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},f.prototype.quadraticCurveTo=function(D,W,ee,M){if(isNaN(ee)||isNaN(M)||isNaN(D)||isNaN(W))throw jr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new a(ee,M)),Ae=this.ctx.transform.applyToPoint(new a(D,W));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},f.prototype.bezierCurveTo=function(D,W,ee,M,Z,Ae){if(isNaN(Z)||isNaN(Ae)||isNaN(D)||isNaN(W)||isNaN(ee)||isNaN(M))throw jr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new a(Z,Ae)),ce=this.ctx.transform.applyToPoint(new a(D,W)),we=this.ctx.transform.applyToPoint(new a(ee,M));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:we.x,y2:we.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new a(oe.x,oe.y)},f.prototype.arc=function(D,W,ee,M,Z,Ae){if(isNaN(D)||isNaN(W)||isNaN(ee)||isNaN(M)||isNaN(Z))throw jr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new a(D,W));D=oe.x,W=oe.y;var ce=this.ctx.transform.applyToPoint(new a(0,ee)),we=this.ctx.transform.applyToPoint(new a(0,0));ee=Math.sqrt(Math.pow(ce.x-we.x,2)+Math.pow(ce.y-we.y,2))}Math.abs(Z-M)>=2*Math.PI&&(M=0,Z=2*Math.PI),this.path.push({type:"arc",x:D,y:W,radius:ee,startAngle:M,endAngle:Z,counterclockwise:Ae})},f.prototype.arcTo=function(D,W,ee,M,Z){throw new Error("arcTo not implemented.")},f.prototype.rect=function(D,W,ee,M){if(isNaN(D)||isNaN(W)||isNaN(ee)||isNaN(M))throw jr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,W),this.lineTo(D+ee,W),this.lineTo(D+ee,W+M),this.lineTo(D,W+M),this.lineTo(D,W),this.lineTo(D+ee,W),this.lineTo(D,W)},f.prototype.fillRect=function(D,W,ee,M){if(isNaN(D)||isNaN(W)||isNaN(ee)||isNaN(M))throw jr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,W,ee,M),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},f.prototype.strokeRect=function(D,W,ee,M){if(isNaN(D)||isNaN(W)||isNaN(ee)||isNaN(M))throw jr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(D,W,ee,M),this.stroke())},f.prototype.clearRect=function(D,W,ee,M){if(isNaN(D)||isNaN(W)||isNaN(ee)||isNaN(M))throw jr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,W,ee,M))},f.prototype.save=function(D){D=typeof D!="boolean"||D;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var M=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=M}},f.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(W),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(D){var W,ee,M,Z;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))W=0,ee=0,M=0,Z=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(Ae!==null)W=parseInt(Ae[1]),ee=parseInt(Ae[2]),M=parseInt(Ae[3]),Z=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)W=parseInt(Ae[1]),ee=parseInt(Ae[2]),M=parseInt(Ae[3]),Z=parseFloat(Ae[4]);else{if(Z=1,typeof D=="string"&&D.charAt(0)!=="#"){var oe=new iL(D);D=oe.ok?oe.toHex():"#000000"}D.length===4?(W=D.substring(1,2),W+=W,ee=D.substring(2,3),ee+=ee,M=D.substring(3,4),M+=M):(W=D.substring(1,3),ee=D.substring(3,5),M=D.substring(5,7)),W=parseInt(W,16),ee=parseInt(ee,16),M=parseInt(M,16)}}return{r:W,g:ee,b:M,a:Z,style:D}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(D,W,ee,M){if(isNaN(W)||isNaN(ee)||typeof D!="string")throw jr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(M=isNaN(M)?void 0:M,!p.call(this)){var Z=q(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;E.call(this,{text:D,x:W,y:ee,scale:Ae,angle:Z,align:this.textAlign,maxWidth:M})}},f.prototype.strokeText=function(D,W,ee,M){if(isNaN(W)||isNaN(ee)||typeof D!="string")throw jr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){M=isNaN(M)?void 0:M;var Z=q(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;E.call(this,{text:D,x:W,y:ee,scale:Ae,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:M})}},f.prototype.measureText=function(D){if(typeof D!="string")throw jr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,ee=this.pdf.internal.scaleFactor,M=W.internal.getFontSize(),Z=W.getStringUnitWidth(D)*M/W.internal.scaleFactor;return new function(Ae){var oe=(Ae=Ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this}({width:Z*=Math.round(96*ee/72*1e4)/1e4})},f.prototype.scale=function(D,W){if(isNaN(D)||isNaN(W))throw jr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new A(D,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},f.prototype.rotate=function(D){if(isNaN(D))throw jr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new A(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.translate=function(D,W){if(isNaN(D)||isNaN(W))throw jr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new A(1,0,0,1,D,W);this.ctx.transform=this.ctx.transform.multiply(ee)},f.prototype.transform=function(D,W,ee,M,Z,Ae){if(isNaN(D)||isNaN(W)||isNaN(ee)||isNaN(M)||isNaN(Z)||isNaN(Ae))throw jr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new A(D,W,ee,M,Z,Ae);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(D,W,ee,M,Z,Ae){D=isNaN(D)?1:D,W=isNaN(W)?0:W,ee=isNaN(ee)?0:ee,M=isNaN(M)?1:M,Z=isNaN(Z)?0:Z,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new A(D,W,ee,M,Z,Ae)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(D,W,ee,M,Z,Ae,oe,ce,we){var he=this.pdf.getImageProperties(D),fe=1,Ne=1,Ce=1,se=1;M!==void 0&&ce!==void 0&&(Ce=ce/M,se=we/Z,fe=he.width/M*ce/M,Ne=he.height/Z*we/Z),Ae===void 0&&(Ae=W,oe=ee,W=0,ee=0),M!==void 0&&ce===void 0&&(ce=M,we=Z),M===void 0&&ce===void 0&&(ce=he.width,we=he.height);for(var wt,it=this.ctx.transform.decompose(),et=q(it.rotate.shx),De=new A,Be=(De=(De=(De=De.multiply(it.translate)).multiply(it.skew)).multiply(it.scale)).applyToRectangle(new o(Ae-W*Ce,oe-ee*se,M*fe,Z*Ne)),Te=B.call(this,Be),We=[],Me=0;Me<Te.length;Me+=1)We.indexOf(Te[Me])===-1&&We.push(Te[Me]);if(N(We),this.autoPaging)for(var nt=We[0],ct=We[We.length-1],ze=nt;ze<ct+1;ze++){this.pdf.setPage(ze);var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=ze===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=ze===1?0:At+(ze-2)*Qt;if(this.ctx.clip_path.length!==0){var tr=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(wt,this.posX+this.margin[3],-mt+pt+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=tr}var Jt=JSON.parse(JSON.stringify(Be));Jt=b([Jt],this.posX+this.margin[3],-mt+pt+this.ctx.prevPageLastElemOffset)[0];var ht=(ze>nt||ze<ct)&&C.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Qt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,et),ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,et)};var B=function(D,W,ee){var M=[];W=W||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":M.push(Math.floor((D.y+Z)/ee)+1);break;case"arc":M.push(Math.floor((D.y+Z-D.radius)/ee)+1),M.push(Math.floor((D.y+Z+D.radius)/ee)+1);break;case"qct":var Ae=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);M.push(Math.floor((Ae.y+Z)/ee)+1),M.push(Math.floor((Ae.y+Ae.h+Z)/ee)+1);break;case"bct":var oe=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);M.push(Math.floor((oe.y+Z)/ee)+1),M.push(Math.floor((oe.y+oe.h+Z)/ee)+1);break;case"rect":M.push(Math.floor((D.y+Z)/ee)+1),M.push(Math.floor((D.y+D.h+Z)/ee)+1)}for(var ce=0;ce<M.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<M[ce];)w.call(this);return M},w=function(){var D=this.fillStyle,W=this.strokeStyle,ee=this.font,M=this.lineCap,Z=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=W,this.font=ee,this.lineCap=M,this.lineWidth=Z,this.lineJoin=Ae},b=function(D,W,ee){for(var M=0;M<D.length;M++)switch(D[M].type){case"bct":D[M].x2+=W,D[M].y2+=ee;case"qct":D[M].x1+=W,D[M].y1+=ee;default:D[M].x+=W,D[M].y+=ee}return D},N=function(D){return D.sort(function(W,ee){return W-ee})},T=function(D,W){for(var ee,M,Z=this.fillStyle,Ae=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,we=Math.abs(ce*this.ctx.transform.scaleX),he=this.lineJoin,fe=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),Ce=[],se=0;se<Ne.length;se++)if(Ne[se].x!==void 0)for(var wt=B.call(this,Ne[se]),it=0;it<wt.length;it+=1)Ce.indexOf(wt[it])===-1&&Ce.push(wt[it]);for(var et=0;et<Ce.length;et++)for(;this.pdf.internal.getNumberOfPages()<Ce[et];)w.call(this);if(N(Ce),this.autoPaging)for(var De=Ce[0],Be=Ce[Ce.length-1],Te=De;Te<Be+1;Te++){this.pdf.setPage(Te),this.fillStyle=Z,this.strokeStyle=Ae,this.lineCap=oe,this.lineWidth=we,this.lineJoin=he;var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=Te===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=Te===1?0:nt+(Te-2)*ct;if(this.ctx.clip_path.length!==0){var Lt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ee,this.posX+this.margin[3],-ze+Me+this.ctx.prevPageLastElemOffset),V.call(this,D,!0),this.path=Lt}if(M=JSON.parse(JSON.stringify(fe)),this.path=b(M,this.posX+this.margin[3],-ze+Me+this.ctx.prevPageLastElemOffset),W===!1||Te===0){var pt=(Te>De||Te<Be)&&C.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,ct,null).clip().discardPath()),V.call(this,D,W),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=we,V.call(this,D,W),this.lineWidth=ce;this.path=fe},V=function(D,W){if((D!=="stroke"||W||!y.call(this))&&(D==="stroke"||W||!p.call(this))){for(var ee,M,Z=[],Ae=this.path,oe=0;oe<Ae.length;oe++){var ce=Ae[oe];switch(ce.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:ce,deltas:[],abs:[]});break;case"lt":var we=Z.length;if(Ae[oe-1]&&!isNaN(Ae[oe-1].x)&&(ee=[ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],we>0)){for(;we>=0;we--)if(Z[we-1].close!==!0&&Z[we-1].begin!==!0){Z[we-1].deltas.push(ee),Z[we-1].abs.push(ce);break}}break;case"bct":ee=[ce.x1-Ae[oe-1].x,ce.y1-Ae[oe-1].y,ce.x2-Ae[oe-1].x,ce.y2-Ae[oe-1].y,ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],Z[Z.length-1].deltas.push(ee);break;case"qct":var he=Ae[oe-1].x+2/3*(ce.x1-Ae[oe-1].x),fe=Ae[oe-1].y+2/3*(ce.y1-Ae[oe-1].y),Ne=ce.x+2/3*(ce.x1-ce.x),Ce=ce.y+2/3*(ce.y1-ce.y),se=ce.x,wt=ce.y;ee=[he-Ae[oe-1].x,fe-Ae[oe-1].y,Ne-Ae[oe-1].x,Ce-Ae[oe-1].y,se-Ae[oe-1].x,wt-Ae[oe-1].y],Z[Z.length-1].deltas.push(ee);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(ce)}}M=W?null:D==="stroke"?"stroke":"fill";for(var it=!1,et=0;et<Z.length;et++)if(Z[et].arc)for(var De=Z[et].abs,Be=0;Be<De.length;Be++){var Te=De[Be];Te.type==="arc"?S.call(this,Te.x,Te.y,Te.radius,Te.startAngle,Te.endAngle,Te.counterclockwise,void 0,W,!it):U.call(this,Te.x,Te.y),it=!0}else if(Z[et].close===!0)this.pdf.internal.out("h"),it=!1;else if(Z[et].begin!==!0){var We=Z[et].start.x,Me=Z[et].start.y;K.call(this,Z[et].deltas,We,Me),it=!0}M&&I.call(this,M),W&&R.call(this)}},j=function(D){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-ee;case"top":return D+W-ee;case"hanging":return D+W-2*ee;case"middle":return D+W/2-ee;default:return D}},L=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(W,ee){this.colorStops.push([W,ee])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(D,W,ee,M,Z,Ae,oe,ce,we){for(var he=le.call(this,ee,M,Z,Ae),fe=0;fe<he.length;fe++){var Ne=he[fe];fe===0&&(we?F.call(this,Ne.x1+D,Ne.y1+W):U.call(this,Ne.x1+D,Ne.y1+W)),ae.call(this,D,W,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}ce?R.call(this):I.call(this,oe)},I=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(D,W){this.pdf.internal.out(r(D)+" "+n(W)+" m")},E=function(D){var W;switch(D.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var ee=this.pdf.getTextDimensions(D.text),M=j.call(this,D.y),Z=L.call(this,M)-ee.h,Ae=this.ctx.transform.applyToPoint(new a(D.x,M)),oe=this.ctx.transform.decompose(),ce=new A;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var we,he,fe,Ne=this.ctx.transform.applyToRectangle(new o(D.x,M,ee.w,ee.h)),Ce=ce.applyToRectangle(new o(D.x,Z,ee.w,ee.h)),se=B.call(this,Ce),wt=[],it=0;it<se.length;it+=1)wt.indexOf(se[it])===-1&&wt.push(se[it]);if(N(wt),this.autoPaging)for(var et=wt[0],De=wt[wt.length-1],Be=et;Be<De+1;Be++){this.pdf.setPage(Be);var Te=Be===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[2],nt=Me-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],ze=ct-this.margin[3],Lt=Be===1?0:We+(Be-2)*nt;if(this.ctx.clip_path.length!==0){var pt=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(we,this.posX+this.margin[3],-1*Lt+Te),V.call(this,"fill",!0),this.path=pt}var At=b([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-Lt+Te+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*D.scale),fe=this.lineWidth,this.lineWidth=fe*D.scale);var Qt=this.autoPaging!=="text";if(Qt||At.y+At.h<=Me){if(Qt||At.y>=Te&&At.x<=ct){var mt=Qt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||ct-At.x)[0],tr=b([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-Lt+Te+this.ctx.prevPageLastElemOffset)[0],Jt=Qt&&(Be>et||Be<De)&&C.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,nt,null).clip().discardPath()),this.pdf.text(mt,tr.x,tr.y,{angle:D.angle,align:W,renderingMode:D.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else At.y<Me&&(this.ctx.prevPageLastElemOffset+=Me-At.y);D.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=fe)}else D.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*D.scale),fe=this.lineWidth,this.lineWidth=fe*D.scale),this.pdf.text(D.text,Ae.x+this.posX,Ae.y+this.posY,{angle:D.angle,align:W,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=fe)},U=function(D,W,ee,M){ee=ee||0,M=M||0,this.pdf.internal.out(r(D+ee)+" "+n(W+M)+" l")},K=function(D,W,ee){return this.pdf.lines(D,W,ee,null,null)},ae=function(D,W,ee,M,Z,Ae,oe,ce){this.pdf.internal.out([e(s(ee+D)),e(i(M+W)),e(s(Z+D)),e(i(Ae+W)),e(s(oe+D)),e(i(ce+W)),"c"].join(" "))},le=function(D,W,ee,M){for(var Z=2*Math.PI,Ae=Math.PI/2;W>ee;)W-=Z;var oe=Math.abs(ee-W);oe<Z&&M&&(oe=Z-oe);for(var ce=[],we=M?-1:1,he=W;oe>1e-5;){var fe=he+we*Math.min(oe,Ae);ce.push(ie.call(this,D,he,fe)),oe-=Math.abs(fe-he),he=fe}return ce},ie=function(D,W,ee){var M=(ee-W)/2,Z=D*Math.cos(M),Ae=D*Math.sin(M),oe=Z,ce=-Ae,we=oe*oe+ce*ce,he=we+oe*Z+ce*Ae,fe=4/3*(Math.sqrt(2*we*he)-he)/(oe*Ae-ce*Z),Ne=oe-fe*ce,Ce=ce+fe*oe,se=Ne,wt=-Ce,it=M+W,et=Math.cos(it),De=Math.sin(it);return{x1:D*Math.cos(W),y1:D*Math.sin(W),x2:Ne*et-Ce*De,y2:Ne*De+Ce*et,x3:se*et-wt*De,y3:se*De+wt*et,x4:D*Math.cos(ee),y4:D*Math.sin(ee)}},q=function(D){return 180*D/Math.PI},Y=function(D,W,ee,M,Z,Ae){var oe=D+.5*(ee-D),ce=W+.5*(M-W),we=Z+.5*(ee-Z),he=Ae+.5*(M-Ae),fe=Math.min(D,Z,oe,we),Ne=Math.max(D,Z,oe,we),Ce=Math.min(W,Ae,ce,he),se=Math.max(W,Ae,ce,he);return new o(fe,Ce,Ne-fe,se-Ce)},ue=function(D,W,ee,M,Z,Ae,oe,ce){var we,he,fe,Ne,Ce,se,wt,it,et,De,Be,Te,We,Me,nt=ee-D,ct=M-W,ze=Z-ee,Lt=Ae-M,pt=oe-Z,At=ce-Ae;for(he=0;he<41;he++)et=(wt=(fe=D+(we=he/40)*nt)+we*((Ce=ee+we*ze)-fe))+we*(Ce+we*(Z+we*pt-Ce)-wt),De=(it=(Ne=W+we*ct)+we*((se=M+we*Lt)-Ne))+we*(se+we*(Ae+we*At-se)-it),he==0?(Be=et,Te=De,We=et,Me=De):(Be=Math.min(Be,et),Te=Math.min(Te,De),We=Math.max(We,et),Me=Math.max(Me,De));return new o(Math.round(Be),Math.round(Te),Math.round(We-Be),Math.round(Me-Te))},pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,W,ee=(D=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:W}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(Nt.API),function(t){var e=function(a){var o,A,c,u,f,g,p,y,C,B;for(A=[],c=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>c;c+=4)(f=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(g=(f=((f=((f=((f=(f-(B=f%85))/85)-(C=f%85))/85)-(y=f%85))/85)-(p=f%85))/85)%85,A.push(g+33,p+33,y+33,C+33,B+33)):A.push(122);return function(w,b){for(var N=b;N>0;N--)w.pop()}(A,o.length),String.fromCharCode.apply(String,A)+"~>"},r=function(a){var o,A,c,u,f,g=String,p="length",y=255,C="charCodeAt",B="slice",w="replace";for(a[B](-2),a=a[B](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),c=[],u=0,f=(a+=o="uuuuu"[B](a[p]%5||5))[p];f>u;u+=5)A=52200625*(a[C](u)-33)+614125*(a[C](u+1)-33)+7225*(a[C](u+2)-33)+85*(a[C](u+3)-33)+(a[C](u+4)-33),c.push(y&A>>24,y&A>>16,y&A>>8,y&A);return function(b,N){for(var T=N;T>0;T--)b.pop()}(c,o[p]),g.fromCharCode.apply(g,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var A="",c=0;c<a.length;c+=2)A+=String.fromCharCode("0x"+(a[c]+a[c+1]));return A},i=function(a){for(var o=new Uint8Array(a.length),A=a.length;A--;)o[A]=a.charCodeAt(A);return(o=sB(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,o){var A=0,c=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),A=0;A<o.length;A+=1)switch(o[A]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[A]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Nt.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(A,c,u){var f=new XMLHttpRequest,g=0,p=function(y){var C=y.length,B=[],w=String.fromCharCode;for(g=0;g<C;g+=1)B.push(w(255&y.charCodeAt(g)));return B.join("")};if(f.open("GET",A,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?u(p(this.responseText)):u(void 0)}),f.send(null),c&&f.status===200)return p(f.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(Nt.API),function(t){function e(){return(Ht.html2canvas?Promise.resolve(Ht.html2canvas):sA(()=>Promise.resolve().then(()=>_x),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Ht.DOMPurify?Promise.resolve(Ht.DOMPurify):sA(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var A=Fr(o);return A==="undefined"?"undefined":A==="string"||o instanceof String?"string":A==="number"||o instanceof Number?"number":A==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":A==="object"?"object":"unknown"},s=function(o,A){var c=document.createElement(o);for(var u in A.className&&(c.className=A.className),A.innerHTML&&A.dompurify&&(c.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)c.style[u]=A.style[u];return c},i=function o(A,c){for(var u=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),f=A.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||u.appendChild(o(f,c));return A.nodeType===1&&(A.nodeName==="CANVAS"?(u.width=A.width,u.height=A.height,u.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(u.value=A.value),u.addEventListener("load",function(){u.scrollTop=A.scrollTop,u.scrollLeft=A.scrollLeft},!0)),u},a=function o(A){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return(u=u.setProgress(1,o,1,[o])).set(A)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,A){return o.__proto__=A||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,A){return this.then(function(){switch(A=A||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),A){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,A(this.prop.container,c)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var y=u[p],C=y.src.find(function(B){return B.format==="truetype"});C&&c.addFont(C.url,y.ref.name,y.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),A(this.prop.container,g)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,A,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,A):this.outputPdf(o,A)},a.prototype.outputPdf=function(o,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,A)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var A=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(A)})},a.prototype.get=function(o,A){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return A?A(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function A(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:A(o.inner.width,o.k),height:A(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,A,c,u){return o!=null&&(this.progress.val=o),A!=null&&(this.progress.state=A),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,A,c,u){return this.setProgress(o?this.progress.val+o:null,A||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,A){var c=this;return this.thenCore(o,A,function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,u),g}).then(u,f).then(function(g){return c.updateProgress(1),g})})},a.prototype.thenCore=function(o,A,c){c=c||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),A&&(A=A.bind(u));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),g=c.call(f,o,A);return a.convert(g,u.__proto__)},a.prototype.thenExternal=function(o,A){return Promise.prototype.then.call(this,o,A)},a.prototype.thenList=function(o){var A=this;return o.forEach(function(c){A=A.thenCore(c)}),A},a.prototype.catch=function(o){o&&(o=o.bind(this));var A=Promise.prototype.catch.call(this,o);return a.convert(A,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Nt.getPageSize=function(o,A,c){if(Fr(o)==="object"){var u=o;o=u.orientation,A=u.unit||A,c=u.format||c}A=A||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,g=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+A}var y,C=0,B=0;if(p.hasOwnProperty(g))C=p[g][1]/f,B=p[g][0]/f;else try{C=c[1],B=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",B>C&&(y=B,B=C,C=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",C>B&&(y=B,B=C,C=y)}return{width:B,height:C,unit:A,k:f,orientation:o}},t.html=function(o,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(Yy):null;var c=new a(A);return A.worker?c:c.from(o).doCallback()}}(Nt.API),Nt.API.addJS=function(t){return IN=t,this.internal.events.subscribe("postPutResources",function(){Ag=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ag+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),EN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+IN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ag!==void 0&&EN!==void 0&&this.internal.out("/Names <</JavaScript "+Ag+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var A=o[1];r.internal.newObjectDeferredBegin(A,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var f=r.internal.newObject();u.push(f);var g=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Nt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var A,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,A=function(f){for(var g,p=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,C={width:0,height:0,numcomponents:1},B=4;B<y;B+=2){if(B+=p,e.indexOf(f.charCodeAt(B+1))!==-1){g=256*f.charCodeAt(B+5)+f.charCodeAt(B+6),C={width:256*f.charCodeAt(B+7)+f.charCodeAt(B+8),height:g,numcomponents:f.charCodeAt(B+9)};break}p=256*f.charCodeAt(B+2)+f.charCodeAt(B+3)}return C}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),A.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return u}}(Nt.API),Nt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=JX(t,{checkCrc:!0}),a=i.width,o=i.height,A=i.channels,c=i.palette,u=i.depth;s=c&&A===1?function(L){for(var S=L.width,I=L.height,R=L.data,F=L.palette,E=L.depth,U=!1,K=[],ae=[],le=void 0,ie=!1,q=0,Y=0;Y<F.length;Y++){var ue=TI(F[Y],4),pe=ue[0],D=ue[1],W=ue[2],ee=ue[3];K.push(pe,D,W),ee!=null&&(ee===0?(q++,ae.length<1&&ae.push(Y)):ee<255&&(ie=!0))}if(ie||q>1){U=!0,ae=void 0;var M=S*I;le=new Uint8Array(M);for(var Z=new DataView(R.buffer),Ae=0;Ae<M;Ae++){var oe=Zy(Z,Ae,E),ce=TI(F[oe],4)[3];le[Ae]=ce}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:R,alphaBytes:le,needSMask:U,palette:K,mask:ae}}(i):A===2||A===4?function(L){for(var S=L.data,I=L.width,R=L.height,F=L.channels,E=L.depth,U=F===2?"DeviceGray":"DeviceRGB",K=F-1,ae=I*R,le=K,ie=ae*le,q=1*ae,Y=Math.ceil(ie*E/8),ue=Math.ceil(q*E/8),pe=new Uint8Array(Y),D=new Uint8Array(ue),W=new DataView(S.buffer),ee=new DataView(pe.buffer),M=new DataView(D.buffer),Z=!1,Ae=0;Ae<ae;Ae++){for(var oe=Ae*F,ce=0;ce<le;ce++)kN(ee,Zy(W,oe+ce,E),Ae*le+ce,E);var we=Zy(W,oe+le,E);we<(1<<E)-1&&(Z=!0),kN(M,we,1*Ae,E)}return{colorSpace:U,colorsPerPixel:K,colorBytes:pe,alphaBytes:D,needSMask:Z}}(i):function(L){var S=L.data,I=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:I,colorsPerPixel:I==="DeviceGray"?1:3,colorBytes:S instanceof Uint8Array?S:new Uint8Array(S.buffer),needSMask:!1}}(i);var f,g,p,y=s,C=y.colorSpace,B=y.colorsPerPixel,w=y.colorBytes,b=y.alphaBytes,N=y.needSMask,T=y.palette,V=y.mask,j=null;return n!==Nt.API.image_compression.NONE&&typeof sB=="function"?(j=function(L){var S;switch(L){case Nt.API.image_compression.FAST:S=11;break;case Nt.API.image_compression.MEDIUM:S=13;break;case Nt.API.image_compression.SLOW:S=14;break;default:S=12}return S}(n),f=this.decode.FLATE_DECODE,g="/Predictor ".concat(j," "),t=TN(w,a*B,B,n),N&&(p=TN(b,a,1,n))):(f=void 0,g="",t=w,N&&(p=b)),g+="/Colors ".concat(B," /BitsPerComponent ").concat(u," /Columns ").concat(a),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:r,data:t,index:e,filter:f,decodeParameters:g,transparency:V,palette:T,sMask:p,predictor:j,width:a,height:o,bitsPerComponent:u,colorSpace:C}}},function(t){t.processGIF89A=function(e,r,n,s){var i=new yY(e),a=i.width,o=i.height,A=[];i.decodeAndBlitFrameRGBA(0,A);var c={data:A,width:a,height:o},u=new e1(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)},t.processGIF87A=t.processGIF89A}(Nt.API),ya.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ya.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){jr.log("bit decode error:"+r)}},ya.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var A=this.palette[i>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},ya.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,A=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[A],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},ya.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},ya.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,A=(i>>10&e)/e*255|0,c=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=A,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=t}},ya.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,A=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=A,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},ya.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},ya.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},ya.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new ya(e,!1),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new e1(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Nt.API),DN.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new DN(e),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new e1(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Nt.API),Nt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,A=0,c=0;c<s;c+=4){var u=n[c],f=n[c+1],g=n[c+2],p=n[c+3];i[o++]=u,i[o++]=f,i[o++]=g,a[A++]=p}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Nt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Su=Nt.API,lg=Su.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,A=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,f=e.doKerning!==!1,g=0,p=t.length,y=0,C=o[0]||A,B=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?B.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(g=f&&Fr(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/u:0,B.push((o[n]||C)/A+g)),y=n;return B},NN=Su.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Su.processArabic&&(t=Su.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:lg.apply(this,arguments).reduce(function(i,a){return i+a},0)},SN=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var A=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(A,i)),o=0,A=i),o+=e[i],i++;return A!==i&&s.push(t.slice(A,i)),s},FN=function(t,e,r){r||(r={});var n,s,i,a,o,A,c,u=[],f=[u],g=r.textIndent||0,p=0,y=0,C=t.split(" "),B=lg.apply(this,[" ",r])[0];if(A=r.lineIndent===-1?C[0].length+2:r.lineIndent||0){var w=Array(A).join(" "),b=[];C.map(function(T){(T=T.split(/\s*\n/)).length>1?b=b.concat(T.map(function(V,j){return(j&&V.length?`
`:"")+V})):b.push(T[0])}),C=b,A=NN.apply(this,[w,r])}for(i=0,a=C.length;i<a;i++){var N=0;if(n=C[i],A&&n[0]==`
`&&(n=n.substr(1),N=1),g+p+(y=(s=lg.apply(this,[n,r])).reduce(function(T,V){return T+V},0))>e||N){if(y>e){for(o=SN.apply(this,[n,s,e-(g+p),e]),u.push(o.shift()),u=[o.pop()];o.length;)f.push([o.shift()]);y=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(T,V){return T+V},0)}else u=[n];f.push(u),g=y+A,p=B}else u.push(n),g+=p+y,p=B}return c=A?function(T,V){return(V?w:"")+T.join(" ")}:function(T){return T.join(" ")},f.map(c)},Su.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle),g="Unicode";return f.metadata[g]?{widths:f.metadata[g].widths||{0:1},kerning:f.metadata[g].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,A,c=[];for(o=0,A=n.length;o<A;o++)c=c.concat(FN.apply(this,[n[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[r[i]]=e[i],s[e[i]]=r[i];var a=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var p,y,C,B,w=["{"];for(var b in g){if(p=g[b],isNaN(parseInt(b,10))?y="'"+b+"'":(b=parseInt(b,10),y=(y=a(b).slice(2)).slice(0,-1)+s[y.slice(-1)]),typeof p=="number")p<0?(C=a(p).slice(3),B="-"):(C=a(p).slice(2),B=""),C=B+C.slice(0,-1)+s[C.slice(-1)];else{if(Fr(p)!=="object")throw new Error("Don't know what to do with value type "+Fr(p)+".");C=o(p)}w.push(y+C)}return w.push("}"),w.join("")},A=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,y,C,B,w={},b=1,N=w,T=[],V="",j="",L=g.length-1,S=1;S<L;S+=1)(B=g[S])=="'"?p?(C=p.join(""),p=void 0):p=[]:p?p.push(B):B=="{"?(T.push([N,C]),N={},C=void 0):B=="}"?((y=T.pop())[0][y[1]]=N,C=void 0,N=y[0]):B=="-"?b=-1:C===void 0?n.hasOwnProperty(B)?(V+=n[B],C=parseInt(V,16)*b,b=1,V=""):V+=B:n.hasOwnProperty(B)?(j+=n[B],N[C]=parseInt(j,16)*b,b=1,C=void 0,j=""):j+=B;return w},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var p=g.font,y=f.Unicode[p.postScriptName];y&&(p.metadata.Unicode={},p.metadata.Unicode.widths=y.widths,p.metadata.Unicode.kerning=y.kerning);var C=u.Unicode[p.postScriptName];C&&(p.metadata.Unicode.encoding=C,p.encoding=C.codePages[0])}])}(Nt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e($g(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(Nt),Nt.API.addSvgAsImage=function(t,e,r,n,s,i,a,o){if(isNaN(e)||isNaN(r))throw jr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw jr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=n,A.height=s;var c=A.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,A.width,A.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Ht.canvg?Promise.resolve(Ht.canvg):sA(()=>import("./index.es-CJ9Djn8L.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(u)}).then(function(){f.addImage(A.toDataURL("image/jpeg",1),e,r,n,s,a,o)})},Nt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},Nt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],c=0,u=0,f=0;function g(y,C){var B,w=!1;for(B=0;B<y.length;B+=1)y[B]===C&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(Fr(t)==="object"){for(s in t)if(i=t[s],g(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&g(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")A.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&A.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+A.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,C=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?C.push("/"+y+" /"+r[y].value):C.push("/"+y+" "+r[y].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+A),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Nt.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,A=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],f=0,g=i.length;f<g;++f){if(o=a.metadata.characterToGlyph(i.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(f),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var a,o,A,c,u,f,g;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],f=0,g=(o=Object.keys(i).sort(function(p,y){return p-y})).length;f<g;f++)a=o[f],A.length>=100&&(u+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+c+">"));return A.length&&(u+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",y=0;y<g.length;y++)p+=String.fromCharCode(g[y]);var C=c();u({data:p,addLength1:!0,objectId:C}),A("endobj");var B=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:B}),A("endobj");var w=c();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Hu(o.fontName)),A("/FontFile2 "+C+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var b=c();A("<<"),A("/Type /Font"),A("/BaseFont /"+Hu(o.fontName)),A("/FontDescriptor "+w+" 0 R"),A("/W "+t.API.PDFObject.convert(f)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=c(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+B+" 0 R"),A("/BaseFont /"+Hu(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+b+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,g="",p=0;p<f.length;p++)g+=String.fromCharCode(f[p]);var y=c();u({data:g,addLength1:!0,objectId:y}),A("endobj");var C=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:C}),A("endobj");var B=c();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+y+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+Hu(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+Hu(o.fontName)+"/FontDescriptor "+B+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",A=i.x,c=i.y,u=i.options||{},f=i.mutex||{},g=f.pdfEscape,p=f.activeFontKey,y=f.fonts,C=p,B="",w=0,b="",N=y[C].encoding;if(y[C].encoding!=="Identity-H")return{text:o,x:A,y:c,options:u,mutex:f};for(b=o,C=p,Array.isArray(o)&&(b=o[0]),w=0;w<b.length;w+=1)y[C].metadata.hasOwnProperty("cmap")&&(a=y[C].metadata.cmap.unicode.codeMap[b[w].charCodeAt(0)]),a||b[w].charCodeAt(0)<256&&y[C].metadata.hasOwnProperty("Unicode")?B+=b[w]:B+="";var T="";return parseInt(C.slice(1))<14||N==="WinAnsiEncoding"?T=g(B,C).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(T=r(B,y[C])),f.isHex=!0,{text:T,x:A,y:c,options:u,mutex:f}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],A={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},A,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},A,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},A,{text:a})).text}])}(Nt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Nt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,A,c,u,f=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},B=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,N=0;this.__bidiEngine__={};var T=function(F){var E=F.charCodeAt(),U=E>>8,K=C[U];return K!==void 0?f[256*K+(255&E)]:U===252||U===253?"AL":w.test(U)?"L":U===8?"R":"N"},V=function(F){for(var E,U=0;U<F.length;U++){if((E=T(F.charAt(U)))==="L")return!1;if(E==="R")return!0}return!1},j=function(F,E,U,K){var ae,le,ie,q,Y=E[K];switch(Y){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(Y="AN");break;case"AL":b=!0,Y="R";break;case"WS":case"BN":Y="N";break;case"CS":K<1||K+1>=E.length||(ae=U[K-1])!=="EN"&&ae!=="AN"||(le=E[K+1])!=="EN"&&le!=="AN"?Y="N":b&&(le="AN"),Y=le===ae?le:"N";break;case"ES":Y=(ae=K>0?U[K-1]:"B")==="EN"&&K+1<E.length&&E[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&U[K-1]==="EN"){Y="EN";break}if(b){Y="N";break}for(ie=K+1,q=E.length;ie<q&&E[ie]==="ET";)ie++;Y=ie<q&&E[ie]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(q=E.length,ie=K+1;ie<q&&E[ie]==="NSM";)ie++;if(ie<q){var ue=F[K],pe=ue>=1425&&ue<=2303||ue===64286;if(ae=E[ie],pe&&(ae==="R"||ae==="AL")){Y="R";break}}}Y=K<1||(ae=E[K-1])==="B"?"N":U[K-1];break;case"B":b=!1,s=!0,Y=N;break;case"S":i=!0,Y="N"}return Y},L=function(F,E,U){var K=F.split("");return U&&S(K,U,{hiLevel:N}),K.reverse(),E&&E.reverse(),K.join("")},S=function(F,E,U){var K,ae,le,ie,q,Y=-1,ue=F.length,pe=0,D=[],W=N?p:g,ee=[];for(b=!1,s=!1,i=!1,ae=0;ae<ue;ae++)ee[ae]=T(F[ae]);for(le=0;le<ue;le++){if(q=pe,D[le]=j(F,ee,D,le),K=240&(pe=W[q][y[D[le]]]),pe&=15,E[le]=ie=W[pe][5],K>0)if(K===16){for(ae=Y;ae<le;ae++)E[ae]=1;Y=-1}else Y=-1;if(W[pe][6])Y===-1&&(Y=le);else if(Y>-1){for(ae=Y;ae<le;ae++)E[ae]=ie;Y=-1}ee[le]==="B"&&(E[le]=0),U.hiLevel|=ie}i&&function(M,Z,Ae){for(var oe=0;oe<Ae;oe++)if(M[oe]==="S"){Z[oe]=N;for(var ce=oe-1;ce>=0&&M[ce]==="WS";ce--)Z[ce]=N}}(ee,E,ue)},I=function(F,E,U,K,ae){if(!(ae.hiLevel<F)){if(F===1&&N===1&&!s)return E.reverse(),void(U&&U.reverse());for(var le,ie,q,Y,ue=E.length,pe=0;pe<ue;){if(K[pe]>=F){for(q=pe+1;q<ue&&K[q]>=F;)q++;for(Y=pe,ie=q-1;Y<ie;Y++,ie--)le=E[Y],E[Y]=E[ie],E[ie]=le,U&&(le=U[Y],U[Y]=U[ie],U[ie]=le);pe=q}pe++}}},R=function(F,E,U){var K=F.split(""),ae={hiLevel:N};return U||(U=[]),S(K,U,ae),function(le,ie,q){if(q.hiLevel!==0&&u)for(var Y,ue=0;ue<le.length;ue++)ie[ue]===1&&(Y=B.indexOf(le[ue]))>=0&&(le[ue]=B[Y+1])}(K,U,ae),I(2,K,E,U,ae),I(1,K,E,U,ae),K.join("")};return this.__bidiEngine__.doBidiReorder=function(F,E,U){if(function(ae,le){if(le)for(var ie=0;ie<ae.length;ie++)le[ie]=ie;o===void 0&&(o=V(ae)),c===void 0&&(c=V(ae))}(F,E),a||!A||c)if(a&&A&&o^c)N=o?1:0,F=L(F,E,U);else if(!a&&A&&c)N=o?1:0,F=R(F,E,U),F=L(F,E);else if(!a||o||A||c){if(a&&!A&&o^c)F=L(F,E),o?(N=0,F=R(F,E,U)):(N=1,F=R(F,E,U),F=L(F,E));else if(a&&o&&!A&&c)N=1,F=R(F,E,U),F=L(F,E);else if(!a&&!A&&o^c){var K=u;o?(N=1,F=R(F,E,U),N=0,u=!1,F=R(F,E,U),u=K):(N=0,F=R(F,E,U),F=L(F,E),N=1,u=!1,F=R(F,E,U),u=K,F=L(F,E))}}else N=0,F=R(F,E,U);else N=o?1:0,F=R(F,E,U);return F},this.__bidiEngine__.setOptions=function(F){F&&(a=F.isInputVisual,A=F.isOutputVisual,o=F.isInputRtl,c=F.isOutputRtl,u=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Nt),Nt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Ll(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new PY(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new BY(this.contents),this.head=new xY(this),this.name=new NY(this),this.cmap=new mL(this),this.toUnicode={},this.hhea=new CY(this),this.maxp=new SY(this),this.hmtx=new FY(this),this.post=new EY(this),this.os2=new _Y(this),this.loca=new LY(this),this.glyf=new TY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,c;for(c=[],a=0,o=(A=this.bbox).length;a<o;a++)e=A[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Da,Ll=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,A;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+A},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),BY=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,A,c,u,f,g,p,y,C;for(C in p=Object.keys(r).length,A=Math.log(2),f=16*Math.floor(Math.log(p)/A),a=Math.floor(f/A),u=16*p-f,(s=new Ll).writeInt(this.scalarType),s.writeShort(p),s.writeShort(f),s.writeShort(a),s.writeShort(u),i=16*p,c=s.pos+i,o=null,y=[],r)for(g=r[C],s.writeString(C),s.writeInt(t(g)),s.writeInt(c),s.writeInt(g.length),y=y.concat(g),C==="head"&&(o=c),c+=g.length;c%4;)y.push(0),c++;return s.write(y),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=gL.call(r);r.length%4;)r.push(0);for(i=new Ll(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),bY={}.hasOwnProperty,Bo=function(t,e){for(var r in e)bY.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Da=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var xY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Ll).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),jN=function(){function t(e,r){var n,s,i,a,o,A,c,u,f,g,p,y,C,B,w,b,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,i=function(){var T,V;for(V=[],A=T=0;0<=g?T<g:T>g;A=0<=g?++T:--T)V.push(e.readUInt16());return V}(),e.pos+=2,C=function(){var T,V;for(V=[],A=T=0;0<=g?T<g:T>g;A=0<=g?++T:--T)V.push(e.readUInt16());return V}(),c=function(){var T,V;for(V=[],A=T=0;0<=g?T<g:T>g;A=0<=g?++T:--T)V.push(e.readUInt16());return V}(),u=function(){var T,V;for(V=[],A=T=0;0<=g?T<g:T>g;A=0<=g?++T:--T)V.push(e.readUInt16());return V}(),s=(this.length-e.pos+this.offset)/2,o=function(){var T,V;for(V=[],A=T=0;0<=s?T<s:T>s;A=0<=s?++T:--T)V.push(e.readUInt16());return V}(),A=w=0,N=i.length;w<N;A=++w)for(B=i[A],n=b=y=C[A];y<=B?b<=B:b>=B;n=y<=B?++b:--b)u[A]===0?a=n+c[A]:(a=o[u[A]/2+(n-y)-(g-A)]||0)!==0&&(a+=c[A]),this.codeMap[n]=65535&a}e.pos=f}return t.encode=function(e,r){var n,s,i,a,o,A,c,u,f,g,p,y,C,B,w,b,N,T,V,j,L,S,I,R,F,E,U,K,ae,le,ie,q,Y,ue,pe,D,W,ee,M,Z,Ae,oe,ce,we,he,fe;switch(K=new Ll,a=Object.keys(e).sort(function(Ne,Ce){return Ne-Ce}),r){case"macroman":for(C=0,B=function(){var Ne=[];for(y=0;y<256;++y)Ne.push(0);return Ne}(),b={0:0},i={},ae=0,Y=a.length;ae<Y;ae++)b[ce=e[s=a[ae]]]==null&&(b[ce]=++C),i[s]={old:e[s],new:b[e[s]]},B[s]=b[e[s]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(B),{charMap:i,subtable:K.data,maxGlyphID:C+1};case"unicode":for(E=[],f=[],N=0,b={},n={},w=c=null,le=0,ue=a.length;le<ue;le++)b[V=e[s=a[le]]]==null&&(b[V]=++N),n[s]={old:V,new:b[V]},o=b[V]-s,w!=null&&o===c||(w&&f.push(w),E.push(s),c=o),w=s;for(w&&f.push(w),f.push(65535),E.push(65535),R=2*(I=E.length),S=2*Math.pow(Math.log(I)/Math.LN2,2),g=Math.log(S/2)/Math.LN2,L=2*I-S,A=[],j=[],p=[],y=ie=0,pe=E.length;ie<pe;y=++ie){if(F=E[y],u=f[y],F===65535){A.push(0),j.push(0);break}if(F-(U=n[F].new)>=32768)for(A.push(0),j.push(2*(p.length+I-y)),s=q=F;F<=u?q<=u:q>=u;s=F<=u?++q:--q)p.push(n[s].new);else A.push(U-F),j.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*I+2*p.length),K.writeUInt16(0),K.writeUInt16(R),K.writeUInt16(S),K.writeUInt16(g),K.writeUInt16(L),Ae=0,D=f.length;Ae<D;Ae++)s=f[Ae],K.writeUInt16(s);for(K.writeUInt16(0),oe=0,W=E.length;oe<W;oe++)s=E[oe],K.writeUInt16(s);for(we=0,ee=A.length;we<ee;we++)o=A[we],K.writeUInt16(o);for(he=0,M=j.length;he<M;he++)T=j[he],K.writeUInt16(T);for(fe=0,Z=p.length;fe<Z;fe++)C=p[fe],K.writeUInt16(C);return{charMap:n,subtable:K.data,maxGlyphID:N+1}}},t}(),mL=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new jN(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=jN.encode(e,r),(s=new Ll).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),CY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),_Y=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),EY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,A;for(A=[],i=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;i=0<=o?++a:--a)A.push(e.readUInt32());return A}).call(this)}},t}(),IY=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},NY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,i,a,o,A,c,u,f,g;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(A={},i=u=0,f=n.length;u<f;i=++u)s=n[i],e.pos=s.offset,c=e.readString(s.length),a=new IY(c,s),A[g=s.nameID]==null&&(A[g]=[]),A[s.nameID].push(a);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t}(),SY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),FY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,i,a,o,A;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(e.readInt16());return u}(),this.widths=(function(){var c,u,f,g;for(g=[],c=0,u=(f=this.metrics).length;c<u;c++)i=f[c],g.push(i.advance);return g}).call(this),n=this.widths[this.widths.length-1],A=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)A.push(this.widths.push(n));return A},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),gL=[].slice,TY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,i,a,o,A,c,u,f;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new Ll(r.read(s))).readShort(),c=o.readShort(),f=o.readShort(),A=o.readShort(),u=o.readShort(),this.cache[e]=a===-1?new QY(o,c,f,A,u):new UY(o,a,c,f,A,u),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,i,a,o,A;for(a=[],i=[],o=0,A=r.length;o<A;o++)s=e[r[o]],i.push(a.length),s&&(a=a.concat(s.encode(n)));return i.push(a.length),{table:a,offsets:i}},t}(),UY=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),QY=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Ll(gL.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),LY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,Da),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<n.length;++a)if(n[a]=s,i<r.length&&r[i]==a){++i,n[a]=s;var o=this.offsets[a],A=this.offsets[a+1]-o;A>0&&(s+=A)}for(var c=new Array(4*n.length),u=0;u<n.length;++u)c[4*u+3]=255&n[u],c[4*u+2]=(65280&n[u])>>8,c[4*u+1]=(16711680&n[u])>>16,c[4*u]=(4278190080&n[u])>>24;return c},t}(),PY=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,A;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in A=this.glyphsFor(r))n=A[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,A,c,u,f,g,p,y,C,B,w;for(s in n=mL.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},w=n.charMap)p[(A=w[s]).old]=A.new;for(y in g=n.maxGlyphID,a)y in p||(p[y]=g++);return u=function(b){var N,T;for(N in T={},b)T[b[N]]=N;return T}(p),f=Object.keys(u).sort(function(b,N){return b-N}),C=function(){var b,N,T;for(T=[],b=0,N=f.length;b<N;b++)o=f[b],T.push(u[o]);return T}(),i=this.font.glyf.encode(a,C,p),c=this.font.loca.encode(i.offsets,C),B={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(B["OS/2"]=this.font.os2.raw()),this.font.directory.encode(B)},t}();Nt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,A,c;for(c=[],o=0,A=r.length;o<A;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const dB=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:dY,AcroFormAppearance:yt,AcroFormButton:Wn,AcroFormCheckBox:Nf,AcroFormChoiceField:Sc,AcroFormComboBox:Tc,AcroFormEditBox:Ef,AcroFormListBox:Fc,AcroFormPasswordField:Sf,AcroFormPushButton:If,AcroFormRadioButton:Uc,AcroFormTextField:Cl,GState:mp,ShadingPattern:rl,TilingPattern:xc,default:Nt,jsPDF:Nt},Symbol.toStringTag,{value:"Module"}));async function kY(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:kt.now()};return Ds(ft(Re,"inventory_batches"),e)}async function wL(t,e){await dn(Dt(Re,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:kt.now()})}async function RY(t,e){const r=wr(ft(Re,"batch_allocations"),zr("saleDate",">=",t),zr("saleDate","<=",e)),n=await Mt(r),s={};return n.forEach(i=>{const a=i.data(),o=a.batchId;s[o]||(s[o]={batchId:a.batchId,batchDate:a.batchDate,productName:a.productName,quantity:0,amountCharged:0}),s[o].quantity+=Number(a.quantity||0),s[o].amountCharged+=Number(a.amountCharged||0)}),Object.values(s)}async function DY(t){const e=Dt(Re,"salesV2",t),r=await nu(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=Array.isArray(n.allocations)?n.allocations:[];return await mx(Re,async i=>{if(s.length>0)for(const a of s){if(!(a!=null&&a.batchId)||!(a!=null&&a.qty))continue;const o=Dt(Re,"inventory_batches",a.batchId),A=await i.get(o);if(!A.exists())continue;const c=Number(A.data().remaining??0),u=Number((c+Number(a.qty||0)).toFixed(2));i.update(o,{remaining:u})}i.delete(e)}),{restored:s.reduce((i,a)=>i+(Number(a.qty)||0),0)}}const Ba=t=>Math.round((Number(t)||0)*100)/100,cg=t=>Math.round((Number(t)||0)*1e3)/1e3,Lh=t=>Number(t??0).toFixed(2),t1=t=>Number(t??0).toFixed(3),ON=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?sr(t.timestamp.toDate(),"yyyy-MM-dd"):void 0);return r?{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}:null};function jY({role:t}){const[e,r]=k.useState([]),[n,s]=k.useState([]),[i,a]=k.useState(null),[o,A]=k.useState(!0),[c,u]=k.useState(""),[f,g]=k.useState("ALL"),[p,y]=k.useState(null),[C,B]=k.useState(0),[w,b]=k.useState(0),[N,T]=k.useState(""),[V,j]=k.useState(0),[L,S]=k.useState("0"),I=sr(new Date,"yyyy-MM-dd"),R=k.useRef(null);k.useEffect(()=>{const M=wr(ft(Re,"salesV2"),zr("date","==",I)),Z=T2(M,Ae=>{const oe=[];Ae.forEach(ce=>{const we=ON(ce.data(),ce.id);we&&oe.push(we)}),r(oe),A(!1)});return()=>Z()},[I]),k.useEffect(()=>{const M=wr(ft(Re,"salesV2"),zr("status","==","FLOTANTE")),Z=T2(M,Ae=>{const oe=[];Ae.forEach(ce=>{const we=ON(ce.data(),ce.id);we&&oe.push(we)}),s(oe)});return()=>Z()},[]),k.useEffect(()=>{(async()=>{const Z=wr(ft(Re,"daily_closures"),zr("date","==",I)),Ae=await Mt(Z);if(Ae.empty)a(null);else{const oe=Ae.docs[0];a({id:oe.id,...oe.data()})}})()},[I]);const F=sS.useMemo(()=>{if(f==="FLOTANTE"){const M=[...e,...n],Z=new Map;for(const Ae of M)Ae.status==="FLOTANTE"&&Z.set(Ae.id,Ae);return Array.from(Z.values())}if(f==="ALL"){const M=[...e,...n],Z=new Map;for(const Ae of M)Z.set(Ae.id,Ae);return Array.from(Z.values())}return e.filter(M=>M.status==="PROCESADA")},[f,e,n]);Ba(F.reduce((M,Z)=>M+(Z.amountSuggested||0),0));const E=Ba(F.reduce((M,Z)=>M+(Z.amount||0),0)),U=cg(F.reduce((M,Z)=>M+(Z.quantity||0),0)),K=Ba(F.reduce((M,Z)=>M+Number(Z.cogsAmount??0),0)),ae=Ba(E-K),le={};F.forEach(M=>{const Z=M.productName||"(sin nombre)";le[Z]||(le[Z]={totalQuantity:0,totalAmount:0}),le[Z].totalQuantity=cg(le[Z].totalQuantity+(M.quantity||0)),le[Z].totalAmount=Ba(le[Z].totalAmount+(M.amount||0))});const ie=Object.entries(le).map(([M,Z])=>({productName:M,totalQuantity:Z.totalQuantity,totalAmount:Z.totalAmount})),q=async()=>{try{const M=F.filter(fe=>fe.status==="FLOTANTE"),Z=M.length>0?M:e.filter(fe=>fe.status!=="PROCESADA");if(Z.length===0){u("No hay ventas para procesar.");return}const Ae={totalCharged:Ba(Z.reduce((fe,Ne)=>fe+(Ne.amount||0),0)),totalSuggested:Ba(Z.reduce((fe,Ne)=>fe+(Ne.amountSuggested||0),0)),totalUnits:cg(Z.reduce((fe,Ne)=>fe+(Ne.quantity||0),0)),totalCOGS:Ba(Z.reduce((fe,Ne)=>fe+Number(Ne.cogsAmount??0),0))},oe=Ba(Ae.totalCharged-Ae.totalSuggested),ce=Ba(Ae.totalCharged-Ae.totalCOGS),we=await Ds(ft(Re,"daily_closures"),{date:I,createdAt:kt.now(),totalCharged:Ae.totalCharged,totalSuggested:Ae.totalSuggested,totalDifference:oe,totalUnits:Ae.totalUnits,totalCOGS:Ae.totalCOGS,grossProfit:ce,products:Z.map(fe=>({productName:fe.productName,quantity:fe.quantity,amount:fe.amount})),salesV2:Z.map(fe=>({id:fe.id,productName:fe.productName,quantity:fe.quantity,amount:fe.amount,amountSuggested:fe.amountSuggested,userEmail:fe.userEmail,clientName:fe.clientName,amountReceived:fe.amountReceived,change:fe.change,status:fe.status,cogsAmount:fe.cogsAmount??0,avgUnitCost:fe.avgUnitCost??null,allocations:fe.allocations??[],date:fe.date})),productSummary:Object.entries(Z.reduce((fe,Ne)=>{const Ce=Ne.productName||"(sin nombre)";return fe[Ce]||(fe[Ce]={totalQuantity:0,totalAmount:0}),fe[Ce].totalQuantity=cg(fe[Ce].totalQuantity+(Ne.quantity||0)),fe[Ce].totalAmount=Ba(fe[Ce].totalAmount+(Ne.amount||0)),fe},{})).map(([fe,Ne])=>({productName:fe,totalQuantity:Ne.totalQuantity,totalAmount:Ne.totalAmount}))}),he=Ww(Re);Z.forEach(fe=>{he.update(Dt(Re,"salesV2",fe.id),{status:"PROCESADA",closureId:we.id,closureDate:I})}),await he.commit(),u(` Cierre guardado. Ventas procesadas: ${Z.length}.`)}catch(M){console.error(M),u(" Error al guardar el cierre.")}},Y=async M=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await dn(Dt(Re,"salesV2",M),{status:"FLOTANTE",closureId:null,closureDate:null}),u(" Venta revertida a FLOTANTE.")}catch(Z){console.error(Z),u(" No se pudo revertir la venta.")}},ue=M=>{y(M),B(M.quantity),b(M.amount),T(M.clientName),j(M.amountReceived),S(M.change)},pe=async()=>{if(p)try{await dn(Dt(Re,"salesV2",p.id),{quantity:C,amount:w,amountCharged:w,clientName:N,amountReceived:V,change:L}),y(null),u(" Venta actualizada.")}catch(M){console.error(M),u(" No se pudo actualizar la venta.")}},D=async M=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:Z}=await DY(M);u(` Venta eliminada. Stock restaurado: ${Number(Z).toFixed(2)}.`)}catch(Z){console.error(Z),u(" No se pudo eliminar la venta.")}},W=async()=>{if(R.current){R.current.classList.add("force-pdf-colors");try{const Z=(await Cx(R.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Ae=new Nt;Ae.addImage(Z,"PNG",10,10,190,0),Ae.save(`cierre_${I}.pdf`)}finally{R.current.classList.remove("force-pdf-colors")}}},ee=!t||t==="admin";return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",I]}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("label",{className:"text-sm",children:"Filtrar:"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:M=>g(M.target.value),children:[l.jsx("option",{value:"ALL",children:"Todas"}),l.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),l.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o?l.jsx("p",{children:"Cargando ventas..."}):l.jsxs("div",{ref:R,children:[l.jsxs("table",{className:"min-w-full border text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[F.map(M=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),l.jsx("td",{className:"border p-1",children:M.productName}),l.jsx("td",{className:"border p-1",children:t1(M.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Lh(M.amount)]}),l.jsx("td",{className:"border p-1",children:M.date}),l.jsx("td",{className:"border p-1",children:M.userEmail}),l.jsx("td",{className:"border p-1",children:M.status==="FLOTANTE"?l.jsxs("div",{className:"flex gap-2 justify-center",children:[ee&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>ue(M),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),l.jsx("button",{onClick:()=>D(M.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!ee&&l.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):M.status==="PROCESADA"?l.jsx("div",{className:"flex gap-2 justify-center",children:ee?l.jsx("button",{onClick:()=>Y(M.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):l.jsx("span",{className:"text-gray-400 text-xs",children:""})}):l.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},M.id)),F.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:t1(U)})]}),l.jsxs("div",{children:["Total cobrado: ",l.jsxs("strong",{children:["C$",Lh(E)]})]})]}),(K>0||ae!==E)&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[l.jsxs("div",{children:["Calculo a Precio compra:"," ",l.jsxs("strong",{children:["C$",Lh(K)]})]}),l.jsxs("div",{children:["Ganancia antes de gasto:"," ",l.jsxs("strong",{children:["C$",Lh(ae)]})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-2",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsxs("tbody",{children:[ie.map(M=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:M.productName}),l.jsx("td",{className:"border p-1",children:t1(M.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Lh(M.totalAmount)]})]},M.productName)),ie.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:q,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),l.jsx("button",{onClick:W,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),c&&l.jsx("p",{className:"mt-2 text-sm",children:c}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[p.productName,"  ",p.userEmail]}),l.jsx("label",{className:"text-sm",children:"Cantidad"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:C,onChange:M=>B(parseFloat(M.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Monto cobrado"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:M=>b(parseFloat(M.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Cliente"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:N,onChange:M=>T(M.target.value)}),l.jsx("label",{className:"text-sm",children:"Paga con"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:V,onChange:M=>j(parseFloat(M.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Vuelto"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:L,onChange:M=>S(M.target.value)}),l.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[l.jsx("button",{onClick:()=>y(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),l.jsx("button",{onClick:pe,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Yi=t=>Number(t??0).toFixed(2),Fu=t=>Number(t??0).toFixed(3);function OY(){var b,N,T,V;const t=async j=>{if(!window.confirm(`Eliminar el cierre del ${j.date}?`))return;const L=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(L){const S=await Mt(wr(ft(Re,"salesV2"),zr("closureId","==",j.id)));if(!S.empty){const I=Ww(Re);S.forEach(R=>{I.update(Dt(Re,"salesV2",R.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await I.commit()}}await Hi(Dt(Re,"daily_closures",j.id)),(c==null?void 0:c.id)===j.id&&u(null),await y(),g(` Cierre eliminado${L?" y ventas reabiertas.":"."}`)}catch(S){console.error(S),g(" No se pudo eliminar el cierre.")}},[e,r]=k.useState(sr(v9(new Date),"yyyy-MM-dd")),[n,s]=k.useState(sr(new Date,"yyyy-MM-dd")),[i,a]=k.useState(!0),[o,A]=k.useState([]),[c,u]=k.useState(null),[f,g]=k.useState(""),p=k.useRef(null),y=async()=>{try{a(!0);const j=wr(ft(Re,"daily_closures"),zr("date",">=",e),zr("date","<=",n)),L=await Mt(j),S=[];L.forEach(I=>S.push({id:I.id,...I.data()})),S.sort((I,R)=>I.date<R.date?1:I.date>R.date?-1:0),A(S)}catch(j){console.error(j),g(" Error cargando el historial.")}finally{a(!1)}};k.useEffect(()=>{y()},[]);const C=async j=>{j.preventDefault(),y()},B=k.useMemo(()=>{if(!c)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const j=Number(c.totalUnits??0),L=Number(c.totalSuggested??0),S=Number(c.totalCharged??0),I=Number(c.totalDifference??(isFinite(S-L)?S-L:0)),R=Number(c.totalCOGS??0),F=Number(c.grossProfit??(isFinite(S-R)?S-R:0));return{units:j,sug:L,chg:S,diff:I,cogs:R,profit:F}},[c]),w=async()=>{if(!p.current||!c)return;const j=p.current;j.classList.add("force-pdf-colors");try{const[{default:L},{jsPDF:S}]=await Promise.all([sA(()=>Promise.resolve().then(()=>_x),void 0),sA(()=>Promise.resolve().then(()=>dB),void 0)]),R=(await L(j,{backgroundColor:"#ffffff",onclone:U=>{const K=U.defaultView;U.body.querySelectorAll("*").forEach(le=>{const ie=K.getComputedStyle(le);ie.color&&(le.style.color=ie.color),ie.backgroundColor&&ie.backgroundColor!=="rgba(0, 0, 0, 0)"&&(le.style.backgroundColor=ie.backgroundColor),ie.borderColor&&(le.style.borderColor=ie.borderColor)})}})).toDataURL("image/png"),{jsPDF:F}=await sA(async()=>{const{jsPDF:U}=await Promise.resolve().then(()=>dB);return{jsPDF:U}},void 0),E=new F;E.addImage(R,"PNG",10,10,190,0),E.save(`cierre_${c.date}.pdf`)}finally{j.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),l.jsxs("form",{onSubmit:C,className:"flex flex-wrap items-end gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:j=>r(j.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:j=>s(j.target.value)})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i?l.jsx("p",{children:"Cargando..."}):o.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Monto de venta"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsx("tbody",{children:o.map(j=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.date}),l.jsx("td",{className:"border p-1",children:Fu(j.totalUnits)}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.totalCharged)]}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.totalCOGS)]}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.grossProfit??Number(j.totalCharged??0)-Number(j.totalCOGS??0))]}),l.jsx("td",{className:"border p-1",children:l.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>u(j),children:"Ver detalle"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(j),children:"Eliminar"})]})})]},j.id))})]}),c&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",c.date]}),l.jsx("button",{onClick:()=>u(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),l.jsx("button",{onClick:w,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),l.jsxs("div",{ref:p,className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:Fu(B.units)})]})}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[l.jsxs("div",{children:["Monto al costo:"," ",l.jsxs("strong",{children:["C$",Yi(B.cogs)]})]}),l.jsxs("div",{children:["Ganancia sin gastos:"," ",l.jsxs("strong",{children:["C$",Yi(B.profit)]})]})]}),(b=c.salesV2)!=null&&b.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto de ventas"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),l.jsx("tbody",{children:c.salesV2.map((j,L)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Fu(j.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.amount)]}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.cogsAmount)]}),l.jsx("td",{className:"border p-1",children:j.date??""}),l.jsx("td",{className:"border p-1",children:j.userEmail??""})]},L))})]})]}):(N=c.sales)!=null&&N.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Cliente"}),l.jsx("th",{className:"border p-2",children:"Paga con"}),l.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),l.jsx("tbody",{children:c.sales.map((j,L)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Fu(j.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.amount)]}),l.jsx("td",{className:"border p-1",children:j.userEmail??""}),l.jsx("td",{className:"border p-1",children:j.clientName??""}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.amountReceived)]}),l.jsx("td",{className:"border p-1",children:typeof j.change=="number"?Yi(j.change):j.change??"0"})]},L))})]})]}):(T=c.products)!=null&&T.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"})]})}),l.jsx("tbody",{children:c.products.map((j,L)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName}),l.jsx("td",{className:"border p-1",children:Fu(j.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.amount)]})]},L))})]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(V=c.productSummary)!=null&&V.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsx("tbody",{children:c.productSummary.map((j,L)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName}),l.jsx("td",{className:"border p-1",children:Fu(j.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Yi(j.totalAmount)]})]},L))})]})]}):null]})]}),f&&l.jsx("p",{className:"mt-3 text-sm",children:f})]})}function MY(){const[t,e]=k.useState(""),[r,n]=k.useState(""),[s,i]=k.useState("vendedor"),[a,o]=k.useState(""),[A,c]=k.useState([]),[u,f]=k.useState(!0),[g,p]=k.useState(null),[y,C]=k.useState("vendedor"),B=async()=>{f(!0);const j=await Mt(ft(Re,"users")),L=[];j.forEach(S=>{const I=S.data();L.push({id:S.id,email:I.email??"",role:I.role??"vendedor"})}),c(L),f(!1)};k.useEffect(()=>{B()},[]);const w=async j=>{j.preventDefault(),o("");try{const L=wb(),S=gb(L.options,"Secondary"),I=gT(S),R=await SO(I,t,r);await p3(Dt(ft(Re,"users"),R.user.uid),{email:t,role:s}),await aT(I),await Cj(S),c(F=>[{id:R.user.uid,email:t,role:s},...F]),o(" Usuario creado correctamente."),e(""),n(""),i("vendedor")}catch(L){console.error(L),o(" Error al crear el usuario: "+L.message)}},b=j=>{p(j.id),C(j.role||"vendedor")},N=()=>{p(null),C("vendedor")},T=async()=>{if(!g)return;const j=Dt(Re,"users",g);await dn(j,{role:y}),c(L=>L.map(S=>S.id===g?{...S,role:y}:S)),N()},V=async j=>{confirm("Eliminar este usuario del listado?")&&(await Hi(Dt(Re,"users",j)),c(S=>S.filter(I=>I.id!==j)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("form",{onSubmit:w,className:"max-w-md mx-auto bg-white p-8 shadow-lg rounded-lg space-y-6 border border-gray-200",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4 text-purple-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar nuevo usuario"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),l.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:j=>e(j.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea"}),l.jsx("input",{type:"password",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:j=>n(j.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Rol"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:j=>i(j.target.value),children:[l.jsx("option",{value:"vendedor",children:"Vendedor"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Crear usuario"}),a&&l.jsx("p",{className:"text-sm mt-2",children:a})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mt-6",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Usuarios"}),l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Email"}),l.jsx("th",{className:"p-2 border",children:"Rol"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:u?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-4 text-center",children:"Cargando"})}):A.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-4 text-center",children:"Sin usuarios"})}):A.map(j=>{const L=g===j.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:j.email}),l.jsx("td",{className:"p-2 border",children:L?l.jsxs("select",{className:"w-full border p-1 rounded",value:y,onChange:S=>C(S.target.value),children:[l.jsx("option",{value:"vendedor",children:"Vendedor"}),l.jsx("option",{value:"admin",children:"Admin"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${j.role==="admin"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:j.role})}),l.jsx("td",{className:"p-2 border space-x-2",children:L?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:T,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:N,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>b(j),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>V(j.id),children:"Eliminar"})]})})]},j.id)})})]})]})]})}const HY=t=>`C$${(Number(t)||0).toFixed(2)}`;function VY(){const[t,e]=k.useState(""),[r,n]=k.useState(0),[s,i]=k.useState(""),[a,o]=k.useState(""),[A,c]=k.useState(""),[u,f]=k.useState([]),[g,p]=k.useState(!0),[y,C]=k.useState(!1),[B,w]=k.useState(null),[b,N]=k.useState(""),[T,V]=k.useState(""),[j,L]=k.useState(""),[S,I]=k.useState(0),R=async()=>{p(!0);const q=await Mt(ft(Re,"products")),Y=[];q.forEach(ue=>{const pe=ue.data();Y.push({id:ue.id,name:pe.name??"",price:Number(pe.price??0),category:pe.category??"",measurement:pe.measurement??"",active:pe.active!==!1})}),f(Y),p(!1)};k.useEffect(()=>{R()},[]);const F=async q=>{if(q.preventDefault(),i(""),!t||r<=0||!A){i(" Completa nombre, precio vlido y unidad de medida");return}try{const Y={name:t,price:parseFloat(r.toFixed(2)),category:a,measurement:A,active:!0},ue=await Ds(ft(Re,"products"),Y);f(pe=>[{id:ue.id,...Y},...pe]),i(" Producto registrado con exito."),e(""),n(0),c(""),o("")}catch(Y){i(" Error: "+Y.message)}},E=q=>{w(q.id),N(q.name),V(q.category),L(q.measurement),I(q.price)},U=()=>{w(null),N(""),V(""),L(""),I(0)},K=async()=>{if(!B)return;const q=Dt(Re,"products",B);await dn(q,{name:b,category:T,measurement:j,price:parseFloat((S||0).toFixed(2))}),f(Y=>Y.map(ue=>ue.id===B?{...ue,name:b,category:T,measurement:j,price:parseFloat((S||0).toFixed(2))}:ue)),U()},ae=async q=>{const Y=Dt(Re,"products",q.id),ue=q.active===!1;await dn(Y,{active:ue}),f(pe=>pe.map(D=>D.id===q.id?{...D,active:ue}:D))},le=async q=>{const Y=wr(ft(Re,"inventory_batches"),zr("productId","==",q),h3(1));if(!(await Mt(Y)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Hi(Dt(Re,"products",q)),f(D=>D.filter(W=>W.id!==q)))},ie=y?u:u.filter(q=>q.active!==!1);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("form",{onSubmit:F,className:"max-w-md mx-auto bg-white p-8 shadow-lg rounded-lg space-y-6 border border-gray-200",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4 text-green-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),l.jsxs("select",{value:a,onChange:q=>o(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:q=>e(q.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),l.jsxs("select",{value:A,onChange:q=>c(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:q=>n(parseFloat(q.target.value)),onFocus:q=>q.target.value==="0"?n(NaN):null})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),s&&l.jsx("p",{className:"text-sm mt-2",children:s})]}),l.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:q=>C(q.target.checked)}),"Mostrar inactivos"]})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Precio"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:g?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ie.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):ie.map(q=>{const Y=B===q.id,ue=q.active!==!1;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Y?l.jsx("input",{className:"w-full border p-1 rounded",value:b,onChange:pe=>N(pe.target.value)}):q.name}),l.jsx("td",{className:"p-2 border",children:Y?l.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:pe=>V(pe.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]}):q.category}),l.jsx("td",{className:"p-2 border",children:Y?l.jsxs("select",{className:"w-full border p-1 rounded",value:j,onChange:pe=>L(pe.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]}):q.measurement}),l.jsx("td",{className:"p-2 border",children:Y?l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(S)?"":S,onChange:pe=>I(parseFloat(pe.target.value))}):HY(q.price)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ue?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:ue?"Activo":"Inactivo"})}),l.jsx("td",{className:"p-2 border space-x-2",children:Y?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:K,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:U,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>E(q),children:"Editar"}),l.jsx("button",{className:`px-2 py-1 rounded ${ue?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>ae(q),children:ue?"Desactivar":"Activar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>le(q.id),children:"Eliminar"})]})})]},q.id)})})]})})]})}const ms=[];for(let t=0;t<256;++t)ms.push((t+256).toString(16).slice(1));function KY(t,e=0){return(ms[t[e+0]]+ms[t[e+1]]+ms[t[e+2]]+ms[t[e+3]]+"-"+ms[t[e+4]]+ms[t[e+5]]+"-"+ms[t[e+6]]+ms[t[e+7]]+"-"+ms[t[e+8]]+ms[t[e+9]]+"-"+ms[t[e+10]]+ms[t[e+11]]+ms[t[e+12]]+ms[t[e+13]]+ms[t[e+14]]+ms[t[e+15]]).toLowerCase()}let r1;const GY=new Uint8Array(16);function qY(){if(!r1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r1=crypto.getRandomValues.bind(crypto)}return r1(GY)}const zY=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),MN={randomUUID:zY};function $Y(t,e,r){var s;if(MN.randomUUID&&!t)return MN.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??qY();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,KY(n)}async function WY(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const s=ft(t,"inventory_batches"),i=wr(s,zr("productName","==",e)),A=(await Mt(i)).docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var C,B;const f=c.data.date??"",g=u.data.date??"";if(f!==g)return f<g?-1:1;const p=((C=c.data.createdAt)==null?void 0:C.seconds)??0,y=((B=u.data.createdAt)==null?void 0:B.seconds)??0;return p-y}).map(c=>Dt(t,"inventory_batches",c.id));return mx(t,async c=>{let u=Number(r);const f=[];for(const C of A){if(u<=0)break;const B=await c.get(C);if(!B.exists())continue;const w=B.data(),b=Number(w.quantity??0),N=Number(w.remaining??b??0),T=Number(w.purchasePrice??0);if(N<=0)continue;const V=Math.min(N,u),j=Number((N-V).toFixed(2));c.update(C,{remaining:j}),f.push({batchId:C.id,qty:V,unitCost:T,lineCost:Number((V*T).toFixed(2))}),u=Number((u-V).toFixed(2))}if(u>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${u} unidades.`);const g=Number(f.reduce((C,B)=>C+B.lineCost,0).toFixed(2)),p=f.reduce((C,B)=>C+B.qty,0),y=p>0?Number((g/p).toFixed(4)):0;return{allocations:f,avgUnitCost:y,cogsAmount:g}})}const vL=3,XY=.5*10**-vL;function Ps(t){const e=Number(t??0);return Number(e.toFixed(vL))}function HN(t,e){return Ps((t??0)+(e??0))}function ug(t,e){return Ps(t)+XY>=Ps(e)}async function YY(t,e){const r=await Mt(ft(Re,"inventory_batches")),n=t.trim().toLowerCase();let s=0;for(const i of r.docs){const a=i.data();(a.productName||"").trim().toLowerCase()===n&&a.productId!==e&&(await dn(Dt(Re,"inventory_batches",i.id),{productId:e}),s++)}return s}function VN({user:t}){const[e,r]=k.useState([]),[n,s]=k.useState(""),[i,a]=k.useState(0),[o,A]=k.useState(0),[c,u]=k.useState(!1),[f,g]=k.useState(0),[p,y]=k.useState("0"),[C,B]=k.useState(""),[w,b]=k.useState([]),[N,T]=k.useState(""),[V,j]=k.useState(sr(new Date,"yyyy-MM-dd")),L=K=>Math.round(K*100)/100,S=e.find(K=>K.id===n),I=((S==null?void 0:S.measurement)||"").toLowerCase()!=="lb",R=async K=>{if(!K)return 0;const ae=wr(ft(Re,"inventory_batches"),zr("productId","==",K)),le=await Mt(ae);let ie=0;return le.forEach(q=>{const Y=q.data();ie=HN(ie,Number(Y.remaining||0))}),Ps(ie)},F=async K=>{if(!K)return 0;const ae=await Mt(ft(Re,"inventory_batches"));let le=0;return ae.forEach(ie=>{const q=ie.data();(q.productName||"").trim().toLowerCase()===K.trim().toLowerCase()&&(le=HN(le,Number(q.remaining||0)))}),Ps(le)};k.useEffect(()=>{async function K(){const ae=await Mt(ft(Re,"products")),le=[];ae.forEach(ie=>{const q=ie.data();(q==null?void 0:q.active)!==!1&&le.push({id:ie.id,productName:q.name??q.productName??"(sin nombre)",price:Number(q.price??0),measurement:q.measurement??"(sin unidad)",category:q.category??"(sin categora)"})}),r(le)}K()},[]),k.useEffect(()=>{async function K(){const ae=await Mt(ft(Re,"users")),le=[];ae.forEach(ie=>{const q=ie.data();le.push({id:ie.id,email:q.email??"(sin email)",role:q.role??"USER"})}),b(le)}K()},[]),k.useEffect(()=>{u(!1)},[n]),k.useEffect(()=>{const K=e.find(le=>le.id===n);if(!K){A(0);return}const ae=Number(i)||0;if(!c){const le=L(K.price*ae);A(le)}},[n,i,e,c]),k.useEffect(()=>{const K=Number(f)||0,ae=Number(o)||0,le=(K-ae).toFixed(2);y(le)},[f,o]);const E=K=>{K.key===","&&(K.preventDefault(),K.target.value+=".")},U=async K=>{var Y,ue;K.preventDefault(),B("");const ae=e.find(pe=>pe.id===n),le=Number(i)||0,ie=I?Math.max(0,Math.round(le)):Ps(le),q=Number(o)||0;if(!ae||ie<=0){B("Selecciona un producto y una cantidad vlida.");return}try{const pe=await R(ae.id);if(!ug(pe,ie)){const M=await F(ae.productName);if(ug(M,0)&&!ug(pe,0)){const Z=await YY(ae.productName,ae.id),Ae=await R(ae.id);if(ug(Ae,ie))B(` Lotes corregidos (${Z}). Continuando con la venta`);else{const oe=Ps(ie-Ae);B(` Stock insuficiente tras corregir ${Z} lote(s). Faltan ${oe.toFixed(3)} unidades.`);return}}else{const Z=Ps(ie-pe);B(` Stock insuficiente para "${ae.productName}". Faltan ${Z.toFixed(3)} unidades.`);return}}const{allocations:D,avgUnitCost:W,cogsAmount:ee}=await WY(Re,ae.productName,ie,!1);await Ds(ft(Re,"salesV2"),{id:$Y(),productId:n,productName:ae.productName,price:ae.price,quantity:ie,amount:q,amountCharged:q,amountReceived:Number(f)||0,change:p,clientName:N.trim(),timestamp:kt.now(),date:V,userEmail:((Y=w[0])==null?void 0:Y.email)??"sin usuario",vendor:((ue=w[0])==null?void 0:ue.role)??"sin usuario",status:"FLOTANTE",allocations:D,avgUnitCost:W,cogsAmount:ee}),B(" Venta registrada y asignada a inventario (FIFO)."),s(""),a(0),u(!1),A(0),g(0),y("0"),T(""),j(sr(new Date,"yyyy-MM-dd"))}catch(pe){console.error(pe),B(` ${(pe==null?void 0:pe.message)||"Error al registrar la venta."}`)}};return l.jsxs("form",{onSubmit:U,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl
                 p-4 sm:p-6 md:p-8
                 max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl
                 space-y-4`,children:[l.jsxs("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-4 text-blue-700 flex items-center gap-2",children:[l.jsx("span",{className:"block bg-blue-100 text-blue-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 10c-4.41 0-8-1.79-8-4V6c0-2.21 3.59-4 8-4s8 1.79 8 4v8c0 2.21-3.59 4-8 4z"})})}),"Registrar venta"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),l.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:n,onChange:K=>s(K.target.value),children:[l.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),e.map(K=>l.jsxs("option",{value:K.id,children:[K.productName," - C$ ",K.price]},K.id))]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:V,onChange:K=>j(K.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Libras - Unidad"}),l.jsx("input",{type:"number",lang:"eng",step:I?1:.01,inputMode:I?"numeric":"decimal",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:i===0?"":i,onKeyDown:E,onFocus:K=>{K.target.value==="0"&&(K.target.value="")},onChange:K=>{const ae=K.target.value.replace(",","."),le=ae===""?0:parseFloat(ae);if(I){const ie=Number.isFinite(le)?Math.max(0,Math.round(le)):0;a(ie)}else a(Number.isFinite(le)?le:0)},disabled:!n,placeholder:n?"":"Selecciona un producto primero",title:n?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Monto total"}),l.jsx("input",{type:"number",step:"0.01",readOnly:!0,inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded bg-gray-100",value:o===0?"":o.toFixed(2),onKeyDown:E})]}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition",children:"Guardar venta"}),C&&l.jsx("p",{className:`text-sm mt-2 ${C.startsWith("")?"text-green-600":C.startsWith("")?"text-yellow-600":"text-red-600"}`,children:C})]})}const ns=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function JY(){const[t,e]=k.useState([]),[r,n]=k.useState([]),[s,i]=k.useState(!0),[a,o]=k.useState(""),[A,c]=k.useState(sr(Mp(new Date),"yyyy-MM-dd")),[u,f]=k.useState(sr(Op(new Date),"yyyy-MM-dd")),[g,p]=k.useState(""),[y,C]=k.useState(""),[B,w]=k.useState(0),[b,N]=k.useState(0),[T,V]=k.useState(0),[j,L]=k.useState(sr(new Date,"yyyy-MM-dd")),[S,I]=k.useState(0),[R,F]=k.useState(0),[E,U]=k.useState(""),[K,ae]=k.useState(null),[le,ie]=k.useState(""),[q,Y]=k.useState(0),[ue,pe]=k.useState(0),[D,W]=k.useState(0),[ee,M]=k.useState(""),[Z,Ae]=k.useState(0),[oe,ce]=k.useState(0);k.useEffect(()=>{(async()=>{const Be=await Mt(ft(Re,"products")),Te=[];Be.forEach(ct=>{const ze=ct.data();Te.push({id:ct.id,name:ze.name??ze.productName??"(sin nombre)",category:ze.category??"(sin categora)",measurement:ze.measurement??"lb",price:Number(ze.price??0)})}),e(Te);const We=wr(ft(Re,"inventory_batches"),Mi("date","desc")),Me=await Mt(We),nt=[];Me.forEach(ct=>{const ze=ct.data();nt.push({id:ct.id,productId:ze.productId,productName:ze.productName,category:ze.category,unit:ze.unit,quantity:Ps(Number(ze.quantity||0)),remaining:Ps(Number(ze.remaining||0)),purchasePrice:Number(ze.purchasePrice||0),salePrice:Number(ze.salePrice||0),invoiceTotal:Number(ze.invoiceTotal||0),expectedTotal:Number(ze.expectedTotal??(Number(ze.quantity||0)*Number(ze.salePrice||0)||0)),date:ze.date,createdAt:ze.createdAt,status:ze.status,notes:ze.notes,paidAmount:Number(ze.paidAmount||0),paidAt:ze.paidAt})}),n(nt),i(!1)})()},[]),k.useEffect(()=>{const Be=t.find(Te=>Te.id===y);Be&&V(Number(Be.price||0))},[y,t]),k.useEffect(()=>{I(Math.floor(B*b*100)/100)},[B,b]),k.useEffect(()=>{F(Math.floor(B*T*100)/100)},[B,T]);const we=Be=>{const Te=(Be||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Te)||Te==="lb"},he=k.useMemo(()=>r.filter(Be=>!(A&&Be.date<A||u&&Be.date>u||g&&Be.productId!==g)),[r,A,u,g]),fe=k.useMemo(()=>{const Be=he.reduce((pt,At)=>pt+(At.invoiceTotal||0),0),Te=he.reduce((pt,At)=>pt+(At.expectedTotal||0),0);let We=0,Me=0,nt=0,ct=0;for(const pt of he)we(pt.unit)?(We+=pt.quantity,Me+=pt.remaining):(nt+=pt.quantity,ct+=pt.remaining);const ze=he.reduce((pt,At)=>pt+At.quantity,0),Lt=he.reduce((pt,At)=>pt+At.remaining,0);return{lbsIng:We,lbsRem:Me,udsIng:nt,udsRem:ct,qty:ze,rem:Lt,totalFacturado:Be,totalEsperado:Te}},[he]),Ne=async Be=>{Be.preventDefault();const Te=t.find(We=>We.id===y);if(!Te||B<=0||b<=0){o("Completa producto, cantidad y costo.");return}try{const We=Ps(B),Me=await kY({productId:Te.id,productName:Te.name,category:Te.category,unit:Te.measurement,quantity:We,purchasePrice:b,salePrice:T,invoiceTotal:S,expectedTotal:R,date:j,notes:E});n(nt=>[{id:Me.id,productId:Te.id,productName:Te.name,category:Te.category,unit:Te.measurement,quantity:We,remaining:We,purchasePrice:b,salePrice:T,invoiceTotal:S,expectedTotal:R,date:j,createdAt:kt.now(),status:"PENDIENTE",notes:E},...nt]),o(" Lote creado"),C(""),w(0),N(0),V(Te.price||0),I(0),F(0),U("")}catch(We){console.error(We),o(" Error al crear lote")}},Ce=async Be=>{confirm(`Marcar PAGADO el lote del ${Be.date} (${Be.productName})?`)&&(await wL(Be.id),n(We=>We.map(Me=>Me.id===Be.id?{...Me,status:"PAGADO"}:Me)))},se=Be=>{ae(Be.id),ie(Be.date),Y(Ps(Be.quantity)),pe(Be.purchasePrice),W(Be.salePrice),M(Be.notes||""),Ae(Number((Be.quantity*Be.purchasePrice).toFixed(2))),ce(Number((Be.quantity*Be.salePrice).toFixed(2)))},wt=()=>{ae(null),ie(""),Y(0),pe(0),W(0),M(""),Ae(0),ce(0)};k.useEffect(()=>{K&&Ae(Math.floor(q*ue*100)/100)},[K,q,ue]),k.useEffect(()=>{K&&ce(Math.floor(q*D*100)/100)},[K,q,D]);const it=async()=>{if(!K)return;const Be=r.find(nt=>nt.id===K);if(!Be)return;const Te=Ps(Be.quantity-Be.remaining),We=Math.max(0,Ps(q-Te)),Me=Dt(Re,"inventory_batches",K);await dn(Me,{date:le,quantity:Ps(q),purchasePrice:ue,salePrice:D,invoiceTotal:Z,expectedTotal:oe,notes:ee,remaining:We}),n(nt=>nt.map(ct=>ct.id===K?{...ct,date:le,quantity:Ps(q),purchasePrice:ue,salePrice:D,invoiceTotal:Z,expectedTotal:oe,notes:ee,remaining:We}:ct)),wt(),o(" Lote actualizado")},et=async Be=>{confirm(`Eliminar el lote del ${Be.date} (${Be.productName})?`)&&(await Hi(Dt(Re,"inventory_batches",Be.id)),n(We=>We.filter(Me=>Me.id!==Be.id)),o(" Lote eliminado"))},De=()=>{const Be=(A?`Desde ${A}`:"Desde inicio")+"  "+(u?`Hasta ${u}`:"Hasta hoy"),Te=he.map(nt=>`
      <tr>
        <td>${nt.date}</td>
        <td>${(nt.category||"").toUpperCase()}</td>
        <td>${nt.productName}</td>
        <td>${(nt.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${nt.quantity.toFixed(3)}</td>
        <td style="text-align:right">${nt.remaining.toFixed(3)}</td>
        <td style="text-align:right">${ns(nt.purchasePrice)}</td>
        <td style="text-align:right">${ns(nt.salePrice)}</td>
        <td style="text-align:right">${ns(nt.invoiceTotal||0)}</td>
        <td style="text-align:right">${ns(nt.expectedTotal||0)}</td>
        <td>${nt.status}</td>
      </tr>`).join(""),We=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario por Lotes</title>
 <style>
  * { font-family: Arial, sans-serif; }
  h1 { margin: 0 0 4px; }
  .muted { color: #555; font-size: 12px; margin-bottom: 12px; }

  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th, td { border: 1px solid #ddd; padding: 6px; }
  th { background: #f5f5f5; text-align: left; }

  .totals {
    margin: 10px 0 16px;
    font-size: 12px;
    display: grid;
    grid-template-columns: repeat(2, max-content);
    column-gap: 32px;
    row-gap: 6px;
    align-items: center;
  }
  .totals span {
    margin: 0;
    white-space: nowrap;
  }

  @media print {
    @page { size: A4 landscape; margin: 15mm; }
    button { display: none; }
  }
</style>

</head>

<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario por Lotes</h1>
<div class="muted">${Be}</div>
<div class="totals">
  <span><strong>Libras ingresadas:</strong> ${fe.lbsIng.toFixed(3)}</span>
  <span><strong>Libras restantes:</strong> ${fe.lbsRem.toFixed(3)}</span>

  <span><strong>Unidades ingresadas:</strong> ${fe.udsIng.toFixed(3)}</span>
  <span><strong>Unidades restantes:</strong> ${fe.udsRem.toFixed(3)}</span>

  <span><strong>Total esperado a ganar:</strong> ${ns(fe.totalEsperado)}</span>
  <span><strong>Total facturado:</strong> ${ns(fe.totalFacturado)}</span>
  <span><strong>Ganancia sin gastos:</strong> ${ns(Number((fe.totalEsperado-fe.totalFacturado).toFixed(2)))}</span>
</div>

  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Producto</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      ${Te||'<tr><td colspan="11" style="text-align:center">Sin lotes</td></tr>'}
    </tbody>
  </table>
</body>
</html>`,Me=window.open("","_blank");Me&&(Me.document.open(),Me.document.write(We),Me.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Inventario Productos"}),l.jsxs("form",{onSubmit:Ne,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Be=>C(Be.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),t.map(Be=>l.jsxs("option",{value:Be.id,children:[Be.name,"  ",Be.category,"  ",Be.measurement,"  Precio:"," ",ns(Be.price)]},Be.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:Be=>L(Be.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (Lo que esta ingresando)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:B===0?"":B,onChange:Be=>{const Te=Be.target.value.replace(",","."),We=parseFloat(Te),Me=Number.isFinite(We)?parseFloat(We.toFixed(3)):0;w(Me)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (compra)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:Be=>{const Te=Be.target.value.replace(",","."),We=parseFloat(Te),Me=Number.isFinite(We)?parseFloat(We.toFixed(2)):0;N(Me)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (venta)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:T===0?"":T,onChange:Be=>{const Te=Be.target.value.replace(",","."),We=parseFloat(Te),Me=Number.isFinite(We)?parseFloat(We.toFixed(2)):0;V(Me)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ns(S),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ns(R),readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Notas"}),l.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:Be=>U(Be.target.value)})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:Be=>c(Be.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:Be=>f(Be.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:g,onChange:Be=>p(Be.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(Be=>l.jsxs("option",{value:Be.id,children:[Be.name,"  ",Be.category]},Be.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),p("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:De,children:"Imprimir PDF"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",fe.lbsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",fe.udsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",fe.totalEsperado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",fe.lbsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",fe.udsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",fe.totalFacturado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(fe.totalEsperado-fe.totalFacturado).toFixed(2)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Total ganancia"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):he.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes"})}):he.map(Be=>{const Te=K===Be.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Te?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:le,onChange:We=>ie(We.target.value)}):Be.date}),l.jsx("td",{className:"p-2 border",children:Be.category.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Be.productName}),l.jsx("td",{className:"p-2 border",children:Be.unit.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Te?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(q)?"":q,onChange:We=>{const Me=We.target.value.replace(",","."),nt=parseFloat(Me),ct=Number.isFinite(nt)?parseFloat(nt.toFixed(3)):0;Y(Math.max(0,ct))}}):Be.quantity.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Te?Be.remaining:Be.remaining.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Te?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ue)?"":ue,onChange:We=>{const Me=We.target.value.replace(",","."),nt=parseFloat(Me),ct=Number.isFinite(nt)?parseFloat(nt.toFixed(2)):0;pe(Math.max(0,ct))}}):ns(Be.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:Te?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(D)?"":D,onChange:We=>{const Me=We.target.value.replace(",","."),nt=parseFloat(Me),ct=Number.isFinite(nt)?parseFloat(nt.toFixed(2)):0;W(Math.max(0,ct))}}):ns(Be.salePrice)}),l.jsx("td",{className:"p-2 border",children:ns(Te?Z:Be.invoiceTotal||0)}),l.jsx("td",{className:"p-2 border",children:ns(Te?oe:Be.expectedTotal||0)}),l.jsx("td",{className:"p-2 border",children:ns(Te?oe-Z:(Be.expectedTotal||0)-(Be.invoiceTotal||0))}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Be.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Be.status})}),l.jsx("td",{className:"flex space-x-2 justify-center",children:Te?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:it,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:wt,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[Be.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>Ce(Be),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>se(Be),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>et(Be),children:"Borrar"})]})})]},Be.id)})})]})}),a&&l.jsx("p",{className:"mt-2 text-sm",children:a})]})}const Oo=t=>`C$${(Number(t)||0).toFixed(2)}`;function ZY(){const t=y9(new Date),[e,r]=k.useState(sr(t,"yyyy-MM")),[n,s]=k.useState([]),[i,a]=k.useState(!1),[o,A]=k.useState(""),c=k.useRef(null),u=k.useMemo(()=>{const[B,w]=e.split("-").map(T=>parseInt(T,10)),b=sr(Mp(new Date(B,w-1,1)),"yyyy-MM-dd"),N=sr(Op(new Date(B,w-1,1)),"yyyy-MM-dd");return{from:b,to:N}},[e]),f=async()=>{a(!0);try{const B=await RY(u.from,u.to),w=[];for(const b of B){const N=Dt(Re,"inventory_batches",b.batchId),T=await nu(N);if(!T.exists())continue;const V=T.data();w.push({batchId:b.batchId,batchDate:b.batchDate,productName:b.productName,soldQty:Number(b.quantity||0),soldAmount:Number(b.amountCharged||0),status:V.status??"PENDIENTE",purchasePrice:Number(V.purchasePrice||0),salePrice:Number(V.salePrice||0),supplier:V.supplier})}s(w)}catch(B){console.error(B),A(" Error al cargar liquidaciones")}finally{a(!1)}};k.useEffect(()=>{f()},[e]);const g=async B=>{confirm("Marcar este lote como PAGADO?")&&(await wL(B),s(b=>b.map(N=>N.batchId===B?{...N,status:"PAGADO"}:N)))},p=k.useMemo(()=>{const B=n.reduce((T,V)=>T+V.soldQty,0),w=n.reduce((T,V)=>T+V.soldAmount,0),b=n.reduce((T,V)=>T+V.soldQty*V.purchasePrice,0),N=w-b;return{q:B,amt:w,cogs:b,profit:N}},[n]),y=k.useMemo(()=>{const B=new Map;for(const w of n){const b=w.productName||"(sin nombre)";B.has(b)||B.set(b,{productName:b,qty:0,revenue:0,cogs:0,profit:0});const N=B.get(b);N.qty+=w.soldQty,N.revenue+=w.soldAmount;const T=w.soldQty*w.purchasePrice;N.cogs+=T,N.profit=N.revenue-N.cogs}return Array.from(B.values()).sort((w,b)=>w.productName.localeCompare(b.productName))},[n]),C=async()=>{if(!c.current)return;const B=c.current;B.classList.add("force-pdf-colors");try{const[{default:w},{jsPDF:b}]=await Promise.all([sA(()=>Promise.resolve().then(()=>_x),void 0),sA(()=>Promise.resolve().then(()=>dB),void 0)]),T=(await w(B,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),V=new b("p","mm","a4"),j=190,L=V.getImageProperties(T),S=j,I=L.height*S/L.width;V.addImage(T,"PNG",10,10,S,I),V.save(`liquidaciones_${e}.pdf`)}catch(w){console.error(w),alert("No se pudo generar el PDF")}finally{B.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),l.jsx("button",{onClick:C,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[l.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),l.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:B=>r(B.target.value)}),l.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),l.jsxs("div",{ref:c,children:[l.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",p.q]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",Oo(p.amt)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",Oo(p.cogs)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",Oo(p.profit)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Proveedor"}),l.jsx("th",{className:"p-2 border",children:"Vendido"}),l.jsx("th",{className:"p-2 border",children:"Monto vendido"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:i?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(B=>{const w=B.soldQty*B.purchasePrice,b=B.soldAmount-w;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:B.batchDate}),l.jsx("td",{className:"p-2 border",children:B.productName}),l.jsx("td",{className:"p-2 border",children:B.supplier||"-"}),l.jsx("td",{className:"p-2 border",children:B.soldQty}),l.jsx("td",{className:"p-2 border",children:Oo(B.soldAmount)}),l.jsx("td",{className:"p-2 border",children:Oo(w)}),l.jsx("td",{className:`p-2 border ${b>=0?"text-green-700":"text-red-700"}`,children:Oo(b)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${B.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:B.status})}),l.jsx("td",{className:"p-2 border",children:B.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>g(B.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},B.batchId)})})]})}),l.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),l.jsx("th",{className:"p-2 border",children:"Ingreso"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),l.jsx("tbody",{children:y.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):y.map(B=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:B.productName}),l.jsx("td",{className:"p-2 border",children:B.qty}),l.jsx("td",{className:"p-2 border",children:Oo(B.revenue)}),l.jsx("td",{className:"p-2 border",children:Oo(B.cogs)}),l.jsx("td",{className:`p-2 border ${B.profit>=0?"text-green-700":"text-red-700"}`,children:Oo(B.profit)})]},B.productName))})]})})]}),o&&l.jsx("p",{className:"mt-2 text-sm",children:o})]})}const Mo=t=>`C$${Number(t??0).toFixed(2)}`,eJ=()=>sr(new Date,"yyyy-MM-dd");function tJ(){const[t,e]=k.useState(()=>{const g=new Date,p=new Date(g.getFullYear(),g.getMonth(),1);return sr(p,"yyyy-MM-dd")}),[r,n]=k.useState(eJ()),[s,i]=k.useState(!0),[a,o]=k.useState([]),[A,c]=k.useState([]);k.useEffect(()=>{(async()=>{i(!0);const p=wr(ft(Re,"salesV2"),zr("date",">=",t),zr("date","<=",r)),y=await Mt(p),C=[];y.forEach(N=>{const T=N.data();C.push({id:N.id,date:T.date??"",productName:T.productName??"(sin nombre)",quantity:Number(T.quantity??0),amount:Number(T.amount??T.amountCharged??0),allocations:Array.isArray(T.allocations)?T.allocations:[],avgUnitCost:Number(T.avgUnitCost??0)})}),o(C);const B=wr(ft(Re,"expenses"),zr("date",">=",t),zr("date","<=",r)),w=await Mt(B),b=[];w.forEach(N=>{const T=N.data();b.push({id:N.id,date:T.date??"",category:T.category??"(sin categora)",description:T.description??"",amount:Number(T.amount??0),status:T.status??"PAGADO",createdAt:T.createdAt})}),c(b),i(!1)})()},[t,r]);const u=k.useMemo(()=>{const g=a.reduce((w,b)=>w+(b.amount||0),0);let p=0;a.forEach(w=>{if(w.allocations&&w.allocations.length>0){const b=w.allocations.reduce((N,T)=>N+Number(T.lineCost||0),0);p+=b}else w.avgUnitCost&&w.quantity&&(p+=Number(w.avgUnitCost)*Number(w.quantity))});const y=g-p,C=A.reduce((w,b)=>w+(b.amount||0),0),B=y-C;return{revenue:g,cogsReal:p,grossProfit:y,expensesSum:C,netProfit:B}},[a,A]),f=k.useMemo(()=>{var p;const g=new Map;for(const y of a){const C=y.productName||"(sin nombre)";g.has(C)||g.set(C,{productName:C,units:0,revenue:0,cogs:0,profit:0});const B=g.get(C);B.units+=Number(y.quantity||0),B.revenue+=Number(y.amount||0);let w=0;(p=y.allocations)!=null&&p.length?w=y.allocations.reduce((b,N)=>b+Number(N.lineCost||0),0):y.avgUnitCost&&(w=Number(y.avgUnitCost)*Number(y.quantity||0)),B.cogs+=w,B.profit=B.revenue-B.cogs}return Array.from(g.values()).sort((y,C)=>y.productName.localeCompare(C.productName))},[a]);return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow ",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Finanzas"}),l.jsxs("div",{className:"flex flex-wrap items-end gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:t,onChange:g=>e(g.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:g=>n(g.target.value)})]})]}),s?l.jsx("p",{children:"Cargando"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-6 text-3xl font-bold",children:[l.jsx(Ph,{title:"Ventas Totales",value:Mo(u.revenue)}),l.jsx(Ph,{title:"Costo de Mercaderia",value:Mo(u.cogsReal)}),l.jsx(Ph,{title:"Ganancia antes de Gastos",value:Mo(u.grossProfit),positive:!0}),l.jsx(Ph,{title:"Gastos del Negocio",value:Mo(u.expensesSum)}),l.jsx(Ph,{title:"Ganancia despues de Gastos",value:Mo(u.netProfit),positive:!0})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Ingreso"}),l.jsx("th",{className:"border p-2",children:"Costo"}),l.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),l.jsxs("tbody",{children:[f.map(g=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:g.productName}),l.jsx("td",{className:"border p-1",children:g.units}),l.jsx("td",{className:"border p-1",children:Mo(g.revenue)}),l.jsx("td",{className:"border p-1",children:Mo(g.cogs)}),l.jsx("td",{className:`border p-1 ${g.profit>=0?"text-green-700":"text-red-700"}`,children:Mo(g.profit)})]},g.productName)),f.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categora"}),l.jsx("th",{className:"border p-2",children:"Descripcin"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"})]})}),l.jsxs("tbody",{children:[A.map(g=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:g.date}),l.jsx("td",{className:"border p-1",children:g.category}),l.jsx("td",{className:"border p-1",children:g.description}),l.jsx("td",{className:"border p-1",children:Mo(g.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})})]},g.id)),A.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})]})]})}function Ph({title:t,value:e,positive:r}){return l.jsxs("div",{className:"border rounded-lg p-3",children:[l.jsx("div",{className:"text-xs text-gray-500",children:t}),l.jsx("div",{className:`text-xl font-bold ${r?"text-green-700":""}`,children:e})]})}const rJ=t=>`C$${Number(t??0).toFixed(2)}`;function nJ(){const[t,e]=k.useState([]),[r,n]=k.useState(!0),[s,i]=k.useState(sr(new Date,"yyyy-MM-dd")),[a,o]=k.useState("Varios"),[A,c]=k.useState(""),[u,f]=k.useState(0),[g,p]=k.useState("PENDIENTE"),[y,C]=k.useState(""),[B,w]=k.useState(null),[b,N]=k.useState(""),[T,V]=k.useState(""),[j,L]=k.useState(""),[S,I]=k.useState(0),R=async()=>{const ie=wr(ft(Re,"expenses"),Mi("createdAt","desc")),q=await Mt(ie),Y=[];q.forEach(ue=>Y.push({id:ue.id,...ue.data()})),e(Y)};k.useEffect(()=>{(async()=>(n(!0),await R(),n(!1)))()},[]);const F=async()=>{try{await Ds(ft(Re,"expenses"),{date:s,category:a,description:A,amount:Number(u)||0,status:g,createdAt:kt.now()}),C(" Gasto registrado."),i(sr(new Date,"yyyy-MM-dd")),o("Varios"),c(""),f(0),p("PENDIENTE"),await R()}catch(ie){console.error(ie),C(" No se pudo registrar el gasto.")}},E=async ie=>{confirm("Eliminar gasto?")&&(await Hi(Dt(Re,"expenses",ie)),e(q=>q.filter(Y=>Y.id!==ie)))},U=async ie=>{if(ie.status==="PAGADO")return;const q=Dt(Re,"expenses",ie.id);await dn(q,{status:"PAGADO",paidAt:kt.now()}),e(Y=>Y.map(ue=>ue.id===ie.id?{...ue,status:"PAGADO",paidAt:kt.now()}:ue))},K=ie=>{w(ie.id),N(ie.date||""),V(ie.category||"Varios"),L(ie.description||""),I(Number(ie.amount||0))},ae=()=>{w(null),N(""),V("Varios"),L(""),I(0)},le=async()=>{if(!B)return;const ie=Dt(Re,"expenses",B);await dn(ie,{date:b,category:T,description:j,amount:Number(S)||0}),e(q=>q.map(Y=>Y.id===B?{...Y,date:b,category:T,description:j,amount:Number(S)||0}:Y)),ae()};return l.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gastos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:s,onChange:ie=>i(ie.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Categora"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:a,onChange:ie=>o(ie.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Descripcin"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:A,onChange:ie=>c(ie.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"border rounded px-3 py-2 w-full",onKeyDown:ie=>{ie.key===","&&(ie.preventDefault(),ie.target.value+=".")},value:u===0?"":u,onChange:ie=>f(parseFloat((ie.target.value||"0").replace(",",".")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Estado"}),l.jsxs("select",{className:"border rounded px-3 py-2 w-full",value:g,onChange:ie=>p(ie.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]})]}),l.jsx("button",{onClick:F,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Registrar gasto"}),y&&l.jsx("p",{className:"mt-2 text-sm",children:y}),l.jsx("h3",{className:"font-semibold mt-6 mb-2",children:"Listado"}),r?l.jsx("p",{children:"Cargando"}):l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categora"}),l.jsx("th",{className:"border p-2",children:"Descripcin"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[t.map(ie=>{const q=B===ie.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:q?l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:b,onChange:Y=>N(Y.target.value)}):ie.date}),l.jsx("td",{className:"border p-1",children:q?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:T,onChange:Y=>V(Y.target.value)}):ie.category}),l.jsx("td",{className:"border p-1",children:q?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:j,onChange:Y=>L(Y.target.value)}):ie.description}),l.jsx("td",{className:"border p-1",children:q?l.jsx("input",{type:"number",step:"0.01",className:"border rounded px-2 py-1 w-full text-right",value:Number.isNaN(S)?"":S,onChange:Y=>I(parseFloat(Y.target.value||"0"))}):rJ(ie.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ie.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ie.status})}),l.jsx("td",{className:"border p-1 space-x-1",children:q?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:le,className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Guardar"}),l.jsx("button",{onClick:ae,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[ie.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>U(ie),className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Pagar"}),l.jsx("button",{onClick:()=>K(ie),className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700",children:"Editar"}),l.jsx("button",{onClick:()=>E(ie.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]})})]},ie.id)}),t.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin gastos an."})})]})]})]})}function Z0(t){return(t||"").trim().toLowerCase()}async function yL(){const t=await Mt(ft(Re,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),s=Z0(n.name??n.productName);s&&e.set(s,r.id)}),e}async function sJ(t=!1){const e=await yL(),r=await Mt(ft(Re,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const s of r.docs){n.checked++;const i=s.data(),a=Z0(i.productName);if(!a){n.missingName++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"missingName"});continue}const o=e.get(a);if(!o){n.withoutMatch++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"withoutMatch"});continue}if(i.productId===o){n.alreadyOk++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"alreadyOk"});continue}t||await dn(Dt(Re,"inventory_batches",s.id),{productId:o}),n.fixed++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function iJ(t,e=!1){const r=Z0(t),s=(await yL()).get(r);if(!s)throw new Error(`No existe un producto activo con nombre "${t}".`);const i=await Mt(ft(Re,"inventory_batches"));let a=0;for(const o of i.docs){const A=o.data();Z0(A.productName)===r&&A.productId!==s&&(e||await dn(Dt(Re,"inventory_batches",o.id),{productId:s}),a++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${a} lote(s)`),a}function aJ(){const[t,e]=k.useState(!1),[r,n]=k.useState(""),s=async()=>{try{e(!0),n("");const A=await sJ(!1);n(` Hecho. Revisados: ${A.checked}, Corregidos: ${A.fixed}, Ok: ${A.alreadyOk}, Sin nombre: ${A.missingName}, Sin match: ${A.withoutMatch}. (Mira consola para detalles)`)}catch(A){n(" Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}},[i,a]=k.useState(""),o=async()=>{if(!i.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const A=await iJ(i.trim(),!1);n(` Hecho. Corregidos ${A} lote(s) para "${i}".`)}catch(A){n(" Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}};return l.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",l.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),l.jsx("div",{className:"space-y-2",children:l.jsx("button",{onClick:s,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),l.jsx("hr",{}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),l.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:i,onChange:A=>a(A.target.value)}),l.jsx("button",{onClick:o,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&l.jsx("p",{className:"text-sm",children:r})]})}const Ho=t=>`C$ ${Number(t||0).toFixed(2)}`,kh=t=>Number(t||0).toFixed(3);function oJ(){var f,g,p,y,C;const[t,e]=k.useState([]),[r,n]=k.useState(!0),[s,i]=k.useState(null),a=k.useRef(null);k.useEffect(()=>{(async()=>{n(!0);const B=wr(ft(Re,"invoices"),Mi("date","desc")),w=await Mt(B),b=[];w.forEach(N=>{const T=N.data();b.push({id:N.id,...T,batches:T.batches||[],expenses:T.expenses||[],totals:T.totals||{lbs:T.totalLbs||0,units:T.totalUnits||0,amount:T.totalAmount||0,expenses:T.totalExpenses||0,finalAmount:T.finalAmount||0}})}),e(b),n(!1)})()},[]);const o=async B=>{const w=B.status==="PAGADA"?"PENDIENTE":"PAGADA";await dn(Dt(Re,"invoices",B.id),{status:w}),e(b=>b.map(N=>N.id===B.id?{...N,status:w}:N)),(s==null?void 0:s.id)===B.id&&i({...B,status:w})},A=async B=>{if(window.confirm(`Eliminar factura del ${B.date}?`))try{const w=Dt(Re,"invoices",B.id),b=await nu(w),N=b.exists()?b.data():null,T=Ww(Re),V=(N==null?void 0:N.batches)||[];for(const j of V){const L=j.batchId||j.id;if(!L)continue;const S=Dt(Re,"inventory_batches",L);T.update(S,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}T.delete(w),await T.commit(),e(j=>j.filter(L=>L.id!==B.id)),(s==null?void 0:s.id)===B.id&&i(null)}catch(w){console.error(w),alert("No se pudo eliminar la factura por completo.")}},c=async()=>{if(!a.current||!s)return;const B=a.current,w=await Cx(B,{backgroundColor:"#ffffff"}),b=w.toDataURL("image/png"),N=new Nt("p","mm","a4"),T=N.internal.pageSize.getWidth(),V=w.height*T/w.width;N.addImage(b,"PNG",0,0,T,V),N.save(`factura_${s.number||s.date}.pdf`)},u=B=>B.totals||{lbs:B.totalLbs||0,units:B.totalUnits||0,amount:B.totalAmount||0,expenses:B.totalExpenses||0,finalAmount:B.finalAmount||0};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"N factura"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Libras"}),l.jsx("th",{className:"p-2 border",children:"Unidades"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Gastos"}),l.jsx("th",{className:"p-2 border",children:"Monto final"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin facturas"})}):t.map(B=>{const w=u(B);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:B.date}),l.jsx("td",{className:"p-2 border",children:B.number||""}),l.jsx("td",{className:"p-2 border",children:B.description||""}),l.jsx("td",{className:"p-2 border",children:kh(w.lbs)}),l.jsx("td",{className:"p-2 border",children:kh(w.units)}),l.jsx("td",{className:"p-2 border",children:Ho(w.amount)}),l.jsx("td",{className:"p-2 border",children:Ho(w.expenses)}),l.jsx("td",{className:"p-2 border",children:Ho(w.finalAmount)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${B.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:B.status})}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>i(B),children:"Ver"}),l.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>o(B),children:B.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>A(B),children:"Eliminar"})]})})]},B.id)})})]})}),s&&l.jsxs("div",{ref:a,className:"bg-white p-4 rounded shadow border",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",s.date," ",s.number?` ${s.number}`:""]}),l.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>i(null),children:"Cerrar"}),l.jsx("button",{onClick:c,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Estado:"})," ",s.status]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras:"})," ",kh(((f=s.totals)==null?void 0:f.lbs)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",kh(((g=s.totals)==null?void 0:g.units)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto:"})," ",Ho(((p=s.totals)==null?void 0:p.amount)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Ho(((y=s.totals)==null?void 0:y.expenses)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto final:"})," ",Ho(((C=s.totals)==null?void 0:C.finalAmount)||0)]})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),l.jsxs("table",{className:"min-w-full text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"})]})}),l.jsx("tbody",{children:s.batches&&s.batches.length>0?s.batches.map((B,w)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:B.productName||"(sin nombre)"}),l.jsx("td",{className:"p-2 border",children:(B.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:kh(B.quantity)}),l.jsx("td",{className:"p-2 border",children:Ho(B.salePrice)}),l.jsx("td",{className:"p-2 border",children:Ho(B.amount)})]},w)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin items"})})})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:s.expenses&&s.expenses.length>0?s.expenses.map((B,w)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:B.date}),l.jsx("td",{className:"p-2 border",children:B.description}),l.jsx("td",{className:"p-2 border",children:Ho(B.amount)})]},w)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]})]})]})}const Tu=t=>`C$${Number(t||0).toFixed(2)}`,n1=t=>Number(t||0).toFixed(3),AJ=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function lJ({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[s,i]=k.useState(sr(new Date,"yyyy-MM-dd")),[a,o]=k.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[A,c]=k.useState(""),[u,f]=k.useState(n.map(E=>E.id)),[g,p]=k.useState([]),[y,C]=k.useState([]),[B,w]=k.useState(!1),[b,N]=k.useState(!1),[T,V]=k.useState("");k.useEffect(()=>{(async()=>{try{w(!0);const E=wr(ft(Re,"expenses"),Mi("date","desc")),U=await Mt(E),K=[];U.forEach(ae=>{const le=ae.data();K.push({id:ae.id,date:le.date,description:le.description,amount:Number(le.amount||0)})}),p(K)}catch(E){console.error(E)}finally{w(!1)}})()},[]);const j=k.useMemo(()=>n.filter(E=>u.includes(E.id)),[n,u]),L=k.useMemo(()=>{let E=0,U=0,K=0;for(const ie of j){AJ(ie.unit)?E+=Number(ie.quantity||0):U+=Number(ie.quantity||0);const q=ie.expectedTotal??Number((Number(ie.quantity||0)*Number(ie.salePrice||0)).toFixed(2));K+=Number(q||0)}const ae=g.filter(ie=>y.includes(ie.id)).reduce((ie,q)=>ie+Number(q.amount||0),0),le=K-ae;return{totalLbs:E,totalUnits:U,totalAmount:K,totalGastos:ae,finalAmount:le}},[j,g,y]),S=(E,U)=>{f(K=>U?[...new Set([...K,E])]:K.filter(ae=>ae!==E))},I=(E,U)=>{C(K=>U?[...new Set([...K,E])]:K.filter(ae=>ae!==E))},R=E=>{f(E?n.map(U=>U.id):[])},F=async()=>{if(V(""),j.length===0){V("Selecciona al menos 1 lote pagado.");return}try{N(!0);const E={number:a.trim(),date:s,description:A.trim(),status:"PENDIENTE",createdAt:kt.now(),totalLbs:Number(L.totalLbs.toFixed(3)),totalUnits:Number(L.totalUnits.toFixed(3)),totalAmount:Number(L.totalAmount.toFixed(2)),totalExpenses:Number(L.totalGastos.toFixed(2)),finalAmount:Number(L.finalAmount.toFixed(2)),batches:j.map(U=>{var K;return{id:U.id,productId:U.productId,productName:U.productName,unit:U.unit,quantity:Number(Number(U.quantity||0).toFixed(3)),salePrice:Number(Number(U.salePrice||0).toFixed(2)),amount:Number((Number(U.quantity||0)*Number(U.salePrice||0)).toFixed(2)),batchDate:U.date,paidAt:(K=U.paidAt)!=null&&K.toDate?sr(U.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:g.filter(U=>y.includes(U.id)).map(U=>({id:U.id,date:U.date||null,description:U.description||"",amount:Number(Number(U.amount||0).toFixed(2))}))};await Ds(ft(Re,"invoices"),E),V(" Factura creada."),r()}catch(E){console.error(E),V(` Error al crear factura: ${(E==null?void 0:E.message)||"desconocido"}`)}finally{N(!1)}};return l.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:l.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),l.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:s,onChange:E=>i(E.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:a,onChange:E=>o(E.target.value),placeholder:"FAC-001"})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:A,onChange:E=>c(E.target.value),placeholder:"Comentarios de la factura"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),l.jsxs("label",{className:"text-sm flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:n.length>0&&u.length===n.length,onChange:E=>R(E.target.checked)}),"Seleccionar todos"]})]}),n.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):l.jsx("div",{className:"border rounded",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha lote"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),l.jsx("tbody",{children:n.map(E=>{var ae;const U=u.includes(E.id),K=E.expectedTotal??Number((Number(E.quantity||0)*Number(E.salePrice||0)).toFixed(2));return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:U,onChange:le=>S(E.id,le.target.checked)})}),l.jsx("td",{className:"p-2 border",children:E.date}),l.jsx("td",{className:"p-2 border",children:E.productName}),l.jsx("td",{className:"p-2 border",children:(E.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:n1(E.quantity)}),l.jsx("td",{className:"p-2 border",children:Tu(E.salePrice)}),l.jsx("td",{className:"p-2 border",children:Tu(K)}),l.jsx("td",{className:"p-2 border",children:(ae=E.paidAt)!=null&&ae.toDate?sr(E.paidAt.toDate(),"yyyy-MM-dd"):""})]},E.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),B&&l.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"})]}),g.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos registrados o no estn disponibles."}):l.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:g.map(E=>{const U=y.includes(E.id);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:U,onChange:K=>I(E.id,K.target.checked)})}),l.jsx("td",{className:"p-2 border",children:E.date||""}),l.jsx("td",{className:"p-2 border",children:E.description||""}),l.jsx("td",{className:"p-2 border",children:Tu(Number(E.amount||0))})]},E.id)})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm mb-4",children:[l.jsxs("div",{children:["Total libras: ",l.jsx("strong",{children:n1(L.totalLbs)})]}),l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:n1(L.totalUnits)})]}),l.jsxs("div",{children:["Total monto: ",l.jsx("strong",{children:Tu(L.totalAmount)})]}),l.jsxs("div",{children:["Total gastos: ",l.jsx("strong",{children:Tu(L.totalGastos)})]}),l.jsxs("div",{className:"md:col-span-2",children:["Monto final (monto - gastos):"," ",l.jsx("strong",{children:Tu(L.finalAmount)})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{disabled:b,onClick:F,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:b?"Creando":"Crear factura"}),l.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),T&&l.jsx("span",{className:"text-sm ml-2",children:T})]})]})})}const ac=t=>`C$ ${Number(t||0).toFixed(2)}`,Uu=t=>Number(t||0).toFixed(3),cJ=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function uJ(){const[t,e]=k.useState([]),[r,n]=k.useState(!0),[s,i]=k.useState(sr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[a,o]=k.useState(sr(new Date,"yyyy-MM-dd")),[A,c]=k.useState(""),[u,f]=k.useState(!1);k.useEffect(()=>{(async()=>{n(!0);const B=wr(ft(Re,"inventory_batches"),zr("status","==","PAGADO"),Mi("date","desc")),w=await Mt(B),b=[];w.forEach(N=>{const T=N.data();b.push({id:N.id,productId:T.productId,productName:T.productName,category:T.category,unit:T.unit,quantity:Number(T.quantity||0),remaining:Number(T.remaining||0),purchasePrice:Number(T.purchasePrice||0),salePrice:Number(T.salePrice||0),invoiceTotal:Number(T.invoiceTotal||0),expectedTotal:Number(T.expectedTotal||Number(T.quantity||0)*Number(T.salePrice||0)),date:T.date,status:T.status,paidAt:T.paidAt})}),e(b),n(!1)})()},[]);const g=k.useMemo(()=>t.filter(B=>!(s&&B.date<s||a&&B.date>a||A&&B.productId!==A)),[t,s,a,A]),p=k.useMemo(()=>{let B=0,w=0,b=0,N=0,T=0,V=0;for(const j of g)cJ(j.unit)?(B+=j.quantity,w+=j.remaining):(b+=j.quantity,N+=j.remaining),T+=Number(j.expectedTotal||0),V+=Number(j.invoiceTotal||0);return{lbsIng:B,lbsRem:w,udsIng:b,udsRem:N,totalEsperado:T,totalFact:V,gross:T-V}},[g]),y=async B=>{window.confirm(`Marcar PENDIENTE el lote ${B.productName} (${B.date})?`)&&(await dn(Dt(Re,"inventory_batches",B.id),{status:"PENDIENTE"}),e(w=>w.map(b=>b.id===B.id?{...b,status:"PENDIENTE"}:b)))},C=k.useMemo(()=>{const B=new Map;return t.forEach(w=>B.set(w.productId,{id:w.productId,name:w.productName})),Array.from(B.values())},[t]);return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Inventarios Pagados"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:B=>i(B.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:B=>o(B.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:B=>c(B.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),C.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{i(""),o(""),c("")},children:"Quitar filtro"}),l.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>f(!0),children:"Crear factura"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Uu(p.lbsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Uu(p.udsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ac(p.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Uu(p.lbsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Uu(p.udsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ac(p.totalFact)]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ac(p.gross)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):g.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):g.map(B=>{var w;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:B.date}),l.jsx("td",{className:"p-2 border",children:(B.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:B.productName}),l.jsx("td",{className:"p-2 border",children:(B.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Uu(B.quantity)}),l.jsx("td",{className:"p-2 border",children:Uu(B.remaining)}),l.jsx("td",{className:"p-2 border",children:ac(B.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:ac(B.salePrice)}),l.jsx("td",{className:"p-2 border",children:ac(B.invoiceTotal||0)}),l.jsx("td",{className:"p-2 border",children:ac(B.expectedTotal||0)}),l.jsx("td",{className:"p-2 border",children:(w=B.paidAt)!=null&&w.toDate?sr(B.paidAt.toDate(),"yyyy-MM-dd"):""}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>y(B),children:"Marcar PENDIENTE"})})]},B.id)})})]})}),u&&l.jsx(lJ,{paidBatches:g,onClose:()=>f(!1),onCreated:()=>f(!1)})]})}const ss=t=>`C$ ${(Number(t)||0).toFixed(2)}`,dJ=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function dg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function hJ(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function fJ(t){const e="ROP",r=dg(t.subcat).slice(0,3)||"GEN",n=hJ(t.gender),s=dg(t.color).slice(0,3)||"COL",i=dg(t.size)||"TLL",a=dg(t.brand).slice(0,4)||"BRD",o=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${s}-${i}-${a}-${o}`}const Rh=/^[A-Za-z0-9._-]{0,32}$/;function pJ(){const[t,e]=k.useState([]),[r,n]=k.useState([]),[s,i]=k.useState(!0),[a,o]=k.useState(""),[A,c]=k.useState(sr(Mp(new Date),"yyyy-MM-dd")),[u,f]=k.useState(sr(Op(new Date),"yyyy-MM-dd")),[g,p]=k.useState(""),[y,C]=k.useState(""),[B,w]=k.useState(sr(new Date,"yyyy-MM-dd")),[b,N]=k.useState(0),[T,V]=k.useState(0),[j,L]=k.useState(0),[S,I]=k.useState(0),[R,F]=k.useState(0),[E,U]=k.useState(""),[K,ae]=k.useState(""),[le,ie]=k.useState(""),[q,Y]=k.useState(""),[ue,pe]=k.useState(""),[D,W]=k.useState(""),[ee,M]=k.useState(""),[Z,Ae]=k.useState(!1),[oe,ce]=k.useState(""),[we,he]=k.useState("Camisa"),[fe,Ne]=k.useState(null),[Ce,se]=k.useState(""),[wt,it]=k.useState(0),[et,De]=k.useState(0),[Be,Te]=k.useState(0),[We,Me]=k.useState(0),[nt,ct]=k.useState(0),[ze,Lt]=k.useState(""),[pt,At]=k.useState(""),[Qt,mt]=k.useState(""),[tr,Jt]=k.useState(""),[ht,Pt]=k.useState(""),[hr,Ft]=k.useState(""),[Se,Ge]=k.useState(""),[st,Xe]=k.useState(null),[Ye,Je]=k.useState({x:0,y:0});k.useEffect(()=>{const ve=()=>Xe(null),He=ot=>ot.key==="Escape"&&Xe(null);return document.addEventListener("click",ve),document.addEventListener("keydown",He),()=>{document.removeEventListener("click",ve),document.removeEventListener("keydown",He)}},[]);const at=(ve,He,ot=192,Zt=160)=>{let _t=ve;ve+ot+8>window.innerWidth&&(_t=ve-ot),_t=Math.max(8,Math.min(_t,window.innerWidth-ot-8));let bt=He;return He+Zt+8>window.innerHeight&&(bt=window.innerHeight-Zt-8),bt=Math.max(8,Math.min(bt,window.innerHeight-Zt-8)),{x:_t,y:bt}},rr=(ve,He)=>{ve.stopPropagation();const ot=ve.currentTarget.getBoundingClientRect(),Zt=ot.right,Wt=ot.bottom,_t=at(Zt,Wt);Je(_t),Xe(bt=>bt===He?null:He)};k.useEffect(()=>{const ve=()=>Xe(null),He=ot=>{ot.key==="Escape"&&Xe(null)};return document.addEventListener("click",ve),document.addEventListener("keydown",He),()=>{document.removeEventListener("click",ve),document.removeEventListener("keydown",He)}},[]),k.useEffect(()=>{if(!st)return;const ve=()=>Xe(null);return window.addEventListener("scroll",ve,!0),window.addEventListener("resize",ve),()=>{window.removeEventListener("scroll",ve,!0),window.removeEventListener("resize",ve)}},[st]),k.useEffect(()=>{(async()=>{const ve=await Mt(ft(Re,"products_clothes")),He=[];ve.forEach(_t=>{const bt=_t.data();He.push({id:_t.id,name:bt.name??"(sin nombre)",category:bt.category??"(sin categora)",measurement:bt.measurement??"unidad",price:Number(bt.price??0),sku:bt.sku||"",size:bt.size||"",color:bt.color||"",gender:bt.gender||"",brand:bt.brand||""})}),e(He);const ot=wr(ft(Re,"inventory_clothes_batches"),Mi("date","desc")),Zt=await Mt(ot),Wt=[];Zt.forEach(_t=>{const bt=_t.data();Wt.push({id:_t.id,productId:bt.productId,productName:bt.productName,category:bt.category,unit:bt.unit,quantity:Number(bt.quantity||0),remaining:Number(bt.remaining??bt.quantity??0),purchasePrice:Number(bt.purchasePrice||0),salePrice:Number(bt.salePrice||0),invoiceTotal:Number(bt.invoiceTotal??Number(bt.quantity||0)*Number(bt.purchasePrice||0)),expectedTotal:Number(bt.expectedTotal??Number(bt.quantity||0)*Number(bt.salePrice||0)),date:bt.date,createdAt:bt.createdAt,status:bt.status,notes:bt.notes||"",sku:bt.sku||"",size:bt.size||"",color:bt.color||"",gender:bt.gender||"",brand:bt.brand||"",clientCode:bt.clientCode||""})}),n(Wt),i(!1)})()},[]),k.useEffect(()=>{const ve=t.find(He=>He.id===y);ve&&(L(Number(ve.price||0)),ve.sku&&ae(ve.sku),ve.size&&ie(He=>He||ve.size),ve.color&&Y(He=>He||ve.color),ve.gender&&pe(He=>He||ve.gender),ve.brand&&W(He=>He||ve.brand))},[y,t]),k.useEffect(()=>{I(Math.floor(b*T*100)/100)},[b,T]),k.useEffect(()=>{F(Math.floor(b*j*100)/100)},[b,j]),k.useEffect(()=>{const ve=t.find(Zt=>Zt.id===y);if(ve!=null&&ve.sku){ae(ve.sku);return}const He=Z&&we?we:(ve==null?void 0:ve.category)||"";if(!He&&!ue&&!q&&!le&&!D){ae("");return}const ot=fJ({subcat:He,gender:ue||"",color:q||"",size:le||"",brand:D||""});ae(ot)},[Z,we,y,ue,q,le,D,t]);const $t=k.useMemo(()=>r.filter(ve=>!(A&&ve.date<A||u&&ve.date>u||g&&ve.productId!==g)),[r,A,u,g]),vr=k.useMemo(()=>{const ve=$t.reduce((Wt,_t)=>Wt+(_t.invoiceTotal||0),0),He=$t.reduce((Wt,_t)=>Wt+(_t.expectedTotal||0),0),ot=$t.reduce((Wt,_t)=>Wt+_t.quantity,0),Zt=$t.reduce((Wt,_t)=>Wt+_t.remaining,0);return{udsIng:ot,udsRem:Zt,totalFacturado:ve,totalEsperado:He}},[$t]),en=async ve=>{ve.preventDefault(),o("");const He=!!y&&!Z,ot=t.find(bt=>bt.id===y),Zt=He?(ot==null?void 0:ot.name)||"":oe||"",Wt=He?(ot==null?void 0:ot.category)||"":we||"General",_t=He&&(ot==null?void 0:ot.measurement)||"unidad";if(!Zt||b<=0||T<=0){o("Completa nombre/cantidad/costo.");return}if(ee&&!Rh.test(ee)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const bt=await Ds(ft(Re,"inventory_clothes_batches"),{productId:He?ot.id:"",productName:Zt,category:Wt,unit:_t,quantity:b,remaining:b,purchasePrice:T,salePrice:j,invoiceTotal:S,expectedTotal:R,date:B,createdAt:kt.now(),status:"PENDIENTE",notes:E||"",sku:K||"",size:le||"",color:q||"",gender:ue||"",brand:D||"",clientCode:ee||""});n(es=>[{id:bt.id,productId:He?ot.id:"",productName:Zt,category:Wt,unit:_t,quantity:b,remaining:b,purchasePrice:T,salePrice:j,invoiceTotal:S,expectedTotal:R,date:B,createdAt:kt.now(),status:"PENDIENTE",notes:E||"",sku:K||"",size:le||"",color:q||"",gender:ue||"",brand:D||"",clientCode:ee||""},...es]),o(" Lote de ropa creado"),C(""),w(sr(new Date,"yyyy-MM-dd")),N(0),V(0),L(0),I(0),F(0),U(""),ae(""),ie(""),Y(""),pe(""),W(""),M(""),Ae(!1),ce(""),he("Camisa")}catch(bt){console.error(bt),o(" Error al crear lote")}},Ct=async ve=>{confirm(`Marcar PAGADO el lote del ${ve.date} (${ve.productName})?`)&&(await dn(Dt(Re,"inventory_clothes_batches",ve.id),{status:"PAGADO"}),n(ot=>ot.map(Zt=>Zt.id===ve.id?{...Zt,status:"PAGADO"}:Zt)))},Rr=ve=>{Ne(ve.id),se(ve.date),it(ve.quantity),De(ve.purchasePrice),Te(ve.salePrice),Me(Number((ve.quantity*ve.purchasePrice).toFixed(2))),ct(Number((ve.quantity*ve.salePrice).toFixed(2))),Lt(ve.notes||""),At(ve.sku||""),mt(ve.size||""),Jt(ve.color||""),Pt(ve.gender||""),Ft(ve.brand||""),Ge(ve.clientCode||"")},Os=()=>{Ne(null),se(""),it(0),De(0),Te(0),Me(0),ct(0),Lt(""),At(""),mt(""),Jt(""),Pt(""),Ft(""),Ge("")};k.useEffect(()=>{fe&&Me(Math.floor(wt*et*100)/100)},[fe,wt,et]),k.useEffect(()=>{fe&&ct(Math.floor(wt*Be*100)/100)},[fe,wt,Be]);const jn=async()=>{if(!fe)return;const ve=r.find(Wt=>Wt.id===fe);if(!ve)return;const He=Math.max(0,ve.quantity-ve.remaining),ot=Math.max(0,wt-He);if(Se&&!Rh.test(Se)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Zt=Dt(Re,"inventory_clothes_batches",fe);await dn(Zt,{date:Ce,quantity:wt,purchasePrice:et,salePrice:Be,invoiceTotal:We,expectedTotal:nt,notes:ze,remaining:ot,sku:pt,size:Qt,color:tr,gender:ht||"",brand:hr||"",clientCode:Se||""}),n(Wt=>Wt.map(_t=>_t.id===fe?{..._t,date:Ce,quantity:wt,purchasePrice:et,salePrice:Be,invoiceTotal:We,expectedTotal:nt,notes:ze,remaining:ot,sku:pt,size:Qt,color:tr,gender:ht||"",brand:hr||"",clientCode:Se||""}:_t)),Os(),o(" Lote actualizado")},On=async ve=>{confirm(`Eliminar el lote del ${ve.date} (${ve.productName})?`)&&(await Hi(Dt(Re,"inventory_clothes_batches",ve.id)),n(ot=>ot.filter(Zt=>Zt.id!==ve.id)),o(" Lote eliminado"))},Or=()=>{const ve=(A?`Desde ${A}`:"Desde inicio")+"  "+(u?`Hasta ${u}`:"Hasta hoy"),He=_t=>(_t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ot=$t.map(_t=>`
      <tr>
        <td>${_t.date}</td>
        <td>${(_t.category||"").toUpperCase()}</td>
        <td>${He(_t.productName)}</td>
        <td>${He(_t.sku||"")}</td>
        <td>${He(_t.size||"")}</td>
        <td>${He(_t.color||"")}</td>
        <td>${He(_t.clientCode||"")}</td>
        <td>${He(_t.gender||"")}</td>
        <td>${(_t.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${_t.quantity.toFixed(0)}</td>
        <td style="text-align:right">${_t.remaining.toFixed(0)}</td>
        <td style="text-align:right">${ss(_t.purchasePrice)}</td>
        <td style="text-align:right">${ss(_t.salePrice)}</td>
        <td style="text-align:right">${ss(_t.invoiceTotal||0)}</td>
        <td style="text-align:right">${ss(_t.expectedTotal||0)}</td>
        <td>${He((_t.notes||"").slice(0,120))}</td>
        <td>${_t.status}</td>
      </tr>`).join(""),Zt=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${ve}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${vr.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${vr.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${ss(vr.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${ss(vr.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${ss(Number((vr.totalEsperado-vr.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${ot||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Wt=window.open("","_blank");Wt&&(Wt.document.open(),Wt.document.write(Zt),Wt.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Inventario de Ropa"}),l.jsxs("form",{onSubmit:en,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:ve=>C(ve.target.value),children:[l.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(ve=>l.jsxs("option",{value:ve.id,children:[ve.name,"  ",ve.category,"  ",ve.sku?`SKU: ${ve.sku}`:""]},ve.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:B,onChange:ve=>w(ve.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:ve=>N(Math.max(0,parseInt(ve.target.value||"0",10))),placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:T===0?"":T,onChange:ve=>V(Math.max(0,parseFloat(ve.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:j===0?"":j,onChange:ve=>L(Math.max(0,parseFloat(ve.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:K,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:le,readOnly:!0,onChange:ve=>ie(ve.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:q,readOnly:!0,onChange:ve=>Y(ve.target.value),placeholder:"Negro, Azul, Rojo"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ue,readOnly:!0,onChange:ve=>pe(ve.target.value),placeholder:"Masculino, Femenino, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:D,onChange:ve=>W(ve.target.value),placeholder:"Shein, Usado, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:ee,onChange:ve=>{const He=ve.target.value;Rh.test(He)&&M(He)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!Rh.test(ee)&&ee.length>0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:E,onChange:ve=>U(ve.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[E.length,"/500"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ss(S),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ss(R),readOnly:!0})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:ve=>c(ve.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ve=>f(ve.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:g,onChange:ve=>p(ve.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(ve=>l.jsxs("option",{value:ve.id,children:[ve.name,"  ",ve.category]},ve.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),p("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Or,children:"Imprimir PDF"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",vr.udsIng.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",vr.udsRem.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ss(vr.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ss(vr.totalFacturado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ss(Number((vr.totalEsperado-vr.totalFacturado).toFixed(2)))]})]})}),l.jsx("div",{className:"bg-white rounded shadow border",children:l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),l.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{className:"whitespace-nowrap",children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):$t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):$t.map(ve=>{const He=fe===ve.id;return l.jsxs("tr",{className:"text-left",children:[l.jsx("td",{className:"p-2 md:p-3 border align-top",children:He?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ce,onChange:ot=>se(ot.target.value)}):ve.date}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(ve.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:l.jsx("span",{className:"block truncate",title:ve.productName,children:ve.productName})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:He?l.jsx("input",{className:"w-full border p-1 rounded",value:pt,onChange:ot=>At(ot.target.value)}):l.jsx("span",{className:"block truncate",title:ve.sku||"",children:ve.sku||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:He?l.jsx("input",{className:"w-full border p-1 rounded",value:Qt,onChange:ot=>mt(ot.target.value)}):ve.size||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:He?l.jsx("input",{className:"w-full border p-1 rounded",value:tr,onChange:ot=>Jt(ot.target.value)}):ve.color||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:He?l.jsx("input",{className:"w-full border p-1 rounded",value:Se,onChange:ot=>{const Zt=ot.target.value;Rh.test(Zt)&&Ge(Zt)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):l.jsx("span",{className:"block truncate",title:ve.clientCode||"",children:ve.clientCode||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:He?l.jsx("select",{className:"w-full border p-1 rounded",value:ht,onChange:ot=>Pt(ot.target.value),children:dJ.map(ot=>l.jsx("option",{value:ot,children:ot||""},ot))}):ve.gender||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(ve.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:He?l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(wt)?"":wt,onChange:ot=>it(Math.max(0,parseInt(ot.target.value||"0",10)))}):ve.quantity.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:He?ve.remaining:ve.remaining.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:He?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(et)?"":et,onChange:ot=>De(Math.max(0,parseFloat(ot.target.value||"0")))}):ss(ve.purchasePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:He?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Be)?"":Be,onChange:ot=>Te(Math.max(0,parseFloat(ot.target.value||"0")))}):ss(ve.salePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:ss(He?We:ve.invoiceTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:ss(He?nt:ve.expectedTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:He?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ze,onChange:ot=>Lt(ot.target.value),maxLength:500}):l.jsx("span",{className:"block truncate",title:ve.notes||"",children:ve.notes||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${ve.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ve.status})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:He?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:jn,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Os,children:"Cancelar"})]}):l.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:ot=>rr(ot,ve.id),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},ve.id)})})]})})}),st&&o4.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:()=>Xe(null),className:"fixed inset-0 z-[60]"}),l.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:Ye.x,top:Ye.y},onClick:ve=>ve.stopPropagation(),role:"menu","aria-orientation":"vertical",children:l.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const ve=$t.find(He=>He.id===st);return(ve==null?void 0:ve.status)==="PENDIENTE"?l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{Xe(null),Ct(ve)},children:" Pagar"}):null})(),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const ve=$t.find(He=>He.id===st);ve&&(Xe(null),Rr(ve))},children:" Editar"}),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const ve=$t.find(He=>He.id===st);ve&&(Xe(null),On(ve))},children:" Borrar"})]})})]}),document.body),a&&l.jsx("p",{className:"mt-2 text-sm",children:a})]})}const mJ=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],gJ=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],wJ=["XS","S","M","L","XL","2XL"],vJ=["2","4","6","8","10","12","14"],yJ=["26","28","30","32","34","36","38"],BJ=["Shein","Usado","Otro"],bJ=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function hg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function xJ(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function CJ(t){const e="ROP",r=hg(t.subcat).slice(0,3)||"GEN",n=xJ(t.gender),s=hg(t.color).slice(0,3)||"COL",i=hg(t.size)||"TLL",a=hg(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${s}-${i}-${a}`}const s1=/^[A-Za-z0-9._-]{0,32}$/;function _J(){const[t,e]=k.useState(""),[r,n]=k.useState("Camisa"),[s,i]=k.useState(""),[a,o]=k.useState(""),[A,c]=k.useState("Shein"),[u,f]=k.useState(""),[g,p]=k.useState(""),[y,C]=k.useState(""),[B,w]=k.useState(""),[b,N]=k.useState([]),[T,V]=k.useState(!0),[j,L]=k.useState(""),S=k.useMemo(()=>r.toLowerCase()==="jean"?yJ:u==="NINO"||u==="NINA"?vJ:wJ,[r,u]);k.useEffect(()=>{C(CJ({subcat:r,gender:u,color:a,size:s,brand:A}))},[r,u,a,s,A]),k.useEffect(()=>{(async()=>{const E=wr(ft(Re,"products_clothes"),Mi("createdAt","desc")),U=await Mt(E),K=[];U.forEach(ae=>{const le=ae.data();K.push({id:ae.id,name:le.name??"(sin nombre)",category:le.category??"",measurement:le.measurement??"unidad",sku:le.sku??"",size:le.size||"",color:le.color||"",brand:le.brand||"",gender:le.gender||"",clientCode:le.clientCode||"",notes:le.notes||"",createdAt:le.createdAt??kt.now()})}),N(K),V(!1)})()},[]);const I=()=>{e(""),n("Camisa"),i(""),o(""),c("Shein"),f(""),p(""),w("")},R=async E=>{if(E.preventDefault(),L(""),!t.trim()){L("Ingresa el nombre del producto.");return}if(g&&!s1.test(g)){L("Cdigo del cliente invlido (AZ 09 . _ - , mx 32).");return}try{const U=await Ds(ft(Re,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:y,size:s||"",color:a||"",brand:A||"",gender:u||"",clientCode:g||"",notes:B||"",createdAt:kt.now()});N(K=>[{id:U.id,name:t.trim(),category:r,measurement:"unidad",sku:y,size:s||"",color:a||"",brand:A||"",gender:u||"",clientCode:g||"",notes:B||"",createdAt:kt.now()},...K]),I(),L(" Producto de ropa creado")}catch(U){console.error(U),L(" Error al crear producto")}},F=async E=>{confirm(`Eliminar el producto "${E.name}"?`)&&(await Hi(Dt(Re,"products_clothes",E.id)),N(K=>K.filter(ae=>ae.id!==E.id)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Productos de Ropa"}),l.jsxs("form",{onSubmit:R,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del producto"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Blusa floral manga corta",value:t,onChange:E=>e(E.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),l.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:E=>n(E.target.value),children:mJ.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Gnero (opcional)"}),l.jsx("select",{className:"w-full border p-2 rounded",value:u,onChange:E=>f(E.target.value),children:bJ.map(E=>l.jsx("option",{value:E,children:E||""},E))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla (opcional)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:E=>i(E.target.value),children:[l.jsx("option",{value:"",children:""}),S.map(E=>l.jsx("option",{value:E,children:E},E))]}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sugeridas por subcategora/gnero"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color (opcional)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:E=>o(E.target.value),children:[l.jsx("option",{value:"",children:""}),gJ.map(E=>l.jsx("option",{value:E,children:E},E))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),l.jsx("select",{className:"w-full border p-2 rounded",value:A,onChange:E=>c(E.target.value),children:BJ.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:y,readOnly:!0,placeholder:"Se genera automticamente",title:"Se genera de subcategora, gnero, talla, color y marca"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:g,onChange:E=>{const U=E.target.value;s1.test(U)&&p(U)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!s1.test(g)&&g.length>0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:E=>w(E.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Crear producto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Subcat."}),l.jsx("th",{className:"p-2 border",children:"Nombre Producto"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Talla"}),l.jsx("th",{className:"p-2 border",children:"Color"}),l.jsx("th",{className:"p-2 border",children:"Marca"}),l.jsx("th",{className:"p-2 border",children:"Gnero"}),l.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:T?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:11,children:"Cargando"})}):b.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:11,children:"Sin productos"})}):b.map(E=>{var U,K;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(U=E.createdAt)!=null&&U.toDate?E.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:E.category||""}),l.jsx("td",{className:"p-2 border",children:E.name}),l.jsx("td",{className:"p-2 border",children:E.sku||""}),l.jsx("td",{className:"p-2 border",children:E.size||""}),l.jsx("td",{className:"p-2 border",children:((K=E.color)==null?void 0:K.toUpperCase())||""}),l.jsx("td",{className:"p-2 border",children:E.brand||""}),l.jsx("td",{className:"p-2 border",children:E.gender||""}),l.jsx("td",{className:"p-2 border",children:E.clientCode||""}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{title:E.notes||"",children:(E.notes||"").length>40?(E.notes||"").slice(0,40)+"":E.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>F(E),children:"Borrar"})})]},E.id)})})]})}),j&&l.jsx("p",{className:"mt-2 text-sm",children:j})]})}const KN=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Qu=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function fg(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function EJ(){const[t,e]=k.useState(""),[r,n]=k.useState("+505 "),[s,i]=k.useState(""),[a,o]=k.useState(""),[A,c]=k.useState("ACTIVO"),[u,f]=k.useState(0),[g,p]=k.useState([]),[y,C]=k.useState(!0),[B,w]=k.useState(""),[b,N]=k.useState(null),[T,V]=k.useState(""),[j,L]=k.useState("+505 "),[S,I]=k.useState(""),[R,F]=k.useState(""),[E,U]=k.useState("ACTIVO"),[K,ae]=k.useState(0),[le,ie]=k.useState(!1),[q,Y]=k.useState(null),[ue,pe]=k.useState(!1),[D,W]=k.useState([]),[ee,M]=k.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[Z,Ae]=k.useState(!1),[oe,ce]=k.useState(0),[we,he]=k.useState(new Date().toISOString().slice(0,10)),[fe,Ne]=k.useState(""),[Ce,se]=k.useState(!1),[wt,it]=k.useState(null),[et,De]=k.useState(""),[Be,Te]=k.useState(0),[We,Me]=k.useState("");k.useEffect(()=>{(async()=>{const Se=wr(ft(Re,"customers_clothes"),Mi("createdAt","desc")),Ge=await Mt(Se),st=[];Ge.forEach(Xe=>{const Ye=Xe.data();st.push({id:Xe.id,name:Ye.name??"",phone:Ye.phone??"+505 ",place:Ye.place??"",notes:Ye.notes??"",status:Ye.status??"ACTIVO",creditLimit:Number(Ye.creditLimit??0),createdAt:Ye.createdAt??kt.now(),balance:0})});for(const Xe of st)try{const Ye=wr(ft(Re,"ar_movements"),zr("customerId","==",Xe.id)),Je=await Mt(Ye);let at=0;Je.forEach(rr=>{const $t=Number(rr.data().amount||0);at+=$t}),Xe.balance=at}catch{Xe.balance=0}p(st),C(!1)})()},[]);const nt=()=>{e(""),n("+505 "),i(""),o(""),c("ACTIVO"),f(0)},ct=async Se=>{if(Se.preventDefault(),w(""),!t.trim()){w("Ingresa el nombre.");return}const Ge=fg(r);if(Ge.length<6){w("Telfono incompleto.");return}try{const st=await Ds(ft(Re,"customers_clothes"),{name:t.trim(),phone:Ge,place:s||"",notes:a||"",status:A,creditLimit:Number(u||0),createdAt:kt.now()});p(Xe=>[{id:st.id,name:t.trim(),phone:Ge,place:s||"",notes:a||"",status:A,creditLimit:Number(u||0),createdAt:kt.now(),balance:0},...Xe]),nt(),w(" Cliente creado")}catch(st){console.error(st),w(" Error al crear cliente")}},ze=Se=>{N(Se.id),V(Se.name),L(Se.phone||"+505 "),I(Se.place||""),F(Se.notes||""),U(Se.status||"ACTIVO"),ae(Number(Se.creditLimit||0))},Lt=()=>{N(null),V(""),L("+505 "),I(""),F(""),U("ACTIVO"),ae(0)},pt=async()=>{if(!b)return;const Se=fg(j);if(!T.trim()){w("Ingresa el nombre.");return}try{await dn(Dt(Re,"customers_clothes",b),{name:T.trim(),phone:Se,place:S||"",notes:R||"",status:E,creditLimit:Number(K||0)}),p(Ge=>Ge.map(st=>st.id===b?{...st,name:T.trim(),phone:Se,place:S||"",notes:R||"",status:E,creditLimit:Number(K||0)}:st)),Lt(),w(" Cliente actualizado")}catch(Ge){console.error(Ge),w(" Error al actualizar")}},At=async Se=>{confirm(`Eliminar al cliente "${Se.name}"?`)&&(await Hi(Dt(Re,"customers_clothes",Se.id)),p(st=>st.filter(Xe=>Xe.id!==Se.id)))},Qt=async Se=>{Y(Se),W([]),M({saldoActual:0,totalAbonado:0,totalCargos:0}),ie(!0),Ae(!1),ce(0),he(new Date().toISOString().slice(0,10)),Ne(""),it(null),pe(!0);try{const Ge=wr(ft(Re,"ar_movements"),zr("customerId","==",Se.id)),st=await Mt(Ge),Xe=[];st.forEach(Ye=>{var at,rr;const Je=Ye.data();Xe.push({id:Ye.id,date:Je.date??((rr=(at=Je.createdAt)==null?void 0:at.toDate)!=null&&rr.call(at)?Je.createdAt.toDate().toISOString().slice(0,10):""),type:Je.type??"CARGO",amount:Number(Je.amount||0),ref:Je.ref||{},comment:Je.comment||"",createdAt:Je.createdAt})}),Xe.sort((Ye,Je)=>{var $t,vr;if(Ye.date!==Je.date)return Ye.date.localeCompare(Je.date);const at=(($t=Ye.createdAt)==null?void 0:$t.seconds)||0,rr=((vr=Je.createdAt)==null?void 0:vr.seconds)||0;return at-rr}),W(Xe),mt(Xe)}catch(Ge){console.error(Ge),w(" No se pudo cargar el estado de cuenta")}finally{pe(!1)}},mt=Se=>{const Ge=Se.reduce((Ye,Je)=>Ye+(Number(Je.amount)||0),0),st=Se.filter(Ye=>Number(Ye.amount)<0).reduce((Ye,Je)=>Ye+Math.abs(Number(Je.amount)||0),0),Xe=Se.filter(Ye=>Number(Ye.amount)>0).reduce((Ye,Je)=>Ye+Number(Je.amount)||0,0);M({saldoActual:Ge,totalAbonado:st,totalCargos:Xe})},tr=async()=>{if(!q)return;w("");const Se=Number(oe||0);if(!(Se>0)){w("Ingresa un monto de abono mayor a 0.");return}const Ge=parseFloat(Se.toFixed(2));if(!we){w("Selecciona la fecha del abono.");return}try{se(!0);const st={customerId:q.id,type:"ABONO",amount:-Ge,date:we,comment:fe||"",createdAt:kt.now()},Ye={id:(await Ds(ft(Re,"ar_movements"),st)).id,date:we,type:"ABONO",amount:-Ge,comment:fe||"",createdAt:kt.now()},Je=[...D,Ye].sort((at,rr)=>{var en,Ct;if(at.date!==rr.date)return at.date.localeCompare(rr.date);const $t=((en=at.createdAt)==null?void 0:en.seconds)||0,vr=((Ct=rr.createdAt)==null?void 0:Ct.seconds)||0;return $t-vr});W(Je),mt(Je),p(at=>at.map(rr=>rr.id===q.id?{...rr,balance:(rr.balance||0)-Ge}:rr)),Y(at=>at&&{...at,balance:(at.balance||0)-Ge}),ce(0),Ne(""),he(new Date().toISOString().slice(0,10)),Ae(!1),w(" Abono registrado")}catch(st){console.error(st),w(" Error al registrar el abono")}finally{se(!1)}},Jt=Se=>{it(Se.id),De(Se.date||new Date().toISOString().slice(0,10)),Te(Math.abs(Number(Se.amount||0))),Me(Se.comment||"")},ht=()=>{it(null),De(""),Te(0),Me("")},Pt=async()=>{if(!wt)return;const Se=D.findIndex(Ye=>Ye.id===wt);if(Se===-1)return;const Ge=D[Se],st=Number(Be||0);if(!(st>0)){w("El monto debe ser mayor a 0.");return}const Xe=Ge.type==="ABONO"?-parseFloat(st.toFixed(2)):+parseFloat(st.toFixed(2));try{await dn(Dt(Re,"ar_movements",wt),{date:et,amount:Xe,comment:We||""});const Ye=[...D];Ye[Se]={...Ge,date:et,amount:Xe,comment:We||""},Ye.sort((at,rr)=>{var en,Ct;if(at.date!==rr.date)return at.date.localeCompare(rr.date);const $t=((en=at.createdAt)==null?void 0:en.seconds)||0,vr=((Ct=rr.createdAt)==null?void 0:Ct.seconds)||0;return $t-vr}),W(Ye),mt(Ye);const Je=Ye.reduce((at,rr)=>at+(Number(rr.amount)||0),0);p(at=>at.map(rr=>rr.id===(q==null?void 0:q.id)?{...rr,balance:Je}:rr)),Y(at=>at&&{...at,balance:Je}),ht(),w(" Movimiento actualizado")}catch(Ye){console.error(Ye),w(" Error al actualizar movimiento")}},hr=async Se=>{if(confirm(`Eliminar este movimiento (${Se.type==="ABONO"?"Abono":"Compra"}) del ${Se.date}?`))try{await Hi(Dt(Re,"ar_movements",Se.id));const st=D.filter(Ye=>Ye.id!==Se.id);W(st),mt(st);const Xe=st.reduce((Ye,Je)=>Ye+(Number(Je.amount)||0),0);p(Ye=>Ye.map(Je=>Je.id===(q==null?void 0:q.id)?{...Je,balance:Xe}:Je)),Y(Ye=>Ye&&{...Ye,balance:Xe}),w(" Movimiento eliminado")}catch(st){console.error(st),w(" Error al eliminar movimiento")}},Ft=k.useMemo(()=>[...g].sort((Se,Ge)=>{var st,Xe;return Se.status!==Ge.status?Se.status==="BLOQUEADO"?1:-1:(((st=Ge.createdAt)==null?void 0:st.seconds)||0)-(((Xe=Se.createdAt)==null?void 0:Xe.seconds)||0)}),[g]);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Clientes (Ropa)"}),l.jsxs("form",{onSubmit:ct,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:t,onChange:Se=>e(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:r,onChange:Se=>n(fg(Se.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:Se=>i(Se.target.value),children:[l.jsx("option",{value:"",children:""}),KN.map(Se=>l.jsx("option",{value:Se,children:Se},Se))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:Se=>c(Se.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:u===0?"":u,onChange:Se=>f(Math.max(0,Number(Se.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:a,onChange:Se=>o(Se.target.value),maxLength:500,placeholder:"Notas del cliente"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[a.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Telfono"}),l.jsx("th",{className:"p-2 border",children:"Lugar"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Lmite"}),l.jsx("th",{className:"p-2 border",children:"Saldo"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Ft.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):Ft.map(Se=>{var st;const Ge=b===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(st=Se.createdAt)!=null&&st.toDate?Se.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:Xe=>V(Xe.target.value)}):Se.name}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{className:"w-full border p-1 rounded",value:j,onChange:Xe=>L(fg(Xe.target.value))}):Se.phone}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsxs("select",{className:"w-full border p-1 rounded",value:S,onChange:Xe=>I(Xe.target.value),children:[l.jsx("option",{value:"",children:""}),KN.map(Xe=>l.jsx("option",{value:Xe,children:Xe},Xe))]}):Se.place||""}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsxs("select",{className:"w-full border p-1 rounded",value:E,onChange:Xe=>U(Xe.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Se.status})}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(K)?"":K,onChange:Xe=>ae(Math.max(0,Number(Xe.target.value||0)))}):Qu(Se.creditLimit||0)}),l.jsx("td",{className:"p-2 border font-semibold",children:Qu(Se.balance||0)}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:R,onChange:Xe=>F(Xe.target.value),maxLength:500}):l.jsx("span",{title:Se.notes||"",children:(Se.notes||"").length>40?(Se.notes||"").slice(0,40)+"":Se.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:Ge?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:pt,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Lt,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ze(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>At(Se),children:"Borrar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Qt(Se),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Se.id)})})]})}),B&&l.jsx("p",{className:"mt-2 text-sm",children:B}),le&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(q==null?void 0:q.name)||""]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{ce(0),he(new Date().toISOString().slice(0,10)),Ne(""),Ae(!0)},children:"Abonar"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ie(!1),children:"Cerrar"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:Qu(ee.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),l.jsx("div",{className:"text-xl font-semibold",children:Qu(ee.totalAbonado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),l.jsx("div",{className:"text-xl font-semibold",children:Qu(ee.saldoActual)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Referencia"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:ue?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):D.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):D.map(Se=>{var st;const Ge=wt===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:et,onChange:Xe=>De(Xe.target.value)}):Se.date||""}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Se.amount>=0?"COMPRA (CARGO)":"ABONO"})}),l.jsx("td",{className:"p-2 border",children:(st=Se.ref)!=null&&st.saleId?`Venta #${Se.ref.saleId}`:""}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsx("input",{className:"w-full border p-1 rounded",value:We,onChange:Xe=>Me(Xe.target.value),placeholder:"Comentario"}):l.jsx("span",{title:Se.comment||"",children:(Se.comment||"").length>40?(Se.comment||"").slice(0,40)+"":Se.comment||""})}),l.jsx("td",{className:"p-2 border font-semibold",children:Ge?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Be)?"":Be,onChange:Xe=>{const Ye=Number(Xe.target.value||0),Je=Number.isFinite(Ye)?Math.max(0,parseFloat(Ye.toFixed(2))):0;Te(Je)},placeholder:"0.00",title:Se.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Qu(Se.amount)}),l.jsx("td",{className:"p-2 border",children:Ge?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pt,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ht,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Jt(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>hr(Se),children:"Borrar"})]})})]},Se.id)})})]})})]})}),Z&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[l.jsxs("h3",{className:"text-lg font-bold mb-3",children:["Registrar abono  ",(q==null?void 0:q.name)||""]}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:we,onChange:Se=>he(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:oe===0?"":oe,onChange:Se=>{const Ge=Number(Se.target.value||0),st=Number.isFinite(Ge)?Math.max(0,parseFloat(Ge.toFixed(2))):0;ce(st)},placeholder:"0.00"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:fe,onChange:Se=>Ne(Se.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[fe.length,"/250"]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ae(!1),disabled:Ce,children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:tr,disabled:Ce,children:Ce?"Guardando...":"Guardar abono"})]})]})})]})}const Dh=t=>`C$ ${(Number(t)||0).toFixed(2)}`,IJ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function NJ(t){if(!t)return 0;const e=wr(ft(Re,"inventory_clothes_batches"),zr("productId","==",t)),r=await Mt(e);let n=null;return r.forEach(s=>{var u,f;const i=s.data(),a=Number(i.salePrice||0),o=String(i.date||"0000-00-00"),A=i.createdAt;if(!n){n={date:o,createdAt:A,salePrice:a};return}const c=o.localeCompare(n.date);if(c>0)n={date:o,createdAt:A,salePrice:a};else if(c===0){const g=((A==null?void 0:A.seconds)??0)*1e3+((A==null?void 0:A.nanoseconds)??0)/1e6,p=(((u=n.createdAt)==null?void 0:u.seconds)??0)*1e3+(((f=n.createdAt)==null?void 0:f.nanoseconds)??0)/1e6;g>p&&(n={date:o,createdAt:A,salePrice:a})}}),Number((n==null?void 0:n.salePrice)||0)}function GN(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function SJ(){const[t,e]=k.useState([]),[r,n]=k.useState([]),[s,i]=k.useState("CONTADO"),[a,o]=k.useState(""),[A,c]=k.useState(""),[u,f]=k.useState(new Date().toISOString().slice(0,10)),[g,p]=k.useState(""),[y,C]=k.useState(0),[B,w]=k.useState(0),[b,N]=k.useState(0),[T,V]=k.useState(0),[j,L]=k.useState(""),[S,I]=k.useState(!1),[R,F]=k.useState(!1),[E,U]=k.useState(""),[K,ae]=k.useState("+505 "),[le,ie]=k.useState(""),[q,Y]=k.useState(""),[ue,pe]=k.useState("ACTIVO"),[D,W]=k.useState(0),ee=()=>{U(""),ae("+505 "),ie(""),Y(""),pe("ACTIVO"),W(0)};k.useEffect(()=>{(async()=>{const he=wr(ft(Re,"customers_clothes"),Mi("createdAt","desc")),fe=await Mt(he),Ne=[];fe.forEach(it=>{const et=it.data();Ne.push({id:it.id,name:et.name??"",phone:et.phone??"+505 ",place:et.place??"",status:et.status??"ACTIVO",creditLimit:Number(et.creditLimit??0),balance:0})});for(const it of Ne)try{const et=wr(ft(Re,"ar_movements"),zr("customerId","==",it.id)),De=await Mt(et);let Be=0;De.forEach(Te=>Be+=Number(Te.data().amount||0)),it.balance=Be}catch{it.balance=0}e(Ne);const Ce=wr(ft(Re,"products_clothes"),Mi("createdAt","desc")),se=await Mt(Ce),wt=[];se.forEach(it=>{const et=it.data();wt.push({id:it.id,name:et.name??"(sin nombre)",sku:et.sku??""})}),n(wt)})()},[]);const M=k.useMemo(()=>t.find(he=>he.id===a),[t,a]),Z=(M==null?void 0:M.balance)||0,Ae=s==="CREDITO"?Z+Math.max(0,Number(B||0))-Math.max(0,Number(b||0)):0;k.useEffect(()=>{let he=!0;return(async()=>{if(!g){he&&V(0);return}let fe=await NJ(g);if(!fe){const Ne=r.find(Ce=>Ce.id===g);fe=Number((Ne==null?void 0:Ne.price)||0)}he&&V(fe)})(),()=>{he=!1}},[g,r]),k.useEffect(()=>{const he=Number(y)||0,fe=Number(T)||0,Ne=Math.floor(fe*he*100)/100;w(Ne)},[T,y]);const oe=async()=>{if(!g)return"Selecciona un producto.";if(!u)return"Selecciona la fecha.";if(!Number.isInteger(Number(y))||Number(y)<=0)return"La cantidad debe ser un entero mayor a cero.";if(!(B>0))return"Ingresa el monto total (> 0).";if(s==="CONTADO"){if(!A.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!a)return"Selecciona un cliente (crdito).";if(b<0)return"El pago inicial no puede ser negativo.";if(b>B)return"El pago inicial no puede superar el total.";if((M==null?void 0:M.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}const he=wr(ft(Re,"inventory_clothes_batches"),zr("productId","==",g)),fe=await Mt(he);let Ne=0;return fe.forEach(Ce=>{const se=Ce.data();Ne+=Number(se.remaining||0)}),Number(y)>Ne?`Inventario insuficiente. Disponible: ${Ne} unidades.`:null},ce=async he=>{he.preventDefault(),L("");const fe=await oe();if(fe){L(" "+fe);return}try{I(!0);const Ne=r.find(it=>it.id===g),Ce={type:s,date:u,createdAt:kt.now(),itemsTotal:Number(B)||0,total:Number(B)||0,quantity:Number(y)||0,item:{productId:g,productName:(Ne==null?void 0:Ne.name)||"",sku:(Ne==null?void 0:Ne.sku)||"",qty:Number(y)||0,total:Number(B)||0}};s==="CONTADO"?Ce.customerName=A.trim():(Ce.customerId=a,Ce.downPayment=Number(b)||0);const se=await Ds(ft(Re,"sales_clothes"),Ce);if(s==="CREDITO"&&a){const it={customerId:a,date:u,createdAt:kt.now(),ref:{saleId:se.id}};await Ds(ft(Re,"ar_movements"),{...it,type:"CARGO",amount:Number(B)||0}),Number(b)>0&&await Ds(ft(Re,"ar_movements"),{...it,type:"ABONO",amount:-Number(b)})}let wt=Number(y)||0;if(wt>0){const it=wr(ft(Re,"inventory_clothes_batches"),zr("productId","==",g)),et=await Mt(it),De=[];et.forEach(Be=>{const Te=Be.data();De.push({id:Be.id,productId:Te.productId,date:Te.date||"",remaining:Number(Te.remaining||0)})}),De.sort((Be,Te)=>Be.date.localeCompare(Te.date));for(const Be of De){if(wt<=0)break;if(Be.remaining<=0)continue;const Te=Math.min(Be.remaining,wt);wt-=Te,await dn(Dt(Re,"inventory_clothes_batches",Be.id),{remaining:Number((Be.remaining-Te).toFixed(0))})}}i("CONTADO"),o(""),c(""),f(new Date().toISOString().slice(0,10)),p(""),C(0),w(0),N(0),V(0),s==="CREDITO"&&a&&e(it=>it.map(et=>et.id===a?{...et,balance:(et.balance||0)+(Number(B)||0)-(Number(b)||0)}:et)),L(" Venta registrada")}catch(Ne){console.error(Ne),L(" Error al guardar la venta")}finally{I(!1)}},we=async()=>{if(L(""),!E.trim()){L("Ingresa el nombre del nuevo cliente.");return}const he=GN(K);try{const fe=await Ds(ft(Re,"customers_clothes"),{name:E.trim(),phone:he,place:le||"",notes:q||"",status:ue,creditLimit:Number(D||0),createdAt:kt.now()}),Ne={id:fe.id,name:E.trim(),phone:he,place:le||"",status:ue,creditLimit:Number(D||0),balance:0};e(Ce=>[Ne,...Ce]),o(fe.id),ee(),F(!1),L(" Cliente creado")}catch(fe){console.error(fe),L(" Error al crear cliente")}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),l.jsxs("form",{onSubmit:ce,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:he=>i(he.target.value),children:[l.jsx("option",{value:"CONTADO",children:"Contado"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),s==="CONTADO"?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:A,onChange:he=>c(he.target.value)})]}):l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border p-2 rounded",value:a,onChange:he=>o(he.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(he=>l.jsxs("option",{value:he.status==="ACTIVO"?he.id:"",disabled:he.status==="BLOQUEADO",children:[he.name," | ",he.phone," | Saldo: ",Dh(he.balance||0)]},he.id))]}),l.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>F(!0),children:"Crear Cliente"})]}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-lg font-semibold",children:Dh(Z)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:he=>N(Math.max(0,Number(he.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),l.jsx("div",{className:"text-lg font-semibold",children:Dh(Ae)})]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:g,onChange:he=>p(he.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(he=>l.jsxs("option",{value:he.id,children:[he.name," ",he.sku?` ${he.sku}`:""]},he.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:u,onChange:he=>f(he.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),l.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded",value:Number.isNaN(y)||y===0?"":y,onChange:he=>{const fe=he.target.value;if(fe===""){C(0);return}const Ne=Math.max(0,Math.floor(Number(fe)));C(Ne)},inputMode:"numeric",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio unitario (pza)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Dh(T),readOnly:!0,title:"Se precarga desde el inventario (salePrice del lote ms reciente)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto total"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Dh(B),readOnly:!0}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automticamente (precio  cantidad)."})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:S,children:S?"Guardando...":"Registrar venta"})})]}),j&&l.jsx("p",{className:"mt-2 text-sm",children:j}),R&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:he=>U(he.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:K,onChange:he=>ae(GN(he.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:le,onChange:he=>ie(he.target.value),children:[l.jsx("option",{value:"",children:""}),IJ.map(he=>l.jsx("option",{value:he,children:he},he))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:ue,onChange:he=>pe(he.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:D===0?"":D,onChange:he=>W(Math.max(0,Number(he.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:q,onChange:he=>Y(he.target.value),maxLength:500})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ee(),F(!1)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:we,children:"Guardar cliente"})]})]})})]})}const li=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function pg(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?sr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function FJ(t,e,r,n){const s={};for(const o of t)s[o.productId]||(s[o.productId]={productName:o.productName,lots:[]}),s[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(s))s[o].lots.sort((A,c)=>A.date.localeCompare(c.date));const i=[...e].sort((o,A)=>o.date.localeCompare(A.date));let a=0;for(const o of i)for(const A of o.items||[]){const c=s[A.productId];if(!c)continue;let u=Number(A.qty||0);if(!(u<=0))for(const f of c.lots){if(u<=0)break;if(f.qtyLeft<=0)continue;const g=Math.min(f.qtyLeft,u);o.date>=r&&o.date<=n&&(a+=g*f.cost),f.qtyLeft-=g,u-=g}}return a}function TJ(){const[t,e]=k.useState(sr(Mp(new Date),"yyyy-MM-dd")),[r,n]=k.useState(sr(Op(new Date),"yyyy-MM-dd")),[s,i]=k.useState([]),[a,o]=k.useState([]),[A,c]=k.useState([]),[u,f]=k.useState([]),[g,p]=k.useState([]),[y,C]=k.useState([]),[B,w]=k.useState(!0),[b,N]=k.useState(""),[T,V]=k.useState(!1),[j,L]=k.useState(null),[S,I]=k.useState([]),[R,F]=k.useState(!1),[E,U]=k.useState({totalFiado:0,saldoActual:0,abonadoPeriodo:0});function K(Y,ue){const pe=pg(Y);if(!pe)return null;if(Array.isArray(Y.items))return{id:ue,date:pe,type:Y.type||"CONTADO",total:Number(Y.total??Y.itemsTotal??0),items:Y.items.map(M=>({productId:String(M.productId||""),productName:String(M.productName||""),sku:M.sku||"",qty:Number(M.qty||0),unitPrice:Number(M.unitPrice??(Number(M.total||0)/Math.max(1,Number(M.qty||0))||0))})),customerId:Y.customerId||void 0};const D=Y.item||{},W=Number(Y.quantity??D.qty??0),ee=Number(Y.total??Y.itemsTotal??D.total??0);return{id:ue,date:pe,type:Y.type||"CONTADO",total:Number(Y.total??Y.itemsTotal??ee??0),items:[{productId:String(D.productId||Y.productId||""),productName:String(D.productName||Y.productName||""),sku:D.sku||Y.sku||"",qty:W,unitPrice:Number(D.unitPrice??(ee&&W?ee/W:0))}],customerId:Y.customerId||void 0}}k.useEffect(()=>{(async()=>{w(!0),N("");try{const Y=await Mt(ft(Re,"sales_clothes")),ue=[],pe=[];Y.forEach(he=>{const fe=he.data(),Ne=K(fe,he.id);Ne&&(Ne.date<=r&&ue.push(Ne),Ne.date>=t&&Ne.date<=r&&pe.push(Ne))}),o(ue),i(pe);const D=await Mt(ft(Re,"inventory_clothes_batches")),W=[];D.forEach(he=>{const fe=he.data(),Ne=pg(fe);!Ne||Ne>r||W.push({id:he.id,productId:fe.productId,productName:fe.productName||"",date:Ne,quantity:Number(fe.quantity||0),remaining:Number(fe.remaining||0),purchasePrice:Number(fe.purchasePrice||0)})}),c(W);const ee=await Mt(ft(Re,"expenses_clothes")),M=[];ee.forEach(he=>{const fe=he.data(),Ne=pg(fe);Ne&&Ne>=t&&Ne<=r&&M.push({id:he.id,date:Ne,category:fe.category||"",description:fe.description||"",amount:Number(fe.amount||0),status:fe.status||""})}),f(M);const Z=await Mt(ft(Re,"ar_movements")),Ae=[],oe={};Z.forEach(he=>{const fe=he.data(),Ne=pg(fe);if(!Ne)return;const Ce=fe.customerId,se=Number(fe.amount||0);Ce&&(oe[Ce]=(oe[Ce]||0)+se),fe.type==="ABONO"&&Ne>=t&&Ne<=r&&Ae.push({id:he.id,customerId:Ce,type:"ABONO",amount:se,date:Ne})}),p(Ae);const ce=await Mt(ft(Re,"customers_clothes")),we=[];ce.forEach(he=>{const fe=he.data();we.push({id:he.id,name:fe.name||"",balance:oe[he.id]||0})}),C(we)}catch(Y){console.error(Y),N(" Error cargando datos del dashboard.")}finally{w(!1)}})()},[t,r]);const ae=k.useMemo(()=>{try{return FJ(A,a,t,r)}catch(Y){return console.error(Y),0}},[A,a,t,r]),le=k.useMemo(()=>{const Y=s.reduce((oe,ce)=>oe+(ce.total||0),0),ue=u.reduce((oe,ce)=>oe+(ce.amount||0),0),pe=Y-ae,D=pe-ue,W=g.reduce((oe,ce)=>oe+Math.abs(ce.amount||0),0),ee=y.filter(oe=>(oe.balance||0)>0),M=ee.reduce((oe,ce)=>oe+(ce.balance||0),0);let Z=0,Ae=0;for(const oe of s){const ce=(oe.items||[]).reduce((we,he)=>we+(Number(he.qty)||0),0);oe.type==="CONTADO"?Z+=ce:Ae+=ce}return{ventasTotales:Y,costoMercaderia:ae,gastosPeriodo:ue,gananciaAntes:pe,gananciaDespues:D,abonosRecibidos:W,saldosPendientes:M,clientesConSaldo:ee.length,prendasCash:Z,prendasCredito:Ae}},[s,u,g,y,ae]),ie=k.useMemo(()=>{const Y={};for(const ue of s){if(ue.type!=="CREDITO"||!ue.customerId)continue;const pe=(ue.items||[]).reduce((D,W)=>D+(Number(W.qty)||0),0);Y[ue.customerId]=(Y[ue.customerId]||0)+pe}return y.filter(ue=>(ue.balance||0)>0).map(ue=>({customerId:ue.id,name:ue.name,prendasCredito:Y[ue.id]||0,saldo:ue.balance||0})).sort((ue,pe)=>pe.saldo-ue.saldo)},[y,s]),q=async Y=>{V(!0),L({id:Y.customerId,name:Y.name}),I([]),F(!0),U({totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const ue=[];let pe=0;for(const M of s)if(!(M.type!=="CREDITO"||M.customerId!==Y.customerId))for(const Z of M.items||[]){const Ae=Number(Z.qty||0)*Number(Z.unitPrice||0);ue.push({saleId:M.id,date:M.date,productName:Z.productName,sku:Z.sku||"",qty:Number(Z.qty||0),unitPrice:Number(Z.unitPrice||0),lineTotal:Ae}),pe+=Ae}let D=0;for(const M of g)M.customerId===Y.customerId&&(D+=Math.abs(M.amount||0));const W=y.find(M=>M.id===Y.customerId),ee=(W==null?void 0:W.balance)||0;I(ue),U({totalFiado:pe,saldoActual:ee,abonadoPeriodo:D})}catch(ue){console.error(ue),N(" No se pudo cargar el detalle del cliente.")}finally{F(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Finanzas (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:Y=>e(Y.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:Y=>n(Y.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),l.jsx("div",{className:"text-xl font-semibold",children:li(le.ventasTotales)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(le.costoMercaderia)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:li(le.gananciaAntes)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),l.jsx("div",{className:"text-xl font-semibold",children:li(le.gastosPeriodo)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:li(le.gananciaDespues)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),l.jsx("div",{className:"text-xl font-semibold",children:li(le.abonosRecibidos)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),l.jsx("div",{className:"text-xl font-semibold",children:li(le.saldosPendientes)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),l.jsx("div",{className:"text-xl font-semibold",children:le.clientesConSaldo})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:le.prendasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),l.jsx("div",{className:"text-xl font-semibold",children:le.prendasCredito})]})]}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),l.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),l.jsx("tbody",{children:B?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):ie.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):ie.map(Y=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Y.name}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>q({customerId:Y.customerId,name:Y.name}),title:"Ver piezas fiadas del periodo",children:Y.prendasCredito})}),l.jsx("td",{className:"p-2 border font-semibold",children:li(Y.saldo)})]},Y.customerId))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"})]})}),l.jsx("tbody",{children:B?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):u.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):u.sort((Y,ue)=>Y.date.localeCompare(ue.date)).map(Y=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Y.date}),l.jsx("td",{className:"p-2 border",children:Y.category||""}),l.jsx("td",{className:"p-2 border",children:Y.description?l.jsx("span",{title:Y.description,children:Y.description.length>40?Y.description.slice(0,40)+"":Y.description}):""}),l.jsx("td",{className:"p-2 border",children:li(Y.amount)}),l.jsx("td",{className:"p-2 border",children:Y.status||""})]},Y.id))})]})}),b&&l.jsx("p",{className:"mt-2 text-sm",children:b}),T&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(j==null?void 0:j.name)||""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>V(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(E.totalFiado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:li(E.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(E.abonadoPeriodo)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha compra"}),l.jsx("th",{className:"p-2 border",children:"Pieza"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Cant."}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:R?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):S.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):S.sort((Y,ue)=>Y.date.localeCompare(ue.date)).map((Y,ue)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Y.date}),l.jsx("td",{className:"p-2 border",children:Y.productName}),l.jsx("td",{className:"p-2 border",children:Y.sku||""}),l.jsx("td",{className:"p-2 border",children:Y.qty}),l.jsx("td",{className:"p-2 border",children:li(Y.unitPrice)}),l.jsx("td",{className:"p-2 border",children:li(Y.lineTotal)})]},`${Y.saleId}-${ue}`))})]})})]})})]})}const qN=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],mg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function UJ(){const[t,e]=k.useState(sr(Mp(new Date),"yyyy-MM-dd")),[r,n]=k.useState(sr(Op(new Date),"yyyy-MM-dd")),[s,i]=k.useState(sr(new Date,"yyyy-MM-dd")),[a,o]=k.useState(""),[A,c]=k.useState(""),[u,f]=k.useState(0),[g,p]=k.useState("PENDIENTE"),[y,C]=k.useState(""),[B,w]=k.useState([]),[b,N]=k.useState(!0),[T,V]=k.useState(""),[j,L]=k.useState(null),[S,I]=k.useState(""),[R,F]=k.useState(""),[E,U]=k.useState(""),[K,ae]=k.useState(0),[le,ie]=k.useState("PENDIENTE"),[q,Y]=k.useState("");k.useEffect(()=>{(async()=>{N(!0);try{const oe=wr(ft(Re,"expenses_clothes"),Mi("date","desc")),ce=await Mt(oe),we=[];ce.forEach(he=>{const fe=he.data();we.push({id:he.id,date:fe.date||sr(new Date,"yyyy-MM-dd"),category:fe.category||"",description:fe.description||"",amount:Number(fe.amount||0),status:fe.status||"PENDIENTE",notes:fe.notes||"",createdAt:fe.createdAt??kt.now()})}),w(we)}catch(oe){console.error(oe),V(" Error al cargar gastos")}finally{N(!1)}})()},[]);const ue=k.useMemo(()=>B.filter(oe=>!(t&&oe.date<t||r&&oe.date>r)),[B,t,r]),pe=k.useMemo(()=>{const oe=ue.reduce((he,fe)=>he+(fe.amount||0),0),ce=ue.filter(he=>he.status==="PAGADO").reduce((he,fe)=>he+(fe.amount||0),0),we=oe-ce;return{total:oe,pagado:ce,pendiente:we}},[ue]),D=()=>{i(sr(new Date,"yyyy-MM-dd")),o(""),c(""),f(0),p("PENDIENTE"),C("")},W=async oe=>{if(oe.preventDefault(),V(""),!a){V("Selecciona una categora.");return}if(!A.trim()){V("Ingresa una descripcin.");return}if(!u||u<=0){V("Ingresa un monto vlido.");return}try{const ce=await Ds(ft(Re,"expenses_clothes"),{date:s,category:a,description:A.trim(),amount:Number(u.toFixed(2)),status:g,notes:y||"",createdAt:kt.now()});w(we=>[{id:ce.id,date:s,category:a,description:A.trim(),amount:Number(u.toFixed(2)),status:g,notes:y||"",createdAt:kt.now()},...we]),D(),V(" Gasto registrado")}catch(ce){console.error(ce),V(" Error al guardar gasto")}},ee=oe=>{L(oe.id),I(oe.date),F(oe.category||""),U(oe.description||""),ae(Number(oe.amount||0)),ie(oe.status||"PENDIENTE"),Y(oe.notes||"")},M=()=>{L(null),I(""),F(""),U(""),ae(0),ie("PENDIENTE"),Y("")},Z=async()=>{if(j){if(!R){V("Selecciona una categora.");return}if(!E.trim()){V("Ingresa una descripcin.");return}if(!K||K<=0){V("Ingresa un monto vlido.");return}try{await dn(Dt(Re,"expenses_clothes",j),{date:S,category:R,description:E.trim(),amount:Number(K.toFixed(2)),status:le,notes:q||""}),w(oe=>oe.map(ce=>ce.id===j?{...ce,date:S,category:R,description:E.trim(),amount:Number(K.toFixed(2)),status:le,notes:q||""}:ce)),M(),V(" Gasto actualizado")}catch(oe){console.error(oe),V(" Error al actualizar gasto")}}},Ae=async oe=>{confirm(`Eliminar el gasto "${oe.description}"?`)&&(await Hi(Dt(Re,"expenses_clothes",oe.id)),w(we=>we.filter(he=>he.id!==oe.id)),V(" Gasto borrado"))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:oe=>e(oe.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:oe=>n(oe.target.value)})]}),l.jsxs("div",{className:"ml-auto text-sm",children:[l.jsx("div",{className:"font-semibold",children:"Totales del rango"}),l.jsxs("div",{children:["Total: ",mg(pe.total)]}),l.jsxs("div",{children:["Pagado: ",mg(pe.pagado)]}),l.jsxs("div",{children:["Pendiente: ",mg(pe.pendiente)]})]})]}),l.jsxs("form",{onSubmit:W,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:oe=>i(oe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:oe=>o(oe.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),qN.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:A,onChange:oe=>c(oe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:u===0?"":u,onChange:oe=>f(Math.max(0,Number(oe.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:g,onChange:oe=>p(oe.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:y,onChange:oe=>C(oe.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[y.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:b?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ue.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ue.slice().sort((oe,ce)=>oe.date.localeCompare(ce.date)).map(oe=>{const ce=j===oe.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ce?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:we=>I(we.target.value)}):oe.date}),l.jsx("td",{className:"p-2 border",children:ce?l.jsxs("select",{className:"w-full border p-1 rounded",value:R,onChange:we=>F(we.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),qN.map(we=>l.jsx("option",{value:we,children:we},we))]}):oe.category||""}),l.jsx("td",{className:"p-2 border",children:ce?l.jsx("input",{className:"w-full border p-1 rounded",value:E,onChange:we=>U(we.target.value)}):l.jsx("span",{title:oe.description,children:oe.description.length>40?oe.description.slice(0,40)+"":oe.description})}),l.jsx("td",{className:"p-2 border",children:ce?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(K)?"":K,onChange:we=>ae(Math.max(0,Number(we.target.value||0)))}):mg(oe.amount)}),l.jsx("td",{className:"p-2 border",children:ce?l.jsxs("select",{className:"w-full border p-1 rounded",value:le,onChange:we=>ie(we.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status})}),l.jsx("td",{className:"p-2 border",children:ce?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:q,onChange:we=>Y(we.target.value),maxLength:500}):l.jsx("span",{title:oe.notes||"",children:(oe.notes||"").length>40?(oe.notes||"").slice(0,40)+"":oe.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:ce?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Z,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ee(oe),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ae(oe),children:"Borrar"})]})})})]},oe.id)})})]})}),T&&l.jsx("p",{className:"mt-2 text-sm",children:T})]})}const HA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function QJ(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?sr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function LJ(t,e){const r=QJ(t);if(!r)return null;const n=t.item||{},s=Number((n==null?void 0:n.qty)??t.quantity??0)||0,i=Number((n==null?void 0:n.total)??t.total??0)||0,a=Number((n==null?void 0:n.unitPrice)??(s>0?i/s:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||s||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:s,unitPrice:a,total:s*a}}}async function PJ(t,e){if(e<=0)return;const r=wr(ft(Re,"inventory_clothes_batches"),zr("productId","==",t)),n=await Mt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;if(a.remaining<=0)continue;const o=Math.min(a.remaining,i);i-=o,await dn(Dt(Re,"inventory_clothes_batches",a.id),{remaining:Math.max(0,Number((a.remaining-o).toFixed(0)))})}i>0&&console.warn("consumeFIFO: falt inventario",i)}async function zN(t,e){if(e<=0)return;const r=wr(ft(Re,"inventory_clothes_batches"),zr("productId","==",t)),n=await Mt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;const o=Math.max(0,a.quantity-a.remaining);if(o<=0)continue;const A=Math.min(o,i);i-=A,await dn(Dt(Re,"inventory_clothes_batches",a.id),{remaining:Number((a.remaining+A).toFixed(0))})}i>0&&console.warn("restoreFIFO: no se devolvi todo",i)}async function BL(t){const e=wr(ft(Re,"ar_movements"),zr("ref.saleId","==",t)),r=await Mt(e);await Promise.all(r.docs.map(n=>Hi(Dt(Re,"ar_movements",n.id))))}async function kJ(t,e,r){if(await BL(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:kt.now(),ref:{saleId:t.id}},{addDoc:s}=await sA(async()=>{const{addDoc:a}=await Promise.resolve().then(()=>o7);return{addDoc:a}},void 0);await s(ft(Re,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const i=Math.max(0,Number(r??t.downPayment??0));i>0&&await s(ft(Re,"ar_movements"),{...n,type:"ABONO",amount:-i})}function RJ(){const[t,e]=k.useState(sr(new Date,"yyyy-MM-01")),[r,n]=k.useState(sr(new Date,"yyyy-MM-dd")),[s,i]=k.useState([]),[a,o]=k.useState([]),[A,c]=k.useState(!0),[u,f]=k.useState(""),[g,p]=k.useState(""),[y,C]=k.useState(""),[B,w]=k.useState(null),[b,N]=k.useState(!1),[T,V]=k.useState(null),[j,L]=k.useState(0),S=15,[I,R]=k.useState(1),F=k.useMemo(()=>{const M={};return s.forEach(Z=>M[Z.id]=Z.name),M},[s]);k.useEffect(()=>{(async()=>{c(!0),f("");try{const M=await Mt(ft(Re,"customers_clothes")),Z=[];M.forEach(ce=>Z.push({id:ce.id,name:ce.data().name||""})),i(Z);const Ae=await Mt(wr(ft(Re,"sales_clothes"),Mi("createdAt","desc"))),oe=[];Ae.forEach(ce=>{const we=LJ(ce.data(),ce.id);we&&we.date>=t&&we.date<=r&&oe.push(we)}),o(oe.sort((ce,we)=>we.date.localeCompare(ce.date))),R(1)}catch(M){console.error(M),f(" Error cargando transacciones.")}finally{c(!1)}})()},[t,r]);const E=k.useMemo(()=>a.filter(M=>!(g&&M.customerId!==g||y&&M.type!==y)),[a,g,y]),U=k.useMemo(()=>{let M=0,Z=0,Ae=0,oe=0;for(const ce of E)ce.type==="CONTADO"?(M+=ce.item.qty,Ae+=ce.total):(Z+=ce.item.qty,oe+=ce.total);return{piezasCash:M,piezasCredito:Z,montoCash:Ae,montoCredito:oe}},[E]),K=Math.max(1,Math.ceil(E.length/S)),ae=k.useMemo(()=>{const M=(I-1)*S;return E.slice(M,M+S)},[E,I]),le=M=>{w(null),V(M),L(M.item.qty||0),N(!0)},ie=async M=>{if(w(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{c(!0),await zN(M.item.productId,M.item.qty),await BL(M.id),await Hi(Dt(Re,"sales_clothes",M.id)),o(Z=>Z.filter(Ae=>Ae.id!==M.id)),f(" Venta eliminada")}catch(Z){console.error(Z),f(" No se pudo eliminar la venta.")}finally{c(!1)}},q=async()=>{if(!T)return;const M=Number(T.item.qty||0),Z=Math.max(1,Math.floor(Number(j)||0));if(Z===M){N(!1);return}const Ae=Number(T.item.unitPrice||0),oe=Number((Ae*Z).toFixed(2));try{c(!0);const ce=Z-M;ce>0?await PJ(T.item.productId,ce):ce<0&&await zN(T.item.productId,-ce);const we=Dt(Re,"sales_clothes",T.id);await dn(we,{quantity:Z,total:oe,itemsTotal:oe,"item.qty":Z,"item.total":oe,updatedAt:kt.now()});const he=Math.min(Number(T.downPayment||0),oe);await kJ(T,oe,he),o(fe=>fe.map(Ne=>Ne.id===T.id?{...Ne,quantity:Z,total:oe,item:{...Ne.item,qty:Z,total:oe},downPayment:he}:Ne)),f(" Venta actualizada"),N(!1)}catch(ce){console.error(ce),f(" No se pudo actualizar la venta.")}finally{c(!1)}},Y=()=>{const M=`Reporte de transacciones (Ropa)  ${t} a ${r}`,Z=we=>(we||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ae=E.map(we=>{const he=we.customerName||(we.customerId?F[we.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${we.date}</td>
          <td>${Z(he)}</td>
          <td>${we.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${we.item.qty}</td>
          <td style="text-align:right">${HA(we.total)}</td>
        </tr>`}).join(""),oe=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Z(M)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Z(M)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${U.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${U.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${HA(U.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${HA(U.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${Ae||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,ce=window.open("","_blank");ce&&(ce.document.open(),ce.document.write(oe),ce.document.close())},ue=()=>R(1),pe=()=>R(M=>Math.max(1,M-1)),D=()=>R(M=>Math.min(K,M+1)),W=()=>R(K),ee=()=>{const M=[];if(K<=7)for(let Ae=1;Ae<=K;Ae++)M.push(Ae);else{const Ae=Math.max(1,I-2),oe=Math.min(K,I+2);M.push(1),Ae>2&&M.push(-1);for(let ce=Ae;ce<=oe;ce++)ce!==1&&ce!==K&&M.push(ce);oe<K-1&&M.push(-2),M.push(K)}return l.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ue,disabled:I===1,children:" Primero"}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:pe,disabled:I===1,children:" Anterior"}),M.map((Ae,oe)=>typeof Ae=="number"?l.jsx("button",{className:`px-3 py-1 border rounded ${Ae===I?"bg-blue-600 text-white":""}`,onClick:()=>R(Ae),children:Ae},oe):l.jsx("span",{className:"px-2",children:""},oe)),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:D,disabled:I===K,children:"Siguiente "}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:W,disabled:I===K,children:"ltimo "})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",I," de ",K,"  ",E.length," transaccin(es)"]})]})};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:M=>{e(M.target.value),R(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:M=>{n(M.target.value),R(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),l.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:g,onChange:M=>{p(M.target.value),R(1)},children:[l.jsx("option",{value:"",children:"Todos"}),s.map(M=>l.jsx("option",{value:M.id,children:M.name},M.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Tipo"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:M=>{C(M.target.value),R(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"CONTADO",children:"Cash"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Y,children:"Exportar PDF"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:U.piezasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:U.piezasCredito})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:HA(U.montoCash)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:HA(U.montoCredito)})]})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Piezas"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:A?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):ae.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):ae.map(M=>{const Z=M.customerName||(M.customerId?F[M.customerId]:"")||"Nombre cliente";return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:M.date}),l.jsx("td",{className:"p-2 border",children:Z}),l.jsx("td",{className:"p-2 border",children:M.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"p-2 border",children:M.item.qty}),l.jsx("td",{className:"p-2 border",children:HA(M.total)}),l.jsxs("td",{className:"p-2 border relative",children:[l.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>w(Ae=>Ae===M.id?null:M.id),title:"Acciones",children:""}),B===M.id&&l.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>le(M),children:"Editar"}),l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ie(M),children:"Eliminar"})]})]})]},M.id)})})]}),ee()]}),u&&l.jsx("p",{className:"mt-2 text-sm",children:u}),b&&T&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),l.jsxs("div",{className:"font-semibold",children:[T.item.productName," ",T.item.sku?` ${T.item.sku}`:""]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),l.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:j,onChange:M=>L(Math.max(1,Math.floor(Number(M.target.value||0))))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),l.jsx("div",{className:"text-lg font-semibold",children:HA(T.item.unitPrice)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),l.jsx("div",{className:"text-lg font-semibold",children:HA(Number(T.item.unitPrice)*Number(j||0))})]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{N(!1),V(null)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:q,children:"Guardar cambios"})]})]})})]})}function DJ(){const[t,e]=k.useState(null),[r,n]=k.useState(""),[s,i]=k.useState(!0);return k.useEffect(()=>{const a=iT(Xw,async o=>{if(i(!0),o){e(o);const A=Dt(Re,"users",o.uid),c=await nu(A);n(c.exists()?c.data().role:"")}else e(null),n("");i(!1)});return()=>a()},[]),s?l.jsx("div",{className:"p-6 text-center",children:"Cargando..."}):l.jsx($D,{children:l.jsxs(_D,{children:[l.jsx(Yr,{path:"/",element:l.jsx(l7,{})}),l.jsxs(Yr,{path:"/admin",element:l.jsx(Tn,{allowedRoles:["admin","vendedor"],children:l.jsx(c7,{role:r})}),children:[l.jsx(Yr,{index:!0,element:l.jsx(Z1,{to:"bills",replace:!0})}),l.jsx(Yr,{path:"bills",element:l.jsx(Tn,{allowedRoles:["vendedor","admin"],children:l.jsx(jY,{})})}),l.jsx(Yr,{path:"fix",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(aJ,{})})}),l.jsx(Yr,{path:"salesV2",element:l.jsx(Tn,{allowedRoles:["vendedor","admin"],children:l.jsx(VN,{user:t})})}),l.jsx(Yr,{path:"billhistoric",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(OY,{})})}),l.jsx(Yr,{path:"users",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(MY,{})})}),l.jsx(Yr,{path:"products",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(VY,{})})}),l.jsx(Yr,{path:"batches",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(JY,{})})}),l.jsx(Yr,{path:"transactionclose",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(ZY,{})})}),l.jsx(Yr,{path:"financialDashboard",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(tJ,{})})}),l.jsx(Yr,{path:"TransactionsReportClothes",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(RJ,{})})}),l.jsx(Yr,{path:"expenses",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(nJ,{})})}),l.jsx(Yr,{path:"billing",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(oJ,{})})}),l.jsx(Yr,{path:"paidBatches",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(uJ,{})})}),l.jsx(Yr,{path:"inventoryClothesBatches",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(pJ,{})})}),l.jsx(Yr,{path:"productsClothes",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(_J,{})})}),l.jsx(Yr,{path:"CustomersClothes",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(EJ,{})})}),l.jsx(Yr,{path:"salesClothes",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(SJ,{})})}),l.jsx(Yr,{path:"financialDashboardClothes",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(TJ,{})})}),l.jsx(Yr,{path:"ExpensesClothes",element:l.jsx(Tn,{allowedRoles:["admin"],children:l.jsx(UJ,{})})})]}),l.jsx(Yr,{path:"/salesV2",element:l.jsx(Tn,{allowedRoles:["vendedor","admin"],children:l.jsx(VN,{user:t})})}),l.jsx(Yr,{path:"*",element:l.jsx(Z1,{to:"/"})})]})})}i1.createRoot(document.getElementById("root")).render(l.jsx(sS.StrictMode,{children:l.jsx(DJ,{})}));export{Fr as _,OJ as c,oP as g};
